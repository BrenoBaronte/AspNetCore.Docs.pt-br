---
uid: web-forms/overview/older-versions-getting-started/master-pages/urls-in-master-pages-cs
title: "URLs em páginas mestras (c#) | Microsoft Docs"
author: rick-anderson
description: "Aborda como URLs na página mestra podem quebrar porque o arquivo página mestre em um diretório relativo diferente que a página de conteúdo. Examina a alteração da base..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 06/10/2008
ms.topic: article
ms.assetid: 48b58a18-5ea4-468c-b326-f35331b3e1e9
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/older-versions-getting-started/master-pages/urls-in-master-pages-cs
msc.type: authoredcontent
ms.openlocfilehash: 8b01f0ac780121c4e0941df6016220a1cb1ed2d1
ms.sourcegitcommit: 060879fcf3f73d2366b5c811986f8695fff65db8
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 01/24/2018
---
<a name="urls-in-master-pages-c"></a><span data-ttu-id="7d306-104">URLs em páginas mestras (c#)</span><span class="sxs-lookup"><span data-stu-id="7d306-104">URLs in Master Pages (C#)</span></span>
====================
<span data-ttu-id="7d306-105">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="7d306-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="7d306-106">[Baixar o código](http://download.microsoft.com/download/e/e/f/eef369f5-743a-4a52-908f-b6532c4ce0a4/ASPNET_MasterPages_Tutorial_04_CS.zip) ou [baixar PDF](http://download.microsoft.com/download/8/f/6/8f6349e4-6554-405a-bcd7-9b094ba5089a/ASPNET_MasterPages_Tutorial_04_CS.pdf)</span><span class="sxs-lookup"><span data-stu-id="7d306-106">[Download Code](http://download.microsoft.com/download/e/e/f/eef369f5-743a-4a52-908f-b6532c4ce0a4/ASPNET_MasterPages_Tutorial_04_CS.zip) or [Download PDF](http://download.microsoft.com/download/8/f/6/8f6349e4-6554-405a-bcd7-9b094ba5089a/ASPNET_MasterPages_Tutorial_04_CS.pdf)</span></span>

> <span data-ttu-id="7d306-107">Aborda como URLs na página mestra podem quebrar porque o arquivo página mestre em um diretório relativo diferente que a página de conteúdo.</span><span class="sxs-lookup"><span data-stu-id="7d306-107">Addresses how URLs in the master page can break due to the master page file being in a different relative directory than the content page.</span></span> <span data-ttu-id="7d306-108">Analisa URLs por meio de alteração ~ na sintaxe declarativa e usando ResolveUrl e ResolveClientUrl programaticamente.</span><span class="sxs-lookup"><span data-stu-id="7d306-108">Looks at rebasing URLs via ~ in the declarative syntax and using ResolveUrl and ResolveClientUrl programmatically.</span></span> <span data-ttu-id="7d306-109">(Consulte também</span><span class="sxs-lookup"><span data-stu-id="7d306-109">(Also look at</span></span>


## <a name="introduction"></a><span data-ttu-id="7d306-110">Introdução</span><span class="sxs-lookup"><span data-stu-id="7d306-110">Introduction</span></span>

<span data-ttu-id="7d306-111">Em todos os exemplos que vimos até agora, que as páginas mestras e de conteúdo tenham sido colocadas na mesma pasta (pasta de raiz do site).</span><span class="sxs-lookup"><span data-stu-id="7d306-111">In all the examples we've seen thus far, the master and content pages have been located in the same folder (the website's root folder).</span></span> <span data-ttu-id="7d306-112">Mas não há nenhum motivo por que as páginas mestras e de conteúdo devem estar na mesma pasta.</span><span class="sxs-lookup"><span data-stu-id="7d306-112">But there's no reason why the master and content pages must be in the same folder.</span></span> <span data-ttu-id="7d306-113">Certamente você pode criar páginas de conteúdo em subpastas.</span><span class="sxs-lookup"><span data-stu-id="7d306-113">You can certainly create content pages in subfolders.</span></span> <span data-ttu-id="7d306-114">Da mesma forma, você pode criar um `~/MasterPages/` pasta onde você coloca páginas mestras do site.</span><span class="sxs-lookup"><span data-stu-id="7d306-114">Similarly, you might create a `~/MasterPages/` folder where you place your site's master pages.</span></span>

<span data-ttu-id="7d306-115">Um possível problema com a colocação de páginas mestras e de conteúdo em pastas diferentes envolve URLs quebradas.</span><span class="sxs-lookup"><span data-stu-id="7d306-115">One potential issue with placing master and content pages in different folders involves broken URLs.</span></span> <span data-ttu-id="7d306-116">Se a página mestra contém URLs relativas em hiperlinks, imagens ou outros elementos, o vínculo será inválido para páginas de conteúdo que residem em uma pasta diferente.</span><span class="sxs-lookup"><span data-stu-id="7d306-116">If the master page contains relative URLs in hyperlinks, images, or other elements, the link will be invalid for content pages that reside in a different folder.</span></span> <span data-ttu-id="7d306-117">Neste tutorial, podemos examinar a origem desse problema, bem como soluções alternativas.</span><span class="sxs-lookup"><span data-stu-id="7d306-117">In this tutorial we examine the source of this problem as well as workarounds.</span></span>

## <a name="the-problem-with-relative-urls"></a><span data-ttu-id="7d306-118">O problema com URLs relativas</span><span class="sxs-lookup"><span data-stu-id="7d306-118">The Problem with Relative URLs</span></span>

<span data-ttu-id="7d306-119">Uma URL em uma página da web é considerada um *URL relativa* se o local do recurso aponta para é relativo ao local da página da web na estrutura de pasta do site.</span><span class="sxs-lookup"><span data-stu-id="7d306-119">A URL on a web page is said to be a *relative URL* if the location of the resource it points to is relative to the web page's location in the website's folder structure.</span></span> <span data-ttu-id="7d306-120">Qualquer URL que não começa com uma barra à esquerda (`/`) ou um protocolo (como `http://`) é relativo porque ele está resolvido pelo navegador com base no local da página da web que contém a URL.</span><span class="sxs-lookup"><span data-stu-id="7d306-120">Any URL that does not start with a leading forward slash (`/`) or a protocol (such as `http://`) is relative because it is resolved by the browser based on the location of the web page that contains the URL.</span></span>

<span data-ttu-id="7d306-121">Por exemplo, o site tem um `~/Images/` pasta com um único arquivo de imagem, `PoweredByASPNET.gif`.</span><span class="sxs-lookup"><span data-stu-id="7d306-121">For example, our website has an `~/Images/` folder with a single image file, `PoweredByASPNET.gif`.</span></span> <span data-ttu-id="7d306-122">O arquivo de página mestra `Site.master` tem um `<img>` elemento o `footerContent` região com a seguinte marcação:</span><span class="sxs-lookup"><span data-stu-id="7d306-122">The master page file `Site.master` has an `<img>` element in the `footerContent` region with the following markup:</span></span>


[!code-html[Main](urls-in-master-pages-cs/samples/sample1.html)]

<span data-ttu-id="7d306-123">O `src` valor no atributo de `<img>` elemento é uma URL relativa porque não começa com `/` ou `http://`.</span><span class="sxs-lookup"><span data-stu-id="7d306-123">The `src` attribute value in the `<img>` element is a relative URL because it does not start with `/` or `http://`.</span></span> <span data-ttu-id="7d306-124">Em resumo, o `src` o valor do atributo informa ao navegador para examinar o `Images` subpasta para um arquivo denominado `PoweredByASPNET.gif`.</span><span class="sxs-lookup"><span data-stu-id="7d306-124">In short, the `src` attribute value tells the browser to look in the `Images` subfolder for a file named `PoweredByASPNET.gif`.</span></span>

<span data-ttu-id="7d306-125">Quando visita uma página de conteúdo, a marcação acima é enviada diretamente para o navegador.</span><span class="sxs-lookup"><span data-stu-id="7d306-125">When visiting a content page, the above markup is sent directly to the browser.</span></span> <span data-ttu-id="7d306-126">Reserve um tempo para visitar `About.aspx` e exibir o código-fonte HTML enviada para o navegador.</span><span class="sxs-lookup"><span data-stu-id="7d306-126">Take a moment to visit `About.aspx` and view the HTML source sent to the browser.</span></span> <span data-ttu-id="7d306-127">Você descobrirá que a mesma marcação exata na página mestra foi enviada para o navegador.</span><span class="sxs-lookup"><span data-stu-id="7d306-127">You will find that the exact same markup in the master page was sent to the browser.</span></span>


[!code-html[Main](urls-in-master-pages-cs/samples/sample2.html)]

<span data-ttu-id="7d306-128">Se a página de conteúdo está na pasta raiz (como é `About.aspx`) tudo funciona conforme o esperado porque não há um `Images` subpasta relativo à pasta raiz.</span><span class="sxs-lookup"><span data-stu-id="7d306-128">If the content page is in the root folder (as is `About.aspx`) everything works as expected because there is an `Images` subfolder relative to the root folder.</span></span> <span data-ttu-id="7d306-129">No entanto, as coisas dividir se a página de conteúdo está em uma pasta diferente da página mestra.</span><span class="sxs-lookup"><span data-stu-id="7d306-129">However, things break down if the content page is in a different folder than the master page.</span></span> <span data-ttu-id="7d306-130">Para ilustrar isso, crie uma subpasta chamada `Admin`.</span><span class="sxs-lookup"><span data-stu-id="7d306-130">To illustrate this, create a subfolder named `Admin`.</span></span> <span data-ttu-id="7d306-131">Em seguida, adicione uma página de conteúdo chamada `Default.aspx` para o `Admin` pasta, certificando-se de associar a nova página para o `Site.master` página mestra.</span><span class="sxs-lookup"><span data-stu-id="7d306-131">Next, add a content page named `Default.aspx` to the `Admin` folder, making sure to bind the new page to the `Site.master` master page.</span></span>

> [!NOTE]
> <span data-ttu-id="7d306-132">No [ *especificando o título, marcas Meta e outros cabeçalhos de HTML na página mestra* ](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs.md) tutorial criamos uma classe de página de base personalizada chamada `BasePage` que definir o título da página de conteúdo automaticamente (se ele não foi explicitamente atribuído).</span><span class="sxs-lookup"><span data-stu-id="7d306-132">In the [*Specifying the Title, Meta Tags, and Other HTML Headers in the Master Page*](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs.md) tutorial we created a custom base page class named `BasePage` that automatically set the content page's title (if it was not explicitly assigned).</span></span> <span data-ttu-id="7d306-133">Não se esqueça de ter a classe de code-behind da página recém-criado derivam `BasePage` para que ele pode usar essa funcionalidade.</span><span class="sxs-lookup"><span data-stu-id="7d306-133">Don't forget to have the newly created page's code-behind class derive from `BasePage` so that it can utilize this functionality.</span></span>


<span data-ttu-id="7d306-134">Depois que você criou esta página de conteúdo, o Gerenciador de soluções deve ser semelhante à Figura 1.</span><span class="sxs-lookup"><span data-stu-id="7d306-134">After you have created this content page, your Solution Explorer should look similar to Figure 1.</span></span>


![Uma nova pasta e a página ASP.NET foram adicionados ao projeto](urls-in-master-pages-cs/_static/image1.png)

<span data-ttu-id="7d306-136">**Figura 01**: uma nova pasta e a página ASP.NET foram adicionados ao projeto</span><span class="sxs-lookup"><span data-stu-id="7d306-136">**Figure 01**: A New Folder and ASP.NET Page Have Been Added to the Project</span></span>


<span data-ttu-id="7d306-137">Em seguida, atualize o `Web.sitemap` arquivo para incluir um novo `<siteMapNode>` entrada desta lição.</span><span class="sxs-lookup"><span data-stu-id="7d306-137">Next, update the `Web.sitemap` file to include a new `<siteMapNode>` entry for this lesson.</span></span> <span data-ttu-id="7d306-138">O seguinte XML mostra completo `Web.sitemap` marcação, que agora inclui a adição de um terceiro `<siteMapNode>` elemento.</span><span class="sxs-lookup"><span data-stu-id="7d306-138">The following XML shows the complete `Web.sitemap` markup, which now includes the addition of a third `<siteMapNode>` element.</span></span>


[!code-xml[Main](urls-in-master-pages-cs/samples/sample3.xml)]

<span data-ttu-id="7d306-139">Recém-criado `Default.aspx` página deve ter quatro controles de conteúdo correspondente as quatro ContentPlaceHolders em `Site.master`.</span><span class="sxs-lookup"><span data-stu-id="7d306-139">The newly created `Default.aspx` page should have four Content controls corresponding to the four ContentPlaceHolders in `Site.master`.</span></span> <span data-ttu-id="7d306-140">Adicione um texto para o controle de conteúdo referenciando o `MainContent` ContentPlaceHolder e, em seguida, visite a página por meio de um navegador.</span><span class="sxs-lookup"><span data-stu-id="7d306-140">Add some text to the Content control referencing the `MainContent` ContentPlaceHolder and then visit the page through a browser.</span></span> <span data-ttu-id="7d306-141">Como mostra a Figura 2, o navegador não é possível localizar o `PoweredByASPNET.gif` arquivo de imagem.</span><span class="sxs-lookup"><span data-stu-id="7d306-141">As Figure 2 shows, the browser cannot find the `PoweredByASPNET.gif` image file.</span></span> <span data-ttu-id="7d306-142">O que está acontecendo aqui?</span><span class="sxs-lookup"><span data-stu-id="7d306-142">What's going on here?</span></span>

<span data-ttu-id="7d306-143">O `~/Admin/Default.aspx` página de conteúdo é enviada mesmo HTML para o `footerContent` região, como era o `About.aspx` página:</span><span class="sxs-lookup"><span data-stu-id="7d306-143">The `~/Admin/Default.aspx` content page is sent the same HTML for the `footerContent` region as was the `About.aspx` page:</span></span>


[!code-html[Main](urls-in-master-pages-cs/samples/sample4.html)]

<span data-ttu-id="7d306-144">Porque o `<img>` do elemento `src` atributo é uma URL relativa, o navegador tenta procurar um `Images` pasta relativo ao local da pasta da página da web.</span><span class="sxs-lookup"><span data-stu-id="7d306-144">Because the `<img>` element's `src` attribute is a relative URL, the browser attempts to look for an `Images` folder relative to the web page's folder location.</span></span> <span data-ttu-id="7d306-145">Em outras palavras, o navegador está procurando o arquivo de imagem `Admin/Images/PoweredByASPNET.gif`.</span><span class="sxs-lookup"><span data-stu-id="7d306-145">In other words, the browser is looking for the image file `Admin/Images/PoweredByASPNET.gif`.</span></span>


<span data-ttu-id="7d306-146">[![Não é possível encontrar o arquivo de imagem PoweredByASPNET.gif](urls-in-master-pages-cs/_static/image3.png)](urls-in-master-pages-cs/_static/image2.png)</span><span class="sxs-lookup"><span data-stu-id="7d306-146">[![The PoweredByASPNET.gif Image File Cannot Be Found](urls-in-master-pages-cs/_static/image3.png)](urls-in-master-pages-cs/_static/image2.png)</span></span>

<span data-ttu-id="7d306-147">**Figura 02**: O `PoweredByASPNET.gif` imagem do arquivo não pode ser encontrado ([clique para exibir a imagem em tamanho normal](urls-in-master-pages-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="7d306-147">**Figure 02**: The `PoweredByASPNET.gif` Image File Cannot Be Found  ([Click to view full-size image](urls-in-master-pages-cs/_static/image4.png))</span></span>


### <a name="replacing-relative-urls-with-absolute-urls"></a><span data-ttu-id="7d306-148">Substituindo URLs relativas com URLs absolutas</span><span class="sxs-lookup"><span data-stu-id="7d306-148">Replacing Relative URLs with Absolute URLs</span></span>

<span data-ttu-id="7d306-149">É o oposto de uma URL relativa um *URL absoluta*, que é um que começa com uma barra invertida (`/`) ou um protocolo, como `http://`.</span><span class="sxs-lookup"><span data-stu-id="7d306-149">The opposite of a relative URL is an *absolute URL*, which is one that starts with a forward slash (`/`) or a protocol such as `http://`.</span></span> <span data-ttu-id="7d306-150">Como uma URL absoluta Especifica o local de um recurso de um ponto fixo conhecido, a mesma URL absoluta é válida em qualquer página da web, independentemente do local da página da web na estrutura de pasta do site.</span><span class="sxs-lookup"><span data-stu-id="7d306-150">Because an absolute URL specifies the location of a resource from a known fixed point, the same absolute URL is valid in any web page, regardless of the web page's location in the website's folder structure.</span></span>

<span data-ttu-id="7d306-151">Para corrigir a imagem quebrada mostrada na Figura 2, precisamos atualizar o `<img>` do elemento `src` para que ele usa uma URL absoluta, em vez de uma relação de atributo.</span><span class="sxs-lookup"><span data-stu-id="7d306-151">To remedy the broken image shown in Figure 2, we need to update the `<img>` element's `src` attribute so that it uses an absolute URL instead of a relative one.</span></span> <span data-ttu-id="7d306-152">Para determinar a URL absoluta correta, visite uma das páginas da web no seu site e examine a barra de endereços.</span><span class="sxs-lookup"><span data-stu-id="7d306-152">To determine the correct absolute URL, visit one of the web pages in your website and examine the Address bar.</span></span> <span data-ttu-id="7d306-153">Como mostra a barra de endereços na Figura 2, o caminho totalmente qualificado para o aplicativo web é `http://localhost:3908/ASPNET_MasterPages_Tutorial_04_CS/`.</span><span class="sxs-lookup"><span data-stu-id="7d306-153">As the Address bar in Figure 2 shows, the fully qualified path to the web application is `http://localhost:3908/ASPNET_MasterPages_Tutorial_04_CS/`.</span></span> <span data-ttu-id="7d306-154">Portanto, podemos pode atualizar o `<img>` do elemento `src` atributo para qualquer uma das duas URLs absoluta a seguir:</span><span class="sxs-lookup"><span data-stu-id="7d306-154">Therefore, we could update the `<img>` element's `src` attribute to either of the following two absolute URLs:</span></span>

- `/ASPNET_MasterPages_Tutorial_04_CS/Images/PoweredByASPNET.gif`
- `http://localhost:3908/ASPNET_MasterPages_Tutorial_04_CS/Images/PoweredByASPNET.gif`

<span data-ttu-id="7d306-155">Reserve um tempo para atualizar o `<img>` do elemento `src` de atributo para uma URL absoluta usando uma das formas mostradas acima e, em seguida, visite o `~/Admin/Default.aspx` página através de um navegador.</span><span class="sxs-lookup"><span data-stu-id="7d306-155">Take a moment to update the `<img>` element's `src` attribute to an absolute URL using one of the forms shown above and then visit the `~/Admin/Default.aspx` page through a browser.</span></span> <span data-ttu-id="7d306-156">Neste momento, o navegador será corretamente localizar e exibir o `PoweredByASPNET.gif` arquivo de imagem (consulte a Figura 3).</span><span class="sxs-lookup"><span data-stu-id="7d306-156">This time the browser will correctly find and display the `PoweredByASPNET.gif` image file (see Figure 3).</span></span>


<span data-ttu-id="7d306-157">[![A imagem de PoweredByASPNET.gif é exibido agora](urls-in-master-pages-cs/_static/image6.png)](urls-in-master-pages-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="7d306-157">[![The PoweredByASPNET.gif Image is Now Displayed](urls-in-master-pages-cs/_static/image6.png)](urls-in-master-pages-cs/_static/image5.png)</span></span>

<span data-ttu-id="7d306-158">**Figura 03**: O `PoweredByASPNET.gif` imagem é exibida agora ([clique para exibir a imagem em tamanho normal](urls-in-master-pages-cs/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="7d306-158">**Figure 03**: The `PoweredByASPNET.gif` Image is Now Displayed  ([Click to view full-size image](urls-in-master-pages-cs/_static/image7.png))</span></span>


<span data-ttu-id="7d306-159">Enquanto a codificação de URL absoluto funciona, agrupa rigidamente HTML para o servidor do site e local de pasta, que pode ser alterado.</span><span class="sxs-lookup"><span data-stu-id="7d306-159">While hard coding in the absolute URL works, it tightly couples your HTML to the website's server and folder location, which may change.</span></span> <span data-ttu-id="7d306-160">Usando uma URL absoluta do formulário `http://localhost:3908/...` é frágil porque o número de porta anterior `localhost` é selecionado automaticamente sempre que o servidor de Web de desenvolvimento de ASP.NET interno do Visual Studio é iniciado.</span><span class="sxs-lookup"><span data-stu-id="7d306-160">Using an absolute URL of the form `http://localhost:3908/...` is brittle because the port number preceding `localhost` is selected automatically each time Visual Studio's built-in ASP.NET Development Web Server is started.</span></span> <span data-ttu-id="7d306-161">Da mesma forma, o `http://localhost` parte é válida apenas quando testes localmente.</span><span class="sxs-lookup"><span data-stu-id="7d306-161">Similarly, the `http://localhost` part is only valid when testing locally.</span></span> <span data-ttu-id="7d306-162">Quando o código é implantado em um servidor de produção, a URL base será alterado para algo diferente, como `http://www.yourserver.com`.</span><span class="sxs-lookup"><span data-stu-id="7d306-162">Once the code is deployed to a production server, the URL base will change to something else, like `http://www.yourserver.com`.</span></span> <span data-ttu-id="7d306-163">A URL absoluta no formulário `/ASPNET_MasterPages_Tutorial_04_CS/...` também é prejudicada a mesmo fragilidade porque muitas vezes, esse caminho de aplicativo é diferente entre os servidores de desenvolvimento e produção.</span><span class="sxs-lookup"><span data-stu-id="7d306-163">The absolute URL in the form `/ASPNET_MasterPages_Tutorial_04_CS/...` also suffers from the same brittleness because oftentimes this application path differs between development and production servers.</span></span>

<span data-ttu-id="7d306-164">A boa notícia é que o ASP.NET oferece um método para gerar uma URL relativa válida no tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="7d306-164">The good news is that ASP.NET offers a method for generating a valid relative URL at runtime.</span></span>

## <a name="usingandresolveclienturl"></a><span data-ttu-id="7d306-165">Usando`~`e`ResolveClientUrl`</span><span class="sxs-lookup"><span data-stu-id="7d306-165">Using`~`and`ResolveClientUrl`</span></span>

<span data-ttu-id="7d306-166">Em vez de codificar uma URL absoluta, ASP.NET permite aos desenvolvedores de página usar o til (`~`) para indicar a raiz do aplicativo web.</span><span class="sxs-lookup"><span data-stu-id="7d306-166">Rather than hard code an absolute URL, ASP.NET allows page developers to use the tilde (`~`) to indicate the root of the web application.</span></span> <span data-ttu-id="7d306-167">Por exemplo, anteriormente neste tutorial, usei a notação `~/Admin/Default.aspx` no texto para referir-se a `Default.aspx` página o `Admin` pasta.</span><span class="sxs-lookup"><span data-stu-id="7d306-167">For example, earlier in this tutorial I used the notation `~/Admin/Default.aspx` in the text to refer to the `Default.aspx` page in the `Admin` folder.</span></span> <span data-ttu-id="7d306-168">O `~` indica que o `Admin` pasta é uma subpasta da raiz do aplicativo da web.</span><span class="sxs-lookup"><span data-stu-id="7d306-168">The `~` indicates that the `Admin` folder is a subfolder of the web application's root.</span></span>

<span data-ttu-id="7d306-169">O `Control` da classe [ `ResolveClientUrl` método](https://msdn.microsoft.com/library/system.web.ui.control.resolveclienturl.aspx) usa uma URL e modifica a uma URL relativa apropriada para a página da web no qual reside o controle.</span><span class="sxs-lookup"><span data-stu-id="7d306-169">The `Control` class's [`ResolveClientUrl` method](https://msdn.microsoft.com/library/system.web.ui.control.resolveclienturl.aspx) takes a URL and modifies it to a relative URL appropriate for the web page on which the control resides.</span></span> <span data-ttu-id="7d306-170">Por exemplo, chamar `ResolveClientUrl("~/Images/PoweredByASPNET.gif")` de `About.aspx` retorna `Images/PoweredByASPNET.gif`.</span><span class="sxs-lookup"><span data-stu-id="7d306-170">For example, calling `ResolveClientUrl("~/Images/PoweredByASPNET.gif")` from `About.aspx` returns `Images/PoweredByASPNET.gif`.</span></span> <span data-ttu-id="7d306-171">Chamando-o de `~/Admin/Default.aspx`, no entanto, retorna `../Images/PoweredByASPNET.gif`.</span><span class="sxs-lookup"><span data-stu-id="7d306-171">Calling it from `~/Admin/Default.aspx`, however, returns `../Images/PoweredByASPNET.gif`.</span></span>

> [!NOTE]
> <span data-ttu-id="7d306-172">Como todos os controles de servidor ASP.NET derivam do `Control` classe, todos os controles de servidor tem acesso para o `ResolveClientUrl` método.</span><span class="sxs-lookup"><span data-stu-id="7d306-172">Because all ASP.NET server controls derive from the `Control` class, all server controls have access to the `ResolveClientUrl` method.</span></span> <span data-ttu-id="7d306-173">Até mesmo o `Page` classe deriva de `Control` classe, que significa que você pode usar este método diretamente da classe code-behind de suas páginas ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="7d306-173">Even the `Page` class derives from the `Control` class, meaning that you can use this method directly from your ASP.NET pages' code-behind classes.</span></span>


### <a name="usingin-the-declarative-markup"></a><span data-ttu-id="7d306-174">Usando`~`na marcação declarativa</span><span class="sxs-lookup"><span data-stu-id="7d306-174">Using`~`in the Declarative Markup</span></span>

<span data-ttu-id="7d306-175">Vários controles da Web do ASP.NET incluem propriedades relacionadas a URL: o controle de hiperlink tem um `NavigateUrl` propriedade; a imagem de controle tem um `ImageUrl` propriedade; e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="7d306-175">Several ASP.NET Web controls include URL-related properties: the HyperLink control has a `NavigateUrl` property; the Image control has an `ImageUrl` property; and so on.</span></span> <span data-ttu-id="7d306-176">Quando renderizados, esses controles transmitir seus valores de propriedade relacionados à URL para `ResolveClientUrl`.</span><span class="sxs-lookup"><span data-stu-id="7d306-176">When rendered, these controls pass their URL-related property values to `ResolveClientUrl`.</span></span> <span data-ttu-id="7d306-177">Consequentemente, se essas propriedades contêm um `~` para indicar a raiz do aplicativo web, a URL será modificada para uma URL relativa válida.</span><span class="sxs-lookup"><span data-stu-id="7d306-177">Consequently, if these properties contain a `~` to indicate the root of the web application, the URL will be modified to a valid relative URL.</span></span>

<span data-ttu-id="7d306-178">Tenha em mente que somente os controles de servidor ASP.NET transform o `~` em suas propriedades de URL.</span><span class="sxs-lookup"><span data-stu-id="7d306-178">Keep in mind that only ASP.NET server controls transform the `~` in their URL-related properties.</span></span> <span data-ttu-id="7d306-179">Se um `~` aparece na marcação HTML estática, como `<img src="~/Images/PoweredByASPNET.gif" />`, o mecanismo do ASP.NET envia o `~` no navegador junto com o restante do conteúdo HTML.</span><span class="sxs-lookup"><span data-stu-id="7d306-179">If a `~` appears in static HTML markup, such as `<img src="~/Images/PoweredByASPNET.gif" />`, the ASP.NET engine sends the `~` to the browser along with the rest of the HTML content.</span></span> <span data-ttu-id="7d306-180">O navegador supõe que o `~` faz parte da URL.</span><span class="sxs-lookup"><span data-stu-id="7d306-180">The browser assumes that the `~` is part of the URL.</span></span> <span data-ttu-id="7d306-181">Por exemplo, se o navegador recebe a marcação `<img src="~/Images/PoweredByASPNET.gif" />` ele assume que há uma subpasta chamada `~` com uma subpasta `Images` que contém o arquivo de imagem `PoweredByASPNET.gif`.</span><span class="sxs-lookup"><span data-stu-id="7d306-181">For example, if the browser receives the markup `<img src="~/Images/PoweredByASPNET.gif" />` it assumes there is a subfolder named `~` with a subfolder `Images` that contains the image file `PoweredByASPNET.gif`.</span></span>

<span data-ttu-id="7d306-182">Para corrigir a marcação de imagem em `Site.master`, substituir o `<img>` elemento com um controle da Web do ASP.NET imagem.</span><span class="sxs-lookup"><span data-stu-id="7d306-182">To fix the image markup in `Site.master`, replace the existing `<img>` element with an ASP.NET Image Web control.</span></span> <span data-ttu-id="7d306-183">Definir o controle de imagem Web `ID` para `PoweredByImage`, sua `ImageUrl` propriedade `~/Images/PoweredByASPNET.gif`e sua `AlternateText` propriedade como "Funciona com o ASP.NET!"</span><span class="sxs-lookup"><span data-stu-id="7d306-183">Set the Image Web control's `ID` to `PoweredByImage`, its `ImageUrl` property to `~/Images/PoweredByASPNET.gif`, and its `AlternateText` property to "Powered by ASP.NET!"</span></span>


[!code-aspx[Main](urls-in-master-pages-cs/samples/sample5.aspx)]

<span data-ttu-id="7d306-184">Depois de fazer essa alteração para a página mestra, revisitar o `~/Admin/Default.aspx` página novamente.</span><span class="sxs-lookup"><span data-stu-id="7d306-184">After making this change to the master page, revisit the `~/Admin/Default.aspx` page again.</span></span> <span data-ttu-id="7d306-185">Neste momento o `PoweredByASPNET.gif` arquivo de imagem aparece na página (consulte a Figura 3).</span><span class="sxs-lookup"><span data-stu-id="7d306-185">This time the `PoweredByASPNET.gif` image file appears in the page (see Figure 3).</span></span> <span data-ttu-id="7d306-186">Quando Web imagem do controle é processado, usa o `ResolveClientUrl` método para resolver seu `ImageUrl` o valor da propriedade.</span><span class="sxs-lookup"><span data-stu-id="7d306-186">When the Image Web control is rendered it uses the `ResolveClientUrl` method to resolve its `ImageUrl` property value.</span></span> <span data-ttu-id="7d306-187">Em `~/Admin/Default.aspx` o `ImageUrl` é convertido em uma URL relativa apropriado, como o seguinte trecho de HTML fonte mostra:</span><span class="sxs-lookup"><span data-stu-id="7d306-187">In `~/Admin/Default.aspx` the `ImageUrl` is converted into an appropriate relative URL, as the following snippet of HTML source shows:</span></span>


[!code-html[Main](urls-in-master-pages-cs/samples/sample6.html)]

> [!NOTE]
> <span data-ttu-id="7d306-188">Além de ser usado nas propriedades de controle da Web baseado em URL, o `~` também pode ser usado ao chamar o `Response.Redirect` e `Server.MapPath` métodos, entre outros.</span><span class="sxs-lookup"><span data-stu-id="7d306-188">In addition to being used in URL-based Web control properties, the `~` can also be used when calling the `Response.Redirect` and `Server.MapPath` methods, among others.</span></span> <span data-ttu-id="7d306-189">Além disso, o `ResolveClientUrl` método pode ser chamado diretamente de uma ASP.NET ou declarativo da página mestra, se necessário, consulte [Fritz Onion](https://www.pluralsight.com/blogs/fritz/)da entrada de blog [usando `ResolveClientUrl` na marcação](https://www.pluralsight.com/blogs/fritz/archive/2006/02/06/18596.aspx).</span><span class="sxs-lookup"><span data-stu-id="7d306-189">Also, the `ResolveClientUrl` method may be invoked directly from an ASP.NET or master page's declarative markup, if needed; see [Fritz Onion](https://www.pluralsight.com/blogs/fritz/)'s blog entry [Using `ResolveClientUrl` in Markup](https://www.pluralsight.com/blogs/fritz/archive/2006/02/06/18596.aspx).</span></span>


## <a name="fixing-the-master-pages-remaining-relative-urls"></a><span data-ttu-id="7d306-190">Correção da página mestra restantes URLs relativas</span><span class="sxs-lookup"><span data-stu-id="7d306-190">Fixing the Master Page's Remaining Relative URLs</span></span>

<span data-ttu-id="7d306-191">Além de `<img>` elemento o `footerContent` que corrigimos apenas, a página mestra contém uma URL relativa mais que exige a atenção do nosso.</span><span class="sxs-lookup"><span data-stu-id="7d306-191">In addition to the `<img>` element in the `footerContent` that we just fixed, the master page contains one more relative URL that requires our attention.</span></span> <span data-ttu-id="7d306-192">O `topContent` região inclui o link "Mestre páginas tutoriais," que aponta para `Default.aspx`.</span><span class="sxs-lookup"><span data-stu-id="7d306-192">The `topContent` region includes the link "Master Pages Tutorials," which points to `Default.aspx`.</span></span>


[!code-html[Main](urls-in-master-pages-cs/samples/sample7.html)]

<span data-ttu-id="7d306-193">Como essa URL é relativa, ele enviará o usuário o `Default.aspx` página na pasta visitando a página de conteúdo.</span><span class="sxs-lookup"><span data-stu-id="7d306-193">Because this URL is relative, it will send the user to the `Default.aspx` page in the folder of the content page they are visiting.</span></span> <span data-ttu-id="7d306-194">Para que este link sempre apontar para `Default.aspx` na pasta raiz, é preciso substituir o `<a>` elemento com um hiperlink Web controlar a forma que podemos usar o `~` notação.</span><span class="sxs-lookup"><span data-stu-id="7d306-194">To have this link always point to `Default.aspx` in the root folder we need to replace the `<a>` element with a HyperLink Web control so that we can use the `~` notation.</span></span>

<span data-ttu-id="7d306-195">Remover o `<a>` marcação de elemento e adicionar um controle de hiperlink em seu lugar.</span><span class="sxs-lookup"><span data-stu-id="7d306-195">Remove the `<a>` element markup and add a HyperLink control in its place.</span></span> <span data-ttu-id="7d306-196">Definir o hiperlink `ID` para `lnkHome`, sua `NavigateUrl` propriedade `~/Default.aspx`e sua `Text` propriedade como "Tutoriais de páginas mestra".</span><span class="sxs-lookup"><span data-stu-id="7d306-196">Set the HyperLink's `ID` to `lnkHome`, its `NavigateUrl` property to `~/Default.aspx`, and its `Text` property to "Master Pages Tutorials."</span></span>


[!code-aspx[Main](urls-in-master-pages-cs/samples/sample8.aspx)]

<span data-ttu-id="7d306-197">É só isso!</span><span class="sxs-lookup"><span data-stu-id="7d306-197">That's it!</span></span> <span data-ttu-id="7d306-198">Neste ponto, todos os URLs em nossa página mestre são baseados corretamente durante a renderização por uma página de conteúdo, independentemente de quais pastas, a página mestra e a página de conteúdo estão localizados em.</span><span class="sxs-lookup"><span data-stu-id="7d306-198">At this point all the URLs in our master page are properly based when rendered by a content page regardless of what folders the master page and content page are located in.</span></span>

### <a name="automatic-url-resolution-in-theheadsection"></a><span data-ttu-id="7d306-199">Resolução automática de URL a`<head>`seção</span><span class="sxs-lookup"><span data-stu-id="7d306-199">Automatic URL Resolution in the`<head>`Section</span></span>

<span data-ttu-id="7d306-200">No [ *criando um Layout de todo o Site usando páginas mestras* ](creating-a-site-wide-layout-using-master-pages-cs.md) tutorial adicionamos um `<link>` para o `Styles.css` arquivo o `<head>` região:</span><span class="sxs-lookup"><span data-stu-id="7d306-200">In the [*Creating a Site-Wide Layout Using Master Pages*](creating-a-site-wide-layout-using-master-pages-cs.md) tutorial we added a `<link>` to the `Styles.css` file in the `<head>` region:</span></span>


[!code-aspx[Main](urls-in-master-pages-cs/samples/sample9.aspx)]

<span data-ttu-id="7d306-201">Enquanto o `<link>` do elemento `href` atributo for relativo, ele é automaticamente convertido em um caminho correto em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="7d306-201">While the `<link>` element's `href` attribute is relative, it's automatically converted to an appropriate path at runtime.</span></span> <span data-ttu-id="7d306-202">Conforme abordado no [ *especificando o título, marcas Meta e outros cabeçalhos de HTML na página mestra* ](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs.md) tutorial, o `<head>` região é, na verdade, um controle de servidor, que permite que você modifique o conteúdo de seus controles internos quando ele for renderizado.</span><span class="sxs-lookup"><span data-stu-id="7d306-202">As we discussed in the [*Specifying the Title, Meta Tags, and Other HTML Headers in the Master Page*](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs.md) tutorial, the `<head>` region is actually a server-side control, which enables it to modify the contents of its inner controls when it is rendered.</span></span>

<span data-ttu-id="7d306-203">Para verificar isso, revisitar o `~/Admin/Default.aspx` página e exibir o código-fonte HTML enviada para o navegador.</span><span class="sxs-lookup"><span data-stu-id="7d306-203">To verify this, revisit the `~/Admin/Default.aspx` page and view the HTML source sent to the browser.</span></span> <span data-ttu-id="7d306-204">Como mostra o trecho a seguir, o `<link>` do elemento `href` atributo foi modificado automaticamente para uma URL relativa apropriado, `../Styles.css`.</span><span class="sxs-lookup"><span data-stu-id="7d306-204">As the snippet below illustrates, the `<link>` element's `href` attribute has been automatically modified to an appropriate relative URL, `../Styles.css`.</span></span>


[!code-html[Main](urls-in-master-pages-cs/samples/sample10.html)]

## <a name="summary"></a><span data-ttu-id="7d306-205">Resumo</span><span class="sxs-lookup"><span data-stu-id="7d306-205">Summary</span></span>

<span data-ttu-id="7d306-206">Páginas mestras frequentemente incluem links, imagens e outros recursos externos que devem ser especificados por meio de uma URL.</span><span class="sxs-lookup"><span data-stu-id="7d306-206">Master pages very often include links, images, and other external resources that must be specified via a URL.</span></span> <span data-ttu-id="7d306-207">Porque a página mestra e páginas de conteúdo podem não existir na mesma pasta, é importante abstain de usar URLs relativas.</span><span class="sxs-lookup"><span data-stu-id="7d306-207">Because the master page and content pages might not exist in the same folder, it is important to abstain from using relative URLs.</span></span> <span data-ttu-id="7d306-208">Embora seja possível usar URLs absolutas codificadas, fazendo assim rigidamente associa a URL absoluta para o aplicativo web.</span><span class="sxs-lookup"><span data-stu-id="7d306-208">While it is possible to use hard coded absolute URLs, doing so tightly couples the absolute URL to the web application.</span></span> <span data-ttu-id="7d306-209">Se a URL absoluta altera - como geralmente quando mover ou implantar um aplicativo web - você terá de lembrar para voltar e atualizar as URLs absolutas.</span><span class="sxs-lookup"><span data-stu-id="7d306-209">If the absolute URL changes - as it often does when moving or deploying a web application - you'll have to remember to go back and update the absolute URLs.</span></span>

<span data-ttu-id="7d306-210">A abordagem ideal é usar o til (`~`) para indicar a raiz do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="7d306-210">The ideal approach is to use the tilde (`~`) to indicate the application root.</span></span> <span data-ttu-id="7d306-211">Mapeiam de controles da Web do ASP.NET que contêm propriedades relacionadas a URL de `~` para a raiz do aplicativo em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="7d306-211">ASP.NET Web controls that contain URL-related properties map the `~` to the application root at runtime.</span></span> <span data-ttu-id="7d306-212">Internamente, os controles da Web usam o `Control` da classe `ResolveClientUrl` método para gerar uma URL relativa válida.</span><span class="sxs-lookup"><span data-stu-id="7d306-212">Internally, the Web controls use the `Control` class's `ResolveClientUrl` method to generate a valid relative URL.</span></span> <span data-ttu-id="7d306-213">Esse método é público e disponível de cada controle de servidor (incluindo o `Page` classe), portanto, você pode usá-lo por meio de programação de sua classe code-behind, se necessário.</span><span class="sxs-lookup"><span data-stu-id="7d306-213">This method is public and available from every server control (including the `Page` class), so you can use it programmatically from your code-behind classes, if needed.</span></span>

<span data-ttu-id="7d306-214">Boa programação!</span><span class="sxs-lookup"><span data-stu-id="7d306-214">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="7d306-215">Leitura adicional</span><span class="sxs-lookup"><span data-stu-id="7d306-215">Further Reading</span></span>

<span data-ttu-id="7d306-216">Para obter mais informações sobre os tópicos abordados neste tutorial, consulte os seguintes recursos:</span><span class="sxs-lookup"><span data-stu-id="7d306-216">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="7d306-217">Páginas mestras no ASP.NET</span><span class="sxs-lookup"><span data-stu-id="7d306-217">Master Pages in ASP.NET</span></span>](http://www.odetocode.com/Articles/419.aspx)
- [<span data-ttu-id="7d306-218">Alteração da URL base em uma página mestra</span><span class="sxs-lookup"><span data-stu-id="7d306-218">URL Rebasing in a Master Page</span></span>](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/masterpages/default.aspx#urls)
- [<span data-ttu-id="7d306-219">Usando `ResolveClientUrl` na marcação</span><span class="sxs-lookup"><span data-stu-id="7d306-219">Using `ResolveClientUrl` in Markup</span></span>](https://www.pluralsight.com/blogs/fritz/archive/2006/02/06/18596.aspx)

### <a name="about-the-author"></a><span data-ttu-id="7d306-220">Sobre o autor</span><span class="sxs-lookup"><span data-stu-id="7d306-220">About the Author</span></span>

<span data-ttu-id="7d306-221">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor de vários livros sobre ASP/ASP.NET e fundador da 4GuysFromRolla. com, trabalha com tecnologias Microsoft Web desde 1998.</span><span class="sxs-lookup"><span data-stu-id="7d306-221">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="7d306-222">Scott funciona como um consultor independente, instrutor e gravador.</span><span class="sxs-lookup"><span data-stu-id="7d306-222">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="7d306-223">Seu livro mais recente é [ *Sams ensinar por conta própria ASP.NET 3.5 nas 24 horas*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="7d306-223">His latest book is [*Sams Teach Yourself ASP.NET 3.5 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="7d306-224">Scott pode ser contatado pelo [ mitchell@4GuysFromRolla.com ](mailto:mitchell@4GuysFromRolla.com) ou em seu blog [http://ScottOnWriting.NET](http://scottonwriting.net/).</span><span class="sxs-lookup"><span data-stu-id="7d306-224">Scott can be reached at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="7d306-225">Agradecimentos especiais a</span><span class="sxs-lookup"><span data-stu-id="7d306-225">Special Thanks To</span></span>

<span data-ttu-id="7d306-226">Interessado em examinar meu artigos futuros do MSDN?</span><span class="sxs-lookup"><span data-stu-id="7d306-226">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="7d306-227">Nesse caso, me enviar uma linha no [ mitchell@4GuysFromRolla.com ](mailto:mitchell@4GuysFromRolla.com).</span><span class="sxs-lookup"><span data-stu-id="7d306-227">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com).</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="7d306-228">[Anterior](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs.md)
[Próximo](control-id-naming-in-content-pages-cs.md)</span><span class="sxs-lookup"><span data-stu-id="7d306-228">[Previous](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs.md)
[Next](control-id-naming-in-content-pages-cs.md)</span></span>
