---
uid: web-forms/overview/data-access/editing-inserting-and-deleting-data/adding-client-side-confirmation-when-deleting-cs
title: Adicionar confirmação do lado do cliente ao excluir (c#) | Microsoft Docs
author: rick-anderson
description: As interfaces que criamos até agora, um usuário pode excluir acidentalmente dados clicando no botão Excluir quando eles devem clicar no botão Editar. Neste t...
ms.author: aspnetcontent
manager: wpickett
ms.date: 07/17/2006
ms.topic: article
ms.assetid: f6e2a12a-2b5e-48fd-8db3-1e94a500c19a
ms.technology: dotnet-webforms
ms.prod: .net-framework
msc.legacyurl: /web-forms/overview/data-access/editing-inserting-and-deleting-data/adding-client-side-confirmation-when-deleting-cs
msc.type: authoredcontent
ms.openlocfilehash: 72b15d498e45cc519a14ecfe39111b224db88c30
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/06/2018
ms.locfileid: "30880265"
---
<a name="adding-client-side-confirmation-when-deleting-c"></a><span data-ttu-id="a034f-104">Adicionar confirmação do lado do cliente ao excluir (c#)</span><span class="sxs-lookup"><span data-stu-id="a034f-104">Adding Client-Side Confirmation When Deleting (C#)</span></span>
====================
<span data-ttu-id="a034f-105">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="a034f-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="a034f-106">[Baixe o aplicativo de exemplo](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_22_CS.exe) ou [baixar PDF](adding-client-side-confirmation-when-deleting-cs/_static/datatutorial22cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="a034f-106">[Download Sample App](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_22_CS.exe) or [Download PDF](adding-client-side-confirmation-when-deleting-cs/_static/datatutorial22cs1.pdf)</span></span>

> <span data-ttu-id="a034f-107">As interfaces que criamos até agora, um usuário pode excluir acidentalmente dados clicando no botão Excluir quando eles devem clicar no botão Editar.</span><span class="sxs-lookup"><span data-stu-id="a034f-107">In the interfaces we've created so far, a user can accidentally delete data by clicking the Delete button when they meant to click the Edit button.</span></span> <span data-ttu-id="a034f-108">Neste tutorial, adicionaremos uma caixa de diálogo de confirmação do lado do cliente que é exibida quando o botão de exclusão é clicado.</span><span class="sxs-lookup"><span data-stu-id="a034f-108">In this tutorial we'll add a client-side confirmation dialog box that appears when the Delete button is clicked.</span></span>


## <a name="introduction"></a><span data-ttu-id="a034f-109">Introdução</span><span class="sxs-lookup"><span data-stu-id="a034f-109">Introduction</span></span>

<span data-ttu-id="a034f-110">Sobre os últimos tutoriais vários nós ve visto como usar nosso arquitetura do aplicativo, ObjectDataSource e os dados de controles da Web em conjunto para fornecer inserindo, editar e excluir recursos.</span><span class="sxs-lookup"><span data-stu-id="a034f-110">Over the past several tutorials we ve seen how to use our application architecture, ObjectDataSource, and the data Web controls in concert to provide inserting, editing, and deleting capabilities.</span></span> <span data-ttu-id="a034f-111">A exclusão de interfaces ve examinado até agora foram composto de uma exclusão botão que, quando clicado, causa um postback e invoca o s ObjectDataSource `Delete()` método.</span><span class="sxs-lookup"><span data-stu-id="a034f-111">The deleting interfaces we ve examined thus far have been composed of a Delete button that, when clicked, causes a postback and invokes the ObjectDataSource s `Delete()` method.</span></span> <span data-ttu-id="a034f-112">O `Delete()` método, em seguida, invoca o método configurado da camada de lógica de negócios, que se propaga a chamada para a camada de acesso de dados, emissão real `DELETE` instrução no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="a034f-112">The `Delete()` method then invokes the configured method from the Business Logic Layer, which propagates the call down to the Data Access Layer, issuing the actual `DELETE` statement to the database.</span></span>

<span data-ttu-id="a034f-113">Enquanto essa interface do usuário permite que os visitantes excluir registros através dos controles GridView, DetailsView ou FormView, ele não tem qualquer tipo de confirmação quando o usuário clica no botão Excluir.</span><span class="sxs-lookup"><span data-stu-id="a034f-113">While this user interface enables visitors to delete records through the GridView, DetailsView, or FormView controls, it lacks any sort of confirmation when the user clicks the Delete button.</span></span> <span data-ttu-id="a034f-114">Se um usuário acidentalmente clicar no botão Excluir quando eles devem clicar em Editar, o registro, que eles devem atualizar em vez disso, será excluído.</span><span class="sxs-lookup"><span data-stu-id="a034f-114">If a user accidentally clicks the Delete button when they meant to click Edit, the record they meant to update will instead be deleted.</span></span> <span data-ttu-id="a034f-115">Para ajudar a evitar isso, neste tutorial, que vamos adicionar uma caixa de diálogo de confirmação do lado do cliente que é exibida quando o botão de exclusão é clicado.</span><span class="sxs-lookup"><span data-stu-id="a034f-115">To help prevent this, in this tutorial we'll add a client-side confirmation dialog box that appears when the Delete button is clicked.</span></span>

<span data-ttu-id="a034f-116">O JavaScript `confirm(string)` função exibe seu parâmetro de entrada de cadeia de caracteres como o texto dentro de uma caixa de diálogo modal que vem equipado com dois botões - Okey e Cancelar (consulte a Figura 1).</span><span class="sxs-lookup"><span data-stu-id="a034f-116">The JavaScript `confirm(string)` function displays its string input parameter as the text inside a modal dialog box that comes equipped with two buttons - OK and Cancel (see Figure 1).</span></span> <span data-ttu-id="a034f-117">O `confirm(string)` função retorna um valor booliano, dependendo de qual botão é clicado (`true`, se o usuário clica em Okey, e `false` clicando em ' Cancelar ').</span><span class="sxs-lookup"><span data-stu-id="a034f-117">The `confirm(string)` function returns a Boolean value depending on what button is clicked (`true`, if the user clicks OK, and `false` if they click Cancel).</span></span>


![O método de confirm(string) de JavaScript exibe um Modal Messagebox do lado do cliente](adding-client-side-confirmation-when-deleting-cs/_static/image1.png)

<span data-ttu-id="a034f-119">**Figura 1**: O JavaScript `confirm(string)` método exibe uma caixa de mensagem Modal, no lado do cliente</span><span class="sxs-lookup"><span data-stu-id="a034f-119">**Figure 1**: The JavaScript `confirm(string)` Method Displays a Modal, Client-Side Messagebox</span></span>


<span data-ttu-id="a034f-120">Durante o envio de um formulário, se um valor de `false` é retornado de um manipulador de eventos do lado do cliente e o envio do formulário é cancelado.</span><span class="sxs-lookup"><span data-stu-id="a034f-120">During a form submission, if a value of `false` is returned from a client-side event handler then the form submission is cancelled.</span></span> <span data-ttu-id="a034f-121">Usando esse recurso, podemos ter Delete botão s lado do cliente `onclick` manipulador de eventos retorna o valor de uma chamada para `confirm("Are you sure you want to delete this product?")`.</span><span class="sxs-lookup"><span data-stu-id="a034f-121">Using this feature, we can have the Delete button s client-side `onclick` event handler return the value of a call to `confirm("Are you sure you want to delete this product?")`.</span></span> <span data-ttu-id="a034f-122">Se o usuário clicar em Cancelar, `confirm(string)` retornará false e, portanto, fazendo com que o envio do formulário Cancelar.</span><span class="sxs-lookup"><span data-stu-id="a034f-122">If the user clicks Cancel, `confirm(string)` will return false, thereby causing the form submission to cancel.</span></span> <span data-ttu-id="a034f-123">Com nenhum postback, o produto cuja exclusão foi clicada ganha t ser excluído.</span><span class="sxs-lookup"><span data-stu-id="a034f-123">With no postback, the product whose Delete button was clicked won t be deleted.</span></span> <span data-ttu-id="a034f-124">Se, no entanto, o usuário clica Okey na caixa de diálogo de confirmação, a postagem irá continuar sem interrupções e o produto será excluído.</span><span class="sxs-lookup"><span data-stu-id="a034f-124">If, however, the user clicks OK in the confirmation dialog box, the postback will continue unabated and the product will be deleted.</span></span> <span data-ttu-id="a034f-125">Consulte [s usando JavaScript `confirm()` método de envio do formulário de controle](http://www.webreference.com/programming/javascript/confirm/) para obter mais informações sobre essa técnica.</span><span class="sxs-lookup"><span data-stu-id="a034f-125">Consult [Using JavaScript s `confirm()` Method to Control Form Submission](http://www.webreference.com/programming/javascript/confirm/) for more information on this technique.</span></span>

<span data-ttu-id="a034f-126">Adicionar o script necessário do lado do cliente é ligeiramente diferente se usando modelos que ao usar um CommandField.</span><span class="sxs-lookup"><span data-stu-id="a034f-126">Adding the necessary client-side script differs slightly if using templates than when using a CommandField.</span></span> <span data-ttu-id="a034f-127">Portanto, neste tutorial examinaremos exemplo um FormView e GridView.</span><span class="sxs-lookup"><span data-stu-id="a034f-127">Therefore, in this tutorial we will look at both a FormView and GridView example.</span></span>

> [!NOTE]
> <span data-ttu-id="a034f-128">Usando técnicas de confirmação do lado do cliente, como aquelas discutidas neste tutorial, pressupõe que seus usuários estão visitando com navegadores que oferecem suporte a JavaScript e que eles tenham JavaScript habilitado.</span><span class="sxs-lookup"><span data-stu-id="a034f-128">Using client-side confirmation techniques, like the ones discussed in this tutorial, assumes that your users are visiting with browsers that support JavaScript and that they have JavaScript enabled.</span></span> <span data-ttu-id="a034f-129">Se qualquer uma nessas suposições não forem verdadeira para um usuário específico, clicando no botão Excluir imediatamente causará um postback (não exibir uma caixa de mensagem de confirmação).</span><span class="sxs-lookup"><span data-stu-id="a034f-129">If either of these assumptions are not true for a particular user, clicking the Delete button will immediately cause a postback (not displaying a confirm messagebox).</span></span>


## <a name="step-1-creating-a-formview-that-supports-deletion"></a><span data-ttu-id="a034f-130">Etapa 1: Criando um FormView que dá suporte à exclusão</span><span class="sxs-lookup"><span data-stu-id="a034f-130">Step 1: Creating a FormView That Supports Deletion</span></span>

<span data-ttu-id="a034f-131">Comece adicionando um FormView para o `ConfirmationOnDelete.aspx` página o `EditInsertDelete` pasta, associação a um novo ObjectDataSource que extrai as informações de produto por meio de `ProductsBLL` classe s `GetProducts()` método.</span><span class="sxs-lookup"><span data-stu-id="a034f-131">Start by adding a FormView to the `ConfirmationOnDelete.aspx` page in the `EditInsertDelete` folder, binding it to a new ObjectDataSource that pulls back the product information via the `ProductsBLL` class s `GetProducts()` method.</span></span> <span data-ttu-id="a034f-132">Configure também o ObjectDataSource para que o `ProductsBLL` classe s `DeleteProduct(productID)` método é mapeado para o s ObjectDataSource `Delete()` método; Certifique-se de que as guias INSERT e UPDATE listas suspensas são definidas como (nenhum).</span><span class="sxs-lookup"><span data-stu-id="a034f-132">Also configure the ObjectDataSource so that the `ProductsBLL` class s `DeleteProduct(productID)` method is mapped to the ObjectDataSource s `Delete()` method; ensure that the INSERT and UPDATE tabs drop-down lists are set to (None).</span></span> <span data-ttu-id="a034f-133">Finalmente, verifique a caixa de seleção Habilitar paginação na marca inteligente s FormView.</span><span class="sxs-lookup"><span data-stu-id="a034f-133">Finally, check the Enable Paging checkbox in the FormView s smart tag.</span></span>

<span data-ttu-id="a034f-134">Após estas etapas, o novo ObjectDataSource s declarativo será a seguinte aparência:</span><span class="sxs-lookup"><span data-stu-id="a034f-134">After these steps, the new ObjectDataSource s declarative markup will look like the following:</span></span>


[!code-aspx[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample1.aspx)]

<span data-ttu-id="a034f-135">Como em nossos exemplos anteriores que não usou a simultaneidade otimista, reserve um tempo para limpar o s ObjectDataSource `OldValuesParameterFormatString` propriedade.</span><span class="sxs-lookup"><span data-stu-id="a034f-135">As in our past examples that did not use optimistic concurrency, take a moment to clear out the ObjectDataSource s `OldValuesParameterFormatString` property.</span></span>

<span data-ttu-id="a034f-136">Desde que ele foi associado a um controle ObjectDataSource que só oferece suporte a exclusão, a s FormView `ItemTemplate` oferece apenas o botão de exclusão, sem os botões novo e atualização.</span><span class="sxs-lookup"><span data-stu-id="a034f-136">Since it has been bound to an ObjectDataSource control that only supports deleting, the FormView s `ItemTemplate` offers only the Delete button, lacking the New and Update buttons.</span></span> <span data-ttu-id="a034f-137">O FormView s declarativo, no entanto, inclui uma supérfluas `EditItemTemplate` e `InsertItemTemplate`, que pode ser removido.</span><span class="sxs-lookup"><span data-stu-id="a034f-137">The FormView s declarative markup, however, includes a superfluous `EditItemTemplate` and `InsertItemTemplate`, which can be removed.</span></span> <span data-ttu-id="a034f-138">Reserve um tempo para personalizar o `ItemTemplate` forma que ele mostra apenas um subconjunto do produto campos de dados.</span><span class="sxs-lookup"><span data-stu-id="a034f-138">Take a moment to customize the `ItemTemplate` so that is shows only a subset of the product data fields.</span></span> <span data-ttu-id="a034f-139">Eu ve configurado para mostrar o nome do produto s em busca de um `<h3>` título acima seus nomes de categoria e fornecedor (junto com o botão de exclusão).</span><span class="sxs-lookup"><span data-stu-id="a034f-139">I ve configured mine to show the product s name in an `<h3>` heading above its supplier and category names (along with the Delete button).</span></span>


[!code-aspx[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample2.aspx)]

<span data-ttu-id="a034f-140">Com essas alterações, temos uma página da web totalmente funcional que permite que um usuário alternar entre os produtos de uma vez, com a capacidade de excluir um produto, clicando no botão Excluir.</span><span class="sxs-lookup"><span data-stu-id="a034f-140">With these changes, we have a fully functional web page that allows a user to toggle through the products one at a time, with the ability to delete a product by simply clicking the Delete button.</span></span> <span data-ttu-id="a034f-141">A Figura 2 mostra uma captura de tela de nosso progresso até o momento quando visualizada através de um navegador.</span><span class="sxs-lookup"><span data-stu-id="a034f-141">Figure 2 shows a screen shot of our progress thus far when viewed through a browser.</span></span>


<span data-ttu-id="a034f-142">[![O FormView mostra informações sobre um único produto](adding-client-side-confirmation-when-deleting-cs/_static/image3.png)](adding-client-side-confirmation-when-deleting-cs/_static/image2.png)</span><span class="sxs-lookup"><span data-stu-id="a034f-142">[![The FormView Shows Information About a Single Product](adding-client-side-confirmation-when-deleting-cs/_static/image3.png)](adding-client-side-confirmation-when-deleting-cs/_static/image2.png)</span></span>

<span data-ttu-id="a034f-143">**Figura 2**: O FormView mostra informações sobre um único produto ([clique para exibir a imagem em tamanho normal](adding-client-side-confirmation-when-deleting-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="a034f-143">**Figure 2**: The FormView Shows Information About a Single Product ([Click to view full-size image](adding-client-side-confirmation-when-deleting-cs/_static/image4.png))</span></span>


## <a name="step-2-calling-the-confirmstring-function-from-the-delete-buttons-client-side-onclick-event"></a><span data-ttu-id="a034f-144">Etapa 2: Chamando a função confirm(string) da excluir botões cliente-onclick do lado do evento</span><span class="sxs-lookup"><span data-stu-id="a034f-144">Step 2: Calling the confirm(string) Function from the Delete Buttons Client-Side onclick Event</span></span>

<span data-ttu-id="a034f-145">O FormView criado, a etapa final é configurar o botão excluir tais que, quando ele s clicado pelo visitante, o JavaScript `confirm(string)` função é invocada.</span><span class="sxs-lookup"><span data-stu-id="a034f-145">With the FormView created, the final step is to configure the Delete button such that when it s clicked by the visitor, the JavaScript `confirm(string)` function is invoked.</span></span> <span data-ttu-id="a034f-146">Adicionar script do lado do cliente para um botão, LinkButton ou ImageButton s cliente `onclick` evento pode ser feito por meio do uso do `OnClientClick property`, que é nova para o ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="a034f-146">Adding client-side script to a Button, LinkButton, or ImageButton s client-side `onclick` event can be accomplished through the use of the `OnClientClick property`, which is new to ASP.NET 2.0.</span></span> <span data-ttu-id="a034f-147">Como queremos que tem o valor de `confirm(string)` simplesmente retornado de função, defini-la: `return confirm('Are you certain that you want to delete this product?');`</span><span class="sxs-lookup"><span data-stu-id="a034f-147">Since we want to have the value of the `confirm(string)` function returned, simply set this property to: `return confirm('Are you certain that you want to delete this product?');`</span></span>

<span data-ttu-id="a034f-148">Após a alteração a sintaxe declarativa de s excluir LinkButton deve ser semelhante:</span><span class="sxs-lookup"><span data-stu-id="a034f-148">After this change the Delete LinkButton s declarative syntax should look something like:</span></span>


[!code-aspx[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample3.aspx)]

<span data-ttu-id="a034f-149">Tudo lá que s é a ele!</span><span class="sxs-lookup"><span data-stu-id="a034f-149">That s all there is to it!</span></span> <span data-ttu-id="a034f-150">A Figura 3 mostra uma captura de tela dessa confirmação em ação.</span><span class="sxs-lookup"><span data-stu-id="a034f-150">Figure 3 shows a screen shot of this confirmation in action.</span></span> <span data-ttu-id="a034f-151">Clicando no botão Excluir abre a caixa de diálogo Confirmar.</span><span class="sxs-lookup"><span data-stu-id="a034f-151">Clicking the Delete button brings up the confirm dialog box.</span></span> <span data-ttu-id="a034f-152">Se o usuário clicar em Cancelar, a postagem será cancelada e o produto não é excluído.</span><span class="sxs-lookup"><span data-stu-id="a034f-152">If the user clicks Cancel, the postback is cancelled and the product is not deleted.</span></span> <span data-ttu-id="a034f-153">Se, no entanto, o usuário clica Okey, a postagem continuará e a s ObjectDataSource `Delete()` método é chamado, culminando no registro do banco de dados que está sendo excluído.</span><span class="sxs-lookup"><span data-stu-id="a034f-153">If, however, the user clicks OK, the postback continues and the ObjectDataSource s `Delete()` method is invoked, culminating in the database record being deleted.</span></span>

> [!NOTE]
> <span data-ttu-id="a034f-154">A cadeia de caracteres passada para o `confirm(string)` função JavaScript é delimitada por apóstrofos (em vez de aspas).</span><span class="sxs-lookup"><span data-stu-id="a034f-154">The string passed into the `confirm(string)` JavaScript function is delimited with apostrophes (rather than quotation marks).</span></span> <span data-ttu-id="a034f-155">Em JavaScript, cadeias de caracteres podem ser delimitadas usando qualquer caractere.</span><span class="sxs-lookup"><span data-stu-id="a034f-155">In JavaScript, strings can be delimited using either character.</span></span> <span data-ttu-id="a034f-156">Usamos apóstrofos aqui para que os delimitadores para a cadeia de caracteres passada para `confirm(string)` não apresenta uma ambiguidade com os delimitadores usados para o `OnClientClick` o valor da propriedade.</span><span class="sxs-lookup"><span data-stu-id="a034f-156">We use apostrophes here so that the delimiters for the string passed into `confirm(string)` do not introduce an ambiguity with the delimiters used for the `OnClientClick` property value.</span></span>


<span data-ttu-id="a034f-157">[![Uma confirmação é agora exibido ao clicar no botão Excluir](adding-client-side-confirmation-when-deleting-cs/_static/image6.png)](adding-client-side-confirmation-when-deleting-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="a034f-157">[![A Confirmation is Now Displayed When Clicking the Delete Button](adding-client-side-confirmation-when-deleting-cs/_static/image6.png)](adding-client-side-confirmation-when-deleting-cs/_static/image5.png)</span></span>

<span data-ttu-id="a034f-158">**Figura 3**: A confirmação é agora exibido ao clicar no botão Excluir ([clique para exibir a imagem em tamanho normal](adding-client-side-confirmation-when-deleting-cs/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="a034f-158">**Figure 3**: A Confirmation is Now Displayed When Clicking the Delete Button ([Click to view full-size image](adding-client-side-confirmation-when-deleting-cs/_static/image7.png))</span></span>


## <a name="step-3-configuring-the-onclientclick-property-for-the-delete-button-in-a-commandfield"></a><span data-ttu-id="a034f-159">Etapa 3: Configurando a propriedade OnClientClick para o botão de exclusão em um CommandField</span><span class="sxs-lookup"><span data-stu-id="a034f-159">Step 3: Configuring the OnClientClick Property for the Delete Button in a CommandField</span></span>

<span data-ttu-id="a034f-160">Ao trabalhar com um botão, LinkButton ou ImageButton diretamente em um modelo, uma caixa de diálogo de confirmação pode ser associada ele, simplesmente configurando seu `OnClientClick` propriedade para retornar os resultados do JavaScript `confirm(string)` função.</span><span class="sxs-lookup"><span data-stu-id="a034f-160">When working with a Button, LinkButton, or ImageButton directly in a template, a confirmation dialog box can be associated with it by simply configuring its `OnClientClick` property to return the results of the JavaScript `confirm(string)` function.</span></span> <span data-ttu-id="a034f-161">No entanto, o CommandField - que adiciona um campo de botões excluir um GridView ou DetailsView - não tem um `OnClientClick` propriedade que pode ser definida declarativamente.</span><span class="sxs-lookup"><span data-stu-id="a034f-161">However, the CommandField - which adds a field of Delete buttons to a GridView or DetailsView - does not have an `OnClientClick` property that can be set declaratively.</span></span> <span data-ttu-id="a034f-162">Em vez disso, podemos deve referenciar programaticamente no botão Excluir no s GridView ou DetailsView apropriado `DataBound` manipulador de eventos e defina seu `OnClientClick` propriedade existe.</span><span class="sxs-lookup"><span data-stu-id="a034f-162">Instead, we must programmatically reference the Delete button in the GridView or DetailsView s appropriate `DataBound` event handler, and then set its `OnClientClick` property there.</span></span>

> [!NOTE]
> <span data-ttu-id="a034f-163">Ao definir o botão excluir s `OnClientClick` propriedade no respectivo `DataBound` manipulador de eventos, temos acesso a dados foi associados ao registro atual.</span><span class="sxs-lookup"><span data-stu-id="a034f-163">When setting the Delete button s `OnClientClick` property in the appropriate `DataBound` event handler, we have access to the data was bound to the current record.</span></span> <span data-ttu-id="a034f-164">Isso significa que podemos pode estender a mensagem de confirmação para incluir detalhes sobre o registro específico, como "Tem certeza de que deseja excluir o produto Chai?"</span><span class="sxs-lookup"><span data-stu-id="a034f-164">This means we can extend the confirmation message to include details about the particular record, such as, "Are you sure you want to delete the Chai product?"</span></span> <span data-ttu-id="a034f-165">Essa personalização também é possível nos modelos usando a sintaxe de associação de dados.</span><span class="sxs-lookup"><span data-stu-id="a034f-165">Such customization is also possible in templates using databinding syntax.</span></span>


<span data-ttu-id="a034f-166">A configuração de prática de `OnClientClick` propriedade correspondentes a exclusão em um CommandField, s permitem adicionar um controle GridView à página.</span><span class="sxs-lookup"><span data-stu-id="a034f-166">To practice setting the `OnClientClick` property for the Delete button(s) in a CommandField, let s add a GridView to the page.</span></span> <span data-ttu-id="a034f-167">Configure este GridView para usar o controle ObjectDataSource mesmo que usa o FormView.</span><span class="sxs-lookup"><span data-stu-id="a034f-167">Configure this GridView to use the same ObjectDataSource control that the FormView uses.</span></span> <span data-ttu-id="a034f-168">Também limite os s GridView BoundFields para incluir apenas o nome do produto s, categoria e fornecedor.</span><span class="sxs-lookup"><span data-stu-id="a034f-168">Also limit the GridView s BoundFields to only include the product s name, category, and supplier.</span></span> <span data-ttu-id="a034f-169">Por fim, marque a caixa de seleção Habilitar a exclusão de marca inteligente s GridView.</span><span class="sxs-lookup"><span data-stu-id="a034f-169">Lastly, check the Enable Deleting checkbox from the GridView s smart tag.</span></span> <span data-ttu-id="a034f-170">Isso adicionará uma CommandField s a GridView `Columns` coleção com seu `ShowDeleteButton` propriedade definida como `true`.</span><span class="sxs-lookup"><span data-stu-id="a034f-170">This will add a CommandField to the GridView s `Columns` collection with its `ShowDeleteButton` property set to `true`.</span></span>

<span data-ttu-id="a034f-171">Depois de fazer essas alterações, a marcação declarativa do GridView s deve ser semelhante ao seguinte:</span><span class="sxs-lookup"><span data-stu-id="a034f-171">After making these changes, your GridView s declarative markup should look like the following:</span></span>


[!code-aspx[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample4.aspx)]

<span data-ttu-id="a034f-172">O CommandField contém uma única instância de excluir LinkButton que pode ser acessada por meio de programação de GridView s `RowDataBound` manipulador de eventos.</span><span class="sxs-lookup"><span data-stu-id="a034f-172">The CommandField contains a single Delete LinkButton instance that can be accessed programmatically from the GridView s `RowDataBound` event handler.</span></span> <span data-ttu-id="a034f-173">Depois de referência, podemos definir seu `OnClientClick` propriedade adequadamente.</span><span class="sxs-lookup"><span data-stu-id="a034f-173">Once referenced, we can set its `OnClientClick` property accordingly.</span></span> <span data-ttu-id="a034f-174">Criar um manipulador de eventos para o `RowDataBound` eventos usando o seguinte código:</span><span class="sxs-lookup"><span data-stu-id="a034f-174">Create an event handler for the `RowDataBound` event using the following code:</span></span>


[!code-csharp[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample5.cs)]

<span data-ttu-id="a034f-175">Este manipulador de eventos funciona com linhas de dados (aquelas que terá o botão de exclusão) e começa consultando programaticamente o botão de exclusão.</span><span class="sxs-lookup"><span data-stu-id="a034f-175">This event handler works with data rows (those that will have the Delete button) and begins by programmatically referencing the Delete button.</span></span> <span data-ttu-id="a034f-176">Em geral, use o seguinte padrão:</span><span class="sxs-lookup"><span data-stu-id="a034f-176">In general use the following pattern:</span></span>


[!code-csharp[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample6.cs)]

<span data-ttu-id="a034f-177">*ButtonType* é o tipo de botão que está sendo usado por CommandField - Button, LinkButton ou ImageButton.</span><span class="sxs-lookup"><span data-stu-id="a034f-177">*ButtonType* is the type of button being used by the CommandField - Button, LinkButton, or ImageButton.</span></span> <span data-ttu-id="a034f-178">Por padrão, o CommandField usa botões de link, mas isso pode ser personalizado por meio da s CommandField `ButtonType property`.</span><span class="sxs-lookup"><span data-stu-id="a034f-178">By default, the CommandField uses LinkButtons, but this can be customized via the CommandField s `ButtonType property`.</span></span> <span data-ttu-id="a034f-179">O *commandFieldIndex* é o índice ordinal do CommandField dentro de GridView s `Columns` coleção, enquanto o *controlIndex* é o índice do botão Excluir dentro a s CommandField `Controls` coleção.</span><span class="sxs-lookup"><span data-stu-id="a034f-179">The *commandFieldIndex* is the ordinal index of the CommandField within the GridView s `Columns` collection, whereas the *controlIndex* is the index of the Delete button within the CommandField s `Controls` collection.</span></span> <span data-ttu-id="a034f-180">O *controlIndex* valor depende da posição do botão s em relação a outros botões no CommandField.</span><span class="sxs-lookup"><span data-stu-id="a034f-180">The *controlIndex* value depends on the button s position relative to other buttons in the CommandField.</span></span> <span data-ttu-id="a034f-181">Por exemplo, se o botão somente exibido no CommandField é o excluir, use um índice de 0.</span><span class="sxs-lookup"><span data-stu-id="a034f-181">For example, if the only button displayed in the CommandField is the Delete button, use an index of 0.</span></span> <span data-ttu-id="a034f-182">Se, no entanto, há s um botão de edição que precede o botão de exclusão, use um índice de 2.</span><span class="sxs-lookup"><span data-stu-id="a034f-182">If, however, there s an Edit button that precedes the Delete button, use an index of 2.</span></span> <span data-ttu-id="a034f-183">O motivo pelo qual um índice de 2 é usado é como os dois controles são adicionados por CommandField antes do botão de exclusão: o botão Editar e um LiteralControl que s usado para adicionar algum espaço entre os botões Editar e excluir.</span><span class="sxs-lookup"><span data-stu-id="a034f-183">The reason an index of 2 is used is because two controls are added by the CommandField before the Delete button: the Edit button and a LiteralControl that s used to add some space between the Edit and Delete buttons.</span></span>

<span data-ttu-id="a034f-184">Para nosso exemplo específico, o CommandField usa botões de link e, sendo o campo mais à esquerda, tem um *commandFieldIndex* 0.</span><span class="sxs-lookup"><span data-stu-id="a034f-184">For our particular example, the CommandField uses LinkButtons and, being the left-most field, has a *commandFieldIndex* of 0.</span></span> <span data-ttu-id="a034f-185">Como não há nenhum outro botão, mas no botão Excluir no CommandField, usamos um *controlIndex* 0.</span><span class="sxs-lookup"><span data-stu-id="a034f-185">Since there are no other buttons but the Delete button in the CommandField, we use a *controlIndex* of 0.</span></span>

<span data-ttu-id="a034f-186">Depois de fazer referência a no botão Excluir no CommandField, podemos lado capturar informações sobre o produto associado à linha atual de GridView.</span><span class="sxs-lookup"><span data-stu-id="a034f-186">After referencing the Delete button in the CommandField, we next grab information about the product bound to the current GridView row.</span></span> <span data-ttu-id="a034f-187">Finalmente, definimos o botão excluir s `OnClientClick` propriedade para o JavaScript apropriado, o que inclui o nome do produto s.</span><span class="sxs-lookup"><span data-stu-id="a034f-187">Finally, we set the Delete button s `OnClientClick` property to the appropriate JavaScript, which includes the product s name.</span></span> <span data-ttu-id="a034f-188">Desde que a cadeia de caracteres JavaScript passado para o `confirm(string)` função é delimitada usando apóstrofos nós deve escapar qualquer apóstrofos que aparecem no nome do produto s.</span><span class="sxs-lookup"><span data-stu-id="a034f-188">Since the JavaScript string passed into the `confirm(string)` function is delimited using apostrophes we must escape any apostrophes that appear within the product s name.</span></span> <span data-ttu-id="a034f-189">Em particular, qualquer apóstrofos no nome do produto s são ignorados com "`\'`".</span><span class="sxs-lookup"><span data-stu-id="a034f-189">In particular, any apostrophes in the product s name are escaped with "`\'`".</span></span>

<span data-ttu-id="a034f-190">Com essas alterações completas, clicando em um botão de exclusão no GridView mostre uma caixa de diálogo de confirmação personalizado caixa (veja a Figura 4).</span><span class="sxs-lookup"><span data-stu-id="a034f-190">With these changes complete, clicking on a Delete button in the GridView displays a customized confirmation dialog box (see Figure 4).</span></span> <span data-ttu-id="a034f-191">Como com o messagebox de confirmação de FormView, se o usuário clicar em Cancelar o postback é cancelado, impedindo que a exclusão ocorra.</span><span class="sxs-lookup"><span data-stu-id="a034f-191">As with the confirmation messagebox from the FormView, if the user clicks Cancel the postback is cancelled, thereby preventing the deletion from occurring.</span></span>

> [!NOTE]
> <span data-ttu-id="a034f-192">Essa técnica também pode ser usada para acessar programaticamente o botão de exclusão em CommandField em um DetailsView.</span><span class="sxs-lookup"><span data-stu-id="a034f-192">This technique can also be used to programmatically access the Delete button in the CommandField in a DetailsView.</span></span> <span data-ttu-id="a034f-193">De DetailsView, no entanto, você d cria um manipulador de eventos para o `DataBound` evento, como o DetailsView não tem um `RowDataBound` eventos.</span><span class="sxs-lookup"><span data-stu-id="a034f-193">For the DetailsView, however, you d create an event handler for the `DataBound` event, since the DetailsView does not have a `RowDataBound` event.</span></span>


<span data-ttu-id="a034f-194">[![Clique no botão de exclusão de s GridView exibe uma caixa de diálogo de confirmação personalizado](adding-client-side-confirmation-when-deleting-cs/_static/image9.png)](adding-client-side-confirmation-when-deleting-cs/_static/image8.png)</span><span class="sxs-lookup"><span data-stu-id="a034f-194">[![Clicking the GridView s Delete Button Displays a Customized Confirmation Dialog Box](adding-client-side-confirmation-when-deleting-cs/_static/image9.png)](adding-client-side-confirmation-when-deleting-cs/_static/image8.png)</span></span>

<span data-ttu-id="a034f-195">**Figura 4**: clicar o botão de exclusão do s GridView exibe uma caixa de diálogo de confirmação personalizado ([clique para exibir a imagem em tamanho normal](adding-client-side-confirmation-when-deleting-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="a034f-195">**Figure 4**: Clicking the GridView s Delete Button Displays a Customized Confirmation Dialog Box ([Click to view full-size image](adding-client-side-confirmation-when-deleting-cs/_static/image10.png))</span></span>


## <a name="using-templatefields"></a><span data-ttu-id="a034f-196">Usando TemplateFields</span><span class="sxs-lookup"><span data-stu-id="a034f-196">Using TemplateFields</span></span>

<span data-ttu-id="a034f-197">Uma das desvantagens do CommandField é que seus botões devem ser acessados por meio de indexação e se o objeto resultante deve ser convertido para o tipo apropriado de botão (botão, LinkButton ou ImageButton).</span><span class="sxs-lookup"><span data-stu-id="a034f-197">One of the disadvantages of the CommandField is that its buttons must be accessed through indexing and that the resulting object must be cast to the appropriate button type (Button, LinkButton, or ImageButton).</span></span> <span data-ttu-id="a034f-198">Usando "magic números" e tipos embutidos convida problemas que não podem ser descobertos até o tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="a034f-198">Using "magic numbers" and hard-coded types invites problems that cannot be discovered until runtime.</span></span> <span data-ttu-id="a034f-199">Por exemplo, se você ou outro desenvolvedor, adiciona novos botões CommandField em algum momento no futuro (por exemplo, um botão de edição) ou alterações a `ButtonType` propriedade, o código existente continuará compilando sem erro, mas visitar a página pode causar uma exceção ou um comportamento inesperado, dependendo de como o código foi criado e quais alterações foram feitas.</span><span class="sxs-lookup"><span data-stu-id="a034f-199">For example, if you, or another developer, adds new buttons to the CommandField at some point in the future (such as an Edit button) or changes the `ButtonType` property, the existing code will still compile without error, but visiting the page may cause an exception or unexpected behavior, depending on how your code was written and what changes were made.</span></span>

<span data-ttu-id="a034f-200">Uma abordagem alternativa é converter a GridView e DetailsView s CommandFields em TemplateFields.</span><span class="sxs-lookup"><span data-stu-id="a034f-200">An alternative approach is to convert the GridView and DetailsView s CommandFields into TemplateFields.</span></span> <span data-ttu-id="a034f-201">Isso irá gerar um TemplateField com um `ItemTemplate` que possui um LinkButton (ou botão ou ImageButton) para cada botão de CommandField.</span><span class="sxs-lookup"><span data-stu-id="a034f-201">This will generate a TemplateField with an `ItemTemplate` that has a LinkButton (or Button or ImageButton) for each button in the CommandField.</span></span> <span data-ttu-id="a034f-202">Esses botões `OnClientClick` propriedades podem ser atribuídas declarativamente, como podemos viu FormView ou podem ser acessados por meio de programação no respectivo `DataBound` manipulador de eventos usando o seguinte padrão:</span><span class="sxs-lookup"><span data-stu-id="a034f-202">These buttons `OnClientClick` properties can be assigned declaratively, as we saw with the FormView, or can be programmatically accessed in the appropriate `DataBound` event handler using the following pattern:</span></span>


[!code-csharp[Main](adding-client-side-confirmation-when-deleting-cs/samples/sample7.cs)]

<span data-ttu-id="a034f-203">Onde *controlID* é o valor do botão s `ID` propriedade.</span><span class="sxs-lookup"><span data-stu-id="a034f-203">Where *controlID* is the value of the button s `ID` property.</span></span> <span data-ttu-id="a034f-204">Enquanto esse padrão ainda requer um tipo embutido para a conversão, ele remove a necessidade de indexação, permitindo o layout alterar sem resultando em um erro de tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="a034f-204">While this pattern still requires a hard-coded type for the cast, it removes the need for indexing, allowing for the layout to change without resulting in a runtime error.</span></span>

## <a name="summary"></a><span data-ttu-id="a034f-205">Resumo</span><span class="sxs-lookup"><span data-stu-id="a034f-205">Summary</span></span>

<span data-ttu-id="a034f-206">O JavaScript `confirm(string)` função é uma técnica normalmente usada para controlar fluxo de trabalho de envio de formulário.</span><span class="sxs-lookup"><span data-stu-id="a034f-206">The JavaScript `confirm(string)` function is a commonly used technique for controlling form submission workflow.</span></span> <span data-ttu-id="a034f-207">Quando executado, a função exibirá uma caixa de diálogo modal, no lado do cliente que inclui dois botões Okey e Cancelar.</span><span class="sxs-lookup"><span data-stu-id="a034f-207">When executed, the function displays a modal, client-side dialog box that includes two buttons, OK and Cancel.</span></span> <span data-ttu-id="a034f-208">Se o usuário clica em Okey, o `confirm(string)` função retorna `true`; clicar em Cancelar volta `false`.</span><span class="sxs-lookup"><span data-stu-id="a034f-208">If the user clicks OK, the `confirm(string)` function returns `true`; clicking Cancel returns `false`.</span></span> <span data-ttu-id="a034f-209">Essa funcionalidade, juntamente com um comportamento de navegador s para cancelar o envio de um formulário se um manipulador de eventos durante o processo de envio retorna `false`, pode ser usado para exibir uma caixa de mensagem de confirmação ao excluir um registro.</span><span class="sxs-lookup"><span data-stu-id="a034f-209">This functionality, coupled with a browser s behavior to cancel a form submission if an event handler during the submission process returns `false`, can be used to display a confirmation messagebox when deleting a record.</span></span>

<span data-ttu-id="a034f-210">O `confirm(string)` função pode ser associada um botão Web controle s cliente `onclick` manipulador de eventos por meio do controle s `OnClientClick` propriedade.</span><span class="sxs-lookup"><span data-stu-id="a034f-210">The `confirm(string)` function can be associated with a Button Web control s client-side `onclick` event handler through the control s `OnClientClick` property.</span></span> <span data-ttu-id="a034f-211">Ao trabalhar com um botão de exclusão em um modelo - o em um dos modelos FormView s ou em um TemplateField no DetailsView ou GridView - essa propriedade pode ser definida declarativamente ou por meio de programação, como visto neste tutorial.</span><span class="sxs-lookup"><span data-stu-id="a034f-211">When working with a Delete button in a template - either in one of the FormView s templates or in a TemplateField in the DetailsView or GridView - this property can be set either declaratively or programmatically, as we saw in this tutorial.</span></span>

<span data-ttu-id="a034f-212">Boa programação!</span><span class="sxs-lookup"><span data-stu-id="a034f-212">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="a034f-213">Sobre o autor</span><span class="sxs-lookup"><span data-stu-id="a034f-213">About the Author</span></span>

<span data-ttu-id="a034f-214">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor de sete livros sobre ASP/ASP.NET e fundador da [4GuysFromRolla. com](http://www.4guysfromrolla.com), trabalha com tecnologias Microsoft Web desde 1998.</span><span class="sxs-lookup"><span data-stu-id="a034f-214">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="a034f-215">Scott funciona como um consultor independente, instrutor e gravador.</span><span class="sxs-lookup"><span data-stu-id="a034f-215">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="a034f-216">Seu livro mais recente é [ *Sams ensinar por conta própria ASP.NET 2.0 nas 24 horas*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="a034f-216">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="a034f-217">Ele pode ser contatado em [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) ou por meio de seu blog, que pode ser encontrado em [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="a034f-217">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com) or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="a034f-218">[Anterior](implementing-optimistic-concurrency-cs.md)
> [Próximo](limiting-data-modification-functionality-based-on-the-user-cs.md)</span><span class="sxs-lookup"><span data-stu-id="a034f-218">[Previous](implementing-optimistic-concurrency-cs.md)
[Next](limiting-data-modification-functionality-based-on-the-user-cs.md)</span></span>
