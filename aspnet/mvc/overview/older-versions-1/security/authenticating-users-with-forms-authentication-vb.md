---
uid: mvc/overview/older-versions-1/security/authenticating-users-with-forms-authentication-vb
title: Autenticar usuários com a forma de autenticação (VB) | Microsoft Docs
author: microsoft
description: Saiba como usar o atributo [autorizar] senha proteger páginas específicas em seu aplicativo MVC. Você aprenderá a usar a administração de Site da Web também...
ms.author: aspnetcontent
manager: wpickett
ms.date: 01/27/2009
ms.topic: article
ms.assetid: 4341f5b1-6fe5-44c5-8b8a-18fa84f80177
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/older-versions-1/security/authenticating-users-with-forms-authentication-vb
msc.type: authoredcontent
ms.openlocfilehash: 0ff425a4c9728de2eec3d0c94e76cb51a15de487
ms.sourcegitcommit: f8852267f463b62d7f975e56bea9aa3f68fbbdeb
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/06/2018
---
<a name="authenticating-users-with-forms-authentication-vb"></a><span data-ttu-id="c96ff-104">Autenticar usuários com a autenticação de formulários (VB)</span><span class="sxs-lookup"><span data-stu-id="c96ff-104">Authenticating Users with Forms Authentication (VB)</span></span>
====================
<span data-ttu-id="c96ff-105">por [Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="c96ff-105">by [Microsoft](https://github.com/microsoft)</span></span>

> <span data-ttu-id="c96ff-106">Saiba como usar o atributo [autorizar] senha proteger páginas específicas em seu aplicativo MVC.</span><span class="sxs-lookup"><span data-stu-id="c96ff-106">Learn how to use the [Authorize] attribute to password protect particular pages in your MVC application.</span></span> <span data-ttu-id="c96ff-107">Você aprenderá a usar a ferramenta de administração de Site para criar e gerenciar usuários e funções.</span><span class="sxs-lookup"><span data-stu-id="c96ff-107">You learn how to use the Web Site Administration Tool to create and manage users and roles.</span></span> <span data-ttu-id="c96ff-108">Você também aprenderá como configurar o armazenamento de informações de conta e a função de usuário.</span><span class="sxs-lookup"><span data-stu-id="c96ff-108">You also learn how to configure where user account and role information is stored.</span></span>


<span data-ttu-id="c96ff-109">O objetivo deste tutorial é explicar como você pode usar formulários de autenticação de senha proteger os modos de exibição em seus aplicativos ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="c96ff-109">The goal of this tutorial is to explain how you can use Forms authentication to password protect the views in your ASP.NET MVC applications.</span></span> <span data-ttu-id="c96ff-110">Você aprenderá a usar a ferramenta de administração de Site para criar usuários e funções.</span><span class="sxs-lookup"><span data-stu-id="c96ff-110">You learn how to use the Web Site Administration Tool to create users and roles.</span></span> <span data-ttu-id="c96ff-111">Você também aprenderá a impedir que usuários não autorizados invocar ações do controlador.</span><span class="sxs-lookup"><span data-stu-id="c96ff-111">You also learn how to prevent unauthorized users from invoking controller actions.</span></span> <span data-ttu-id="c96ff-112">Por fim, você aprenderá a configurar onde os nomes de usuário e senhas são armazenados.</span><span class="sxs-lookup"><span data-stu-id="c96ff-112">Finally, you learn how to configure where user names and passwords are stored.</span></span>

#### <a name="using-the-web-site-administration-tool"></a><span data-ttu-id="c96ff-113">Usando a ferramenta de administração de Site</span><span class="sxs-lookup"><span data-stu-id="c96ff-113">Using the Web Site Administration Tool</span></span>

<span data-ttu-id="c96ff-114">Antes de fazermos qualquer outra coisa, deve começar criando alguns usuários e funções.</span><span class="sxs-lookup"><span data-stu-id="c96ff-114">Before we do anything else, we should start by creating some users and roles.</span></span> <span data-ttu-id="c96ff-115">É a maneira mais fácil de criar novos usuários e funções aproveitar a ferramenta de administração de Site da Web do Visual Studio 2008.</span><span class="sxs-lookup"><span data-stu-id="c96ff-115">The easiest way to create new users and roles is to take advantage of the Visual Studio 2008 Web Site Administration Tool.</span></span> <span data-ttu-id="c96ff-116">Você pode iniciar essa ferramenta ao selecionar a opção de menu **projeto, configuração de ASP.NET**.</span><span class="sxs-lookup"><span data-stu-id="c96ff-116">You can launch this tool by selecting the menu option **Project, ASP.NET Configuration**.</span></span> <span data-ttu-id="c96ff-117">Como alternativa, você pode iniciar a ferramenta de administração de Site, clicando no ícone (um pouco assustador) do martelo atingir o mundo que aparece na parte superior da janela do Gerenciador de soluções (consulte a Figura 1).</span><span class="sxs-lookup"><span data-stu-id="c96ff-117">Alternatively, you can launch the Web Site Administration Tool by clicking the (somewhat scary) icon of the hammer hitting the world that appears at the top of the Solution Explorer window (see Figure 1).</span></span>

<span data-ttu-id="c96ff-118">**Figura 1 – iniciar a ferramenta de administração de Site**</span><span class="sxs-lookup"><span data-stu-id="c96ff-118">**Figure 1 – Launching the Web Site Administration Tool**</span></span>

![clip_image002[4]](authenticating-users-with-forms-authentication-vb/_static/image1.jpg)

<span data-ttu-id="c96ff-120">Em que a ferramenta de administração de Site, criar novos usuários e funções, selecionando a guia Segurança. Clique o **criar usuário** link para criar um novo usuário chamado Stephen (consulte a Figura 2).</span><span class="sxs-lookup"><span data-stu-id="c96ff-120">Within the Web Site Administration Tool, you create new users and roles by selecting the Security tab. Click the **Create user** link to create a new user named Stephen (see Figure 2).</span></span> <span data-ttu-id="c96ff-121">Fornecer ao usuário Stephen qualquer senha que você deseja (por exemplo, *segredo*).</span><span class="sxs-lookup"><span data-stu-id="c96ff-121">Provide the Stephen user with any password that you want (for example, *secret*).</span></span>

<span data-ttu-id="c96ff-122">**Figura 2 – criar um novo usuário**</span><span class="sxs-lookup"><span data-stu-id="c96ff-122">**Figure 2 – Creating a new user**</span></span>

![clip_image004[4]](authenticating-users-with-forms-authentication-vb/_static/image2.jpg)

<span data-ttu-id="c96ff-124">Você pode criar novas funções primeiro habilitar funções e definir uma ou mais funções.</span><span class="sxs-lookup"><span data-stu-id="c96ff-124">You create new roles by first enabling roles and defining one or more roles.</span></span> <span data-ttu-id="c96ff-125">Habilitar funções clicando o **Habilitar funções** link.</span><span class="sxs-lookup"><span data-stu-id="c96ff-125">Enable roles by clicking the **Enable roles** link.</span></span> <span data-ttu-id="c96ff-126">Em seguida, crie uma função chamada *administradores* clicando o **criar ou gerenciar funções** link (consulte a Figura 3).</span><span class="sxs-lookup"><span data-stu-id="c96ff-126">Next, create a role named *Administrators* by clicking the **Create or Manage roles** link (see Figure 3).</span></span>

<span data-ttu-id="c96ff-127">**Figura 3 – Criando uma nova função**</span><span class="sxs-lookup"><span data-stu-id="c96ff-127">**Figure 3 – Creating a new role**</span></span>

![clip_image006[4]](authenticating-users-with-forms-authentication-vb/_static/image3.jpg)

<span data-ttu-id="c96ff-129">Finalmente, crie um novo usuário chamado Sally e associar Sally com a função de administradores clicando no link de Create User e selecionando os administradores ao criar Sally (consulte a Figura 4).</span><span class="sxs-lookup"><span data-stu-id="c96ff-129">Finally, create a new user named Sally and associate Sally with the Administrators role by clicking the Create User link and selecting Administrators when creating Sally (see Figure 4).</span></span>

<span data-ttu-id="c96ff-130">**Figura 4 – adicionar um usuário a uma função**</span><span class="sxs-lookup"><span data-stu-id="c96ff-130">**Figure 4 – Adding a user to a role**</span></span>

![clip_image008[4]](authenticating-users-with-forms-authentication-vb/_static/image4.jpg)

<span data-ttu-id="c96ff-132">Quando todos os resolvido e pronto, você deve ter dois novos usuários nomeados Stephen e Sally.</span><span class="sxs-lookup"><span data-stu-id="c96ff-132">When all is said and done, you should have two new users named Stephen and Sally.</span></span> <span data-ttu-id="c96ff-133">Você também deve ter uma nova função chamada administradores.</span><span class="sxs-lookup"><span data-stu-id="c96ff-133">You should also have a new role named Administrators.</span></span> <span data-ttu-id="c96ff-134">Sally é um membro da função de administradores e Stephen não é.</span><span class="sxs-lookup"><span data-stu-id="c96ff-134">Sally is a member of the Administrators role and Stephen is not.</span></span>

#### <a name="requiring-authorization"></a><span data-ttu-id="c96ff-135">Exigir autorização</span><span class="sxs-lookup"><span data-stu-id="c96ff-135">Requiring Authorization</span></span>

<span data-ttu-id="c96ff-136">Você pode exigir que um usuário seja autenticado antes do usuário invoca uma ação do controlador, adicionando o atributo [autorizar] para a ação.</span><span class="sxs-lookup"><span data-stu-id="c96ff-136">You can require a user to be authenticated before the user invokes a controller action by adding the [Authorize] attribute to the action.</span></span> <span data-ttu-id="c96ff-137">Você pode aplicar o atributo [autorizar] para uma ação de controlador individuais ou você pode aplicar esse atributo a uma classe inteira de controlador.</span><span class="sxs-lookup"><span data-stu-id="c96ff-137">You can apply the [Authorize] attribute to an individual controller action or you can apply this attribute to an entire controller class.</span></span>

<span data-ttu-id="c96ff-138">Por exemplo, o controlador na listagem 1 expõe uma ação chamada CompanySecrets().</span><span class="sxs-lookup"><span data-stu-id="c96ff-138">For example, the controller in Listing 1 exposes an action named CompanySecrets().</span></span> <span data-ttu-id="c96ff-139">Porque essa ação está decorada com o atributo [autorizar], essa ação não pode ser invocada, a menos que um usuário é autenticado.</span><span class="sxs-lookup"><span data-stu-id="c96ff-139">Because this action is decorated with the [Authorize] attribute, this action cannot be invoked unless a user is authenticated.</span></span>

<span data-ttu-id="c96ff-140">**Listando 1 – Controllers\HomeController.vb**</span><span class="sxs-lookup"><span data-stu-id="c96ff-140">**Listing 1 – Controllers\HomeController.vb**</span></span>

[!code-vb[Main](authenticating-users-with-forms-authentication-vb/samples/sample1.vb)]

<span data-ttu-id="c96ff-141">Se você chama a ação de CompanySecrets() digitando a URL /Home/CompanySecrets na barra de endereços do navegador e você não for um usuário autenticado, você será redirecionado para o modo de logon automaticamente (consulte a Figura 5).</span><span class="sxs-lookup"><span data-stu-id="c96ff-141">If you invoke the CompanySecrets() action by entering the URL /Home/CompanySecrets in the address bar of your browser, and you are not an authenticated user, then you will be redirected to the Login view automatically (see Figure 5).</span></span>

<span data-ttu-id="c96ff-142">**Figura 5 – o modo de exibição de logon**</span><span class="sxs-lookup"><span data-stu-id="c96ff-142">**Figure 5 – The Login view**</span></span>

![clip_image010[4]](authenticating-users-with-forms-authentication-vb/_static/image5.jpg)

<span data-ttu-id="c96ff-144">Você pode usar o modo de exibição de logon para inserir seu nome de usuário e senha.</span><span class="sxs-lookup"><span data-stu-id="c96ff-144">You can use the Login view to enter your user name and password.</span></span> <span data-ttu-id="c96ff-145">Se você não for um usuário registrado, você pode clicar no **registrar** link para navegar até o registro (consulte a Figura 6).</span><span class="sxs-lookup"><span data-stu-id="c96ff-145">If you are not a registered user then you can click the **register** link to navigate to the Register view (see Figure 6).</span></span> <span data-ttu-id="c96ff-146">Você pode usar o modo de exibição de registro para criar uma nova conta de usuário.</span><span class="sxs-lookup"><span data-stu-id="c96ff-146">You can use the Register view to create a new user account.</span></span>

<span data-ttu-id="c96ff-147">**Figura 6 – o modo de exibição de registro**</span><span class="sxs-lookup"><span data-stu-id="c96ff-147">**Figure 6 – The Register view**</span></span>

![clip_image012](authenticating-users-with-forms-authentication-vb/_static/image6.jpg)

<span data-ttu-id="c96ff-149">Depois que você fizer logon, você pode ver o CompanySecrets (consulte a Figura 7).</span><span class="sxs-lookup"><span data-stu-id="c96ff-149">After you successfully log in, you can see the CompanySecrets view (see Figure 7).</span></span> <span data-ttu-id="c96ff-150">Por padrão, você continuará a ser registrada até que você feche a janela do navegador.</span><span class="sxs-lookup"><span data-stu-id="c96ff-150">By default, you will continue to be logged in until you close your browser window.</span></span>

<span data-ttu-id="c96ff-151">**Figura 7 – o modo de exibição CompanySecrets**</span><span class="sxs-lookup"><span data-stu-id="c96ff-151">**Figure 7 – The CompanySecrets view**</span></span>

![clip_image014](authenticating-users-with-forms-authentication-vb/_static/image7.jpg)

#### <a name="authorizing-by-user-name-or-user-role"></a><span data-ttu-id="c96ff-153">Autorizando por nome de usuário ou função de usuário</span><span class="sxs-lookup"><span data-stu-id="c96ff-153">Authorizing by User Name or User Role</span></span>

<span data-ttu-id="c96ff-154">Você pode usar o atributo [autorizar] para restringir o acesso a uma ação do controlador para um conjunto específico de usuários ou de um determinado conjunto de funções de usuário.</span><span class="sxs-lookup"><span data-stu-id="c96ff-154">You can use the [Authorize] attribute to restrict access to a controller action to a particular set of users or a particular set of user roles.</span></span> <span data-ttu-id="c96ff-155">Por exemplo, o controlador Home modificado na listagem 2 contém duas novas ações denominadas StephenSecrets() e AdministratorSecrets().</span><span class="sxs-lookup"><span data-stu-id="c96ff-155">For example, the modified Home controller in Listing 2 contains two new actions named StephenSecrets() and AdministratorSecrets().</span></span>

<span data-ttu-id="c96ff-156">**A listagem 2 – Controllers\HomeController.vb**</span><span class="sxs-lookup"><span data-stu-id="c96ff-156">**Listing 2 – Controllers\HomeController.vb**</span></span>

[!code-vb[Main](authenticating-users-with-forms-authentication-vb/samples/sample2.vb)]

<span data-ttu-id="c96ff-157">Somente um usuário com o nome de usuário Stephen pode chamar a ação de StephenSecrets().</span><span class="sxs-lookup"><span data-stu-id="c96ff-157">Only a user with the user name Stephen can invoke the StephenSecrets() action.</span></span> <span data-ttu-id="c96ff-158">Todos os outros usuários ser direcionados para o modo de exibição de logon.</span><span class="sxs-lookup"><span data-stu-id="c96ff-158">All other users get redirected to the Login view.</span></span> <span data-ttu-id="c96ff-159">A propriedade de usuários aceita uma lista separada por vírgulas de nomes de conta de usuário.</span><span class="sxs-lookup"><span data-stu-id="c96ff-159">The Users property accepts a comma separated list of user account names.</span></span>

<span data-ttu-id="c96ff-160">Somente os usuários na função de administradores podem chamar a ação de AdministratorSecrets().</span><span class="sxs-lookup"><span data-stu-id="c96ff-160">Only users in the Administrators role can invoke the AdministratorSecrets() action.</span></span> <span data-ttu-id="c96ff-161">Por exemplo, como Sally é um membro do grupo Administradores, ela pode chamar a ação de AdministratorSecrets().</span><span class="sxs-lookup"><span data-stu-id="c96ff-161">For example, because Sally is a member of the Administrators group, she can invoke the AdministratorSecrets() action.</span></span> <span data-ttu-id="c96ff-162">Todos os outros usuários ser direcionados para o modo de exibição de logon.</span><span class="sxs-lookup"><span data-stu-id="c96ff-162">All other users get redirected to the Login view.</span></span> <span data-ttu-id="c96ff-163">A propriedade funções aceita uma lista separada por vírgulas de nomes de função.</span><span class="sxs-lookup"><span data-stu-id="c96ff-163">The Roles property accepts a comma separated list of role names.</span></span>

#### <a name="configuring-authentication"></a><span data-ttu-id="c96ff-164">Configuração de autenticação</span><span class="sxs-lookup"><span data-stu-id="c96ff-164">Configuring Authentication</span></span>

<span data-ttu-id="c96ff-165">Neste ponto, você deve estar se perguntando onde as informações de conta e a função de usuário estão sendo armazenadas.</span><span class="sxs-lookup"><span data-stu-id="c96ff-165">At this point, you might be wondering where the user account and role information is being stored.</span></span> <span data-ttu-id="c96ff-166">Por padrão, as informações são armazenadas no banco de dados (RANU) SQL Express Aspnetdb nomeada localizado no aplicativo do seu aplicativo MVC\_pasta de dados.</span><span class="sxs-lookup"><span data-stu-id="c96ff-166">By default, the information is stored in a (RANU) SQL Express database named ASPNETDB.mdf located in your MVC application's App\_Data folder.</span></span> <span data-ttu-id="c96ff-167">Este banco de dados é gerado automaticamente pela estrutura do ASP.NET quando você começar a usar a associação.</span><span class="sxs-lookup"><span data-stu-id="c96ff-167">This database is generated by the ASP.NET framework automatically when you start using membership.</span></span>

<span data-ttu-id="c96ff-168">Para ver o banco de dados Aspnetdb na janela do Gerenciador de soluções, você primeiro precisa selecionar a opção de menu projeto, mostrar todos os arquivos.</span><span class="sxs-lookup"><span data-stu-id="c96ff-168">In order to see the ASPNETDB.mdf database in the Solution Explorer window, you first need to select the menu option Project, Show All Files.</span></span>

<span data-ttu-id="c96ff-169">Usar o banco de dados SQL Express padrão é bom ao desenvolver um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="c96ff-169">Using the default SQL Express database is fine when developing an application.</span></span> <span data-ttu-id="c96ff-170">Muito provavelmente, no entanto, você não deseja usar o banco de dados padrão Aspnetdb para um aplicativo de produção.</span><span class="sxs-lookup"><span data-stu-id="c96ff-170">Most likely, however, you won't want to use the default ASPNETDB.mdf database for a production application.</span></span> <span data-ttu-id="c96ff-171">Nesse caso, você pode alterar onde as informações de conta de usuário são armazenadas completando as etapas a seguir:</span><span class="sxs-lookup"><span data-stu-id="c96ff-171">In that case, you can change where user account information is stored by completing the following two steps:</span></span>

1. <span data-ttu-id="c96ff-172">Adicionar os objetos de banco de dados de serviços de aplicativo para o banco de dados de produção - altere sua cadeia de caracteres de conexão do aplicativo para apontar para seu banco de dados de produção</span><span class="sxs-lookup"><span data-stu-id="c96ff-172">Add the Application Services database objects to your production database - Change your application connection string to point to your production database</span></span>

<span data-ttu-id="c96ff-173">A primeira etapa é adicionar todos os objetos de banco de dados necessários (tabelas e procedimentos armazenados) para seu banco de dados de produção.</span><span class="sxs-lookup"><span data-stu-id="c96ff-173">The first step is to add all of the necessary database objects (tables and stored procedures) to your production database.</span></span> <span data-ttu-id="c96ff-174">É a maneira mais fácil para adicionar esses objetos para um novo banco de dados aproveitar o Assistente de instalação do ASP.NET SQL Server (consulte a Figura 8).</span><span class="sxs-lookup"><span data-stu-id="c96ff-174">The easiest way to add these objects to a new database is to take advantage of the ASP.NET SQL Server Setup Wizard (see Figure 8).</span></span> <span data-ttu-id="c96ff-175">Você pode iniciar essa ferramenta, abra o Prompt de comando do Visual Studio 2008 no grupo de programas do Microsoft Visual Studio 2008 e executando o seguinte comando no prompt de comando:</span><span class="sxs-lookup"><span data-stu-id="c96ff-175">You can launch this tool by opening the Visual Studio 2008 Command Prompt from the Microsoft Visual Studio 2008 program group and executing the following command from the command prompt:</span></span>

<span data-ttu-id="c96ff-176">aspnet\_regsql</span><span class="sxs-lookup"><span data-stu-id="c96ff-176">aspnet\_regsql</span></span>

<span data-ttu-id="c96ff-177">**Figura 8 – o Assistente de instalação do servidor SQL do ASP.NET**</span><span class="sxs-lookup"><span data-stu-id="c96ff-177">**Figure 8 – The ASP.NET SQL Server Setup Wizard**</span></span>

![clip_image016](authenticating-users-with-forms-authentication-vb/_static/image8.jpg)

<span data-ttu-id="c96ff-179">O Assistente de instalação do ASP.NET SQL Server permite que você selecione um banco de dados do SQL Server em sua rede e instalar todos os objetos de banco de dados necessários para os serviços do aplicativo ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="c96ff-179">The ASP.NET SQL Server Setup Wizard enables you to select a SQL Server database on your network and install all of the database objects required by the ASP.NET application services.</span></span> <span data-ttu-id="c96ff-180">O servidor de banco de dados não é necessário a ser localizado no computador local.</span><span class="sxs-lookup"><span data-stu-id="c96ff-180">The database server is not required to be located on your local machine.</span></span>

> [!NOTE]
> <span data-ttu-id="c96ff-181">Se você não quiser usar o Assistente de instalação do ASP.NET SQL Server, você pode encontrar scripts SQL para adicionar os objetos de banco de dados de serviços de aplicativo na seguinte pasta:</span><span class="sxs-lookup"><span data-stu-id="c96ff-181">If you don't want to use the ASP.NET SQL Server Setup Wizard, then you can find SQL scripts for adding the application services database objects in the following folder:</span></span>
> 
> 
> <span data-ttu-id="c96ff-182">C:\Windows\Microsoft.NET\Framework\v2.0.50727</span><span class="sxs-lookup"><span data-stu-id="c96ff-182">C:\Windows\Microsoft.NET\Framework\v2.0.50727</span></span>


<span data-ttu-id="c96ff-183">Depois de criar os objetos de banco de dados necessários, você precisa modificar a conexão de banco de dados usado pelo seu aplicativo MVC.</span><span class="sxs-lookup"><span data-stu-id="c96ff-183">After you create the necessary database objects, you need to modify the database connection used by your MVC application.</span></span> <span data-ttu-id="c96ff-184">Modifique a cadeia de conexão do ApplicationServices no arquivo de configuração (Web. config) da web para que ele aponte para o banco de dados de produção.</span><span class="sxs-lookup"><span data-stu-id="c96ff-184">Modify the ApplicationServices connection string in your web configuration (web.config) file so that it points to the production database.</span></span> <span data-ttu-id="c96ff-185">Por exemplo, a conexão modificado na listagem 3 aponta para um banco de dados denominado MyProductionDB (a cadeia de conexão do ApplicationServices original foi comentada).</span><span class="sxs-lookup"><span data-stu-id="c96ff-185">For example, the modified connection in Listing 3 points to a database named MyProductionDB (the original ApplicationServices connection string has been commented out).</span></span>

<span data-ttu-id="c96ff-186">**A listagem 3 – Web. config**</span><span class="sxs-lookup"><span data-stu-id="c96ff-186">**Listing 3 – Web.config**</span></span>

[!code-xml[Main](authenticating-users-with-forms-authentication-vb/samples/sample3.xml)]

#### <a name="configuring-database-permissions"></a><span data-ttu-id="c96ff-187">Configurar permissões de banco de dados</span><span class="sxs-lookup"><span data-stu-id="c96ff-187">Configuring Database Permissions</span></span>

<span data-ttu-id="c96ff-188">Se você usar a segurança integrada para se conectar ao banco de dados, em seguida, você precisará adicionar a conta de usuário correta do Windows como um logon para o banco de dados.</span><span class="sxs-lookup"><span data-stu-id="c96ff-188">If you use Integrated Security to connect to your database then you will need to add the correct Windows user account as a login to your database.</span></span> <span data-ttu-id="c96ff-189">A conta correta depende se você estiver usando o ASP.NET Development Server ou serviços de informações da Internet como seu servidor web.</span><span class="sxs-lookup"><span data-stu-id="c96ff-189">The correct account depends on whether you are using the ASP.NET Development Server or Internet Information Services as your web server.</span></span> <span data-ttu-id="c96ff-190">A conta de usuário correto também depende de seu sistema operacional.</span><span class="sxs-lookup"><span data-stu-id="c96ff-190">The correct user account also depends on your operating system.</span></span>

<span data-ttu-id="c96ff-191">Se você estiver usando o ASP.NET Development Server (o servidor de web padrão usado pelo Visual Studio), em seguida, seu aplicativo executa no contexto da conta de usuário do Windows.</span><span class="sxs-lookup"><span data-stu-id="c96ff-191">If you are using the ASP.NET Development Server (the default web server used by Visual Studio) then your application executes within the context of your Windows user account.</span></span> <span data-ttu-id="c96ff-192">Nesse caso, você precisará adicionar sua conta de usuário do Windows como um logon de servidor de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="c96ff-192">In that case, you need to add your Windows user account as a database server login.</span></span>

<span data-ttu-id="c96ff-193">Como alternativa, se você estiver usando serviços de informações da Internet, em seguida, você precisa adicionar a conta ASPNET ou a conta de serviço de rede/Autoridade NT como um logon de servidor de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="c96ff-193">Alternatively, if you are using Internet Information Services then you need to add either the ASPNET account or the NT AUTHORITY/NETWORK SERVICE account as a database server login.</span></span> <span data-ttu-id="c96ff-194">Se você estiver usando o Windows XP, adicione a conta ASPNET como um logon para o banco de dados.</span><span class="sxs-lookup"><span data-stu-id="c96ff-194">If you are using Windows XP then add the ASPNET account as a login to your database.</span></span> <span data-ttu-id="c96ff-195">Se você estiver usando um sistema operacional mais recente, como o Windows Vista ou Windows Server 2008, em seguida, adicione a conta de serviço de rede/Autoridade NT como o logon de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="c96ff-195">If you are using a more recent operating system, such as Windows Vista or Windows Server 2008, then add the NT AUTHORITY/NETWORK SERVICE account as the database login.</span></span>

<span data-ttu-id="c96ff-196">Você pode adicionar uma nova conta de usuário para seu banco de dados usando o Microsoft SQL Server Management Studio (consulte a Figura 9).</span><span class="sxs-lookup"><span data-stu-id="c96ff-196">You can add a new user account to your database by using Microsoft SQL Server Management Studio (see Figure 9).</span></span>

<span data-ttu-id="c96ff-197">**Figura 9 – Criando um novo logon do Microsoft SQL Server**</span><span class="sxs-lookup"><span data-stu-id="c96ff-197">**Figure 9 – Creating a new Microsoft SQL Server login**</span></span>

![clip_image018](authenticating-users-with-forms-authentication-vb/_static/image9.jpg)

<span data-ttu-id="c96ff-199">Depois de criar o logon necessário, é necessário mapear o logon para um usuário de banco de dados com as funções de banco de dados correto.</span><span class="sxs-lookup"><span data-stu-id="c96ff-199">After you create the required login, you need to map the login to a database user with the right database roles.</span></span> <span data-ttu-id="c96ff-200">Clique duas vezes o logon e selecione a guia mapeamento de usuário. Selecione uma ou mais funções de banco de dados de serviços de aplicativo.</span><span class="sxs-lookup"><span data-stu-id="c96ff-200">Double-click the login and select the User Mapping tab. Select one or more application services database roles.</span></span> <span data-ttu-id="c96ff-201">Por exemplo, para autenticar usuários, você precisa habilitar o aspnet\_associação\_BasicAccess função de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="c96ff-201">For example, in order to authenticate users, you need to enable the aspnet\_Membership\_BasicAccess database role.</span></span> <span data-ttu-id="c96ff-202">Para criar novos usuários, você precisa habilitar o aspnet\_associação\_FullAccess função de banco de dados (consulte a Figura 10).</span><span class="sxs-lookup"><span data-stu-id="c96ff-202">In order to create new users, you need to enable the aspnet\_Membership\_FullAccess database role (see Figure 10).</span></span>

<span data-ttu-id="c96ff-203">**Figura 10 – Adicionando funções de banco de dados de serviços de aplicativo**</span><span class="sxs-lookup"><span data-stu-id="c96ff-203">**Figure 10 – Adding Application Services database roles**</span></span>

![clip_image020](authenticating-users-with-forms-authentication-vb/_static/image10.jpg)

#### <a name="summary"></a><span data-ttu-id="c96ff-205">Resumo</span><span class="sxs-lookup"><span data-stu-id="c96ff-205">Summary</span></span>

<span data-ttu-id="c96ff-206">Neste tutorial, você aprendeu a usar a autenticação de formulários ao compilar um aplicativo ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="c96ff-206">In this tutorial, you learned how to use Forms authentication when building an ASP.NET MVC application.</span></span> <span data-ttu-id="c96ff-207">Primeiro, você aprendeu a criar novos usuários e funções, tirando proveito da ferramenta de administração de Site da Web.</span><span class="sxs-lookup"><span data-stu-id="c96ff-207">First, you learned how to create new users and roles by taking advantage of the Web Site Administration Tool.</span></span> <span data-ttu-id="c96ff-208">Em seguida, você aprendeu a usar o atributo [autorizar] para impedir que usuários não autorizados invocar ações do controlador.</span><span class="sxs-lookup"><span data-stu-id="c96ff-208">Next, you learned how to use the [Authorize] attribute to prevent unauthorized users from invoking controller actions.</span></span> <span data-ttu-id="c96ff-209">Por fim, você aprendeu como configurar seu aplicativo MVC para armazenar informações de usuário e funções em um banco de dados de produção.</span><span class="sxs-lookup"><span data-stu-id="c96ff-209">Finally, you learned how to configure your MVC application to store user and role information in a production database.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="c96ff-210">[Anterior](preventing-javascript-injection-attacks-cs.md)
> [Próximo](authenticating-users-with-windows-authentication-vb.md)</span><span class="sxs-lookup"><span data-stu-id="c96ff-210">[Previous](preventing-javascript-injection-attacks-cs.md)
[Next](authenticating-users-with-windows-authentication-vb.md)</span></span>
