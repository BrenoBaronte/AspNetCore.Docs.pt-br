---
uid: mvc/overview/older-versions-1/deployment/using-asp-net-mvc-with-different-versions-of-iis-cs
title: "Usando o ASP.NET MVC com diferentes versões do IIS (c#) | Microsoft Docs"
author: microsoft
description: "Neste tutorial, você aprenderá como usar o ASP.NET MVC e roteamento de URL, com diferentes versões do Internet Information Services. Você aprenderá estratégias diferentes..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 08/19/2008
ms.topic: article
ms.assetid: b0cf4a34-2c1d-4717-bb54-ff029e722990
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/older-versions-1/deployment/using-asp-net-mvc-with-different-versions-of-iis-cs
msc.type: authoredcontent
ms.openlocfilehash: fdd024aba399f26e9ef7d01a00078cd3d5750d94
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/10/2017
---
<a name="using-aspnet-mvc-with-different-versions-of-iis-c"></a><span data-ttu-id="3107f-104">Usando o ASP.NET MVC com diferentes versões do IIS (c#)</span><span class="sxs-lookup"><span data-stu-id="3107f-104">Using ASP.NET MVC with Different Versions of IIS (C#)</span></span>
====================
<span data-ttu-id="3107f-105">por [Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="3107f-105">by [Microsoft](https://github.com/microsoft)</span></span>

> <span data-ttu-id="3107f-106">Neste tutorial, você aprenderá como usar o ASP.NET MVC e roteamento de URL, com diferentes versões do Internet Information Services.</span><span class="sxs-lookup"><span data-stu-id="3107f-106">In this tutorial, you learn how to use ASP.NET MVC, and URL Routing, with different versions of Internet Information Services.</span></span> <span data-ttu-id="3107f-107">Você aprenderá diferentes estratégias para usar o ASP.NET MVC com versões anteriores do IIS, IIS 6.0 e IIS 7.0 (modo clássico).</span><span class="sxs-lookup"><span data-stu-id="3107f-107">You learn different strategies for using ASP.NET MVC with IIS 7.0 (classic mode), IIS 6.0, and earlier versions of IIS.</span></span>


<span data-ttu-id="3107f-108">A estrutura ASP.NET MVC depende de roteamento do ASP.NET para rotear solicitações de navegador para ações do controlador.</span><span class="sxs-lookup"><span data-stu-id="3107f-108">The ASP.NET MVC framework depends on ASP.NET Routing to route browser requests to controller actions.</span></span> <span data-ttu-id="3107f-109">Para tirar proveito de roteamento do ASP.NET, você talvez precise executar etapas adicionais de configuração em seu servidor web.</span><span class="sxs-lookup"><span data-stu-id="3107f-109">In order to take advantage of ASP.NET Routing, you might have to perform additional configuration steps on your web server.</span></span> <span data-ttu-id="3107f-110">Tudo depende da versão do Internet Information Services (IIS) e o modo para seu aplicativo de processamento da solicitação.</span><span class="sxs-lookup"><span data-stu-id="3107f-110">It all depends on the version of Internet Information Services (IIS) and the request processing mode for your application.</span></span>

<span data-ttu-id="3107f-111">Aqui está um resumo das versões diferentes do IIS:</span><span class="sxs-lookup"><span data-stu-id="3107f-111">Here's a summary of the different versions of IIS:</span></span>

- <span data-ttu-id="3107f-112">O IIS 7.0 (modo integrado) - nenhuma configuração especial necessária usar o roteamento do ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="3107f-112">IIS 7.0 (integrated mode) - No special configuration necessary to use ASP.NET Routing.</span></span>
- <span data-ttu-id="3107f-113">O IIS 7.0 (modo clássico) – você precisa executar configuração especial para usar o roteamento do ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="3107f-113">IIS 7.0 (classic mode) - You need to perform special configuration to use ASP.NET Routing.</span></span>
- <span data-ttu-id="3107f-114">IIS 6.0 ou abaixo - você precisa executar configuração especial para usar o roteamento do ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="3107f-114">IIS 6.0 or below - You need to perform special configuration to use ASP.NET Routing.</span></span>

<span data-ttu-id="3107f-115">A versão mais recente do IIS é a versão 7.5 (no Win7).</span><span class="sxs-lookup"><span data-stu-id="3107f-115">The latest version of IIS is version 7.5 (on Win7).</span></span> <span data-ttu-id="3107f-116">IIS 7 do IIS é incluído com o Windows Server 2008 e VISTA SP1 e superior.</span><span class="sxs-lookup"><span data-stu-id="3107f-116">IIS 7 of IIS is included with Windows Server 2008 AND VISTA/SP1 and higher.</span></span> <span data-ttu-id="3107f-117">Você também pode instalar o IIS 7.0 em qualquer versão do sistema operacional Vista exceto Home Basic (consulte [https://technet.microsoft.com/en-us/library/cc731179%28WS.10%29.aspx](https://technet.microsoft.com/en-us/library/cc731179%28WS.10%29.aspx)).</span><span class="sxs-lookup"><span data-stu-id="3107f-117">You also can install IIS 7.0 on any version of the Vista operating system except Home Basic (see [https://technet.microsoft.com/en-us/library/cc731179%28WS.10%29.aspx](https://technet.microsoft.com/en-us/library/cc731179%28WS.10%29.aspx)).</span></span>

<span data-ttu-id="3107f-118">O IIS 7.0 oferece suporte a dois modos para processar solicitações.</span><span class="sxs-lookup"><span data-stu-id="3107f-118">IIS 7.0 supports two modes for processing requests.</span></span> <span data-ttu-id="3107f-119">Você pode usar o modo integrado ou modo clássico.</span><span class="sxs-lookup"><span data-stu-id="3107f-119">You can use integrated mode or classic mode.</span></span> <span data-ttu-id="3107f-120">Você não precisa executar as etapas de configuração especial ao usar o IIS 7.0 no modo integrado.</span><span class="sxs-lookup"><span data-stu-id="3107f-120">You don't need to perform any special configuration steps when using IIS 7.0 in integrated mode.</span></span> <span data-ttu-id="3107f-121">No entanto, você precisa executar uma configuração adicional ao usar o IIS 7.0 no modo clássico.</span><span class="sxs-lookup"><span data-stu-id="3107f-121">However, you do need to perform additional configuration when using IIS 7.0 in classic mode.</span></span>

<span data-ttu-id="3107f-122">Microsoft Windows Server 2003 inclui o IIS 6.0.</span><span class="sxs-lookup"><span data-stu-id="3107f-122">Microsoft Windows Server 2003 includes IIS 6.0.</span></span> <span data-ttu-id="3107f-123">Você não pode atualizar o IIS 6.0 para o IIS 7.0 ao usar o sistema operacional Windows Server 2003.</span><span class="sxs-lookup"><span data-stu-id="3107f-123">You cannot upgrade IIS 6.0 to IIS 7.0 when using the Windows Server 2003 operating system.</span></span> <span data-ttu-id="3107f-124">Ao usar o IIS 6.0, você deve executar etapas adicionais de configuração.</span><span class="sxs-lookup"><span data-stu-id="3107f-124">You must perform additional configuration steps when using IIS 6.0.</span></span>

<span data-ttu-id="3107f-125">Microsoft Windows XP Professional inclui o IIS 5.1.</span><span class="sxs-lookup"><span data-stu-id="3107f-125">Microsoft Windows XP Professional includes IIS 5.1.</span></span> <span data-ttu-id="3107f-126">Você deve executar etapas adicionais de configuração ao usar o IIS 5.1.</span><span class="sxs-lookup"><span data-stu-id="3107f-126">You must perform additional configuration steps when using IIS 5.1.</span></span>

<span data-ttu-id="3107f-127">Por fim, o Microsoft Windows 2000 e Microsoft Windows 2000 Professional inclui o IIS 5.0.</span><span class="sxs-lookup"><span data-stu-id="3107f-127">Finally, Microsoft Windows 2000 and Microsoft Windows 2000 Professional includes IIS 5.0.</span></span> <span data-ttu-id="3107f-128">Ao usar o IIS 5.0, você deve executar etapas adicionais de configuração.</span><span class="sxs-lookup"><span data-stu-id="3107f-128">You must perform additional configuration steps when using IIS 5.0.</span></span>

## <a name="integrated-versus-classic-mode"></a><span data-ttu-id="3107f-129">Integrado versus modo clássico</span><span class="sxs-lookup"><span data-stu-id="3107f-129">Integrated versus Classic Mode</span></span>

<span data-ttu-id="3107f-130">O IIS 7.0 pode processar solicitações usando dois modos de processamento de solicitação diferentes: integrado e clássico.</span><span class="sxs-lookup"><span data-stu-id="3107f-130">IIS 7.0 can process requests using two different request processing modes: integrated and classic.</span></span> <span data-ttu-id="3107f-131">Modo integrado fornece desempenho melhor e mais recursos.</span><span class="sxs-lookup"><span data-stu-id="3107f-131">Integrated mode provides better performance and more features.</span></span> <span data-ttu-id="3107f-132">Modo clássico com versões anteriores é incluído para compatibilidade com versões anteriores do IIS.</span><span class="sxs-lookup"><span data-stu-id="3107f-132">Classic mode is included for backwards compatibility with earlier versions of IIS.</span></span>

<span data-ttu-id="3107f-133">O modo de processamento de solicitação é determinado pelo pool de aplicativos.</span><span class="sxs-lookup"><span data-stu-id="3107f-133">The request processing mode is determined by the application pool.</span></span> <span data-ttu-id="3107f-134">Você pode determinar qual modo de processamento está sendo usado por um aplicativo web específico, determinando o pool de aplicativos associado ao aplicativo.</span><span class="sxs-lookup"><span data-stu-id="3107f-134">You can determine which processing mode is being used by a particular web application by determining the application pool associated with the application.</span></span> <span data-ttu-id="3107f-135">Siga estas etapas:</span><span class="sxs-lookup"><span data-stu-id="3107f-135">Follow these steps:</span></span>

1. <span data-ttu-id="3107f-136">Inicie o Gerenciador de serviços de informações da Internet</span><span class="sxs-lookup"><span data-stu-id="3107f-136">Launch the Internet Information Services Manager</span></span>
2. <span data-ttu-id="3107f-137">Na janela conexões, selecione um aplicativo</span><span class="sxs-lookup"><span data-stu-id="3107f-137">In the Connections window, select an application</span></span>
3. <span data-ttu-id="3107f-138">Na janela de ações, clique o **configurações básicas** link para abrir a caixa de diálogo Editar aplicativo caixa (consulte a Figura 1)</span><span class="sxs-lookup"><span data-stu-id="3107f-138">In the Actions window, click the **Basic Settings** link to open the Edit Application dialog box (see Figure 1)</span></span>
4. <span data-ttu-id="3107f-139">Tome nota do pool de aplicativos selecionado.</span><span class="sxs-lookup"><span data-stu-id="3107f-139">Take note of the Application pool selected.</span></span>

<span data-ttu-id="3107f-140">Por padrão, o IIS é configurado para dar suporte a dois pools de aplicativos: **DefaultAppPool** e **.NET AppPool clássico**.</span><span class="sxs-lookup"><span data-stu-id="3107f-140">By default, IIS is configured to support two application pools: **DefaultAppPool** and **Classic .NET AppPool**.</span></span> <span data-ttu-id="3107f-141">Se DefaultAppPool for selecionada, seu aplicativo é executado no modo de processamento de solicitação integrado.</span><span class="sxs-lookup"><span data-stu-id="3107f-141">If DefaultAppPool is selected, then your application is running in integrated request processing mode.</span></span> <span data-ttu-id="3107f-142">Se AppPool clássico do .NET for selecionado, o aplicativo está em execução no modo de processamento de solicitação clássico.</span><span class="sxs-lookup"><span data-stu-id="3107f-142">If Classic .NET AppPool is selected, your application is running in classic request processing mode.</span></span>

<span data-ttu-id="3107f-143">[![A caixa de diálogo Novo projeto](using-asp-net-mvc-with-different-versions-of-iis-cs/_static/image1.jpg)](using-asp-net-mvc-with-different-versions-of-iis-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="3107f-143">[![The New Project dialog box](using-asp-net-mvc-with-different-versions-of-iis-cs/_static/image1.jpg)](using-asp-net-mvc-with-different-versions-of-iis-cs/_static/image1.png)</span></span>

<span data-ttu-id="3107f-144">**Figura 1**: detectando o modo de processamento de solicitação ([clique para exibir a imagem em tamanho normal](using-asp-net-mvc-with-different-versions-of-iis-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="3107f-144">**Figure 1**: Detecting the request processing mode([Click to view full-size image](using-asp-net-mvc-with-different-versions-of-iis-cs/_static/image2.png))</span></span>

<span data-ttu-id="3107f-145">Observe que você pode modificar o modo de processamento de solicitação dentro da caixa de diálogo Editar aplicativo.</span><span class="sxs-lookup"><span data-stu-id="3107f-145">Notice that you can modify the request processing mode within the Edit Application dialog box.</span></span> <span data-ttu-id="3107f-146">Clique no botão Selecionar e alterar o pool de aplicativos associado ao aplicativo.</span><span class="sxs-lookup"><span data-stu-id="3107f-146">Click the Select button and change the application pool associated with the application.</span></span> <span data-ttu-id="3107f-147">Observe que há problemas de compatibilidade ao alterar um aplicativo ASP.NET de clássico para modo integrado.</span><span class="sxs-lookup"><span data-stu-id="3107f-147">Realize that there are compatibility issues when changing an ASP.NET application from classic to integrated mode.</span></span> <span data-ttu-id="3107f-148">Para obter mais informações, consulte os seguintes artigos:</span><span class="sxs-lookup"><span data-stu-id="3107f-148">For more information, see the following articles:</span></span>

- <span data-ttu-id="3107f-149">Atualizando o ASP.NET 1.1 para o IIS 7.0 no Windows Vista e Windows Server 2008 – [https://www.iis.net/learn/application-frameworks/building-and-running-aspnet-applications/upgrading-aspnet-11-to-iis-on-windows-vista-and-windows-server-2008](https://www.iis.net/learn/application-frameworks/building-and-running-aspnet-applications/upgrading-aspnet-11-to-iis-on-windows-vista-and-windows-server-2008)</span><span class="sxs-lookup"><span data-stu-id="3107f-149">Upgrading ASP.NET 1.1 to IIS 7.0 on Windows Vista and Windows Server 2008 -- [https://www.iis.net/learn/application-frameworks/building-and-running-aspnet-applications/upgrading-aspnet-11-to-iis-on-windows-vista-and-windows-server-2008](https://www.iis.net/learn/application-frameworks/building-and-running-aspnet-applications/upgrading-aspnet-11-to-iis-on-windows-vista-and-windows-server-2008)</span></span>
- <span data-ttu-id="3107f-150">Integração do ASP.NET com o IIS 7.0 - [https://www.iis.net/learn/application-frameworks/building-and-running-aspnet-applications/aspnet-integration-with-iis](https://www.iis.net/learn/application-frameworks/building-and-running-aspnet-applications/aspnet-integration-with-iis)</span><span class="sxs-lookup"><span data-stu-id="3107f-150">ASP.NET Integration With IIS 7.0 - [https://www.iis.net/learn/application-frameworks/building-and-running-aspnet-applications/aspnet-integration-with-iis](https://www.iis.net/learn/application-frameworks/building-and-running-aspnet-applications/aspnet-integration-with-iis)</span></span>

<span data-ttu-id="3107f-151">Se um aplicativo ASP.NET é usando o DefaultAppPool, em seguida, você não precisa executar etapas adicionais para obter o roteamento do ASP.NET (e, portanto, o ASP.NET MVC) para trabalhar.</span><span class="sxs-lookup"><span data-stu-id="3107f-151">If an ASP.NET application is using the DefaultAppPool, then you don't need to perform any additional steps to get ASP.NET Routing (and therefore ASP.NET MVC) to work.</span></span> <span data-ttu-id="3107f-152">No entanto, se o aplicativo ASP.NET está configurado para usar o .NET AppPool clássico, em seguida, continue lendo, você terá mais trabalho a fazer.</span><span class="sxs-lookup"><span data-stu-id="3107f-152">However, if the ASP.NET application is configured to use the Classic .NET AppPool then keep reading, you have more work to do.</span></span>

## <a name="using-aspnet-mvc-with-older-versions-of-iis"></a><span data-ttu-id="3107f-153">Usando o ASP.NET MVC com versões anteriores do IIS</span><span class="sxs-lookup"><span data-stu-id="3107f-153">Using ASP.NET MVC with Older Versions of IIS</span></span>

<span data-ttu-id="3107f-154">Se você precisar usar o ASP.NET MVC com uma versão anterior do IIS que o IIS 7.0, ou você precisa usar o IIS 7.0 no modo clássico, você tem duas opções.</span><span class="sxs-lookup"><span data-stu-id="3107f-154">If you need to use ASP.NET MVC with an older version of IIS than IIS 7.0, or you need to use IIS 7.0 in classic mode, then you have two options.</span></span> <span data-ttu-id="3107f-155">Primeiro, você pode modificar a tabela de rotas para usar extensões de arquivo.</span><span class="sxs-lookup"><span data-stu-id="3107f-155">First, you can modify the route table to use file extensions.</span></span> <span data-ttu-id="3107f-156">Por exemplo, em vez de pedir uma URL como /Store/Details, você deve solicitar uma URL como /Store.aspx/Details.</span><span class="sxs-lookup"><span data-stu-id="3107f-156">For example, instead of requesting a URL like /Store/Details, you would request a URL like /Store.aspx/Details.</span></span>

<span data-ttu-id="3107f-157">A segunda opção é criar algo chamado de um *mapa de script curinga*.</span><span class="sxs-lookup"><span data-stu-id="3107f-157">The second option is to create something called a *wildcard script map*.</span></span> <span data-ttu-id="3107f-158">Um mapa de script de caractere curinga permite que você mapeie cada solicitação para a estrutura do ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="3107f-158">A wildcard script map enables you to map every request into the ASP.NET framework.</span></span>

<span data-ttu-id="3107f-159">Se você não tem acesso ao servidor web (por exemplo, o ASP.NET MVC aplicativo está sendo hospedado por um provedor de serviços de Internet), em seguida, você precisará usar a primeira opção.</span><span class="sxs-lookup"><span data-stu-id="3107f-159">If you don't have access to your web server (for example, your ASP.NET MVC application is being hosted by an Internet Service Provider) then you'll need to use the first option.</span></span> <span data-ttu-id="3107f-160">Se você não quiser modificar a aparência de URLs e você tem acesso ao seu servidor web, você pode usar a segunda opção.</span><span class="sxs-lookup"><span data-stu-id="3107f-160">If you don't want to modify the appearance of your URLs, and you have access to your web server, then you can use the second option.</span></span>

<span data-ttu-id="3107f-161">Vamos explorar cada opção detalhadamente nas seções a seguir.</span><span class="sxs-lookup"><span data-stu-id="3107f-161">We explore each option in detail in the following sections.</span></span>

## <a name="adding-extensions-to-the-route-table"></a><span data-ttu-id="3107f-162">Adicionando extensões para a tabela de rotas</span><span class="sxs-lookup"><span data-stu-id="3107f-162">Adding Extensions to the Route Table</span></span>

<span data-ttu-id="3107f-163">É a maneira mais fácil de obter o roteamento do ASP.NET para trabalhar com versões anteriores do IIS modificar sua tabela de rota no arquivo global asax.</span><span class="sxs-lookup"><span data-stu-id="3107f-163">The easiest way to get ASP.NET Routing to work with older versions of IIS is to modify your route table in the Global.asax file.</span></span> <span data-ttu-id="3107f-164">O padrão e o arquivo global asax não modificado na listagem 1 configura uma rota denominada a rota padrão.</span><span class="sxs-lookup"><span data-stu-id="3107f-164">The default and unmodified Global.asax file in Listing 1 configures one route named the Default route.</span></span>

<span data-ttu-id="3107f-165">**Listando 1 - global. asax (não modificado)**</span><span class="sxs-lookup"><span data-stu-id="3107f-165">**Listing 1 - Global.asax (unmodified)**</span></span>

[!code-csharp[Main](using-asp-net-mvc-with-different-versions-of-iis-cs/samples/sample1.cs)]

<span data-ttu-id="3107f-166">A rota padrão configurada na listagem 1 permite que você URLs de rota que esta aparência:</span><span class="sxs-lookup"><span data-stu-id="3107f-166">The Default route configured in Listing 1 enables you to route URLs that look like this:</span></span>

<span data-ttu-id="3107f-167">/ Início/índice</span><span class="sxs-lookup"><span data-stu-id="3107f-167">/Home/Index</span></span>

<span data-ttu-id="3107f-168">Produto/3/detalhes</span><span class="sxs-lookup"><span data-stu-id="3107f-168">/Product/Details/3</span></span>

<span data-ttu-id="3107f-169">/ Produto</span><span class="sxs-lookup"><span data-stu-id="3107f-169">/Product</span></span>

<span data-ttu-id="3107f-170">Infelizmente, versões anteriores do IIS não passam essas solicitações para a estrutura do ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="3107f-170">Unfortunately, older versions of IIS won't pass these requests to the ASP.NET framework.</span></span> <span data-ttu-id="3107f-171">Portanto, essas solicitações não são roteadas para um controlador.</span><span class="sxs-lookup"><span data-stu-id="3107f-171">Therefore, these requests won't get routed to a controller.</span></span> <span data-ttu-id="3107f-172">Por exemplo, se você fizer uma solicitação do navegador para o URL /Home/índice, em seguida, você obterá a página de erro na Figura 2.</span><span class="sxs-lookup"><span data-stu-id="3107f-172">For example, if you make a browser request for the URL /Home/Index then you'll get the error page in Figure 2.</span></span>

<span data-ttu-id="3107f-173">[![A caixa de diálogo Novo projeto](using-asp-net-mvc-with-different-versions-of-iis-cs/_static/image2.jpg)](using-asp-net-mvc-with-different-versions-of-iis-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="3107f-173">[![The New Project dialog box](using-asp-net-mvc-with-different-versions-of-iis-cs/_static/image2.jpg)](using-asp-net-mvc-with-different-versions-of-iis-cs/_static/image3.png)</span></span>

<span data-ttu-id="3107f-174">**Figura 2**: receber um erro 404 não encontrado ([clique para exibir a imagem em tamanho normal](using-asp-net-mvc-with-different-versions-of-iis-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="3107f-174">**Figure 2**: Receiving a 404 Not Found error([Click to view full-size image](using-asp-net-mvc-with-different-versions-of-iis-cs/_static/image4.png))</span></span>

<span data-ttu-id="3107f-175">Versões anteriores do IIS só mapeiam determinadas solicitações para a estrutura do ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="3107f-175">Older versions of IIS only map certain requests to the ASP.NET framework.</span></span> <span data-ttu-id="3107f-176">A solicitação deve ser para uma URL com a extensão de arquivo correto.</span><span class="sxs-lookup"><span data-stu-id="3107f-176">The request must be for a URL with the right file extension.</span></span> <span data-ttu-id="3107f-177">Por exemplo, uma solicitação para /SomePage.aspx é mapeada para a estrutura do ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="3107f-177">For example, a request for /SomePage.aspx gets mapped to the ASP.NET framework.</span></span> <span data-ttu-id="3107f-178">No entanto, uma solicitação para /SomePage.htm não.</span><span class="sxs-lookup"><span data-stu-id="3107f-178">However, a request for /SomePage.htm does not.</span></span>

<span data-ttu-id="3107f-179">Portanto, para obter o roteamento do ASP.NET para trabalhar, é necessário modificar a rota padrão para que inclui uma extensão de arquivo que é mapeada para a estrutura do ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="3107f-179">Therefore, to get ASP.NET Routing to work, we must modify the Default route so that it includes a file extension that is mapped to the ASP.NET framework.</span></span>

<span data-ttu-id="3107f-180">Isso é feito usando um script chamado `registermvc.wsf`.</span><span class="sxs-lookup"><span data-stu-id="3107f-180">This is done using a script named `registermvc.wsf`.</span></span> <span data-ttu-id="3107f-181">Foi fornecido com a versão do ASP.NET MVC 1 em `C:\Program Files\Microsoft ASP.NET\ASP.NET MVC\Scripts`, mas a partir do ASP.NET 2 esse script foi movido para o ASP.NET Futures, disponível em [http://aspnet.codeplex.com/releases/view/39978](http://aspnet.codeplex.com/releases/view/39978).</span><span class="sxs-lookup"><span data-stu-id="3107f-181">It was included with the ASP.NET MVC 1 release in `C:\Program Files\Microsoft ASP.NET\ASP.NET MVC\Scripts`, but as of ASP.NET 2 this script has been moved to the ASP.NET Futures, available at [http://aspnet.codeplex.com/releases/view/39978](http://aspnet.codeplex.com/releases/view/39978).</span></span>

<span data-ttu-id="3107f-182">Executando esse script registra uma nova extensão. MVC com o IIS.</span><span class="sxs-lookup"><span data-stu-id="3107f-182">Executing this script registers a new .mvc extension with IIS.</span></span> <span data-ttu-id="3107f-183">Depois de registrar a extensão. MVC, você pode modificar suas rotas no arquivo global. asax para que as rotas de usam a extensão. MVC.</span><span class="sxs-lookup"><span data-stu-id="3107f-183">After you register the .mvc extension, you can modify your routes in the Global.asax file so that the routes use the .mvc extension.</span></span>

<span data-ttu-id="3107f-184">O arquivo global. asax modificado na listagem 2 funciona com versões anteriores do IIS.</span><span class="sxs-lookup"><span data-stu-id="3107f-184">The modified Global.asax file in Listing 2 works with older versions of IIS.</span></span>

<span data-ttu-id="3107f-185">**A listagem 2 - global. asax (modificado com extensões)**</span><span class="sxs-lookup"><span data-stu-id="3107f-185">**Listing 2 - Global.asax (modified with extensions)**</span></span>

[!code-csharp[Main](using-asp-net-mvc-with-different-versions-of-iis-cs/samples/sample2.cs)]

<span data-ttu-id="3107f-186">**Importante**: Lembre-se de criar seu aplicativo ASP.NET MVC novamente após a alteração do arquivo global. asax.</span><span class="sxs-lookup"><span data-stu-id="3107f-186">**Important**: remember to build your ASP.NET MVC Application again after changing the Global.asax file.</span></span>

<span data-ttu-id="3107f-187">Há duas alterações importantes para o arquivo global. asax na listagem 2.</span><span class="sxs-lookup"><span data-stu-id="3107f-187">There are two important changes to the Global.asax file in Listing 2.</span></span> <span data-ttu-id="3107f-188">Agora, há duas rotas definidas no global. asax.</span><span class="sxs-lookup"><span data-stu-id="3107f-188">There are now two routes defined in the Global.asax.</span></span> <span data-ttu-id="3107f-189">O padrão de URL para a rota padrão, a primeira rota, agora se parece com:</span><span class="sxs-lookup"><span data-stu-id="3107f-189">The URL pattern for the Default route, the first route, now looks like:</span></span>

<span data-ttu-id="3107f-190">{controller}.mvc/{action}/{id}</span><span class="sxs-lookup"><span data-stu-id="3107f-190">{controller}.mvc/{action}/{id}</span></span>

<span data-ttu-id="3107f-191">A adição da extensão. MVC altera o tipo de arquivos que intercepta o módulo de roteamento do ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="3107f-191">The addition of the .mvc extension changes the type of files that the ASP.NET Routing module intercepts.</span></span> <span data-ttu-id="3107f-192">Com essa alteração, o aplicativo ASP.NET MVC agora roteia solicitações com o seguinte:</span><span class="sxs-lookup"><span data-stu-id="3107f-192">With this change, the ASP.NET MVC application now routes requests like the following:</span></span>

<span data-ttu-id="3107f-193">/Home.MVC/index/</span><span class="sxs-lookup"><span data-stu-id="3107f-193">/Home.mvc/Index/</span></span>

<span data-ttu-id="3107f-194">/Product.MVC/Details/3</span><span class="sxs-lookup"><span data-stu-id="3107f-194">/Product.mvc/Details/3</span></span>

<span data-ttu-id="3107f-195">/Product.MVC/</span><span class="sxs-lookup"><span data-stu-id="3107f-195">/Product.mvc/</span></span>

<span data-ttu-id="3107f-196">A segunda rota, a rota de raiz, é nova.</span><span class="sxs-lookup"><span data-stu-id="3107f-196">The second route, the Root route, is new.</span></span> <span data-ttu-id="3107f-197">Esse padrão de URL para a rota de raiz é uma cadeia de caracteres vazia.</span><span class="sxs-lookup"><span data-stu-id="3107f-197">This URL pattern for the Root route is an empty string.</span></span> <span data-ttu-id="3107f-198">Essa rota é necessária para correspondência de solicitações feitas na raiz do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="3107f-198">This route is necessary for matching requests made against the root of your application.</span></span> <span data-ttu-id="3107f-199">Por exemplo, a rota de raiz corresponderá a uma solicitação que tem esta aparência:</span><span class="sxs-lookup"><span data-stu-id="3107f-199">For example, the Root route will match a request that looks like this:</span></span>

[<span data-ttu-id="3107f-200">http://www.YourApplication.com/</span><span class="sxs-lookup"><span data-stu-id="3107f-200">http://www.YourApplication.com/</span></span>](http://www.YourApplication.com/)

<span data-ttu-id="3107f-201">Depois de fazer essas modificações para sua tabela de rotas, você precisará certificar-se de que todos os links em seu aplicativo são compatíveis com esses novos padrões de URL.</span><span class="sxs-lookup"><span data-stu-id="3107f-201">After making these modifications to your route table, you'll need to make sure that all of the links in your application are compatible with these new URL patterns.</span></span> <span data-ttu-id="3107f-202">Em outras palavras, certifique-se de que todos os seus links de incluem a extensão. MVC.</span><span class="sxs-lookup"><span data-stu-id="3107f-202">In other words, make sure that all of your links include the .mvc extension.</span></span> <span data-ttu-id="3107f-203">Se você usar o método auxiliar Html.ActionLink() para gerar seus links, não deve precisar fazer alterações.</span><span class="sxs-lookup"><span data-stu-id="3107f-203">If you use the Html.ActionLink() helper method to generate your links, then you should not need to make any changes.</span></span>

<span data-ttu-id="3107f-204">Em vez de usar o script registermvc.wcf, você pode adicionar uma nova extensão para IIS que é mapeado para a estrutura do ASP.NET manualmente.</span><span class="sxs-lookup"><span data-stu-id="3107f-204">Instead of using the registermvc.wcf script, you can add a new extension to IIS that is mapped to the ASP.NET framework by hand.</span></span> <span data-ttu-id="3107f-205">Ao adicionar uma nova extensão, certifique-se de que a caixa de seleção rotulada **Verifique se o arquivo já existe** não é verificada.</span><span class="sxs-lookup"><span data-stu-id="3107f-205">When adding a new extension yourself, make sure that the checkbox labeled **Verify that file exists** is not checked.</span></span>

## <a name="hosted-server"></a><span data-ttu-id="3107f-206">Servidor hospedado</span><span class="sxs-lookup"><span data-stu-id="3107f-206">Hosted Server</span></span>

<span data-ttu-id="3107f-207">Você sempre não tem acesso ao seu servidor web.</span><span class="sxs-lookup"><span data-stu-id="3107f-207">You don't always have access to your web server.</span></span> <span data-ttu-id="3107f-208">Por exemplo, se você estiver hospedando seu aplicativo ASP.NET MVC usando um provedor de hospedagem de Internet, em seguida, você não necessariamente terá acesso ao IIS.</span><span class="sxs-lookup"><span data-stu-id="3107f-208">For example, if you are hosting your ASP.NET MVC application using an Internet Hosting Provider, then you won't necessarily have access to IIS.</span></span>

<span data-ttu-id="3107f-209">Nesse caso, você deve usar uma das extensões de arquivo existentes que são mapeadas para a estrutura do ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="3107f-209">In that case, you should use one of the existing file extensions that are mapped to the ASP.NET framework.</span></span> <span data-ttu-id="3107f-210">A. aspx,. axd e. ashx extensões são exemplos de extensões de arquivo mapeadas para o ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="3107f-210">Examples of file extensions mapped to ASP.NET include the .aspx, .axd, and .ashx extensions.</span></span>

<span data-ttu-id="3107f-211">Por exemplo, o arquivo global. asax modificado na listagem 3 usa a extensão. aspx em vez da extensão. MVC.</span><span class="sxs-lookup"><span data-stu-id="3107f-211">For example, the modified Global.asax file in Listing 3 uses the .aspx extension instead of the .mvc extension.</span></span>

<span data-ttu-id="3107f-212">**A listagem 3 - global. asax (modificado com extensões. aspx)**</span><span class="sxs-lookup"><span data-stu-id="3107f-212">**Listing 3 - Global.asax (modified with .aspx extensions)**</span></span>

[!code-csharp[Main](using-asp-net-mvc-with-different-versions-of-iis-cs/samples/sample3.cs)]

<span data-ttu-id="3107f-213">O arquivo global. asax na listagem 3 é exatamente o mesmo que o arquivo global. asax anterior, exceto o fato de que ele usa a extensão. aspx, em vez da extensão. MVC.</span><span class="sxs-lookup"><span data-stu-id="3107f-213">The Global.asax file in Listing 3 is exactly the same as the previous Global.asax file except for the fact that it uses the .aspx extension instead of the .mvc extension.</span></span> <span data-ttu-id="3107f-214">Você não precisa executar qualquer instalação em seu servidor web remoto para usar a extensão. aspx.</span><span class="sxs-lookup"><span data-stu-id="3107f-214">You don't have to perform any setup on your remote web server to use the .aspx extension.</span></span>

## <a name="creating-a-wildcard-script-map"></a><span data-ttu-id="3107f-215">Criar um mapa de Script curinga</span><span class="sxs-lookup"><span data-stu-id="3107f-215">Creating a Wildcard Script Map</span></span>

<span data-ttu-id="3107f-216">Se você não deseja modificar as URLs para seu aplicativo ASP.NET MVC, e você tem acesso ao seu servidor web, você tem uma opção adicional.</span><span class="sxs-lookup"><span data-stu-id="3107f-216">If you don't want to modify the URLs for your ASP.NET MVC application, and you have access to your web server, then you have an additional option.</span></span> <span data-ttu-id="3107f-217">Você pode criar um mapa de script curinga que mapeia todas as solicitações para o servidor web para a estrutura do ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="3107f-217">You can create a wildcard script map that maps all requests to the web server to the ASP.NET framework.</span></span> <span data-ttu-id="3107f-218">Dessa forma, você pode usar a tabela de rotas do ASP.NET MVC padrão com o IIS 7.0 (no modo clássico) ou IIS 6.0.</span><span class="sxs-lookup"><span data-stu-id="3107f-218">That way, you can use the default ASP.NET MVC route table with IIS 7.0 (in classic mode) or IIS 6.0.</span></span>

<span data-ttu-id="3107f-219">Lembre-se de que essa opção faz com que o IIS para interceptar todas as solicitações feitas ao servidor web.</span><span class="sxs-lookup"><span data-stu-id="3107f-219">Be aware that this option causes IIS to intercept every request made against the web server.</span></span> <span data-ttu-id="3107f-220">Isso inclui solicitações de imagens, as páginas ASP clássicas e páginas HTML.</span><span class="sxs-lookup"><span data-stu-id="3107f-220">This includes requests for images, classic ASP pages, and HTML pages.</span></span> <span data-ttu-id="3107f-221">Portanto, permitindo que um curinga mapa de script para o ASP.NET tem implicações de desempenho.</span><span class="sxs-lookup"><span data-stu-id="3107f-221">Therefore, enabling a wildcard script map to ASP.NET does have performance implications.</span></span>

<span data-ttu-id="3107f-222">Aqui está como habilitar um mapa de script de caractere curinga para o IIS 7.0:</span><span class="sxs-lookup"><span data-stu-id="3107f-222">Here's how you enable a wildcard script map for IIS 7.0:</span></span>

1. <span data-ttu-id="3107f-223">Selecione seu aplicativo na janela Conexões</span><span class="sxs-lookup"><span data-stu-id="3107f-223">Select your application in the Connections window</span></span>
2. <span data-ttu-id="3107f-224">Verifique se o **recursos** exibição está selecionada</span><span class="sxs-lookup"><span data-stu-id="3107f-224">Make sure that the **Features** view is selected</span></span>
3. <span data-ttu-id="3107f-225">Clique duas vezes o **mapeamentos de manipulador** botão</span><span class="sxs-lookup"><span data-stu-id="3107f-225">Double-click the **Handler Mappings** button</span></span>
4. <span data-ttu-id="3107f-226">Clique o **Adicionar mapa de Script curinga** link (consulte a Figura 3)</span><span class="sxs-lookup"><span data-stu-id="3107f-226">Click the **Add Wildcard Script Map** link (see Figure 3)</span></span>
5. <span data-ttu-id="3107f-227">Digite o caminho para o aspnet\_isapi.dll arquivo (você pode copiar esse caminho de mapa de script PageHandlerFactory)</span><span class="sxs-lookup"><span data-stu-id="3107f-227">Enter the path to the aspnet\_isapi.dll file (You can copy this path from the PageHandlerFactory script map)</span></span>
6. <span data-ttu-id="3107f-228">Digite o nome do MVC</span><span class="sxs-lookup"><span data-stu-id="3107f-228">Enter the name MVC</span></span>
7. <span data-ttu-id="3107f-229">Clique o **Okey** botão</span><span class="sxs-lookup"><span data-stu-id="3107f-229">Click the **OK** button</span></span>

<span data-ttu-id="3107f-230">[![A caixa de diálogo Novo projeto](using-asp-net-mvc-with-different-versions-of-iis-cs/_static/image3.jpg)](using-asp-net-mvc-with-different-versions-of-iis-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="3107f-230">[![The New Project dialog box](using-asp-net-mvc-with-different-versions-of-iis-cs/_static/image3.jpg)](using-asp-net-mvc-with-different-versions-of-iis-cs/_static/image5.png)</span></span>

<span data-ttu-id="3107f-231">**Figura 3**: criar um mapa de script curinga com o IIS 7.0 ([clique para exibir a imagem em tamanho normal](using-asp-net-mvc-with-different-versions-of-iis-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="3107f-231">**Figure 3**: Creating a wildcard script map with IIS 7.0([Click to view full-size image](using-asp-net-mvc-with-different-versions-of-iis-cs/_static/image6.png))</span></span>

<span data-ttu-id="3107f-232">Siga estas etapas para criar um mapa de script curinga com o IIS 6.0:</span><span class="sxs-lookup"><span data-stu-id="3107f-232">Follow these steps to create a wildcard script map with IIS 6.0:</span></span>

1. <span data-ttu-id="3107f-233">Clique em um site e selecione Propriedades</span><span class="sxs-lookup"><span data-stu-id="3107f-233">Right-click a website and select Properties</span></span>
2. <span data-ttu-id="3107f-234">Selecione o **diretório base** guia</span><span class="sxs-lookup"><span data-stu-id="3107f-234">Select the **Home Directory** tab</span></span>
3. <span data-ttu-id="3107f-235">Clique o **configuração** botão</span><span class="sxs-lookup"><span data-stu-id="3107f-235">Click the **Configuration** button</span></span>
4. <span data-ttu-id="3107f-236">Selecione o **mapeamentos** guia</span><span class="sxs-lookup"><span data-stu-id="3107f-236">Select the **Mappings** tab</span></span>
5. <span data-ttu-id="3107f-237">Clique o **inserir** botão (consulte a Figura 4)</span><span class="sxs-lookup"><span data-stu-id="3107f-237">Click the **Insert** button (see Figure 4)</span></span>
6. <span data-ttu-id="3107f-238">Cole o caminho para o aspnet\_isapi.dll no campo de executável (você pode copiar esse caminho de mapa de script para arquivos. aspx)</span><span class="sxs-lookup"><span data-stu-id="3107f-238">Paste the path to the aspnet\_isapi.dll into the Executable field (you can copy this path from the script map for .aspx files)</span></span>
7. <span data-ttu-id="3107f-239">Desmarque a caixa de seleção **Verifique se o arquivo já existe**</span><span class="sxs-lookup"><span data-stu-id="3107f-239">Uncheck the checkbox labeled **Verify that file exists**</span></span>
8. <span data-ttu-id="3107f-240">Clique o **Okey** botão</span><span class="sxs-lookup"><span data-stu-id="3107f-240">Click the **OK** button</span></span>

<span data-ttu-id="3107f-241">[![A caixa de diálogo Novo projeto](using-asp-net-mvc-with-different-versions-of-iis-cs/_static/image4.jpg)](using-asp-net-mvc-with-different-versions-of-iis-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="3107f-241">[![The New Project dialog box](using-asp-net-mvc-with-different-versions-of-iis-cs/_static/image4.jpg)](using-asp-net-mvc-with-different-versions-of-iis-cs/_static/image7.png)</span></span>

<span data-ttu-id="3107f-242">**Figura 4**: criar um mapa de script curinga com o IIS 6.0 ([clique para exibir a imagem em tamanho normal](using-asp-net-mvc-with-different-versions-of-iis-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="3107f-242">**Figure 4**: Creating a wildcard script map with IIS 6.0([Click to view full-size image](using-asp-net-mvc-with-different-versions-of-iis-cs/_static/image8.png))</span></span>

<span data-ttu-id="3107f-243">Depois de habilitar os mapas de script de caractere curinga, você precisa modificar a tabela de rota no arquivo global asax para que ele inclui uma rota de raiz.</span><span class="sxs-lookup"><span data-stu-id="3107f-243">After you enable wildcard script maps, you need to modify the route table in the Global.asax file so that it includes a Root route.</span></span> <span data-ttu-id="3107f-244">Caso contrário, você obterá a página de erro na Figura 5, quando você faz uma solicitação para a página de raiz do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="3107f-244">Otherwise, you'll get the error page in Figure 5 when you make a request for the root page of your application.</span></span> <span data-ttu-id="3107f-245">Você pode usar o arquivo global. asax modificado na listagem 4.</span><span class="sxs-lookup"><span data-stu-id="3107f-245">You can use the modified Global.asax file in Listing 4.</span></span>

<span data-ttu-id="3107f-246">[![A caixa de diálogo Novo projeto](using-asp-net-mvc-with-different-versions-of-iis-cs/_static/image5.jpg)](using-asp-net-mvc-with-different-versions-of-iis-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="3107f-246">[![The New Project dialog box](using-asp-net-mvc-with-different-versions-of-iis-cs/_static/image5.jpg)](using-asp-net-mvc-with-different-versions-of-iis-cs/_static/image9.png)</span></span>

<span data-ttu-id="3107f-247">**Figura 5**: erro de rota de raiz ausente ([clique para exibir a imagem em tamanho normal](using-asp-net-mvc-with-different-versions-of-iis-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="3107f-247">**Figure 5**: Missing Root route error([Click to view full-size image](using-asp-net-mvc-with-different-versions-of-iis-cs/_static/image10.png))</span></span>

<span data-ttu-id="3107f-248">**A listagem 4 - global. asax (modificado com a rota de raiz)**</span><span class="sxs-lookup"><span data-stu-id="3107f-248">**Listing 4 - Global.asax (modified with Root route)**</span></span>

[!code-csharp[Main](using-asp-net-mvc-with-different-versions-of-iis-cs/samples/sample4.cs)]

<span data-ttu-id="3107f-249">Depois de habilitar um mapa de script de caractere curinga para o IIS 7.0 ou IIS 6.0, você pode fazer solicitações que funcionam com a tabela de rota padrão que ter esta aparência:</span><span class="sxs-lookup"><span data-stu-id="3107f-249">After you enable a wildcard script map for either IIS 7.0 or IIS 6.0, you can make requests that work with the default route table that look like this:</span></span>

/

<span data-ttu-id="3107f-250">/ Início/índice</span><span class="sxs-lookup"><span data-stu-id="3107f-250">/Home/Index</span></span>

<span data-ttu-id="3107f-251">Produto/3/detalhes</span><span class="sxs-lookup"><span data-stu-id="3107f-251">/Product/Details/3</span></span>

<span data-ttu-id="3107f-252">/ Produto</span><span class="sxs-lookup"><span data-stu-id="3107f-252">/Product</span></span>

## <a name="summary"></a><span data-ttu-id="3107f-253">Resumo</span><span class="sxs-lookup"><span data-stu-id="3107f-253">Summary</span></span>

<span data-ttu-id="3107f-254">O objetivo deste tutorial era explicam como você pode usar o ASP.NET MVC ao usar uma versão anterior do IIS (ou IIS 7.0 no modo clássico).</span><span class="sxs-lookup"><span data-stu-id="3107f-254">The goal of this tutorial was to explain how you can use ASP.NET MVC when using an older version of IIS (or IIS 7.0 in classic mode).</span></span> <span data-ttu-id="3107f-255">Discutimos dois métodos de obtenção de roteamento do ASP.NET para trabalhar com versões anteriores do IIS: modificar a tabela de rota padrão ou criar um mapa de script de caractere curinga.</span><span class="sxs-lookup"><span data-stu-id="3107f-255">We discussed two methods of getting ASP.NET Routing to work with older versions of IIS: Modify the default route table or create a wildcard script map.</span></span>

<span data-ttu-id="3107f-256">A primeira opção exige que você modifique as URLs usadas no seu aplicativo ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="3107f-256">The first option requires you to modify the URLs used in your ASP.NET MVC application.</span></span> <span data-ttu-id="3107f-257">Uma vantagem muito significativa a primeira opção é que não é necessário ter o acesso a um servidor web para modificar a tabela de rotas.</span><span class="sxs-lookup"><span data-stu-id="3107f-257">One very significant advantage of this first option is that you do not need access to a web server in order to modify the route table.</span></span> <span data-ttu-id="3107f-258">Isso significa que você pode usar essa opção primeiro, mesmo ao hospedar seu aplicativo ASP.NET MVC com uma conexão de empresa de hospedagem.</span><span class="sxs-lookup"><span data-stu-id="3107f-258">That means that you can use this first option even when hosting your ASP.NET MVC application with an Internet hosting company.</span></span>

<span data-ttu-id="3107f-259">A segunda opção é criar um mapa de script de caractere curinga.</span><span class="sxs-lookup"><span data-stu-id="3107f-259">The second option is to create a wildcard script map.</span></span> <span data-ttu-id="3107f-260">A vantagem dessa opção é que você não precisa modificar URLs.</span><span class="sxs-lookup"><span data-stu-id="3107f-260">The advantage of this second option is that you do not need to modify your URLs.</span></span> <span data-ttu-id="3107f-261">A desvantagem dessa opção é que ele pode afetar o desempenho do seu aplicativo ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="3107f-261">The disadvantage of this second option is that it can impact the performance of your ASP.NET MVC application.</span></span>

>[!div class="step-by-step"]
[<span data-ttu-id="3107f-262">Avançar</span><span class="sxs-lookup"><span data-stu-id="3107f-262">Next</span></span>](using-asp-net-mvc-with-different-versions-of-iis-vb.md)
