O middleware de cabeçalhos encaminhados deve ser executado antes de outro middleware. Essa ordenação garantirá que o middleware conte com informações de cabeçalhos encaminhadas que podem consumir os valores de cabeçalho para processamento. Para executar o middleware de cabeçalhos encaminhados após o diagnóstico e o middleware de tratamento de erros, consulte [ordem de middleware de cabeçalhos encaminhados](xref:host-and-deploy/proxy-load-balancer#fhmo).