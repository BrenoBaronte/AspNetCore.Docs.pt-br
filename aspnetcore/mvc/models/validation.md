---
title: "Validação de modelo no ASP.NET MVC de núcleo"
author: rachelappel
description: "Saiba mais sobre a validação do modelo no ASP.NET MVC de núcleo."
keywords: "Validação de núcleo do ASP.NET MVC,"
ms.author: riande
manager: wpickett
ms.date: 10/14/2016
ms.topic: article
ms.assetid: 3a8676dd-7ed8-4a05-bca2-44e288ab99ee
ms.technology: aspnet
ms.prod: asp.net-core
uid: mvc/models/validation
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: efbc68e898cadd06d61fa69914fe08f3a12ba802
ms.sourcegitcommit: 8b5733f1cd5d2c2b6d432bf82fcd4be2d2d6b2a3
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 09/28/2017
---
# <a name="introduction-to-model-validation-in-aspnet-core-mvc"></a><span data-ttu-id="c305f-104">Introdução à validação do modelo no ASP.NET MVC de núcleo</span><span class="sxs-lookup"><span data-stu-id="c305f-104">Introduction to model validation in ASP.NET Core MVC</span></span>

<span data-ttu-id="c305f-105">Por [Rachel Appel](https://github.com/rachelappel)</span><span class="sxs-lookup"><span data-stu-id="c305f-105">By [Rachel Appel](https://github.com/rachelappel)</span></span>

## <a name="introduction-to-model-validation"></a><span data-ttu-id="c305f-106">Introdução à validação do modelo</span><span class="sxs-lookup"><span data-stu-id="c305f-106">Introduction to model validation</span></span>

<span data-ttu-id="c305f-107">Antes de um aplicativo armazena dados em um banco de dados, o aplicativo deve validar os dados.</span><span class="sxs-lookup"><span data-stu-id="c305f-107">Before an app stores data in a database, the app must validate the data.</span></span> <span data-ttu-id="c305f-108">Dados devem ser verificados quanto a possíveis ameaças de segurança, verificadas se está formatado corretamente por tipo e tamanho, e ele deve estar de acordo com as regras.</span><span class="sxs-lookup"><span data-stu-id="c305f-108">Data must be checked for potential security threats, verified that it is appropriately formatted by type and size, and it must conform to your rules.</span></span> <span data-ttu-id="c305f-109">Validação é necessária, embora ele possa ser tediosa implementar e redundantes.</span><span class="sxs-lookup"><span data-stu-id="c305f-109">Validation is necessary although it can be redundant and tedious to implement.</span></span> <span data-ttu-id="c305f-110">No MVC, a validação ocorre no cliente e no servidor.</span><span class="sxs-lookup"><span data-stu-id="c305f-110">In MVC, validation happens on both the client and server.</span></span>

<span data-ttu-id="c305f-111">Felizmente, o .NET tem abstraídos validação em atributos de validação.</span><span class="sxs-lookup"><span data-stu-id="c305f-111">Fortunately, .NET has abstracted validation into validation attributes.</span></span> <span data-ttu-id="c305f-112">Esses atributos contêm o código de validação, reduzindo a quantidade de código que você deve gravar.</span><span class="sxs-lookup"><span data-stu-id="c305f-112">These attributes contain validation code, thereby reducing the amount of code you must write.</span></span>

<span data-ttu-id="c305f-113">[Exibir ou baixar o exemplo do GitHub](https://github.com/aspnet/Docs/tree/master/aspnetcore/mvc/models/validation/sample).</span><span class="sxs-lookup"><span data-stu-id="c305f-113">[View or download sample from GitHub](https://github.com/aspnet/Docs/tree/master/aspnetcore/mvc/models/validation/sample).</span></span>

## <a name="validation-attributes"></a><span data-ttu-id="c305f-114">Atributos de validação</span><span class="sxs-lookup"><span data-stu-id="c305f-114">Validation Attributes</span></span>

<span data-ttu-id="c305f-115">Atributos de validação são uma maneira de configurar a validação do modelo é semelhante conceitualmente a validação em campos em tabelas de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="c305f-115">Validation attributes are a way to configure model validation so it's similar conceptually to validation on fields in database tables.</span></span> <span data-ttu-id="c305f-116">Isso inclui as restrições, como a atribuição de tipos de dados ou os campos obrigatórios.</span><span class="sxs-lookup"><span data-stu-id="c305f-116">This includes constraints such as assigning data types or required fields.</span></span> <span data-ttu-id="c305f-117">Outros tipos de validação incluem a aplicação de padrões de dados para impor regras de negócio, como um cartão de crédito, número de telefone ou endereço de email.</span><span class="sxs-lookup"><span data-stu-id="c305f-117">Other types of validation include applying patterns to data to enforce business rules, such as a credit card, phone number, or email address.</span></span> <span data-ttu-id="c305f-118">Atributos de validação Verifique impor esses requisitos muito mais simples e fácil de usar.</span><span class="sxs-lookup"><span data-stu-id="c305f-118">Validation attributes make enforcing these requirements much simpler and easier to use.</span></span>

<span data-ttu-id="c305f-119">Abaixo está um anotado `Movie` modelo de um aplicativo que armazena informações sobre filmes e programas de TV.</span><span class="sxs-lookup"><span data-stu-id="c305f-119">Below is an annotated `Movie` model from an app that stores information about movies and TV shows.</span></span> <span data-ttu-id="c305f-120">A maioria das propriedades é necessária e várias propriedades de cadeia de caracteres têm requisitos de comprimento.</span><span class="sxs-lookup"><span data-stu-id="c305f-120">Most of the properties are required and several string properties have length requirements.</span></span> <span data-ttu-id="c305f-121">Além disso, há uma restrição de intervalo numérico em vigor para o `Price` propriedade de 0 a $999,99, juntamente com um atributo de validação personalizada.</span><span class="sxs-lookup"><span data-stu-id="c305f-121">Additionally, there is a numeric range restriction in place for the `Price` property from 0 to $999.99, along with a custom validation attribute.</span></span>

[!code-csharp[Main](validation/sample/Movie.cs?range=6-29)]

<span data-ttu-id="c305f-122">Simplesmente lê por meio do modelo revela as regras sobre os dados para este aplicativo, facilitando a manutenção do código.</span><span class="sxs-lookup"><span data-stu-id="c305f-122">Simply reading through the model reveals the rules about data for this app, making it easier to maintain the code.</span></span> <span data-ttu-id="c305f-123">Abaixo estão vários atributos de validação interna populares:</span><span class="sxs-lookup"><span data-stu-id="c305f-123">Below are several popular built-in validation attributes:</span></span>

* <span data-ttu-id="c305f-124">`[CreditCard]`: Valida a propriedade tem um formato de cartão de crédito.</span><span class="sxs-lookup"><span data-stu-id="c305f-124">`[CreditCard]`: Validates the property has a credit card format.</span></span>

* <span data-ttu-id="c305f-125">`[Compare]`: Valida as duas propriedades em uma correspondência de modelo.</span><span class="sxs-lookup"><span data-stu-id="c305f-125">`[Compare]`: Validates two properties in a model match.</span></span>

* <span data-ttu-id="c305f-126">`[EmailAddress]`: Valida a propriedade tem um formato de email.</span><span class="sxs-lookup"><span data-stu-id="c305f-126">`[EmailAddress]`: Validates the property has an email format.</span></span>

* <span data-ttu-id="c305f-127">`[Phone]`: Valida a propriedade tem um formato de telefone.</span><span class="sxs-lookup"><span data-stu-id="c305f-127">`[Phone]`: Validates the property has a telephone format.</span></span>

* <span data-ttu-id="c305f-128">`[Range]`: Valida o valor da propriedade está dentro do intervalo especificado.</span><span class="sxs-lookup"><span data-stu-id="c305f-128">`[Range]`: Validates the property value falls within the given range.</span></span>

* <span data-ttu-id="c305f-129">`[RegularExpression]`: Valida os dados correspondem à expressão regular especificada.</span><span class="sxs-lookup"><span data-stu-id="c305f-129">`[RegularExpression]`: Validates that the data matches the specified regular expression.</span></span>

* <span data-ttu-id="c305f-130">`[Required]`: Torna uma propriedade necessária.</span><span class="sxs-lookup"><span data-stu-id="c305f-130">`[Required]`: Makes a property required.</span></span>

* <span data-ttu-id="c305f-131">`[StringLength]`: Valida que uma propriedade de cadeia de caracteres no máximo tem o comprimento máximo especificado.</span><span class="sxs-lookup"><span data-stu-id="c305f-131">`[StringLength]`: Validates that a string property has at most the given maximum length.</span></span>

* <span data-ttu-id="c305f-132">`[Url]`: Valida a propriedade tem um formato de URL.</span><span class="sxs-lookup"><span data-stu-id="c305f-132">`[Url]`: Validates the property has a URL format.</span></span>

<span data-ttu-id="c305f-133">MVC oferece suporte a qualquer atributo que deriva de `ValidationAttribute` para fins de validação.</span><span class="sxs-lookup"><span data-stu-id="c305f-133">MVC supports any attribute that derives from `ValidationAttribute` for validation purposes.</span></span> <span data-ttu-id="c305f-134">Muitos atributos de validação útil podem ser encontrados no [DataAnnotations](https://docs.microsoft.com/dotnet/api/system.componentmodel.dataannotations) namespace.</span><span class="sxs-lookup"><span data-stu-id="c305f-134">Many useful validation attributes can be found in the [System.ComponentModel.DataAnnotations](https://docs.microsoft.com/dotnet/api/system.componentmodel.dataannotations) namespace.</span></span>

<span data-ttu-id="c305f-135">Pode haver ocasiões em que você precisar de mais recursos de atributos internos fornecem.</span><span class="sxs-lookup"><span data-stu-id="c305f-135">There may be instances where you need more features than built-in attributes provide.</span></span> <span data-ttu-id="c305f-136">Para ocasiões, é possível criar atributos de validação personalizada derivando de `ValidationAttribute` ou alterar seu modelo para implementar `IValidatableObject`.</span><span class="sxs-lookup"><span data-stu-id="c305f-136">For those times, you can create custom validation attributes by deriving from `ValidationAttribute` or changing your model to implement `IValidatableObject`.</span></span>

## <a name="notes-on-the-use-of-the-required-attribute"></a><span data-ttu-id="c305f-137">Observações sobre o uso do atributo necessário</span><span class="sxs-lookup"><span data-stu-id="c305f-137">Notes on the use of the Required attribute</span></span>

<span data-ttu-id="c305f-138">Não anulável [os tipos de valor](/dotnet/csharp/language-reference/keywords/value-types) (como `decimal`, `int`, `float`, e `DateTime`) são inerentemente necessárias e não é necessário o `Required` atributo.</span><span class="sxs-lookup"><span data-stu-id="c305f-138">Non-nullable [value types](/dotnet/csharp/language-reference/keywords/value-types) (such as `decimal`, `int`, `float`, and `DateTime`) are inherently required and don't need the `Required` attribute.</span></span> <span data-ttu-id="c305f-139">O aplicativo não executa nenhuma verificação de validação do lado do servidor para tipos não anuláveis são marcados `Required`.</span><span class="sxs-lookup"><span data-stu-id="c305f-139">The app performs no server-side validation checks for non-nullable types that are marked `Required`.</span></span>

<span data-ttu-id="c305f-140">Associação de modelo MVC, que não está preocupada com atributos de validação e a validação, rejeita o envio de um campo de formulário que contém um valor ausente ou o espaço em branco para um tipo não anulável.</span><span class="sxs-lookup"><span data-stu-id="c305f-140">MVC model binding, which isn't concerned with validation and validation attributes, rejects a form field submission containing a missing value or whitespace for a non-nullable type.</span></span> <span data-ttu-id="c305f-141">Na ausência de um `BindRequired` atributo na propriedade de destino, a associação de modelo ignora dados ausentes para tipos não anuláveis, onde o campo de formulário está ausente nos dados de formulário de entrada.</span><span class="sxs-lookup"><span data-stu-id="c305f-141">In the absence of a `BindRequired` attribute on the target property, model binding ignores missing data for non-nullable types, where the form field is absent from the incoming form data.</span></span>

<span data-ttu-id="c305f-142">O [BindRequired atributo](/aspnet/core/api/microsoft.aspnetcore.mvc.modelbinding.bindrequiredattribute) (Consulte também [personalizar o comportamento de associação de modelo com atributos](xref:mvc/models/model-binding#customize-model-binding-behavior-with-attributes)) é útil para garantir que os dados de formulário são concluídos.</span><span class="sxs-lookup"><span data-stu-id="c305f-142">The [BindRequired attribute](/aspnet/core/api/microsoft.aspnetcore.mvc.modelbinding.bindrequiredattribute) (also see [Customize model binding behavior with attributes](xref:mvc/models/model-binding#customize-model-binding-behavior-with-attributes)) is useful to ensure form data is complete.</span></span> <span data-ttu-id="c305f-143">Quando aplicado a uma propriedade, o sistema de associação de modelo requer um valor para essa propriedade.</span><span class="sxs-lookup"><span data-stu-id="c305f-143">When applied to a property, the model binding system requires a value for that property.</span></span> <span data-ttu-id="c305f-144">Quando aplicado a um tipo, o sistema de associação de modelo requer valores para todas as propriedades desse tipo.</span><span class="sxs-lookup"><span data-stu-id="c305f-144">When applied to a type, the model binding system requires values for all of the properties of that type.</span></span>

<span data-ttu-id="c305f-145">Quando você usa um [Nullable\<T > tipo](/dotnet/csharp/programming-guide/nullable-types/) (por exemplo, `decimal?` ou `System.Nullable<decimal>`) e marcá-la `Required`, é realizada uma verificação de validação do lado do servidor, como se a propriedade fosse um tipo anulável padrão (para exemplo, um `string`).</span><span class="sxs-lookup"><span data-stu-id="c305f-145">When you use a [Nullable\<T> type](/dotnet/csharp/programming-guide/nullable-types/) (for example, `decimal?` or `System.Nullable<decimal>`) and mark it `Required`, a server-side validation check is performed as if the property were a standard nullable type (for example, a `string`).</span></span>

<span data-ttu-id="c305f-146">Validação do lado do cliente requer um valor para um campo de formulário que corresponde a uma propriedade de modelo que você marcou `Required` e para uma propriedade de tipo não anulável que ainda não marcado `Required`.</span><span class="sxs-lookup"><span data-stu-id="c305f-146">Client-side validation requires a value for a form field that corresponds to a model property that you've marked `Required` and for a non-nullable type property that you haven't marked `Required`.</span></span> <span data-ttu-id="c305f-147">`Required`pode ser usado para controlar a mensagem de erro de validação do lado do cliente.</span><span class="sxs-lookup"><span data-stu-id="c305f-147">`Required` can be used to control the client-side validation error message.</span></span>

## <a name="model-state"></a><span data-ttu-id="c305f-148">Estado do modelo</span><span class="sxs-lookup"><span data-stu-id="c305f-148">Model State</span></span>

<span data-ttu-id="c305f-149">Estado do modelo representa erros de validação em valores de formulário HTML enviados.</span><span class="sxs-lookup"><span data-stu-id="c305f-149">Model state represents validation errors in submitted HTML form values.</span></span>

<span data-ttu-id="c305f-150">MVC continuará validando campos até atingir o número máximo de erros (200 por padrão).</span><span class="sxs-lookup"><span data-stu-id="c305f-150">MVC will continue validating fields until reaches the maximum number of errors (200 by default).</span></span> <span data-ttu-id="c305f-151">Você pode configurar esse número inserindo o seguinte código para o `ConfigureServices` método o *Startup.cs* arquivo:</span><span class="sxs-lookup"><span data-stu-id="c305f-151">You can configure this number by inserting the following code into the `ConfigureServices` method in the *Startup.cs* file:</span></span>

[!code-csharp[Main](validation/sample/Startup.cs?range=27)]

## <a name="handling-model-state-errors"></a><span data-ttu-id="c305f-152">Estado do modelo de tratamento de erros</span><span class="sxs-lookup"><span data-stu-id="c305f-152">Handling Model State Errors</span></span>

<span data-ttu-id="c305f-153">Ocorre a validação do modelo antes de cada ação de controlador que está sendo invocada, e é responsabilidade do método de ação para inspecionar `ModelState.IsValid` e reagir de forma adequada.</span><span class="sxs-lookup"><span data-stu-id="c305f-153">Model validation occurs prior to each controller action being invoked, and it is the action method’s responsibility to inspect `ModelState.IsValid` and react appropriately.</span></span> <span data-ttu-id="c305f-154">Em muitos casos, a reação apropriada é retornar algum tipo de resposta de erro, idealmente, detalhando o motivo por que a validação do modelo falhou.</span><span class="sxs-lookup"><span data-stu-id="c305f-154">In many cases, the appropriate reaction is to return some kind of error response, ideally detailing the reason why model validation failed.</span></span>

<span data-ttu-id="c305f-155">Alguns aplicativos escolherá a seguir uma convenção padrão para lidar com erros de validação de modelo, em que o caso de um filtro pode ser um local adequado para implementar essa política.</span><span class="sxs-lookup"><span data-stu-id="c305f-155">Some apps will choose to follow a standard convention for dealing with model validation errors, in which case a filter may be an appropriate place to implement such a policy.</span></span> <span data-ttu-id="c305f-156">Você deve testar o comportam de suas ações com os estados de modelo válidas e inválidas.</span><span class="sxs-lookup"><span data-stu-id="c305f-156">You should test how your actions behave with valid and invalid model states.</span></span>

## <a name="manual-validation"></a><span data-ttu-id="c305f-157">Validação manual</span><span class="sxs-lookup"><span data-stu-id="c305f-157">Manual validation</span></span>

<span data-ttu-id="c305f-158">Após a conclusão validação e associação de modelo, talvez queira repetir partes dele.</span><span class="sxs-lookup"><span data-stu-id="c305f-158">After model binding and validation are complete, you may want to repeat parts of it.</span></span> <span data-ttu-id="c305f-159">Por exemplo, um usuário pode ter inserido texto em um campo esperado um número inteiro, ou talvez seja necessário calcular um valor de propriedade do modelo.</span><span class="sxs-lookup"><span data-stu-id="c305f-159">For example, a user may have entered text in a field expecting an integer, or you may need to compute a value for a model's property.</span></span>

<span data-ttu-id="c305f-160">Talvez seja necessário executar manualmente a validação.</span><span class="sxs-lookup"><span data-stu-id="c305f-160">You may need to run validation manually.</span></span> <span data-ttu-id="c305f-161">Para fazer isso, chame o `TryValidateModel` método, conforme mostrado aqui:</span><span class="sxs-lookup"><span data-stu-id="c305f-161">To do so, call the `TryValidateModel` method, as shown here:</span></span>

[!code-csharp[Main](validation/sample/MoviesController.cs?range=52)]

## <a name="custom-validation"></a><span data-ttu-id="c305f-162">Validação personalizada</span><span class="sxs-lookup"><span data-stu-id="c305f-162">Custom validation</span></span>

<span data-ttu-id="c305f-163">Atributos de validação funcionam para a maioria das necessidades de validação.</span><span class="sxs-lookup"><span data-stu-id="c305f-163">Validation attributes work for most validation needs.</span></span> <span data-ttu-id="c305f-164">No entanto, algumas regras de validação são específicas para sua empresa, pois eles não são apenas a validação de dados genéricos como garantindo um campo é necessária ou que correspondam a um intervalo de valores.</span><span class="sxs-lookup"><span data-stu-id="c305f-164">However, some validation rules are specific to your business, as they're not just generic data validation such as ensuring a field is required or that it conforms to a range of values.</span></span> <span data-ttu-id="c305f-165">Para esses cenários, os atributos de validação personalizada são uma excelente solução.</span><span class="sxs-lookup"><span data-stu-id="c305f-165">For these scenarios, custom validation attributes are a great solution.</span></span> <span data-ttu-id="c305f-166">É fácil criar seus próprios atributos de validação personalizada no MVC.</span><span class="sxs-lookup"><span data-stu-id="c305f-166">Creating your own custom validation attributes in MVC is easy.</span></span> <span data-ttu-id="c305f-167">Apenas herdam o `ValidationAttribute`e substituir o `IsValid` método.</span><span class="sxs-lookup"><span data-stu-id="c305f-167">Just inherit from the `ValidationAttribute`, and override the `IsValid` method.</span></span> <span data-ttu-id="c305f-168">O `IsValid` método aceita dois parâmetros, a primeira é um objeto chamado *valor* e o segundo é um `ValidationContext` objeto chamado *validationContext*.</span><span class="sxs-lookup"><span data-stu-id="c305f-168">The `IsValid` method accepts two parameters, the first is an object named *value* and the second is a `ValidationContext` object named *validationContext*.</span></span> <span data-ttu-id="c305f-169">*Valor* refere-se ao valor real do campo que o validador personalizado está sendo validada.</span><span class="sxs-lookup"><span data-stu-id="c305f-169">*Value* refers to the actual value from the field that your custom validator is validating.</span></span>

<span data-ttu-id="c305f-170">No exemplo a seguir, uma regra de negócio afirma que os usuários não podem definir o gênero para *clássico* de um filme liberado 1960.</span><span class="sxs-lookup"><span data-stu-id="c305f-170">In the following sample, a business rule states that users may not set the genre to *Classic* for a movie released after 1960.</span></span> <span data-ttu-id="c305f-171">O `[ClassicMovie]` atributo verifica o gênero primeiro e, se for um clássico, ele verifica a data de lançamento para ver se ele é posterior à 1960.</span><span class="sxs-lookup"><span data-stu-id="c305f-171">The `[ClassicMovie]` attribute checks the genre first, and if it is a classic, then it checks the release date to see that it is later than 1960.</span></span> <span data-ttu-id="c305f-172">Se ele for liberado 1960, a validação falhará.</span><span class="sxs-lookup"><span data-stu-id="c305f-172">If it is released after 1960, validation fails.</span></span> <span data-ttu-id="c305f-173">O atributo aceita um parâmetro de número inteiro que representa o ano que você pode usar para validar dados.</span><span class="sxs-lookup"><span data-stu-id="c305f-173">The attribute accepts an integer parameter representing the year that you can use to validate data.</span></span> <span data-ttu-id="c305f-174">Você pode capturar o valor do parâmetro no construtor do atributo, conforme mostrado aqui:</span><span class="sxs-lookup"><span data-stu-id="c305f-174">You can capture the value of the parameter in the attribute's constructor, as shown here:</span></span>

[!code-csharp[Main](validation/sample/ClassicMovieAttribute.cs?range=9-28)]

<span data-ttu-id="c305f-175">O `movie` variável acima representa um `Movie` objeto que contém os dados de envio do formulário para validar.</span><span class="sxs-lookup"><span data-stu-id="c305f-175">The `movie` variable above represents a `Movie` object that contains the data from the form submission to validate.</span></span> <span data-ttu-id="c305f-176">Nesse caso, o código de validação verifica a data e gênero no `IsValid` método o `ClassicMovieAttribute` classe de acordo com as regras.</span><span class="sxs-lookup"><span data-stu-id="c305f-176">In this case, the validation code checks the date and genre in the `IsValid` method of the `ClassicMovieAttribute` class as per the rules.</span></span> <span data-ttu-id="c305f-177">Após a validação bem-sucedida `IsValid` retorna um `ValidationResult.Success` código, e quando a validação falhar, um `ValidationResult` com uma mensagem de erro.</span><span class="sxs-lookup"><span data-stu-id="c305f-177">Upon successful validation `IsValid` returns a `ValidationResult.Success` code, and when validation fails, a `ValidationResult` with an error message.</span></span> <span data-ttu-id="c305f-178">Quando um usuário modifica o `Genre` campo e envia o formulário, o `IsValid` método o `ClassicMovieAttribute` verificará se o filme é uma clássica.</span><span class="sxs-lookup"><span data-stu-id="c305f-178">When a user modifies the `Genre` field and submits the form, the `IsValid` method of the `ClassicMovieAttribute` will verify whether the movie is a classic.</span></span> <span data-ttu-id="c305f-179">Como qualquer atributo interno, se aplicam a `ClassicMovieAttribute` para uma propriedade como `ReleaseDate` para garantir a validação ocorre, conforme mostrado no exemplo de código anterior.</span><span class="sxs-lookup"><span data-stu-id="c305f-179">Like any built-in attribute, apply the `ClassicMovieAttribute` to a property such as `ReleaseDate` to ensure validation happens, as shown in the previous code sample.</span></span> <span data-ttu-id="c305f-180">Como o exemplo funciona apenas com `Movie` tipos, a melhor opção é usar `IValidatableObject` conforme mostrado no seguinte parágrafo.</span><span class="sxs-lookup"><span data-stu-id="c305f-180">Since the example works only with `Movie` types, a better option is to use `IValidatableObject` as shown in the following paragraph.</span></span>

<span data-ttu-id="c305f-181">Como alternativa, esse mesmo código pode ser colocado no modelo Implementando o `Validate` método sobre o `IValidatableObject` interface.</span><span class="sxs-lookup"><span data-stu-id="c305f-181">Alternatively, this same code could be placed in the model by implementing the `Validate` method on the `IValidatableObject` interface.</span></span> <span data-ttu-id="c305f-182">Enquanto os atributos de validação personalizada funcionam bem para validar as propriedades individuais, implementando `IValidatableObject` pode ser usado para implementar a validação de nível de classe como visto aqui.</span><span class="sxs-lookup"><span data-stu-id="c305f-182">While custom validation attributes work well for validating individual properties, implementing `IValidatableObject` can be used to implement class-level validation as seen here.</span></span>

[!code-csharp[Main](validation/sample/MovieIValidatable.cs?range=33-41)]

## <a name="client-side-validation"></a><span data-ttu-id="c305f-183">Validação do lado do cliente</span><span class="sxs-lookup"><span data-stu-id="c305f-183">Client side validation</span></span>

<span data-ttu-id="c305f-184">Validação do lado do cliente é uma ótima conveniência para usuários.</span><span class="sxs-lookup"><span data-stu-id="c305f-184">Client side validation is a great convenience for users.</span></span> <span data-ttu-id="c305f-185">Ele salva o tempo que outra forma seriam passam aguardando uma viagem de ida e para o servidor.</span><span class="sxs-lookup"><span data-stu-id="c305f-185">It saves time they would otherwise spend waiting for a round trip to the server.</span></span> <span data-ttu-id="c305f-186">Em termos de negócios, até mesmo algumas frações de segundos multiplicados centenas de vezes por dia adiciona até ser bastante tempo, despesas e frustração.</span><span class="sxs-lookup"><span data-stu-id="c305f-186">In business terms, even a few fractions of seconds multiplied hundreds of times each day adds up to be a lot of time, expense, and frustration.</span></span> <span data-ttu-id="c305f-187">Validação de imediata e simples permite que os usuários trabalhem com mais eficiência e produzir a melhor qualidade de entrada e saída.</span><span class="sxs-lookup"><span data-stu-id="c305f-187">Straightforward and immediate validation enables users to work more efficiently and produce better quality input and output.</span></span>

<span data-ttu-id="c305f-188">Você deve ter uma exibição com as referências de script JavaScript corretas em vigor para a validação do lado do cliente a funcionar como você vê aqui.</span><span class="sxs-lookup"><span data-stu-id="c305f-188">You must have a view with the proper JavaScript script references in place for client side validation to work as you see here.</span></span>

[!code-cshtml[Main](validation/sample/Views/Shared/_Layout.cshtml?range=37)]

[!code-cshtml[Main](validation/sample/Views/Shared/_ValidationScriptsPartial.cshtml)]

<span data-ttu-id="c305f-189">Para validar dados e exibe mensagens de erro usando JavaScript, o MVC usa os atributos de validação, além das propriedades do modelo de metadados do tipo.</span><span class="sxs-lookup"><span data-stu-id="c305f-189">MVC uses validation attributes in addition to type metadata from model properties to validate data and display any error messages using JavaScript.</span></span> <span data-ttu-id="c305f-190">Quando você usa o MVC para renderizar elementos de formulário de um modelo usando [auxiliares de marcação](xref:mvc/views/tag-helpers/intro) ou [auxiliares HTML](xref:mvc/views/overview) ele adicionará HTML 5 [atributos de dados](http://w3c.github.io/html/dom.html#embedding-custom-non-visible-data-with-the-data-attributes) nos elementos de formulário que precisam de validação, como como mostrado abaixo.</span><span class="sxs-lookup"><span data-stu-id="c305f-190">When you use MVC to render form elements from a model using [Tag Helpers](xref:mvc/views/tag-helpers/intro) or [HTML helpers](xref:mvc/views/overview) it will add HTML 5 [data- attributes](http://w3c.github.io/html/dom.html#embedding-custom-non-visible-data-with-the-data-attributes) in the form elements that need validation, as shown below.</span></span> <span data-ttu-id="c305f-191">MVC gera o `data-` atributos para atributos internos e personalizados.</span><span class="sxs-lookup"><span data-stu-id="c305f-191">MVC generates the `data-` attributes for both built-in and custom attributes.</span></span> <span data-ttu-id="c305f-192">Você pode exibir erros de validação no cliente usando os auxiliares de marca relevantes, como mostrado aqui:</span><span class="sxs-lookup"><span data-stu-id="c305f-192">You can display validation errors on the client using the relevant tag helpers as shown here:</span></span>

[!code-cshtml[Main](validation/sample/Views/Movies/Create.cshtml?highlight=4,5&range=19-25)]

<span data-ttu-id="c305f-193">Os auxiliares de marca acima renderizam HTML abaixo.</span><span class="sxs-lookup"><span data-stu-id="c305f-193">The tag helpers above render the HTML below.</span></span> <span data-ttu-id="c305f-194">Observe que o `data-` atributos no HTML de saída corresponde aos atributos de validação para o `ReleaseDate` propriedade.</span><span class="sxs-lookup"><span data-stu-id="c305f-194">Notice that the `data-` attributes in the HTML output correspond to the validation attributes for the `ReleaseDate` property.</span></span> <span data-ttu-id="c305f-195">O `data-val-required` abaixo do atributo contém uma mensagem de erro a ser exibido se o usuário não preencher o campo de data de lançamento, e essa mensagem é exibida em que o acompanha  **\<span >** elemento.</span><span class="sxs-lookup"><span data-stu-id="c305f-195">The `data-val-required` attribute below contains an error message to display if the user doesn't fill in the release date field, and that message displays in the accompanying **\<span>** element.</span></span>

```html
<form action="/Movies/Create" method="post">
    <div class="form-horizontal">
        <h4>Movie</h4>
        <div class="text-danger"></div>
        <div class="form-group">
            <label class="col-md-2 control-label" for="ReleaseDate">ReleaseDate</label>
            <div class="col-md-10">
                <input class="form-control" type="datetime"
                data-val="true" data-val-required="The ReleaseDate field is required."
                id="ReleaseDate" name="ReleaseDate" value="" />
                <span class="text-danger field-validation-valid"
                data-valmsg-for="ReleaseDate" data-valmsg-replace="true"></span>
            </div>
        </div>
    </div>
</form>
```

<span data-ttu-id="c305f-196">Validação do lado do cliente evita envio até que o formulário é válido.</span><span class="sxs-lookup"><span data-stu-id="c305f-196">Client-side validation prevents submission until the form is valid.</span></span> <span data-ttu-id="c305f-197">Botão Enviar executa JavaScript que envia o formulário ou exibe mensagens de erro.</span><span class="sxs-lookup"><span data-stu-id="c305f-197">The Submit button runs JavaScript that either submits the form or displays error messages.</span></span>

<span data-ttu-id="c305f-198">MVC determina os valores de atributo de tipo com base no tipo de dados .NET de uma propriedade, possivelmente substituído usando `[DataType]` atributos.</span><span class="sxs-lookup"><span data-stu-id="c305f-198">MVC determines type attribute values based on the .NET data type of a property, possibly overridden using `[DataType]` attributes.</span></span> <span data-ttu-id="c305f-199">A base de `[DataType]` atributo não faz nenhuma validação do lado do servidor real.</span><span class="sxs-lookup"><span data-stu-id="c305f-199">The base `[DataType]` attribute does no real server-side validation.</span></span> <span data-ttu-id="c305f-200">Navegadores escolha suas próprias mensagens de erro e exibem os erros, mas desejar, porém o pacote discreto de validação jQuery pode substituir as mensagens e exibi-los de forma consistente com outras pessoas.</span><span class="sxs-lookup"><span data-stu-id="c305f-200">Browsers choose their own error messages and display those errors however they wish, however the jQuery Validation Unobtrusive package can override the messages and display them consistently with others.</span></span> <span data-ttu-id="c305f-201">Isso acontece mais óbvio é quando os usuários aplicar `[DataType]` subclasses como `[EmailAddress]`.</span><span class="sxs-lookup"><span data-stu-id="c305f-201">This happens most obviously when users apply `[DataType]` subclasses such as `[EmailAddress]`.</span></span>

## <a name="iclientmodelvalidator"></a><span data-ttu-id="c305f-202">IClientModelValidator</span><span class="sxs-lookup"><span data-stu-id="c305f-202">IClientModelValidator</span></span>

<span data-ttu-id="c305f-203">Você pode criar lógica do lado do cliente para o atributo personalizado, e [validação discreta](http://jqueryvalidation.org/documentation/) será executado no cliente para você automaticamente como parte da validação.</span><span class="sxs-lookup"><span data-stu-id="c305f-203">You may create client side logic for your custom attribute, and [unobtrusive validation](http://jqueryvalidation.org/documentation/) will execute it on the client for you automatically as part of validation.</span></span> <span data-ttu-id="c305f-204">A primeira etapa é controlar quais atributos de dados são adicionados, Implementando a `IClientModelValidator` interface conforme mostrado aqui:</span><span class="sxs-lookup"><span data-stu-id="c305f-204">The first step is to control what data- attributes are added by implementing the `IClientModelValidator` interface as shown here:</span></span>

[!code-csharp[Main](validation/sample/ClassicMovieAttribute.cs?range=30-42)]

<span data-ttu-id="c305f-205">Atributos que implementam esta interface podem adicionar atributos HTML para campos gerados.</span><span class="sxs-lookup"><span data-stu-id="c305f-205">Attributes that implement this interface can add HTML attributes to generated fields.</span></span> <span data-ttu-id="c305f-206">Examinando a saída para o `ReleaseDate` revela de elemento HTML que é semelhante ao exemplo anterior, exceto que agora há uma `data-val-classicmovie` atributo que foi definido no `AddValidation` método `IClientModelValidator`.</span><span class="sxs-lookup"><span data-stu-id="c305f-206">Examining the output for the `ReleaseDate` element reveals HTML that is similar to the previous example, except now there is a `data-val-classicmovie` attribute that was defined in the `AddValidation` method of `IClientModelValidator`.</span></span>

```html
<input class="form-control" type="datetime"
    data-val="true"
    data-val-classicmovie="Classic movies must have a release year earlier than 1960."
    data-val-classicmovie-year="1960"
    data-val-required="The ReleaseDate field is required."
    id="ReleaseDate" name="ReleaseDate" value="" />
```

<span data-ttu-id="c305f-207">Validação discreta usa os dados a `data-` atributos para exibir mensagens de erro.</span><span class="sxs-lookup"><span data-stu-id="c305f-207">Unobtrusive validation uses the data in the `data-` attributes to display error messages.</span></span> <span data-ttu-id="c305f-208">No entanto, o jQuery não sabe sobre as regras ou mensagens até que você os adiciona do jQuery `validator` objeto.</span><span class="sxs-lookup"><span data-stu-id="c305f-208">However, jQuery doesn't know about rules or messages until you add them to jQuery's `validator` object.</span></span> <span data-ttu-id="c305f-209">Isso é mostrado no exemplo a seguir que adiciona um método chamado `classicmovie` que contém o código de validação de cliente personalizadas para o jQuery `validator` objeto.</span><span class="sxs-lookup"><span data-stu-id="c305f-209">This is shown in the example below that adds a method named `classicmovie` containing custom client validation code to the jQuery `validator` object.</span></span>

[!code-javascript[Main](validation/sample/Views/Movies/Create.cshtml?range=71-93)]

<span data-ttu-id="c305f-210">Agora o jQuery tem as informações para executar a validação personalizada do JavaScript, bem como a mensagem de erro a ser exibido se esse código de validação retornará false.</span><span class="sxs-lookup"><span data-stu-id="c305f-210">Now jQuery has the information to execute the custom JavaScript validation as well as the error message to display if that validation code returns false.</span></span>

## <a name="remote-validation"></a><span data-ttu-id="c305f-211">Validação remota</span><span class="sxs-lookup"><span data-stu-id="c305f-211">Remote validation</span></span>

<span data-ttu-id="c305f-212">Validação remota é um ótimo recurso para usar quando você precisa validar os dados no cliente em relação aos dados no servidor.</span><span class="sxs-lookup"><span data-stu-id="c305f-212">Remote validation is a great feature to use when you need to validate data on the client against data on the server.</span></span> <span data-ttu-id="c305f-213">Por exemplo, seu aplicativo precisará verificar se um email ou nome de usuário já está em uso, e ele deve consultar uma grande quantidade de dados para fazer isso.</span><span class="sxs-lookup"><span data-stu-id="c305f-213">For example, your app may need to verify whether an email or user name is already in use, and it must query a large amount of data to do so.</span></span> <span data-ttu-id="c305f-214">Baixando grandes conjuntos de dados para validar um ou alguns campos consome muitos recursos.</span><span class="sxs-lookup"><span data-stu-id="c305f-214">Downloading large sets of data for validating one or a few fields consumes too many resources.</span></span> <span data-ttu-id="c305f-215">Ele também pode expor informações confidenciais.</span><span class="sxs-lookup"><span data-stu-id="c305f-215">It may also expose sensitive information.</span></span> <span data-ttu-id="c305f-216">Uma alternativa é fazer uma solicitação de ida e volta para validar um campo.</span><span class="sxs-lookup"><span data-stu-id="c305f-216">An alternative is to make a round-trip request to validate a field.</span></span>

<span data-ttu-id="c305f-217">Você pode implementar a validação remota em um processo de duas etapas.</span><span class="sxs-lookup"><span data-stu-id="c305f-217">You can implement remote validation in a two step process.</span></span> <span data-ttu-id="c305f-218">Primeiro, você deve anotar o modelo com o `[Remote]` atributo.</span><span class="sxs-lookup"><span data-stu-id="c305f-218">First, you must annotate your model with the `[Remote]` attribute.</span></span> <span data-ttu-id="c305f-219">O `[Remote]` atributo aceita várias sobrecargas que você pode usar para direcionar o JavaScript do lado do cliente para o código apropriado para chamar.</span><span class="sxs-lookup"><span data-stu-id="c305f-219">The `[Remote]` attribute accepts multiple overloads you can use to direct client side JavaScript to the appropriate code to call.</span></span> <span data-ttu-id="c305f-220">O exemplo aponta para o `VerifyEmail` método de ação de `Users` controlador.</span><span class="sxs-lookup"><span data-stu-id="c305f-220">The example points to the `VerifyEmail` action method of the `Users` controller.</span></span>

[!code-csharp[Main](validation/sample/User.cs?range=5-9)]

<span data-ttu-id="c305f-221">A segunda etapa é colocar o código de validação no método de ação correspondente, conforme definido no `[Remote]` atributo.</span><span class="sxs-lookup"><span data-stu-id="c305f-221">The second step is putting the validation code in the corresponding action method as defined in the `[Remote]` attribute.</span></span> <span data-ttu-id="c305f-222">Ele retorna um `JsonResult` que do lado do cliente pode usar para continuar ou pausar e exibir um erro, se necessário.</span><span class="sxs-lookup"><span data-stu-id="c305f-222">It returns a `JsonResult` that the client side can use to proceed or pause and display an error if needed.</span></span>

[!code-none[Main](validation/sample/UsersController.cs?range=19-28)]

<span data-ttu-id="c305f-223">Agora, quando os usuários inserem um email, o JavaScript no modo de exibição faz uma chamada remota para ver se o email foi usado e nesse caso, em seguida, exibe a mensagem de erro.</span><span class="sxs-lookup"><span data-stu-id="c305f-223">Now when users enter an email, JavaScript in the view makes a remote call to see if that email has been taken, and if so, then displays the error message.</span></span> <span data-ttu-id="c305f-224">Caso contrário, o usuário pode enviar o formulário como de costume.</span><span class="sxs-lookup"><span data-stu-id="c305f-224">Otherwise, the user can submit the form as usual.</span></span>
