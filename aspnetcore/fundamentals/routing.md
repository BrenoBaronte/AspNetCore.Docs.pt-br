---
title: Roteamento no ASP.NET Core
author: ardalis
description: Descubra como a funcionalidade de roteamento do ASP.NET Core é responsável por mapear uma solicitação de entrada para um manipulador de rotas.
ms.author: riande
ms.custom: mvc
ms.date: 10/01/2018
uid: fundamentals/routing
ms.openlocfilehash: a014782ba503bc8bd0fdefb4cb4f382aa8fde4cd
ms.sourcegitcommit: c43a6f1fe72d7c2db4b5815fd532f2b45d964e07
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 10/30/2018
ms.locfileid: "50244964"
---
# <a name="routing-in-aspnet-core"></a><span data-ttu-id="3589e-103">Roteamento no ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="3589e-103">Routing in ASP.NET Core</span></span>

<span data-ttu-id="3589e-104">Por [Ryan Nowak](https://github.com/rynowak), [Steve Smith](https://ardalis.com/) e [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="3589e-104">By [Ryan Nowak](https://github.com/rynowak), [Steve Smith](https://ardalis.com/), and [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

<span data-ttu-id="3589e-105">A funcionalidade de roteamento é responsável por mapear uma solicitação de entrada para um manipulador de rotas.</span><span class="sxs-lookup"><span data-stu-id="3589e-105">Routing functionality is responsible for mapping an incoming request to a route handler.</span></span> <span data-ttu-id="3589e-106">As rotas são definidas no aplicativo e configuradas quando o aplicativo é iniciado.</span><span class="sxs-lookup"><span data-stu-id="3589e-106">Routes are defined in the app and configured when the app starts.</span></span> <span data-ttu-id="3589e-107">Uma rota pode opcionalmente extrair os valores da URL contida na solicitação e esses valores podem então ser usados para o processamento da solicitação.</span><span class="sxs-lookup"><span data-stu-id="3589e-107">A route can optionally extract values from the URL contained in the request, and these values can then be used for request processing.</span></span> <span data-ttu-id="3589e-108">Usando as informações de rota do aplicativo, a funcionalidade de roteamento também é capaz de gerar URLs que são mapeadas para manipuladores de rotas.</span><span class="sxs-lookup"><span data-stu-id="3589e-108">Using route information from the app, the routing functionality is also able to generate URLs that map to route handlers.</span></span> <span data-ttu-id="3589e-109">Portanto, o roteamento pode encontrar um manipulador de rotas com base em uma URL ou encontrar a URL correspondente a um determinado manipulador de rotas com base nas informações do manipulador de rotas.</span><span class="sxs-lookup"><span data-stu-id="3589e-109">Therefore, routing can find a route handler based on a URL, or find the URL corresponding to a given route handler based on route handler information.</span></span>

<span data-ttu-id="3589e-110">A maioria dos aplicativos deve escolher um esquema de roteamento básico e descritivo para que as URLs sejam legíveis e significativas.</span><span class="sxs-lookup"><span data-stu-id="3589e-110">Most apps should choose a basic and descriptive routing scheme so that URLs are readable and meaningful.</span></span> <span data-ttu-id="3589e-111">A rota convencional padrão `{controller=Home}/{action=Index}/{id?}`:</span><span class="sxs-lookup"><span data-stu-id="3589e-111">The default conventional route `{controller=Home}/{action=Index}/{id?}`:</span></span>

* <span data-ttu-id="3589e-112">Oferece suporte a um esquema de roteamento básico e descritivo:</span><span class="sxs-lookup"><span data-stu-id="3589e-112">Supports a basic and descriptive routing scheme:</span></span>
* <span data-ttu-id="3589e-113">É um bom ponto de partida para aplicativos web que devem ser usados por navegadores.</span><span class="sxs-lookup"><span data-stu-id="3589e-113">Is a good starting point for web apps intended for use by browsers.</span></span>

<span data-ttu-id="3589e-114">É comum adicionar outras rotas concisas as áreas de alto tráfego do aplicativo em situações especiais (por exemplo, blog, comércio eletrônico) usando [roteamento de atributo](xref:mvc/controllers/routing#attribute-routing) ou rotas convencionais dedicadas.</span><span class="sxs-lookup"><span data-stu-id="3589e-114">It's common to add additional terse routes to high traffic areas of the app in specialized situations (for example, blog, ecommerce) using [attribute routing](xref:mvc/controllers/routing#attribute-routing) or dedicated conventional routes.</span></span>

<span data-ttu-id="3589e-115">As APIs da Web devem usar o roteamento de atributo para modelar a funcionalidade do aplicativo como um conjunto de recursos em que as operações são representadas por verbos HTTP.</span><span class="sxs-lookup"><span data-stu-id="3589e-115">Web APIs should use attribute routing to model the app's functionality as a set of resources where operations are represented by HTTP verbs.</span></span> <span data-ttu-id="3589e-116">Isso significa que muitas operações (por exemplo, GET, POST) no mesmo recurso lógico usarão a mesma URL.</span><span class="sxs-lookup"><span data-stu-id="3589e-116">This means that many operations (for example, GET, POST) on the same logical resource will use the same URL.</span></span> <span data-ttu-id="3589e-117">O roteamento de atributos fornece um nível de controle necessário para projetar cuidadosamente um espaço de URL da API.</span><span class="sxs-lookup"><span data-stu-id="3589e-117">Attribute routing provides a level of control that is needed to carefully design an API's URL-space.</span></span>

<span data-ttu-id="3589e-118">O suporte à geração de URL do MVC permite que o aplicativo seja desenvolvido sem hard-coding das URLs para vincular o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="3589e-118">MVC's URL generation support allows the app to be developed without hard coding the URLs to link the app together.</span></span> <span data-ttu-id="3589e-119">Isso permite começar com uma configuração de roteamento básica e modificar as rotas, depois que a forma do aplicativo é determinada.</span><span class="sxs-lookup"><span data-stu-id="3589e-119">This allows for starting with a basic routing configuration, and modifying the routes after the app's shape is determined.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="3589e-120">Este documento aborda o roteamento de nível inferior do ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="3589e-120">This document covers low-level ASP.NET Core routing.</span></span> <span data-ttu-id="3589e-121">Para obter informações sobre o roteamento do ASP.NET Core MVC, confira <xref:mvc/controllers/routing>.</span><span class="sxs-lookup"><span data-stu-id="3589e-121">For information on ASP.NET Core MVC routing, see <xref:mvc/controllers/routing>.</span></span>

<span data-ttu-id="3589e-122">[Exibir ou baixar código de exemplo](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/samples) ([como baixar](xref:index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="3589e-122">[View or download sample code](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/samples) ([how to download](xref:index#how-to-download-a-sample))</span></span>

## <a name="routing-basics"></a><span data-ttu-id="3589e-123">Conceitos básicos sobre roteamento</span><span class="sxs-lookup"><span data-stu-id="3589e-123">Routing basics</span></span>

<span data-ttu-id="3589e-124">O roteamento usa *rotas* (implementações de <xref:Microsoft.AspNetCore.Routing.IRouter>) para:</span><span class="sxs-lookup"><span data-stu-id="3589e-124">Routing uses *routes* (implementations of <xref:Microsoft.AspNetCore.Routing.IRouter>) to:</span></span>

* <span data-ttu-id="3589e-125">Mapear solicitações de entrada para *manipuladores de rotas*.</span><span class="sxs-lookup"><span data-stu-id="3589e-125">Map incoming requests to *route handlers*.</span></span>
* <span data-ttu-id="3589e-126">Gerar as URLs usadas nas respostas.</span><span class="sxs-lookup"><span data-stu-id="3589e-126">Generate URLs used in responses.</span></span>

<span data-ttu-id="3589e-127">Em geral, um aplicativo tem uma única coleção de rotas.</span><span class="sxs-lookup"><span data-stu-id="3589e-127">Generally, an app has a single collection of routes.</span></span> <span data-ttu-id="3589e-128">Quando uma solicitação é recebida, a coleção de rotas é processada na ordem.</span><span class="sxs-lookup"><span data-stu-id="3589e-128">When a request arrives, the route collection is processed in order.</span></span> <span data-ttu-id="3589e-129">A solicitação de entrada procura uma rota que corresponde à URL de solicitação chamando o método <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> em cada rota disponível na coleção de rotas.</span><span class="sxs-lookup"><span data-stu-id="3589e-129">The incoming request looks for a route that matches the request URL by calling the <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> method on each available route in the route collection.</span></span> <span data-ttu-id="3589e-130">Por outro lado, uma resposta pode usar o roteamento para gerar URLs (por exemplo, para redirecionamento ou links) com base nas informações de rotas e evitar a necessidade de embutir as URLs em código, o que ajuda na facilidade de manutenção.</span><span class="sxs-lookup"><span data-stu-id="3589e-130">By contrast, a response can use routing to generate URLs (for example, for redirection or links) based on route information and thus avoid having to hard-code URLs, which helps maintainability.</span></span>

<span data-ttu-id="3589e-131">O roteamento está conectado ao pipeline do [middleware](xref:fundamentals/middleware/index) pela classe <xref:Microsoft.AspNetCore.Builder.RouterMiddleware>.</span><span class="sxs-lookup"><span data-stu-id="3589e-131">Routing is connected to the [middleware](xref:fundamentals/middleware/index) pipeline by the <xref:Microsoft.AspNetCore.Builder.RouterMiddleware> class.</span></span> <span data-ttu-id="3589e-132">O [ASP.NET Core MVC](xref:mvc/overview) adiciona o roteamento ao pipeline do middleware como parte de sua configuração.</span><span class="sxs-lookup"><span data-stu-id="3589e-132">[ASP.NET Core MVC](xref:mvc/overview) adds routing to the middleware pipeline as part of its configuration.</span></span> <span data-ttu-id="3589e-133">Para saber mais sobre o uso do roteamento como um componente autônomo, confira a seção [Usar o middleware de roteamento](#use-routing-middleware).</span><span class="sxs-lookup"><span data-stu-id="3589e-133">To learn about using routing as a standalone component, see [Use Routing Middleware](#use-routing-middleware) section.</span></span>

### <a name="url-matching"></a><span data-ttu-id="3589e-134">Correspondência de URL</span><span class="sxs-lookup"><span data-stu-id="3589e-134">URL matching</span></span>

<span data-ttu-id="3589e-135">Correspondência de URL é o processo pelo qual o roteamento expede uma solicitação de entrada para um *manipulador*.</span><span class="sxs-lookup"><span data-stu-id="3589e-135">URL matching is the process by which routing dispatches an incoming request to a *handler*.</span></span> <span data-ttu-id="3589e-136">Esse processo se baseia nos dados do caminho da URL, mas pode ser estendido para considerar qualquer dado na solicitação.</span><span class="sxs-lookup"><span data-stu-id="3589e-136">This process is based on data in the URL path but can be extended to consider any data in the request.</span></span> <span data-ttu-id="3589e-137">A capacidade de expedir solicitações para manipuladores separados é fundamental para dimensionar o tamanho e a complexidade de um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="3589e-137">The ability to dispatch requests to separate handlers is key to scaling the size and complexity of an app.</span></span>

<span data-ttu-id="3589e-138">As solicitações de entrada entram no `RouterMiddleware`, que chama o método <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> em cada rota na sequência.</span><span class="sxs-lookup"><span data-stu-id="3589e-138">Incoming requests enter the `RouterMiddleware`, which calls the <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> method on each route in sequence.</span></span> <span data-ttu-id="3589e-139">A instância <xref:Microsoft.AspNetCore.Routing.IRouter> escolhe se deseja *manipular* a solicitação definindo o [RouteContext.Handler](xref:Microsoft.AspNetCore.Routing.RouteContext.Handler*) como um <xref:Microsoft.AspNetCore.Http.RequestDelegate> não nulo.</span><span class="sxs-lookup"><span data-stu-id="3589e-139">The <xref:Microsoft.AspNetCore.Routing.IRouter> instance chooses whether to *handle* the request by setting the [RouteContext.Handler](xref:Microsoft.AspNetCore.Routing.RouteContext.Handler*) to a non-null <xref:Microsoft.AspNetCore.Http.RequestDelegate>.</span></span> <span data-ttu-id="3589e-140">Se uma rota definir um manipulador para a solicitação, o processamento de rotas será interrompido e o manipulador será invocado para processar a solicitação.</span><span class="sxs-lookup"><span data-stu-id="3589e-140">If a route sets a handler for the request, route processing stops, and the handler is invoked to process the request.</span></span> <span data-ttu-id="3589e-141">Se todas as rotas forem testadas e nenhum manipulador for encontrado para a solicitação, o middleware chamará o *próximo* e o próximo middleware no pipeline da solicitação será invocado.</span><span class="sxs-lookup"><span data-stu-id="3589e-141">If all routes are tried and no handler is found for the request, the middleware calls *next*, and the next middleware in the request pipeline is invoked.</span></span>

<span data-ttu-id="3589e-142">A entrada primária para `RouteAsync` é o [RouteContext.HttpContext](xref:Microsoft.AspNetCore.Routing.RouteContext.HttpContext*) associado à solicitação atual.</span><span class="sxs-lookup"><span data-stu-id="3589e-142">The primary input to `RouteAsync` is the [RouteContext.HttpContext](xref:Microsoft.AspNetCore.Routing.RouteContext.HttpContext*) associated with the current request.</span></span> <span data-ttu-id="3589e-143">O `RouteContext.Handler` e o [RouteContext.RouteData](xref:Microsoft.AspNetCore.Routing.RouteContext.RouteData*) são os resultados definidos depois que uma rota é correspondida.</span><span class="sxs-lookup"><span data-stu-id="3589e-143">The `RouteContext.Handler` and [RouteContext.RouteData](xref:Microsoft.AspNetCore.Routing.RouteContext.RouteData*) are outputs set after a route matches.</span></span>

<span data-ttu-id="3589e-144">Uma correspondência durante `RouteAsync` também define as propriedades de `RouteContext.RouteData` para os valores apropriados com base no processamento da solicitação executado até o momento.</span><span class="sxs-lookup"><span data-stu-id="3589e-144">A match during `RouteAsync` also sets the properties of the `RouteContext.RouteData` to appropriate values based on the request processing performed thus far.</span></span> <span data-ttu-id="3589e-145">Se uma rota corresponde a uma solicitação, o `RouteContext.RouteData` contém informações de estado importantes sobre o *resultado*.</span><span class="sxs-lookup"><span data-stu-id="3589e-145">If a route matches a request, the `RouteContext.RouteData` contains important state information about the *result*.</span></span>

<span data-ttu-id="3589e-146">[RouteData.Values](xref:Microsoft.AspNetCore.Routing.RouteData.Values*) é um dicionário de *valores de rota* produzido por meio da rota.</span><span class="sxs-lookup"><span data-stu-id="3589e-146">[RouteData.Values](xref:Microsoft.AspNetCore.Routing.RouteData.Values*) is a dictionary of *route values* produced from the route.</span></span> <span data-ttu-id="3589e-147">Esses valores geralmente são determinados pela criação de token da URL e podem ser usados para aceitar a entrada do usuário ou tomar outras decisões de expedição dentro do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="3589e-147">These values are usually determined by tokenizing the URL and can be used to accept user input or to make further dispatching decisions inside the app.</span></span>

<span data-ttu-id="3589e-148">[RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*) é um recipiente de propriedades de dados adicionais relacionados à rota correspondente.</span><span class="sxs-lookup"><span data-stu-id="3589e-148">[RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*) is a property bag of additional data related to the matched route.</span></span> <span data-ttu-id="3589e-149">`DataTokens` são fornecidos para dar suporte à associação de dados de estado com cada rota para que o aplicativo possa tomar decisões posteriormente com base em qual rota foi correspondida.</span><span class="sxs-lookup"><span data-stu-id="3589e-149">`DataTokens` are provided to support associating state data with each route so that the app can make decisions later based on which route matched.</span></span> <span data-ttu-id="3589e-150">Esses valores são definidos pelo desenvolvedor e **não** afetam de forma alguma o comportamento do roteamento.</span><span class="sxs-lookup"><span data-stu-id="3589e-150">These values are developer-defined and do **not** affect the behavior of routing in any way.</span></span> <span data-ttu-id="3589e-151">Além disso, os valores armazenados em stash em `RouteData.DataTokens` podem ser de qualquer tipo, ao contrário de `RouteData.Values`, que precisa ser facilmente conversível de/em cadeias de caracteres.</span><span class="sxs-lookup"><span data-stu-id="3589e-151">Additionally, values stashed in `RouteData.DataTokens` can be of any type, in contrast to `RouteData.Values`, which must be easily convertible to and from strings.</span></span>

<span data-ttu-id="3589e-152">[RouteData.Routers](xref:Microsoft.AspNetCore.Routing.RouteData.Routers*) é uma lista das rotas que participaram da correspondência bem-sucedida da solicitação.</span><span class="sxs-lookup"><span data-stu-id="3589e-152">[RouteData.Routers](xref:Microsoft.AspNetCore.Routing.RouteData.Routers*) is a list of the routes that took part in successfully matching the request.</span></span> <span data-ttu-id="3589e-153">As rotas podem ser aninhadas uma dentro da outra.</span><span class="sxs-lookup"><span data-stu-id="3589e-153">Routes can be nested inside of one another.</span></span> <span data-ttu-id="3589e-154">A propriedade `Routers` reflete o caminho pela árvore lógica de rotas que resultou em uma correspondência.</span><span class="sxs-lookup"><span data-stu-id="3589e-154">The `Routers` property reflects the path through the logical tree of routes that resulted in a match.</span></span> <span data-ttu-id="3589e-155">Em geral, o primeiro item em `Routers` é a coleção de rotas e deve ser usado para a geração de URL.</span><span class="sxs-lookup"><span data-stu-id="3589e-155">Generally, the first item in `Routers` is the route collection and should be used for URL generation.</span></span> <span data-ttu-id="3589e-156">O último item em `Routers` é o manipulador de rotas que teve uma correspondência.</span><span class="sxs-lookup"><span data-stu-id="3589e-156">The last item in `Routers` is the route handler that matched.</span></span>

### <a name="url-generation"></a><span data-ttu-id="3589e-157">Geração de URL</span><span class="sxs-lookup"><span data-stu-id="3589e-157">URL generation</span></span>

<span data-ttu-id="3589e-158">Geração de URL é o processo pelo qual o roteamento pode criar um caminho de URL de acordo com um conjunto de valores de rota.</span><span class="sxs-lookup"><span data-stu-id="3589e-158">URL generation is the process by which routing can create a URL path based on a set of route values.</span></span> <span data-ttu-id="3589e-159">Isso permite uma separação lógica entre os manipuladores e as URLs que os acessam.</span><span class="sxs-lookup"><span data-stu-id="3589e-159">This allows for a logical separation between your handlers and the URLs that access them.</span></span>

<span data-ttu-id="3589e-160">A geração de URL segue um processo iterativo semelhante, mas começa com o código da estrutura ou do usuário chamando o método <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> da coleção de rotas.</span><span class="sxs-lookup"><span data-stu-id="3589e-160">URL generation follows a similar iterative process, but it starts with user or framework code calling into the <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> method of the route collection.</span></span> <span data-ttu-id="3589e-161">Em seguida, cada *rota* terá seu método `GetVirtualPath` chamado em sequência, até que um <xref:Microsoft.AspNetCore.Routing.VirtualPathData> não nulo seja retornado.</span><span class="sxs-lookup"><span data-stu-id="3589e-161">Each *route* then has its `GetVirtualPath` method called in sequence until a non-null <xref:Microsoft.AspNetCore.Routing.VirtualPathData> is returned.</span></span>

<span data-ttu-id="3589e-162">As entradas primárias para `GetVirtualPath` são:</span><span class="sxs-lookup"><span data-stu-id="3589e-162">The primary inputs to `GetVirtualPath` are:</span></span>

* [<span data-ttu-id="3589e-163">VirtualPathContext.HttpContext</span><span class="sxs-lookup"><span data-stu-id="3589e-163">VirtualPathContext.HttpContext</span></span>](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.HttpContext*)
* [<span data-ttu-id="3589e-164">VirtualPathContext.Values</span><span class="sxs-lookup"><span data-stu-id="3589e-164">VirtualPathContext.Values</span></span>](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values*)
* [<span data-ttu-id="3589e-165">VirtualPathContext.AmbientValues</span><span class="sxs-lookup"><span data-stu-id="3589e-165">VirtualPathContext.AmbientValues</span></span>](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues*)

<span data-ttu-id="3589e-166">As rotas usam principalmente os valores de rota fornecidos por `Values` e `AmbientValues` para decidir se é possível gerar uma URL e quais valores serão incluídos.</span><span class="sxs-lookup"><span data-stu-id="3589e-166">Routes primarily use the route values provided by the `Values` and `AmbientValues` to decide whether it's possible to generate a URL and what values to include.</span></span> <span data-ttu-id="3589e-167">Os `AmbientValues` são o conjunto de valores de rota produzidos pela correspondência da solicitação atual com o sistema de roteamento.</span><span class="sxs-lookup"><span data-stu-id="3589e-167">The `AmbientValues` are the set of route values that were produced from matching the current request with the routing system.</span></span> <span data-ttu-id="3589e-168">Por outro lado, `Values` são os valores de rota que especificam como gerar a URL desejada para a operação atual.</span><span class="sxs-lookup"><span data-stu-id="3589e-168">In contrast, `Values` are the route values that specify how to generate the desired URL for the current operation.</span></span> <span data-ttu-id="3589e-169">O `HttpContext` é fornecido para o caso de uma rota precisar obter serviços ou dados adicionais associados ao contexto atual.</span><span class="sxs-lookup"><span data-stu-id="3589e-169">The `HttpContext` is provided in case a route needs to obtain services or additional data associated with the current context.</span></span>

> [!TIP]
> <span data-ttu-id="3589e-170">Considere [VirtualPathContext.Values](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values*) como um conjunto de substituições de [VirtualPathContext.AmbientValues](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues*).</span><span class="sxs-lookup"><span data-stu-id="3589e-170">Think of [VirtualPathContext.Values](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values*) as being a set of overrides for the [VirtualPathContext.AmbientValues](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues*).</span></span> <span data-ttu-id="3589e-171">A geração de URL tenta reutilizar os valores de rota da solicitação atual para facilitar a geração de URLs para links usando a mesma rota ou os mesmos valores de rota.</span><span class="sxs-lookup"><span data-stu-id="3589e-171">URL generation attempts to reuse route values from the current request to make it easy to generate URLs for links using the same route or route values.</span></span>

<span data-ttu-id="3589e-172">A saída de `GetVirtualPath` é um `VirtualPathData`.</span><span class="sxs-lookup"><span data-stu-id="3589e-172">The output of `GetVirtualPath` is a `VirtualPathData`.</span></span> <span data-ttu-id="3589e-173">`VirtualPathData` é um paralelo de `RouteData`.</span><span class="sxs-lookup"><span data-stu-id="3589e-173">`VirtualPathData` is a parallel of `RouteData`.</span></span> <span data-ttu-id="3589e-174">`VirtualPathData` contém o `VirtualPath` da URL de saída e algumas propriedades adicionais que devem ser definidas pela rota.</span><span class="sxs-lookup"><span data-stu-id="3589e-174">`VirtualPathData` contains the `VirtualPath` for the output URL and some additional properties that should be set by the route.</span></span>

<span data-ttu-id="3589e-175">A propriedade [VirtualPathData.VirtualPath](xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath*) contém o *caminho virtual* produzido pela rota.</span><span class="sxs-lookup"><span data-stu-id="3589e-175">The [VirtualPathData.VirtualPath](xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath*) property contains the *virtual path* produced by the route.</span></span> <span data-ttu-id="3589e-176">Dependendo das suas necessidades, talvez você precise processar ainda mais o caminho.</span><span class="sxs-lookup"><span data-stu-id="3589e-176">Depending on your needs, you may need to process the path further.</span></span> <span data-ttu-id="3589e-177">Se você desejar renderizar a URL gerada em HTML, preceda o caminho base do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="3589e-177">If you want to render the generated URL in HTML, prepend the base path of the app.</span></span>

<span data-ttu-id="3589e-178">O [VirtualPathData.Router](xref:Microsoft.AspNetCore.Routing.VirtualPathData.Router*) é uma referência à rota que gerou a URL com êxito.</span><span class="sxs-lookup"><span data-stu-id="3589e-178">The [VirtualPathData.Router](xref:Microsoft.AspNetCore.Routing.VirtualPathData.Router*) is a reference to the route that successfully generated the URL.</span></span>

<span data-ttu-id="3589e-179">As propriedades de [VirtualPathData.DataTokens](xref:Microsoft.AspNetCore.Routing.VirtualPathData.DataTokens*) são um dicionário de dados adicionais relacionados à rota que gerou a URL.</span><span class="sxs-lookup"><span data-stu-id="3589e-179">The [VirtualPathData.DataTokens](xref:Microsoft.AspNetCore.Routing.VirtualPathData.DataTokens*) properties is a dictionary of additional data related to the route that generated the URL.</span></span> <span data-ttu-id="3589e-180">Isso é o paralelo de [RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*).</span><span class="sxs-lookup"><span data-stu-id="3589e-180">This is the parallel of [RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*).</span></span>

### <a name="creating-routes"></a><span data-ttu-id="3589e-181">Criando rotas</span><span class="sxs-lookup"><span data-stu-id="3589e-181">Creating routes</span></span>

<span data-ttu-id="3589e-182">O roteamento fornece a classe <xref:Microsoft.AspNetCore.Routing.Route> como a implementação padrão de <xref:Microsoft.AspNetCore.Routing.IRouter>.</span><span class="sxs-lookup"><span data-stu-id="3589e-182">Routing provides the <xref:Microsoft.AspNetCore.Routing.Route> class as the standard implementation of <xref:Microsoft.AspNetCore.Routing.IRouter>.</span></span> <span data-ttu-id="3589e-183">`Route` usa a sintaxe de *modelo de rota* para definir padrões que corresponderão ao caminho da URL quando <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> for chamado.</span><span class="sxs-lookup"><span data-stu-id="3589e-183">`Route` uses the *route template* syntax to define patterns that match against the URL path when <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> is called.</span></span> <span data-ttu-id="3589e-184">`Route` usa o mesmo modelo de rota para gerar uma URL quando `GetVirtualPath` é chamado.</span><span class="sxs-lookup"><span data-stu-id="3589e-184">`Route` uses the same route template to generate a URL when `GetVirtualPath` is called.</span></span>

<span data-ttu-id="3589e-185">A maioria dos aplicativos cria rotas chamando <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> ou um dos métodos de extensão semelhantes definidos em <xref:Microsoft.AspNetCore.Routing.IRouteBuilder>.</span><span class="sxs-lookup"><span data-stu-id="3589e-185">Most apps create routes by calling <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> or one of the similar extension methods defined on <xref:Microsoft.AspNetCore.Routing.IRouteBuilder>.</span></span> <span data-ttu-id="3589e-186">Todos esses métodos criam uma instância de <xref:Microsoft.AspNetCore.Routing.Route> e adicionam-na à coleção de rotas.</span><span class="sxs-lookup"><span data-stu-id="3589e-186">All of these methods create an instance of <xref:Microsoft.AspNetCore.Routing.Route> and add it to the route collection.</span></span>

<span data-ttu-id="3589e-187">`MapRoute` não usa um parâmetro de manipulador de rota.</span><span class="sxs-lookup"><span data-stu-id="3589e-187">`MapRoute` doesn't take a route handler parameter.</span></span> <span data-ttu-id="3589e-188">`MapRoute` apenas adiciona rotas que são manipuladas pelo <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span><span class="sxs-lookup"><span data-stu-id="3589e-188">`MapRoute` only adds routes that are handled by the <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span></span> <span data-ttu-id="3589e-189">Como o manipulador padrão é um `IRouter`, ele pode optar por não manipular a solicitação.</span><span class="sxs-lookup"><span data-stu-id="3589e-189">Since the default handler is an `IRouter`, it may decide not to handle the request.</span></span> <span data-ttu-id="3589e-190">Por exemplo, o ASP.NET Core MVC normalmente é configurado como um manipulador padrão que só manipula as solicitações que correspondem a um controlador e a uma ação disponíveis.</span><span class="sxs-lookup"><span data-stu-id="3589e-190">For example, ASP.NET Core MVC is typically configured as a default handler that only handles requests that match an available controller and action.</span></span> <span data-ttu-id="3589e-191">Para saber mais sobre o roteamento para o MVC, confira <xref:mvc/controllers/routing>.</span><span class="sxs-lookup"><span data-stu-id="3589e-191">To learn more about routing to MVC, see <xref:mvc/controllers/routing>.</span></span>

<span data-ttu-id="3589e-192">O exemplo de código a seguir é um exemplo de uma chamada `MapRoute` usada por uma definição de rota típica do ASP.NET Core MVC:</span><span class="sxs-lookup"><span data-stu-id="3589e-192">The following code example is an example of a `MapRoute` call used by a typical ASP.NET Core MVC route definition:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="3589e-193">Esse modelo corresponde a um caminho de URL, como `/Products/Details/17` e extrai os valores de rota `{ controller = Products, action = Details, id = 17 }`.</span><span class="sxs-lookup"><span data-stu-id="3589e-193">This template matches a URL path like `/Products/Details/17` and extracts the route values `{ controller = Products, action = Details, id = 17 }`.</span></span> <span data-ttu-id="3589e-194">Os valores de rota são determinados pela divisão do caminho da URL em segmentos e pela correspondência de cada segmento com o nome *parâmetro de rota* no modelo de rota.</span><span class="sxs-lookup"><span data-stu-id="3589e-194">The route values are determined by splitting the URL path into segments and matching each segment with the *route parameter* name in the route template.</span></span> <span data-ttu-id="3589e-195">Os parâmetros de rota são nomeados.</span><span class="sxs-lookup"><span data-stu-id="3589e-195">Route parameters are named.</span></span> <span data-ttu-id="3589e-196">Eles são definidos com a colocação do nome do parâmetro em chaves `{ ... }`.</span><span class="sxs-lookup"><span data-stu-id="3589e-196">They're defined by enclosing the parameter name in braces `{ ... }`.</span></span>

<span data-ttu-id="3589e-197">O modelo anterior também poderia corresponder ao caminho da URL `/` e produziria os valores `{ controller = Home, action = Index }`.</span><span class="sxs-lookup"><span data-stu-id="3589e-197">The preceding template could also match the URL path `/` and would produce the values `{ controller = Home, action = Index }`.</span></span> <span data-ttu-id="3589e-198">Isso ocorre porque os parâmetros de rota `{controller}` e `{action}` têm valores padrão e o parâmetro de rota `id` é opcional.</span><span class="sxs-lookup"><span data-stu-id="3589e-198">This occurs because the `{controller}` and `{action}` route parameters have default values and the `id` route parameter is optional.</span></span> <span data-ttu-id="3589e-199">Um sinal de igual `=` seguido de um valor após o nome do parâmetro de rota define um valor padrão para o parâmetro.</span><span class="sxs-lookup"><span data-stu-id="3589e-199">An equals `=` sign followed by a value after the route parameter name defines a default value for the parameter.</span></span> <span data-ttu-id="3589e-200">Um ponto de interrogação `?` após o nome do parâmetro de rota define o parâmetro como opcional.</span><span class="sxs-lookup"><span data-stu-id="3589e-200">A question mark `?` after the route parameter name defines the parameter as optional.</span></span> <span data-ttu-id="3589e-201">Os parâmetros de rota com um valor padrão *sempre* produzem um valor de rota quando a rota corresponde.</span><span class="sxs-lookup"><span data-stu-id="3589e-201">Route parameters with a default value *always* produce a route value when the route matches.</span></span> <span data-ttu-id="3589e-202">Os parâmetros opcionais não produzem um valor de rota quando não há nenhum segmento de caminho de URL correspondente.</span><span class="sxs-lookup"><span data-stu-id="3589e-202">Optional parameters don't produce a route value if there was no corresponding URL path segment.</span></span>

<span data-ttu-id="3589e-203">Consulte [route-template-reference](#route-template-reference) para obter uma descrição completa dos recursos e da sintaxe de modelo de rota.</span><span class="sxs-lookup"><span data-stu-id="3589e-203">See [route-template-reference](#route-template-reference) for a thorough description of route template features and syntax.</span></span>

<span data-ttu-id="3589e-204">Este exemplo inclui uma *restrição de rota*:</span><span class="sxs-lookup"><span data-stu-id="3589e-204">This example includes a *route constraint*:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id:int}");
```

<span data-ttu-id="3589e-205">Esse modelo corresponde a um caminho de URL, como `/Products/Details/17`, mas não como `/Products/Details/Apples`.</span><span class="sxs-lookup"><span data-stu-id="3589e-205">This template matches a URL path like `/Products/Details/17` but not `/Products/Details/Apples`.</span></span> <span data-ttu-id="3589e-206">A definição do parâmetro de rota `{id:int}` define uma [restrição de rota](#route-constraint-reference) para o parâmetro de rota `id`.</span><span class="sxs-lookup"><span data-stu-id="3589e-206">The route parameter definition `{id:int}` defines a [route constraint](#route-constraint-reference) for the `id` route parameter.</span></span> <span data-ttu-id="3589e-207">As restrições de rota implementam <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> e inspecionam valores de rota para verificá-los.</span><span class="sxs-lookup"><span data-stu-id="3589e-207">Route constraints implement <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> and inspect route values to verify them.</span></span> <span data-ttu-id="3589e-208">Neste exemplo, o valor de rota `id` precisa ser conversível em um inteiro.</span><span class="sxs-lookup"><span data-stu-id="3589e-208">In this example, the route value `id` must be convertible to an integer.</span></span> <span data-ttu-id="3589e-209">Consulte [route-constraint-reference](#route-constraint-reference) para obter uma explicação mais detalhada das restrições de rota que são fornecidas pela estrutura.</span><span class="sxs-lookup"><span data-stu-id="3589e-209">See [route-constraint-reference](#route-constraint-reference) for a more detailed explanation of route constraints that are provided by the framework.</span></span>

<span data-ttu-id="3589e-210">Sobrecargas adicionais de `MapRoute` aceitam valores para `constraints`, `dataTokens` e `defaults`.</span><span class="sxs-lookup"><span data-stu-id="3589e-210">Additional overloads of `MapRoute` accept values for `constraints`, `dataTokens`, and `defaults`.</span></span> <span data-ttu-id="3589e-211">Esses parâmetros adicionais de `MapRoute` são definidos como o tipo `object`.</span><span class="sxs-lookup"><span data-stu-id="3589e-211">These additional parameters of `MapRoute` are defined as type `object`.</span></span> <span data-ttu-id="3589e-212">O uso típico desses parâmetros é passar um objeto de tipo anônimo, no qual os nomes da propriedade do tipo anônimo correspondem aos nomes do parâmetro de rota.</span><span class="sxs-lookup"><span data-stu-id="3589e-212">The typical usage of these parameters is to pass an anonymously typed object, where the property names of the anonymous type match route parameter names.</span></span>

<span data-ttu-id="3589e-213">Os dois seguintes exemplos criam rotas equivalentes:</span><span class="sxs-lookup"><span data-stu-id="3589e-213">The following two examples create equivalent routes:</span></span>

```csharp
routes.MapRoute(
    name: "default_route",
    template: "{controller}/{action}/{id?}",
    defaults: new { controller = "Home", action = "Index" });

routes.MapRoute(
    name: "default_route",
    template: "{controller=Home}/{action=Index}/{id?}");
```

> [!TIP]
> <span data-ttu-id="3589e-214">A sintaxe embutida para a definição de restrições e padrões pode ser interessante para rotas simples.</span><span class="sxs-lookup"><span data-stu-id="3589e-214">The inline syntax for defining constraints and defaults can be convenient for simple routes.</span></span> <span data-ttu-id="3589e-215">No entanto, há recursos, como tokens de dados, que não têm suporte na sintaxe embutida.</span><span class="sxs-lookup"><span data-stu-id="3589e-215">However, there are features, such as data tokens, that aren't supported by inline syntax.</span></span>

<span data-ttu-id="3589e-216">O exemplo a seguir demonstra mais alguns cenários:</span><span class="sxs-lookup"><span data-stu-id="3589e-216">The following example demonstrates a few more scenarios:</span></span>

```csharp
routes.MapRoute(
    name: "blog",
    template: "Blog/{*article}",
    defaults: new { controller = "Blog", action = "ReadArticle" });
```

<span data-ttu-id="3589e-217">Esse modelo corresponde a um caminho de URL, como `/Blog/All-About-Routing/Introduction`, e extrai os valores `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span><span class="sxs-lookup"><span data-stu-id="3589e-217">This template matches a URL path like `/Blog/All-About-Routing/Introduction` and extracts the values `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span></span> <span data-ttu-id="3589e-218">Os valores de rota padrão para `controller` e `action` são produzidos pela rota, mesmo que não haja nenhum parâmetro de rota correspondente no modelo.</span><span class="sxs-lookup"><span data-stu-id="3589e-218">The default route values for `controller` and `action` are produced by the route even though there are no corresponding route parameters in the template.</span></span> <span data-ttu-id="3589e-219">Os valores padrão podem ser especificados no modelo de rota.</span><span class="sxs-lookup"><span data-stu-id="3589e-219">Default values can be specified in the route template.</span></span> <span data-ttu-id="3589e-220">O parâmetro de rota `article` é definido como um *catch-all* pela aparência de um asterisco `*` antes do nome do parâmetro de rota.</span><span class="sxs-lookup"><span data-stu-id="3589e-220">The `article` route parameter is defined as a *catch-all* by the appearance of an asterisk `*` before the route parameter name.</span></span> <span data-ttu-id="3589e-221">Os parâmetros de rota catch-all capturam o restante do caminho de URL e também podem corresponder à cadeia de caracteres vazia.</span><span class="sxs-lookup"><span data-stu-id="3589e-221">Catch-all route parameters capture the remainder of the URL path and can also match the empty string.</span></span>

<span data-ttu-id="3589e-222">Este exemplo adiciona restrições de rota e tokens de dados:</span><span class="sxs-lookup"><span data-stu-id="3589e-222">This example adds route constraints and data tokens:</span></span>

```csharp
routes.MapRoute(
    name: "us_english_products",
    template: "en-US/Products/{id}",
    defaults: new { controller = "Products", action = "Details" },
    constraints: new { id = new IntRouteConstraint() },
    dataTokens: new { locale = "en-US" });
```

<span data-ttu-id="3589e-223">Este modelo corresponde a um caminho de URL como `/en-US/Products/5` e extrai os valores de `{ controller = Products, action = Details, id = 5 }` e os tokens de dados `{ locale = en-US }`.</span><span class="sxs-lookup"><span data-stu-id="3589e-223">This template matches a URL path like `/en-US/Products/5` and extracts the values `{ controller = Products, action = Details, id = 5 }` and the data tokens `{ locale = en-US }`.</span></span>

![Tokens locais do Windows](routing/_static/tokens.png)

### <a name="url-generation"></a><span data-ttu-id="3589e-225">Geração de URL</span><span class="sxs-lookup"><span data-stu-id="3589e-225">URL generation</span></span>

<span data-ttu-id="3589e-226">A classe `Route` também pode executar a geração de URL pela combinação de um conjunto de valores de rota com seu modelo de rota.</span><span class="sxs-lookup"><span data-stu-id="3589e-226">The `Route` class can also perform URL generation by combining a set of route values with its route template.</span></span> <span data-ttu-id="3589e-227">Logicamente, este é o processo inverso de correspondência do caminho de URL.</span><span class="sxs-lookup"><span data-stu-id="3589e-227">This is logically the reverse process of matching the URL path.</span></span>

> [!TIP]
> <span data-ttu-id="3589e-228">Para entender melhor a geração de URL, imagine qual URL você deseja gerar e, em seguida, pense em como um modelo de rota corresponderia a essa URL.</span><span class="sxs-lookup"><span data-stu-id="3589e-228">To better understand URL generation, imagine what URL you want to generate and then think about how a route template would match that URL.</span></span> <span data-ttu-id="3589e-229">Quais valores serão produzidos?</span><span class="sxs-lookup"><span data-stu-id="3589e-229">What values would be produced?</span></span> <span data-ttu-id="3589e-230">Este é o equivalente aproximado de como funciona a geração de URL na classe `Route`.</span><span class="sxs-lookup"><span data-stu-id="3589e-230">This is the rough equivalent of how URL generation works in the `Route` class.</span></span>

<span data-ttu-id="3589e-231">Este exemplo usa uma rota de estilo básica do ASP.NET Core MVC:</span><span class="sxs-lookup"><span data-stu-id="3589e-231">This example uses a basic ASP.NET Core MVC style route:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="3589e-232">Com os valores de rota `{ controller = Products, action = List }`, essa rota gera a URL `/Products/List`.</span><span class="sxs-lookup"><span data-stu-id="3589e-232">With the route values `{ controller = Products, action = List }`, this route generates the URL `/Products/List`.</span></span> <span data-ttu-id="3589e-233">Os valores de rota são substituídos pelos parâmetros de rota correspondentes para formar o caminho de URL.</span><span class="sxs-lookup"><span data-stu-id="3589e-233">The route values are substituted for the corresponding route parameters to form the URL path.</span></span> <span data-ttu-id="3589e-234">Como `id` é um parâmetro de rota opcional, não há problema algum se ele não tem um valor.</span><span class="sxs-lookup"><span data-stu-id="3589e-234">Since `id` is an optional route parameter, it's no problem that it doesn't have a value.</span></span>

<span data-ttu-id="3589e-235">Com os valores de rota `{ controller = Home, action = Index }`, essa rota gera a URL `/`.</span><span class="sxs-lookup"><span data-stu-id="3589e-235">With the route values `{ controller = Home, action = Index }`, this route generates the URL `/`.</span></span> <span data-ttu-id="3589e-236">Os valores de rota fornecidos correspondem aos valores padrão para que os segmentos correspondentes a esses valores possam ser omitidos com segurança.</span><span class="sxs-lookup"><span data-stu-id="3589e-236">The route values that were provided match the default values so that the segments corresponding to those values can be safely omitted.</span></span> <span data-ttu-id="3589e-237">As duas URLs geradas fazem uma viagem de ida e volta com essa definição de rota e produzem os mesmos valores de rota que foram usados para gerar a URL.</span><span class="sxs-lookup"><span data-stu-id="3589e-237">Both URLs generated round-trip with this route definition and produce the same route values that were used to generate the URL.</span></span>

> [!TIP]
> <span data-ttu-id="3589e-238">Um aplicativo que usa o ASP.NET Core MVC deve usar <xref:Microsoft.AspNetCore.Mvc.Routing.UrlHelper> para gerar URLs, em vez de chamar o roteamento diretamente.</span><span class="sxs-lookup"><span data-stu-id="3589e-238">An app using ASP.NET Core MVC should use <xref:Microsoft.AspNetCore.Mvc.Routing.UrlHelper> to generate URLs instead of calling into routing directly.</span></span>

<span data-ttu-id="3589e-239">Para saber mais sobre a geração de URL, confira [url-generation-reference](#url-generation-reference).</span><span class="sxs-lookup"><span data-stu-id="3589e-239">For more information about URL generation, see [url-generation-reference](#url-generation-reference).</span></span>

## <a name="use-routing-middleware"></a><span data-ttu-id="3589e-240">Usar o middleware de roteamento</span><span class="sxs-lookup"><span data-stu-id="3589e-240">Use Routing Middleware</span></span>

::: moniker range=">= aspnetcore-2.1"

<span data-ttu-id="3589e-241">Referencie o [metapacote Microsoft.AspNetCore.App](xref:fundamentals/metapackage-app) no arquivo de projeto do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="3589e-241">Reference the [Microsoft.AspNetCore.App metapackage](xref:fundamentals/metapackage-app) in the app's project file.</span></span>

::: moniker-end

::: moniker range="= aspnetcore-2.0"

<span data-ttu-id="3589e-242">Referencie o [metapacote Microsoft.AspNetCore.All](xref:fundamentals/metapackage) no arquivo de projeto do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="3589e-242">Reference the [Microsoft.AspNetCore.All metapackage](xref:fundamentals/metapackage) in the app's project file.</span></span>

::: moniker-end

::: moniker range="< aspnetcore-2.0"

<span data-ttu-id="3589e-243">Referencie o [Microsoft.AspNetCore.Routing](https://www.nuget.org/packages/Microsoft.AspNetCore.Routing/) no arquivo de projeto do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="3589e-243">Reference the [Microsoft.AspNetCore.Routing](https://www.nuget.org/packages/Microsoft.AspNetCore.Routing/) in the app's project file.</span></span>

::: moniker-end

<span data-ttu-id="3589e-244">Adicione o roteamento ao contêiner de serviço em `Startup.ConfigureServices`:</span><span class="sxs-lookup"><span data-stu-id="3589e-244">Add routing to the service container in `Startup.ConfigureServices`:</span></span>

::: moniker range=">= aspnetcore-2.0"

[!code-csharp[](routing/samples/2.x/RoutingSample/Startup.cs?name=snippet_ConfigureServices&highlight=3)]

::: moniker-end

::: moniker range="< aspnetcore-2.0"

[!code-csharp[](routing/samples/1.x/RoutingSample/Startup.cs?name=snippet_ConfigureServices&highlight=3)]

::: moniker-end

<span data-ttu-id="3589e-245">As rotas precisam ser configuradas no método `Startup.Configure`.</span><span class="sxs-lookup"><span data-stu-id="3589e-245">Routes must be configured in the `Startup.Configure` method.</span></span> <span data-ttu-id="3589e-246">O aplicativo de exemplo usa estas APIs:</span><span class="sxs-lookup"><span data-stu-id="3589e-246">The sample app uses these APIs:</span></span>

* `RouteBuilder`
* `Build`
* <span data-ttu-id="3589e-247">`MapGet` &ndash; Corresponde apenas às solicitações HTTP GET.</span><span class="sxs-lookup"><span data-stu-id="3589e-247">`MapGet` &ndash; Matches only HTTP GET requests.</span></span>
* `UseRouter`

::: moniker range=">= aspnetcore-2.0"

[!code-csharp[](routing/samples/2.x/RoutingSample/Startup.cs?name=snippet_RouteHandler)]

::: moniker-end

::: moniker range="< aspnetcore-2.0"

[!code-csharp[](routing/samples/1.x/RoutingSample/Startup.cs?name=snippet_RouteHandler)]

::: moniker-end

<span data-ttu-id="3589e-248">A tabela a seguir mostra as respostas com os URIs fornecidos.</span><span class="sxs-lookup"><span data-stu-id="3589e-248">The following table shows the responses with the given URIs.</span></span>

| <span data-ttu-id="3589e-249">URI</span><span class="sxs-lookup"><span data-stu-id="3589e-249">URI</span></span>                  | <span data-ttu-id="3589e-250">Resposta</span><span class="sxs-lookup"><span data-stu-id="3589e-250">Response</span></span>                                          |
| -------------------- | ------------------------------------------------- |
| <span data-ttu-id="3589e-251">/package/create/3</span><span class="sxs-lookup"><span data-stu-id="3589e-251">/package/create/3</span></span>    | <span data-ttu-id="3589e-252">Olá!</span><span class="sxs-lookup"><span data-stu-id="3589e-252">Hello!</span></span> <span data-ttu-id="3589e-253">Valores de rota: [operation, create], [id, 3]</span><span class="sxs-lookup"><span data-stu-id="3589e-253">Route values: [operation, create], [id, 3]</span></span> |
| <span data-ttu-id="3589e-254">/package/track/-3</span><span class="sxs-lookup"><span data-stu-id="3589e-254">/package/track/-3</span></span>    | <span data-ttu-id="3589e-255">Olá!</span><span class="sxs-lookup"><span data-stu-id="3589e-255">Hello!</span></span> <span data-ttu-id="3589e-256">Valores de rota: [operation, track], [id, -3]</span><span class="sxs-lookup"><span data-stu-id="3589e-256">Route values: [operation, track], [id, -3]</span></span> |
| <span data-ttu-id="3589e-257">/package/track/-3/</span><span class="sxs-lookup"><span data-stu-id="3589e-257">/package/track/-3/</span></span>   | <span data-ttu-id="3589e-258">Olá!</span><span class="sxs-lookup"><span data-stu-id="3589e-258">Hello!</span></span> <span data-ttu-id="3589e-259">Valores de rota: [operation, track], [id, -3]</span><span class="sxs-lookup"><span data-stu-id="3589e-259">Route values: [operation, track], [id, -3]</span></span> |
| <span data-ttu-id="3589e-260">/package/track/</span><span class="sxs-lookup"><span data-stu-id="3589e-260">/package/track/</span></span>      | <span data-ttu-id="3589e-261">&lt;Fall through, no match&gt;</span><span class="sxs-lookup"><span data-stu-id="3589e-261">&lt;Fall through, no match&gt;</span></span>                    |
| <span data-ttu-id="3589e-262">GET /hello/Joe</span><span class="sxs-lookup"><span data-stu-id="3589e-262">GET /hello/Joe</span></span>       | <span data-ttu-id="3589e-263">Olá, Joe!</span><span class="sxs-lookup"><span data-stu-id="3589e-263">Hi, Joe!</span></span>                                          |
| <span data-ttu-id="3589e-264">POST /hello/Joe</span><span class="sxs-lookup"><span data-stu-id="3589e-264">POST /hello/Joe</span></span>      | <span data-ttu-id="3589e-265">&lt;Fall through, matches HTTP GET only&gt;</span><span class="sxs-lookup"><span data-stu-id="3589e-265">&lt;Fall through, matches HTTP GET only&gt;</span></span>       |
| <span data-ttu-id="3589e-266">GET /hello/Joe/Smith</span><span class="sxs-lookup"><span data-stu-id="3589e-266">GET /hello/Joe/Smith</span></span> | <span data-ttu-id="3589e-267">&lt;Fall through, no match&gt;</span><span class="sxs-lookup"><span data-stu-id="3589e-267">&lt;Fall through, no match&gt;</span></span>                    |

<span data-ttu-id="3589e-268">Se você estiver configurando uma única rota, chame <xref:Microsoft.AspNetCore.Builder.RoutingBuilderExtensions.UseRouter*> passando uma instância de `IRouter`.</span><span class="sxs-lookup"><span data-stu-id="3589e-268">If you're configuring a single route, call <xref:Microsoft.AspNetCore.Builder.RoutingBuilderExtensions.UseRouter*> passing in an `IRouter` instance.</span></span> <span data-ttu-id="3589e-269">Você não precisa usar <xref:Microsoft.AspNetCore.Routing.RouteBuilder>.</span><span class="sxs-lookup"><span data-stu-id="3589e-269">You won't need to use <xref:Microsoft.AspNetCore.Routing.RouteBuilder>.</span></span>

<span data-ttu-id="3589e-270">O framework fornece um conjunto de métodos de extensão para a criação de rotas, como:</span><span class="sxs-lookup"><span data-stu-id="3589e-270">The framework provides a set of extension methods for creating routes, such as:</span></span>

* `MapRoute`
* `MapGet`
* `MapPost`
* `MapPut`
* `MapDelete`
* `MapVerb`

<span data-ttu-id="3589e-271">Alguns desses métodos, como `MapGet`, exigem que um `RequestDelegate` seja fornecido.</span><span class="sxs-lookup"><span data-stu-id="3589e-271">Some of these methods, such as `MapGet`, require a `RequestDelegate` to be provided.</span></span> <span data-ttu-id="3589e-272">O `RequestDelegate` é usado como o *manipulador de rotas* quando a rota corresponde.</span><span class="sxs-lookup"><span data-stu-id="3589e-272">The `RequestDelegate` is used as the *route handler* when the route matches.</span></span> <span data-ttu-id="3589e-273">Outros métodos nesta família permitem configurar um pipeline de middleware a ser usado como o manipulador de rotas.</span><span class="sxs-lookup"><span data-stu-id="3589e-273">Other methods in this family allow configuring a middleware pipeline for use as the route handler.</span></span> <span data-ttu-id="3589e-274">Se o método *Map* não aceitar um manipulador, como `MapRoute`, ele usará o <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span><span class="sxs-lookup"><span data-stu-id="3589e-274">If the *Map* method doesn't accept a handler, such as `MapRoute`, then it uses the <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span></span>

<span data-ttu-id="3589e-275">Os métodos `Map[Verb]` usam restrições para limitar a rota ao Verbo HTTP no nome do método.</span><span class="sxs-lookup"><span data-stu-id="3589e-275">The `Map[Verb]` methods use constraints to limit the route to the HTTP Verb in the method name.</span></span> <span data-ttu-id="3589e-276">Por exemplo, veja <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*> e <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapVerb*>.</span><span class="sxs-lookup"><span data-stu-id="3589e-276">For example, see <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*> and <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapVerb*>.</span></span>

## <a name="route-template-reference"></a><span data-ttu-id="3589e-277">Referência de modelo de rota</span><span class="sxs-lookup"><span data-stu-id="3589e-277">Route template reference</span></span>

<span data-ttu-id="3589e-278">Os tokens entre chaves (`{ ... }`) definem os *parâmetros de rota* que serão associados se a rota for correspondida.</span><span class="sxs-lookup"><span data-stu-id="3589e-278">Tokens within curly braces (`{ ... }`) define *route parameters* that are bound if the route is matched.</span></span> <span data-ttu-id="3589e-279">Você pode definir mais de um parâmetro de rota em um segmento de rota, mas eles precisam ser separados por um valor literal.</span><span class="sxs-lookup"><span data-stu-id="3589e-279">You can define more than one route parameter in a route segment, but they must be separated by a literal value.</span></span> <span data-ttu-id="3589e-280">Por exemplo, `{controller=Home}{action=Index}` não é uma rota válida, já que não há nenhum valor literal entre `{controller}` e `{action}`.</span><span class="sxs-lookup"><span data-stu-id="3589e-280">For example, `{controller=Home}{action=Index}` isn't a valid route, since there's no literal value between `{controller}` and `{action}`.</span></span> <span data-ttu-id="3589e-281">Esses parâmetros de rota precisam ter um nome e podem ter atributos adicionais especificados.</span><span class="sxs-lookup"><span data-stu-id="3589e-281">These route parameters must have a name and may have additional attributes specified.</span></span>

<span data-ttu-id="3589e-282">Um texto literal diferente dos parâmetros de rota (por exemplo, `{id}`) e do separador de caminho `/` precisa corresponder ao texto na URL.</span><span class="sxs-lookup"><span data-stu-id="3589e-282">Literal text other than route parameters (for example, `{id}`) and the path separator `/` must match the text in the URL.</span></span> <span data-ttu-id="3589e-283">A correspondência de texto não diferencia maiúsculas de minúsculas e se baseia na representação decodificada do caminho de URLs.</span><span class="sxs-lookup"><span data-stu-id="3589e-283">Text matching is case-insensitive and based on the decoded representation of the URLs path.</span></span> <span data-ttu-id="3589e-284">Para encontrar a correspondência do delimitador de parâmetro de rota literal `{` ou `}`, faça seu escape repetindo o caractere (`{{` ou `}}`).</span><span class="sxs-lookup"><span data-stu-id="3589e-284">To match the literal route parameter delimiter `{` or  `}`, escape it by repeating the character (`{{` or `}}`).</span></span>

<span data-ttu-id="3589e-285">Padrões de URL que tentam capturar um nome de arquivo com uma extensão de arquivo opcional apresentam considerações adicionais.</span><span class="sxs-lookup"><span data-stu-id="3589e-285">URL patterns that attempt to capture a filename with an optional file extension have additional considerations.</span></span> <span data-ttu-id="3589e-286">Por exemplo, considere o modelo `files/{filename}.{ext?}`.</span><span class="sxs-lookup"><span data-stu-id="3589e-286">For example, consider the template `files/{filename}.{ext?}`.</span></span> <span data-ttu-id="3589e-287">Quando `filename` e `ext` existem, ambos os valores são populados.</span><span class="sxs-lookup"><span data-stu-id="3589e-287">When both `filename` and `ext` exist, both values are populated.</span></span> <span data-ttu-id="3589e-288">Se apenas `filename` existir na URL, a rota encontrará a correspondência, pois o ponto à direita `.` é opcional.</span><span class="sxs-lookup"><span data-stu-id="3589e-288">If only `filename` exists in the URL, the route matches because the trailing period `.` is  optional.</span></span> <span data-ttu-id="3589e-289">As URLs a seguir correspondem a essa rota:</span><span class="sxs-lookup"><span data-stu-id="3589e-289">The following URLs match this route:</span></span>

* `/files/myFile.txt`
* `/files/myFile`

<span data-ttu-id="3589e-290">Você pode usar o caractere `*` como um prefixo para um parâmetro de rota a ser associado ao restante do URI.</span><span class="sxs-lookup"><span data-stu-id="3589e-290">You can use the `*` character as a prefix to a route parameter to bind to the rest of the URI.</span></span> <span data-ttu-id="3589e-291">Isso é chamado de parâmetro *catch-all*.</span><span class="sxs-lookup"><span data-stu-id="3589e-291">This is called a *catch-all* parameter.</span></span> <span data-ttu-id="3589e-292">Por exemplo, `blog/{*slug}` corresponde a qualquer URI que começa com `/blog` e tem qualquer valor depois dele (que é atribuído ao valor de rota `slug`).</span><span class="sxs-lookup"><span data-stu-id="3589e-292">For example, `blog/{*slug}` matches any URI that starts with `/blog` and had any value following it (which is assigned to the `slug` route value).</span></span> <span data-ttu-id="3589e-293">Os parâmetros catch-all também podem corresponder à cadeia de caracteres vazia.</span><span class="sxs-lookup"><span data-stu-id="3589e-293">Catch-all parameters can also match the empty string.</span></span>

::: moniker range=">= aspnetcore-2.2"

<span data-ttu-id="3589e-294">O parâmetro catch-all faz o escape dos caracteres corretos quando a rota é usada para gerar uma URL, incluindo os caracteres separadores de caminho (`/`).</span><span class="sxs-lookup"><span data-stu-id="3589e-294">The catch-all parameter escapes the appropriate characters when the route is used to generate a URL, including path separator (`/`) characters.</span></span> <span data-ttu-id="3589e-295">Por exemplo, a rota `foo/{*path}` com valores de rota `{ path = "my/path" }` gera `foo/my%2Fpath`.</span><span class="sxs-lookup"><span data-stu-id="3589e-295">For example, the route `foo/{*path}` with route values `{ path = "my/path" }` generates `foo/my%2Fpath`.</span></span> <span data-ttu-id="3589e-296">Observe o escape da barra invertida.</span><span class="sxs-lookup"><span data-stu-id="3589e-296">Note the escaped forward slash.</span></span> <span data-ttu-id="3589e-297">Para fazer a viagem de ida e volta dos caracteres separadores de caminho, use o prefixo do parâmetro da rota `**`.</span><span class="sxs-lookup"><span data-stu-id="3589e-297">To round-trip path separator characters, use the `**` route parameter prefix.</span></span> <span data-ttu-id="3589e-298">A rota `foo/{**path}` com `{ path = "my/path" }` gera `foo/my/path`.</span><span class="sxs-lookup"><span data-stu-id="3589e-298">The route `foo/{**path}` with `{ path = "my/path" }` generates `foo/my/path`.</span></span>

::: moniker-end

<span data-ttu-id="3589e-299">Os parâmetros de rota podem ter *valores padrão*, designados pela especificação do padrão após o nome do parâmetro, separados por um sinal de igual (`=`).</span><span class="sxs-lookup"><span data-stu-id="3589e-299">Route parameters may have *default values*, designated by specifying the default after the parameter name, separated by an equals sign (`=`).</span></span> <span data-ttu-id="3589e-300">Por exemplo, `{controller=Home}` define `Home` como o valor padrão de `controller`.</span><span class="sxs-lookup"><span data-stu-id="3589e-300">For example, `{controller=Home}` defines `Home` as the default value for `controller`.</span></span> <span data-ttu-id="3589e-301">O valor padrão é usado se nenhum valor está presente na URL para o parâmetro.</span><span class="sxs-lookup"><span data-stu-id="3589e-301">The default value is used if no value is present in the URL for the parameter.</span></span> <span data-ttu-id="3589e-302">Além dos valores padrão, os parâmetros de rota podem ser opcionais, especificados ao acrescentar um ponto de interrogação (`?`) ao final do nome do parâmetro, como em `id?`.</span><span class="sxs-lookup"><span data-stu-id="3589e-302">In addition to default values, route parameters may be optional, specified by appending a question mark (`?`) to the end of the parameter name, as in `id?`.</span></span> <span data-ttu-id="3589e-303">A diferença entre os parâmetro de rota de valores opcionais e os padrão é que um parâmetro de rota com um valor padrão sempre produz um valor e um parâmetro opcional somente tem um valor quando ele é fornecido pela URL de solicitação.</span><span class="sxs-lookup"><span data-stu-id="3589e-303">The difference between optional values and default route parameters is that a route parameter with a default value always produces a value; an optional parameter has a value only when a value is provided by the request URL.</span></span>

::: moniker range=">= aspnetcore-2.2"

<span data-ttu-id="3589e-304">Os parâmetros de rota podem ter restrições, que precisam corresponder ao valor de rota associado da URL.</span><span class="sxs-lookup"><span data-stu-id="3589e-304">Route parameters may have constraints, which must match the route value bound from the URL.</span></span> <span data-ttu-id="3589e-305">A adição de dois-pontos (`:`) e do nome da restrição após o nome do parâmetro de rota especifica uma *restrição embutida* em um parâmetro de rota.</span><span class="sxs-lookup"><span data-stu-id="3589e-305">Adding a colon (`:`) and constraint name after the route parameter name specifies an *inline constraint* on a route parameter.</span></span> <span data-ttu-id="3589e-306">Se a restrição exigir argumentos, eles ficarão entre parênteses `( )` após o nome da restrição.</span><span class="sxs-lookup"><span data-stu-id="3589e-306">If the constraint requires arguments, they're enclosed in parentheses `( )` after the constraint name.</span></span> <span data-ttu-id="3589e-307">Várias restrições embutidas podem ser especificadas por meio do acréscimo de outros dois-pontos (`:`) e do nome da restrição.</span><span class="sxs-lookup"><span data-stu-id="3589e-307">Multiple inline constraints can be specified by appending another colon (`:`) and constraint name.</span></span> <span data-ttu-id="3589e-308">O nome da restrição e os argumentos são passados para o serviço <xref:Microsoft.AspNetCore.Routing.IInlineConstraintResolver> para criar uma instância de <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> a ser usada no processamento de URL.</span><span class="sxs-lookup"><span data-stu-id="3589e-308">The constraint name and arguments are passed to the <xref:Microsoft.AspNetCore.Routing.IInlineConstraintResolver> service to create an instance of <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> to use in URL processing.</span></span> <span data-ttu-id="3589e-309">Se o construtor de restrições exigir serviços, eles serão resolvidos nos serviços de aplicativos da injeção da dependência.</span><span class="sxs-lookup"><span data-stu-id="3589e-309">If the constraint constructor requires services, they're resolved from dependency injection's app services.</span></span> <span data-ttu-id="3589e-310">Por exemplo, o modelo de rota `blog/{article:minlength(10)}` especifica uma restrição `minlength` com o argumento `10`.</span><span class="sxs-lookup"><span data-stu-id="3589e-310">For example, the route template `blog/{article:minlength(10)}` specifies a `minlength` constraint with the argument `10`.</span></span> <span data-ttu-id="3589e-311">Para obter mais informações sobre as restrições de rota e uma listagem das restrições fornecidas pela estrutura, confira a seção [Referência de restrição de rota](#route-constraint-reference).</span><span class="sxs-lookup"><span data-stu-id="3589e-311">For more information on route constraints and a listing of the constraints provided by the framework, see the [Route constraint reference](#route-constraint-reference) section.</span></span>

::: moniker-end

::: moniker range="< aspnetcore-2.2"

<span data-ttu-id="3589e-312">Os parâmetros de rota podem ter restrições, que precisam corresponder ao valor de rota associado da URL.</span><span class="sxs-lookup"><span data-stu-id="3589e-312">Route parameters may have constraints, which must match the route value bound from the URL.</span></span> <span data-ttu-id="3589e-313">A adição de dois-pontos (`:`) e do nome da restrição após o nome do parâmetro de rota especifica uma *restrição embutida* em um parâmetro de rota.</span><span class="sxs-lookup"><span data-stu-id="3589e-313">Adding a colon (`:`) and constraint name after the route parameter name specifies an *inline constraint* on a route parameter.</span></span> <span data-ttu-id="3589e-314">Se a restrição exigir argumentos, eles ficarão entre parênteses `( )` após o nome da restrição.</span><span class="sxs-lookup"><span data-stu-id="3589e-314">If the constraint requires arguments, they're enclosed in parentheses `( )` after the constraint name.</span></span> <span data-ttu-id="3589e-315">Várias restrições embutidas podem ser especificadas por meio do acréscimo de outros dois-pontos (`:`) e do nome da restrição.</span><span class="sxs-lookup"><span data-stu-id="3589e-315">Multiple inline constraints can be specified by appending another colon (`:`) and constraint name.</span></span> <span data-ttu-id="3589e-316">O nome da restrição e os argumentos são passados para o serviço <xref:Microsoft.AspNetCore.Routing.IInlineConstraintResolver> para criar uma instância de <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> a ser usada no processamento de URL.</span><span class="sxs-lookup"><span data-stu-id="3589e-316">The constraint name and arguments are passed to the <xref:Microsoft.AspNetCore.Routing.IInlineConstraintResolver> service to create an instance of <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> to use in URL processing.</span></span> <span data-ttu-id="3589e-317">Por exemplo, o modelo de rota `blog/{article:minlength(10)}` especifica uma restrição `minlength` com o argumento `10`.</span><span class="sxs-lookup"><span data-stu-id="3589e-317">For example, the route template `blog/{article:minlength(10)}` specifies a `minlength` constraint with the argument `10`.</span></span> <span data-ttu-id="3589e-318">Para obter mais informações sobre as restrições de rota e uma listagem das restrições fornecidas pela estrutura, confira a seção [Referência de restrição de rota](#route-constraint-reference).</span><span class="sxs-lookup"><span data-stu-id="3589e-318">For more information on route constraints and a listing of the constraints provided by the framework, see the [Route constraint reference](#route-constraint-reference) section.</span></span>

::: moniker-end

::: moniker range=">= aspnetcore-2.2"

<span data-ttu-id="3589e-319">Os parâmetros de rota também podem ter transformadores de parâmetro, que transformam o valor de um parâmetro ao gerar links e combinar ações e páginas com URIs.</span><span class="sxs-lookup"><span data-stu-id="3589e-319">Route parameters may also have parameter transformers, which transform a parameter's value when generating links and matching actions and pages to URIs.</span></span> <span data-ttu-id="3589e-320">Assim como as restrições, os transformadores de parâmetro podem ser adicionados embutidos a um parâmetro de rota colocando dois-pontos (`:`) e o nome do transformador após o nome do parâmetro de rota.</span><span class="sxs-lookup"><span data-stu-id="3589e-320">Like constraints, parameter transformers can be added inline to a route parameter by adding a colon (`:`) and transformer name after the route parameter name.</span></span> <span data-ttu-id="3589e-321">Por exemplo, o modelo de rota `blog/{article:slugify}` especifica um transformador `slugify`.</span><span class="sxs-lookup"><span data-stu-id="3589e-321">For example, the route template `blog/{article:slugify}` specifies a `slugify` transformer.</span></span>

::: moniker-end

<span data-ttu-id="3589e-322">A tabela a seguir demonstra alguns modelos de rota e seu comportamento.</span><span class="sxs-lookup"><span data-stu-id="3589e-322">The following table demonstrates some route templates and their behavior.</span></span>

| <span data-ttu-id="3589e-323">Modelo de rota</span><span class="sxs-lookup"><span data-stu-id="3589e-323">Route Template</span></span>                         | <span data-ttu-id="3589e-324">URL de correspondência de exemplo</span><span class="sxs-lookup"><span data-stu-id="3589e-324">Example Matching URL</span></span>  | <span data-ttu-id="3589e-325">Observações</span><span class="sxs-lookup"><span data-stu-id="3589e-325">Notes</span></span>                                                                  |
| -------------------------------------- | --------------------- | ---------------------------------------------------------------------- |
| <span data-ttu-id="3589e-326">hello</span><span class="sxs-lookup"><span data-stu-id="3589e-326">hello</span></span>                                  | <span data-ttu-id="3589e-327">/hello</span><span class="sxs-lookup"><span data-stu-id="3589e-327">/hello</span></span>                | <span data-ttu-id="3589e-328">Somente corresponde ao caminho único `/hello`</span><span class="sxs-lookup"><span data-stu-id="3589e-328">Only matches the single path `/hello`</span></span>                                  |
| <span data-ttu-id="3589e-329">{Page=Home}</span><span class="sxs-lookup"><span data-stu-id="3589e-329">{Page=Home}</span></span>                            | /                     | <span data-ttu-id="3589e-330">Faz a correspondência e define `Page` como `Home`</span><span class="sxs-lookup"><span data-stu-id="3589e-330">Matches and sets `Page` to `Home`</span></span>                                      |
| <span data-ttu-id="3589e-331">{Page=Home}</span><span class="sxs-lookup"><span data-stu-id="3589e-331">{Page=Home}</span></span>                            | <span data-ttu-id="3589e-332">/Contact</span><span class="sxs-lookup"><span data-stu-id="3589e-332">/Contact</span></span>              | <span data-ttu-id="3589e-333">Faz a correspondência e define `Page` como `Contact`</span><span class="sxs-lookup"><span data-stu-id="3589e-333">Matches and sets `Page` to `Contact`</span></span>                                   |
| <span data-ttu-id="3589e-334">{controller}/{action}/{id?}</span><span class="sxs-lookup"><span data-stu-id="3589e-334">{controller}/{action}/{id?}</span></span>            | <span data-ttu-id="3589e-335">/Products/List</span><span class="sxs-lookup"><span data-stu-id="3589e-335">/Products/List</span></span>        | <span data-ttu-id="3589e-336">É mapeado para o controlador `Products` e a ação `List`</span><span class="sxs-lookup"><span data-stu-id="3589e-336">Maps to `Products` controller and `List`  action</span></span>                       |
| <span data-ttu-id="3589e-337">{controller}/{action}/{id?}</span><span class="sxs-lookup"><span data-stu-id="3589e-337">{controller}/{action}/{id?}</span></span>            | <span data-ttu-id="3589e-338">/Products/Details/123</span><span class="sxs-lookup"><span data-stu-id="3589e-338">/Products/Details/123</span></span> |  <span data-ttu-id="3589e-339">É mapeado para o controlador `Products` e a ação `Details`.</span><span class="sxs-lookup"><span data-stu-id="3589e-339">Maps to `Products` controller and  `Details` action.</span></span>  <span data-ttu-id="3589e-340">`id` definido como 123</span><span class="sxs-lookup"><span data-stu-id="3589e-340">`id` set to 123</span></span> |
| <span data-ttu-id="3589e-341">{controller=Home}/{action=Index}/{id?}</span><span class="sxs-lookup"><span data-stu-id="3589e-341">{controller=Home}/{action=Index}/{id?}</span></span> | /                     |  <span data-ttu-id="3589e-342">É mapeado para o controlador `Home` e o método `Index`; `id` é ignorado.</span><span class="sxs-lookup"><span data-stu-id="3589e-342">Maps to `Home` controller and `Index`  method; `id` is ignored.</span></span>       |

<span data-ttu-id="3589e-343">Em geral, o uso de um modelo é a abordagem mais simples para o roteamento.</span><span class="sxs-lookup"><span data-stu-id="3589e-343">Using a template is generally the simplest approach to routing.</span></span> <span data-ttu-id="3589e-344">Restrições e padrões também podem ser especificados fora do modelo de rota.</span><span class="sxs-lookup"><span data-stu-id="3589e-344">Constraints and defaults can also be specified outside the route template.</span></span>

> [!TIP]
> <span data-ttu-id="3589e-345">Habilite o [Log](xref:fundamentals/logging/index) para ver como as implementações de roteamento internas, como `Route`, correspondem às solicitações.</span><span class="sxs-lookup"><span data-stu-id="3589e-345">Enable [Logging](xref:fundamentals/logging/index) to see how the built in routing implementations, such as `Route`, match requests.</span></span>

## <a name="reserved-routing-names"></a><span data-ttu-id="3589e-346">Nomes reservados de roteamento</span><span class="sxs-lookup"><span data-stu-id="3589e-346">Reserved routing names</span></span>

<span data-ttu-id="3589e-347">As seguintes palavras-chave são nomes reservados e não podem ser usadas como nomes de rota ou parâmetros:</span><span class="sxs-lookup"><span data-stu-id="3589e-347">The following keywords are reserved names and can't be used as route names or parameters:</span></span>

* `action`
* `area`
* `controller`
* `handler`
* `page`

## <a name="route-constraint-reference"></a><span data-ttu-id="3589e-348">Referência de restrição de rota</span><span class="sxs-lookup"><span data-stu-id="3589e-348">Route constraint reference</span></span>

<span data-ttu-id="3589e-349">As restrições da rota são executadas quando uma `Route` correspondeu à sintaxe da URL de entrada e criou um token do caminho de URL para valores de rota.</span><span class="sxs-lookup"><span data-stu-id="3589e-349">Route constraints execute when a `Route` has matched the syntax of the incoming URL and tokenized the URL path into route values.</span></span> <span data-ttu-id="3589e-350">Em geral, as restrições da rota inspecionam o valor de rota associado por meio do modelo de rota e tomam uma decisão do tipo "sim/não" sobre se o valor é aceitável ou não.</span><span class="sxs-lookup"><span data-stu-id="3589e-350">Route constraints generally inspect the route value associated via the route template and make a yes/no decision about whether or not the value is acceptable.</span></span> <span data-ttu-id="3589e-351">Algumas restrições da rota usam dados fora do valor de rota para considerar se a solicitação pode ser encaminhada.</span><span class="sxs-lookup"><span data-stu-id="3589e-351">Some route constraints use data outside the route value to consider whether the request can be routed.</span></span> <span data-ttu-id="3589e-352">Por exemplo, a <xref:Microsoft.AspNetCore.Routing.Constraints.HttpMethodRouteConstraint> pode aceitar ou rejeitar uma solicitação de acordo com o verbo HTTP.</span><span class="sxs-lookup"><span data-stu-id="3589e-352">For example, the <xref:Microsoft.AspNetCore.Routing.Constraints.HttpMethodRouteConstraint> can accept or reject a request based on its HTTP verb.</span></span>

> [!WARNING]
> <span data-ttu-id="3589e-353">Evite usar restrições para **validação de entrada** porque isso significa que uma entrada inválida resultará em um *404 – Não Encontrado* e não em um *400 – Solicitação Inválida* com uma mensagem de erro apropriada.</span><span class="sxs-lookup"><span data-stu-id="3589e-353">Avoid using constraints for **input validation** because doing so means that invalid input results in a *404 - Not Found* response instead of a *400 - Bad Request* with an appropriate error message.</span></span> <span data-ttu-id="3589e-354">As restrições de rota são usadas para **desfazer a ambiguidade** entre rotas semelhantes, não para validar as entradas de uma rota específica.</span><span class="sxs-lookup"><span data-stu-id="3589e-354">Route constraints are used to **disambiguate** between similar routes, not to validate the inputs for a particular route.</span></span>

<span data-ttu-id="3589e-355">A tabela a seguir demonstra algumas restrições de rota e seu comportamento esperado.</span><span class="sxs-lookup"><span data-stu-id="3589e-355">The following table demonstrates some route constraints and their expected behavior.</span></span>

| <span data-ttu-id="3589e-356">restrição</span><span class="sxs-lookup"><span data-stu-id="3589e-356">constraint</span></span> | <span data-ttu-id="3589e-357">Exemplo</span><span class="sxs-lookup"><span data-stu-id="3589e-357">Example</span></span> | <span data-ttu-id="3589e-358">Correspondências de exemplo</span><span class="sxs-lookup"><span data-stu-id="3589e-358">Example Matches</span></span> | <span data-ttu-id="3589e-359">Observações</span><span class="sxs-lookup"><span data-stu-id="3589e-359">Notes</span></span> |
| ---------- | ------- | --------------- | ----- |
| `int` | `{id:int}` | <span data-ttu-id="3589e-360">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="3589e-360">`123456789`, `-123456789`</span></span>  | <span data-ttu-id="3589e-361">Corresponde a qualquer inteiro</span><span class="sxs-lookup"><span data-stu-id="3589e-361">Matches any integer</span></span> |
| `bool` | `{active:bool}` | <span data-ttu-id="3589e-362">`true`, `FALSE`</span><span class="sxs-lookup"><span data-stu-id="3589e-362">`true`, `FALSE`</span></span> | <span data-ttu-id="3589e-363">Corresponde a `true` ou `false` (não diferencia maiúsculas de minúsculas)</span><span class="sxs-lookup"><span data-stu-id="3589e-363">Matches `true` or `false` (case-insensitive)</span></span> |
| `datetime` | `{dob:datetime}` | <span data-ttu-id="3589e-364">`2016-12-31`, `2016-12-31 7:32pm`</span><span class="sxs-lookup"><span data-stu-id="3589e-364">`2016-12-31`, `2016-12-31 7:32pm`</span></span>  | <span data-ttu-id="3589e-365">Corresponde a um valor `DateTime` válido (na cultura invariável – veja o aviso)</span><span class="sxs-lookup"><span data-stu-id="3589e-365">Matches a valid `DateTime` value (in the invariant culture - see warning)</span></span> |
| `decimal` | `{price:decimal}` | <span data-ttu-id="3589e-366">`49.99`, `-1,000.01`</span><span class="sxs-lookup"><span data-stu-id="3589e-366">`49.99`, `-1,000.01`</span></span> | <span data-ttu-id="3589e-367">Corresponde a um valor `decimal` válido (na cultura invariável – veja o aviso)</span><span class="sxs-lookup"><span data-stu-id="3589e-367">Matches a valid `decimal` value (in the invariant culture - see warning)</span></span> |
| `double` | `{weight:double}` | <span data-ttu-id="3589e-368">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="3589e-368">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="3589e-369">Corresponde a um valor `double` válido (na cultura invariável – veja o aviso)</span><span class="sxs-lookup"><span data-stu-id="3589e-369">Matches a valid `double` value (in the invariant culture - see warning)</span></span> |
| `float` | `{weight:float}` | <span data-ttu-id="3589e-370">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="3589e-370">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="3589e-371">Corresponde a um valor `float` válido (na cultura invariável – veja o aviso)</span><span class="sxs-lookup"><span data-stu-id="3589e-371">Matches a valid `float` value (in the invariant culture - see warning)</span></span> |
| `guid` | `{id:guid}` | <span data-ttu-id="3589e-372">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span><span class="sxs-lookup"><span data-stu-id="3589e-372">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span></span> | <span data-ttu-id="3589e-373">Corresponde a um valor `Guid` válido</span><span class="sxs-lookup"><span data-stu-id="3589e-373">Matches a valid `Guid` value</span></span> |
| `long` | `{ticks:long}` | <span data-ttu-id="3589e-374">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="3589e-374">`123456789`, `-123456789`</span></span> | <span data-ttu-id="3589e-375">Corresponde a um valor `long` válido</span><span class="sxs-lookup"><span data-stu-id="3589e-375">Matches a valid `long` value</span></span> |
| `minlength(value)` | `{username:minlength(4)}` | `Rick` | <span data-ttu-id="3589e-376">A cadeia de caracteres deve ter, no mínimo, 4 caracteres</span><span class="sxs-lookup"><span data-stu-id="3589e-376">String must be at least 4 characters</span></span> |
| `maxlength(value)` | `{filename:maxlength(8)}` | `Richard` | <span data-ttu-id="3589e-377">A cadeia de caracteres não pode ser maior que 8 caracteres</span><span class="sxs-lookup"><span data-stu-id="3589e-377">String must be no more than 8 characters</span></span> |
| `length(length)` | `{filename:length(12)}` | `somefile.txt` | <span data-ttu-id="3589e-378">A cadeia de caracteres deve ter exatamente 12 caracteres</span><span class="sxs-lookup"><span data-stu-id="3589e-378">String must be exactly 12 characters long</span></span> |
| `length(min,max)` | `{filename:length(8,16)}` | `somefile.txt` | <span data-ttu-id="3589e-379">A cadeia de caracteres deve ter, pelo menos, 8 e não mais de 16 caracteres</span><span class="sxs-lookup"><span data-stu-id="3589e-379">String must be at least 8 and no more than 16 characters long</span></span> |
| `min(value)` | `{age:min(18)}` | `19` | <span data-ttu-id="3589e-380">O valor inteiro deve ser, pelo menos, 18</span><span class="sxs-lookup"><span data-stu-id="3589e-380">Integer value must be at least 18</span></span> |
| `max(value)` | `{age:max(120)}` | `91` | <span data-ttu-id="3589e-381">O valor inteiro não deve ser maior que 120</span><span class="sxs-lookup"><span data-stu-id="3589e-381">Integer value must be no more than 120</span></span> |
| `range(min,max)` | `{age:range(18,120)}` | `91` | <span data-ttu-id="3589e-382">O valor inteiro deve ser, pelo menos, 18, mas não maior que 120</span><span class="sxs-lookup"><span data-stu-id="3589e-382">Integer value must be at least 18 but no more than 120</span></span> |
| `alpha` | `{name:alpha}` | `Rick` | <span data-ttu-id="3589e-383">A cadeia de caracteres deve consistir em um ou mais caracteres alfabéticos (`a`-`z`, não diferencia maiúsculas de minúsculas)</span><span class="sxs-lookup"><span data-stu-id="3589e-383">String must consist of one or more alphabetical characters (`a`-`z`, case-insensitive)</span></span> |
| `regex(expression)` | `{ssn:regex(^\\d{{3}}-\\d{{2}}-\\d{{4}}$)}` | `123-45-6789` | <span data-ttu-id="3589e-384">A cadeia de caracteres deve corresponder à expressão regular (veja as dicas sobre como definir uma expressão regular)</span><span class="sxs-lookup"><span data-stu-id="3589e-384">String must match the regular expression (see tips about defining a regular expression)</span></span> |
| `required` | `{name:required}` | `Rick` |  <span data-ttu-id="3589e-385">Usado para impor que um valor não parâmetro está presente durante a geração de URL</span><span class="sxs-lookup"><span data-stu-id="3589e-385">Used to enforce that a non-parameter value is present during URL generation</span></span> |

<span data-ttu-id="3589e-386">Várias restrições delimitadas por vírgula podem ser aplicadas a um único parâmetro.</span><span class="sxs-lookup"><span data-stu-id="3589e-386">Multiple, colon-delimited constraints can be applied to a single parameter.</span></span> <span data-ttu-id="3589e-387">Por exemplo, a restrição a seguir restringe um parâmetro para um valor inteiro de 1 ou maior:</span><span class="sxs-lookup"><span data-stu-id="3589e-387">For example, the following constraint restricts a parameter to an integer value of 1 or greater:</span></span>

```csharp
[Route("users/{id:int:min(1)}")]
public User GetUserById(int id) { }
```

> [!WARNING]
> <span data-ttu-id="3589e-388">As restrições de rota que verificam a URL e são convertidas em um tipo CLR (como `int` ou `DateTime`) sempre usam a cultura invariável.</span><span class="sxs-lookup"><span data-stu-id="3589e-388">Route constraints that verify the URL and are converted to a CLR type (such as `int` or `DateTime`) always use the invariant culture.</span></span> <span data-ttu-id="3589e-389">Essas restrições consideram que a URL não é localizável.</span><span class="sxs-lookup"><span data-stu-id="3589e-389">These constraints assume that the URL is non-localizable.</span></span> <span data-ttu-id="3589e-390">As restrições de rota fornecidas pela estrutura não modificam os valores armazenados nos valores de rota.</span><span class="sxs-lookup"><span data-stu-id="3589e-390">The framework-provided route constraints don't modify the values stored in route values.</span></span> <span data-ttu-id="3589e-391">Todos os valores de rota analisados com base na URL são armazenados como cadeias de caracteres.</span><span class="sxs-lookup"><span data-stu-id="3589e-391">All route values parsed from the URL are stored as strings.</span></span> <span data-ttu-id="3589e-392">Por exemplo, a restrição `float` tenta converter o valor de rota em um float, mas o valor convertido é usado somente para verificar se ele pode ser convertido em um float.</span><span class="sxs-lookup"><span data-stu-id="3589e-392">For example, the `float` constraint attempts to convert the route value to a float, but the converted value is used only to verify it can be converted to a float.</span></span>

## <a name="regular-expressions"></a><span data-ttu-id="3589e-393">Expressões regulares</span><span class="sxs-lookup"><span data-stu-id="3589e-393">Regular expressions</span></span>

<span data-ttu-id="3589e-394">A estrutura do ASP.NET Core adiciona `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` ao construtor de expressão regular.</span><span class="sxs-lookup"><span data-stu-id="3589e-394">The ASP.NET Core framework adds `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` to the regular expression constructor.</span></span> <span data-ttu-id="3589e-395">Confira <xref:System.Text.RegularExpressions.RegexOptions> para obter uma descrição desses membros.</span><span class="sxs-lookup"><span data-stu-id="3589e-395">See <xref:System.Text.RegularExpressions.RegexOptions> for a description of these members.</span></span>

<span data-ttu-id="3589e-396">As expressões regulares usam delimitadores e tokens semelhantes aos usados pelo Roteamento e pela linguagem C#.</span><span class="sxs-lookup"><span data-stu-id="3589e-396">Regular expressions use delimiters and tokens similar to those used by Routing and the C# language.</span></span> <span data-ttu-id="3589e-397">Os tokens de expressão regular precisam ter escape.</span><span class="sxs-lookup"><span data-stu-id="3589e-397">Regular expression tokens must be escaped.</span></span> <span data-ttu-id="3589e-398">Para usar a expressão regular `^\d{3}-\d{2}-\d{4}$` no Roteamento, ela precisa ter os caracteres `\` digitados como `\\` no arquivo de origem C# para fazer o escape do caractere de escape da cadeia de caracteres `\` (a menos que [literais de cadeia de caracteres textuais](/dotnet/csharp/language-reference/keywords/string) sejam usados).</span><span class="sxs-lookup"><span data-stu-id="3589e-398">To use the regular expression `^\d{3}-\d{2}-\d{4}$` in Routing, the expression must have the `\` characters typed in as `\\` in the C# source file to escape the `\` string escape character (unless using [verbatim string literals](/dotnet/csharp/language-reference/keywords/string).</span></span> <span data-ttu-id="3589e-399">Os caracteres `{`, `}`, `[` e `]` precisam ser inseridos duas vezes para fazer o escape dos caracteres delimitadores do parâmetro de Roteamento.</span><span class="sxs-lookup"><span data-stu-id="3589e-399">The `{`, `}`, `[`, and `]` characters must be escaped by doubling them to escape the Routing parameter delimiter characters.</span></span> <span data-ttu-id="3589e-400">A tabela abaixo mostra uma expressão regular e a versão com escape.</span><span class="sxs-lookup"><span data-stu-id="3589e-400">The table below shows a regular expression and the escaped version.</span></span>

| <span data-ttu-id="3589e-401">Expressão</span><span class="sxs-lookup"><span data-stu-id="3589e-401">Expression</span></span>            | <span data-ttu-id="3589e-402">Com escape</span><span class="sxs-lookup"><span data-stu-id="3589e-402">Escaped</span></span>                        |
| --------------------- | ------------------------------ |
| `^\d{3}-\d{2}-\d{4}$` | `^\\d{{3}}-\\d{{2}}-\\d{{4}}$` |
| `^[a-z]{2}$`          | `^[[a-z]]{{2}}$`               |

<span data-ttu-id="3589e-403">As expressões regulares usadas no roteamento geralmente começam com o caractere `^` (corresponde à posição inicial da cadeia de caracteres) e terminam com o caractere `$` (corresponde à posição final da cadeia de caracteres).</span><span class="sxs-lookup"><span data-stu-id="3589e-403">Regular expressions used in routing often start with the `^` character (match starting position of the string) and end with the `$` character (match ending position of the string).</span></span> <span data-ttu-id="3589e-404">Os caracteres `^` e `$` garantem que a expressão regular corresponde a todo o valor do parâmetro de rota.</span><span class="sxs-lookup"><span data-stu-id="3589e-404">The `^` and `$` characters ensure that the regular expression match the entire route parameter value.</span></span> <span data-ttu-id="3589e-405">Sem os caracteres `^` e `$`, a expressão regular corresponde a qualquer subcadeia de caracteres na cadeia de caracteres, o que geralmente não é o desejado.</span><span class="sxs-lookup"><span data-stu-id="3589e-405">Without the `^` and `$` characters, the regular expression match any substring within the string, which is often undesirable.</span></span> <span data-ttu-id="3589e-406">A tabela abaixo mostra alguns exemplos e explica por que eles encontram ou não uma correspondência.</span><span class="sxs-lookup"><span data-stu-id="3589e-406">The table below shows some examples and explains why they match or fail to match.</span></span>

| <span data-ttu-id="3589e-407">Expressão</span><span class="sxs-lookup"><span data-stu-id="3589e-407">Expression</span></span>   | <span data-ttu-id="3589e-408">Cadeia de Caracteres</span><span class="sxs-lookup"><span data-stu-id="3589e-408">String</span></span>    | <span data-ttu-id="3589e-409">Corresponder a</span><span class="sxs-lookup"><span data-stu-id="3589e-409">Match</span></span> | <span data-ttu-id="3589e-410">Comentário</span><span class="sxs-lookup"><span data-stu-id="3589e-410">Comment</span></span>               |
| ------------ | --------- |  ---- |  -------------------- |
| `[a-z]{2}`   | <span data-ttu-id="3589e-411">hello</span><span class="sxs-lookup"><span data-stu-id="3589e-411">hello</span></span>     | <span data-ttu-id="3589e-412">Sim</span><span class="sxs-lookup"><span data-stu-id="3589e-412">Yes</span></span>   | <span data-ttu-id="3589e-413">A subcadeia de caracteres corresponde</span><span class="sxs-lookup"><span data-stu-id="3589e-413">Substring matches</span></span>     |
| `[a-z]{2}`   | <span data-ttu-id="3589e-414">123abc456</span><span class="sxs-lookup"><span data-stu-id="3589e-414">123abc456</span></span> | <span data-ttu-id="3589e-415">Sim</span><span class="sxs-lookup"><span data-stu-id="3589e-415">Yes</span></span>   | <span data-ttu-id="3589e-416">A subcadeia de caracteres corresponde</span><span class="sxs-lookup"><span data-stu-id="3589e-416">Substring matches</span></span>     |
| `[a-z]{2}`   | <span data-ttu-id="3589e-417">mz</span><span class="sxs-lookup"><span data-stu-id="3589e-417">mz</span></span>        | <span data-ttu-id="3589e-418">Sim</span><span class="sxs-lookup"><span data-stu-id="3589e-418">Yes</span></span>   | <span data-ttu-id="3589e-419">Corresponde à expressão</span><span class="sxs-lookup"><span data-stu-id="3589e-419">Matches expression</span></span>    |
| `[a-z]{2}`   | <span data-ttu-id="3589e-420">MZ</span><span class="sxs-lookup"><span data-stu-id="3589e-420">MZ</span></span>        | <span data-ttu-id="3589e-421">Sim</span><span class="sxs-lookup"><span data-stu-id="3589e-421">Yes</span></span>   | <span data-ttu-id="3589e-422">Não diferencia maiúsculas de minúsculas</span><span class="sxs-lookup"><span data-stu-id="3589e-422">Not case sensitive</span></span>    |
| `^[a-z]{2}$` |  <span data-ttu-id="3589e-423">hello</span><span class="sxs-lookup"><span data-stu-id="3589e-423">hello</span></span>    | <span data-ttu-id="3589e-424">Não</span><span class="sxs-lookup"><span data-stu-id="3589e-424">No</span></span>    | <span data-ttu-id="3589e-425">Confira `^` e `$` acima</span><span class="sxs-lookup"><span data-stu-id="3589e-425">See `^` and `$` above</span></span> |
| `^[a-z]{2}$` | <span data-ttu-id="3589e-426">123abc456</span><span class="sxs-lookup"><span data-stu-id="3589e-426">123abc456</span></span> | <span data-ttu-id="3589e-427">Não</span><span class="sxs-lookup"><span data-stu-id="3589e-427">No</span></span>    | <span data-ttu-id="3589e-428">Confira `^` e `$` acima</span><span class="sxs-lookup"><span data-stu-id="3589e-428">See `^` and `$` above</span></span> |

<span data-ttu-id="3589e-429">Para saber mais sobre a sintaxe de expressões regulares, confira [Expressões regulares do .NET Framework](/dotnet/standard/base-types/regular-expression-language-quick-reference).</span><span class="sxs-lookup"><span data-stu-id="3589e-429">For more information on regular expression syntax, see [.NET Framework Regular Expressions](/dotnet/standard/base-types/regular-expression-language-quick-reference).</span></span>

<span data-ttu-id="3589e-430">Para restringir um parâmetro a um conjunto conhecido de valores possíveis, use uma expressão regular.</span><span class="sxs-lookup"><span data-stu-id="3589e-430">To constrain a parameter to a known set of possible values, use a regular expression.</span></span> <span data-ttu-id="3589e-431">Por exemplo, `{action:regex(^(list|get|create)$)}` apenas corresponde o valor da rota `action` a `list`, `get` ou `create`.</span><span class="sxs-lookup"><span data-stu-id="3589e-431">For example, `{action:regex(^(list|get|create)$)}` only matches the `action` route value to `list`, `get`, or `create`.</span></span> <span data-ttu-id="3589e-432">Se passada para o dicionário de restrições, a cadeia de caracteres `^(list|get|create)$` é equivalente.</span><span class="sxs-lookup"><span data-stu-id="3589e-432">If passed into the constraints dictionary, the string `^(list|get|create)$` is equivalent.</span></span> <span data-ttu-id="3589e-433">As restrições passadas para o dicionário de restrições (não embutidas em um modelo) que não correspondem a uma das restrições conhecidas também são tratadas como expressões regulares.</span><span class="sxs-lookup"><span data-stu-id="3589e-433">Constraints that are passed in the constraints dictionary (not inline within a template) that don't match one of the known constraints are also treated as regular expressions.</span></span>

::: moniker range=">= aspnetcore-2.2"

## <a name="parameter-transformer-reference"></a><span data-ttu-id="3589e-434">Referência de parâmetro de transformador</span><span class="sxs-lookup"><span data-stu-id="3589e-434">Parameter transformer reference</span></span>

<span data-ttu-id="3589e-435">Transformadores de parâmetro:</span><span class="sxs-lookup"><span data-stu-id="3589e-435">Parameter transformers:</span></span>

* <span data-ttu-id="3589e-436">Executar ao gerar um link para um `Route`.</span><span class="sxs-lookup"><span data-stu-id="3589e-436">Execute when generating a link for a `Route`.</span></span>
* <span data-ttu-id="3589e-437">Implementar `Microsoft.AspNetCore.Routing.IOutboundParameterTransformer`.</span><span class="sxs-lookup"><span data-stu-id="3589e-437">Implement `Microsoft.AspNetCore.Routing.IOutboundParameterTransformer`.</span></span>
* <span data-ttu-id="3589e-438">São configurados usando <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap>.</span><span class="sxs-lookup"><span data-stu-id="3589e-438">Are configured using <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap>.</span></span>
* <span data-ttu-id="3589e-439">Usam o valor de rota do parâmetro e o transformam em um novo valor de cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="3589e-439">Take the parameter's route value and transform it to a new string value.</span></span>
* <span data-ttu-id="3589e-440">O valor transformado é usado no link gerado.</span><span class="sxs-lookup"><span data-stu-id="3589e-440">The transformed value is used in the generated link.</span></span>

<span data-ttu-id="3589e-441">Por exemplo, um transformador de parâmetro `slugify` personalizado em padrão de rota `blog\{article:slugify}` com `Url.Action(new { article = "MyTestArticle" })` gera `blog\my-test-article`.</span><span class="sxs-lookup"><span data-stu-id="3589e-441">For example, a custom `slugify` parameter transformer in route pattern `blog\{article:slugify}` with `Url.Action(new { article = "MyTestArticle" })` generates `blog\my-test-article`.</span></span>

<span data-ttu-id="3589e-442">Os transformadores de parâmetro também são usados pelas estruturas para transformar o URI em que o ponto de extremidade é resolvido.</span><span class="sxs-lookup"><span data-stu-id="3589e-442">Parameter transformers are also used by frameworks to transform the URI to which an endpoint resolves.</span></span> <span data-ttu-id="3589e-443">Por exemplo, o ASP.NET Core MVC usa os transformadores de parâmetro para transformar o valor de rota usado para corresponder a um `area`, `controller`, `action` e `page`.</span><span class="sxs-lookup"><span data-stu-id="3589e-443">For example, ASP.NET Core MVC uses parameter transformers to transform the route value used to match an `area`, `controller`, `action`, and `page`.</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home:slugify}/{action=Index:slugify}/{id?}");
```

<span data-ttu-id="3589e-444">Com a rota anterior, a ação `SubscriptionManagementController.GetAll()` é combinada com o URI `/subscription-management/get-all`.</span><span class="sxs-lookup"><span data-stu-id="3589e-444">With the preceding route, the action `SubscriptionManagementController.GetAll()` is matched with the URI `/subscription-management/get-all`.</span></span> <span data-ttu-id="3589e-445">Um transformador de parâmetro não altera os valores de rota usados para gerar um link.</span><span class="sxs-lookup"><span data-stu-id="3589e-445">A parameter transformer doesn't change the route values used to generate a link.</span></span> <span data-ttu-id="3589e-446">`Url.Action("GetAll", "SubscriptionManagement")` gera `/subscription-management/get-all`.</span><span class="sxs-lookup"><span data-stu-id="3589e-446">`Url.Action("GetAll", "SubscriptionManagement")` outputs `/subscription-management/get-all`.</span></span>

<span data-ttu-id="3589e-447">ASP.NET Core fornece convenções de API para usar transformadores de parâmetro com as rotas geradas:</span><span class="sxs-lookup"><span data-stu-id="3589e-447">ASP.NET Core provides API conventions for using a parameter transformers with generated routes:</span></span>

* <span data-ttu-id="3589e-448">ASP.NET Core MVC tem a convenção de API `Microsoft.AspNetCore.Mvc.ApplicationModels.RouteTokenTransformerConvention`.</span><span class="sxs-lookup"><span data-stu-id="3589e-448">ASP.NET Core MVC has the `Microsoft.AspNetCore.Mvc.ApplicationModels.RouteTokenTransformerConvention` API convention.</span></span> <span data-ttu-id="3589e-449">Essa convenção aplica um transformador de parâmetro especificado a todas as rotas de atributo no aplicativo.</span><span class="sxs-lookup"><span data-stu-id="3589e-449">This convention applies a specified parameter transformer to all attribute routes in the app.</span></span> <span data-ttu-id="3589e-450">O transformador de parâmetro transforma os tokens de rota do atributo conforme elas são substituídas.</span><span class="sxs-lookup"><span data-stu-id="3589e-450">The parameter transformer transforms attribute route tokens as they are replaced.</span></span> <span data-ttu-id="3589e-451">Para obter mais informações, confira [Usar um transformador de parâmetro para personalizar a substituição de token](/aspnet/core/mvc/controllers/routing#use-a-parameter-transformer-to-customize-token-replacement).</span><span class="sxs-lookup"><span data-stu-id="3589e-451">For more information, see [Use a parameter transformer to customize token replacement](/aspnet/core/mvc/controllers/routing#use-a-parameter-transformer-to-customize-token-replacement).</span></span>
* <span data-ttu-id="3589e-452">Razor Pages têm a convenção de API `Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteTransformerConvention`.</span><span class="sxs-lookup"><span data-stu-id="3589e-452">Razor pages has the `Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteTransformerConvention` API convention.</span></span> <span data-ttu-id="3589e-453">Essa convenção aplica-se um transformador de parâmetro especificado para todas as Razor Pages descobertas automaticamente.</span><span class="sxs-lookup"><span data-stu-id="3589e-453">This convention applies a specified parameter transformer to all automatically discovered Razor pages.</span></span> <span data-ttu-id="3589e-454">O transformador de parâmetro transforma a pasta e segmentos de nome de arquivo de rotas de página do Razor.</span><span class="sxs-lookup"><span data-stu-id="3589e-454">The parameter transformer transforms the folder and file name segments of Razor page routes.</span></span> <span data-ttu-id="3589e-455">Para obter mais informações, confira [Usar um transformador de parâmetros para personalizar rotas de página](/aspnet/core/razor-pages/razor-pages-conventions#use-a-parameter-transformer-to-customize-page-routes).</span><span class="sxs-lookup"><span data-stu-id="3589e-455">For more information, see [Use a parameter transformer to customize page routes](/aspnet/core/razor-pages/razor-pages-conventions#use-a-parameter-transformer-to-customize-page-routes).</span></span>

::: moniker-end

## <a name="url-generation-reference"></a><span data-ttu-id="3589e-456">Referência de geração de URL</span><span class="sxs-lookup"><span data-stu-id="3589e-456">URL generation reference</span></span>

<span data-ttu-id="3589e-457">O exemplo a seguir mostra como gerar um link para uma rota com base em um dicionário de valores de rota e em um <xref:Microsoft.AspNetCore.Routing.RouteCollection>.</span><span class="sxs-lookup"><span data-stu-id="3589e-457">The following example shows how to generate a link to a route given a dictionary of route values and a <xref:Microsoft.AspNetCore.Routing.RouteCollection>.</span></span>

::: moniker range=">= aspnetcore-2.0"

[!code-csharp[](routing/samples/2.x/RoutingSample/Startup.cs?name=snippet_Dictionary)]

::: moniker-end

::: moniker range="< aspnetcore-2.0"

[!code-csharp[](routing/samples/1.x/RoutingSample/Startup.cs?name=snippet_Dictionary)]

::: moniker-end

<span data-ttu-id="3589e-458">O `VirtualPath` gerado no final do exemplo anterior é `/package/create/123`.</span><span class="sxs-lookup"><span data-stu-id="3589e-458">The `VirtualPath` generated at the end of the preceding sample is `/package/create/123`.</span></span> <span data-ttu-id="3589e-459">O dicionário fornece os valores de rota `operation` e `id` do modelo "Rastrear rota do pacote", `package/{operation}/{id}`.</span><span class="sxs-lookup"><span data-stu-id="3589e-459">The dictionary supplies the `operation` and `id` route values of the "Track Package Route" template, `package/{operation}/{id}`.</span></span> <span data-ttu-id="3589e-460">Para obter detalhes, consulte o código de exemplo na seção [Usar o middleware de roteamento](#use-routing-middleware) ou no [aplicativo de exemplo](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/samples).</span><span class="sxs-lookup"><span data-stu-id="3589e-460">For details, see the sample code in the [Use Routing Middleware](#use-routing-middleware) section or the [sample app](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/samples).</span></span>

<span data-ttu-id="3589e-461">O segundo parâmetro para o construtor `VirtualPathContext` é uma coleção de *valores de ambiente*.</span><span class="sxs-lookup"><span data-stu-id="3589e-461">The second parameter to the `VirtualPathContext` constructor is a collection of *ambient values*.</span></span> <span data-ttu-id="3589e-462">Os valores de ambiente proporcionam conveniência, limitando o número de valores que um desenvolvedor precisa especificar em determinado contexto de solicitação.</span><span class="sxs-lookup"><span data-stu-id="3589e-462">Ambient values provide convenience by limiting the number of values a developer must specify within a certain request context.</span></span> <span data-ttu-id="3589e-463">Os valores de rota atuais da solicitação atual são considerados valores de ambiente para a geração de link.</span><span class="sxs-lookup"><span data-stu-id="3589e-463">The current route values of the current request are considered ambient values for link generation.</span></span> <span data-ttu-id="3589e-464">Em um aplicativo ASP.NET Core MVC, se você está na ação `About` do `HomeController`, não é necessário especificar o valor de rota do controlador a ser vinculado à ação `Index`. O valor de ambiente `Home` é usado.</span><span class="sxs-lookup"><span data-stu-id="3589e-464">In an ASP.NET Core MVC app if you are in the `About` action of the `HomeController`, you don't need to specify the controller route value to link to the `Index` action&mdash;the ambient value of `Home` is used.</span></span>

<span data-ttu-id="3589e-465">Os valores de ambiente que não correspondem a um parâmetro são ignorados e os valores de ambiente também são ignorados quando um valor fornecido de forma explícita o substitui, seguindo da esquerda para a direita na URL.</span><span class="sxs-lookup"><span data-stu-id="3589e-465">Ambient values that don't match a parameter are ignored, and ambient values are also ignored when an explicitly provided value overrides it, going from left to right in the URL.</span></span>

<span data-ttu-id="3589e-466">Os valores que são fornecidos de forma explícita, mas que não correspondem a nada, são adicionados à cadeia de caracteres de consulta.</span><span class="sxs-lookup"><span data-stu-id="3589e-466">Values that are explicitly provided but which don't match anything are added to the query string.</span></span> <span data-ttu-id="3589e-467">A tabela a seguir mostra o resultado do uso do modelo de rota `{controller}/{action}/{id?}`.</span><span class="sxs-lookup"><span data-stu-id="3589e-467">The following table shows the result when using the route template `{controller}/{action}/{id?}`.</span></span>

| <span data-ttu-id="3589e-468">Valores de ambiente</span><span class="sxs-lookup"><span data-stu-id="3589e-468">Ambient Values</span></span>                | <span data-ttu-id="3589e-469">Valores explícitos</span><span class="sxs-lookup"><span data-stu-id="3589e-469">Explicit Values</span></span>                   | <span data-ttu-id="3589e-470">Resultado</span><span class="sxs-lookup"><span data-stu-id="3589e-470">Result</span></span>                  |
| ----------------------------- | --------------------------------- | ----------------------- |
| <span data-ttu-id="3589e-471">controller="Home"</span><span class="sxs-lookup"><span data-stu-id="3589e-471">controller="Home"</span></span>             | <span data-ttu-id="3589e-472">action="About"</span><span class="sxs-lookup"><span data-stu-id="3589e-472">action="About"</span></span>                    | `/Home/About`           |
| <span data-ttu-id="3589e-473">controller="Home"</span><span class="sxs-lookup"><span data-stu-id="3589e-473">controller="Home"</span></span>             | <span data-ttu-id="3589e-474">controller="Order",action="About"</span><span class="sxs-lookup"><span data-stu-id="3589e-474">controller="Order",action="About"</span></span> | `/Order/About`          |
| <span data-ttu-id="3589e-475">controller="Home",color="Red"</span><span class="sxs-lookup"><span data-stu-id="3589e-475">controller="Home",color="Red"</span></span> | <span data-ttu-id="3589e-476">action="About"</span><span class="sxs-lookup"><span data-stu-id="3589e-476">action="About"</span></span>                    | `/Home/About`           |
| <span data-ttu-id="3589e-477">controller="Home"</span><span class="sxs-lookup"><span data-stu-id="3589e-477">controller="Home"</span></span>             | <span data-ttu-id="3589e-478">action="About",color="Red"</span><span class="sxs-lookup"><span data-stu-id="3589e-478">action="About",color="Red"</span></span>        | `/Home/About?color=Red` |

<span data-ttu-id="3589e-479">Se uma rota tem um valor padrão que não corresponde a um parâmetro e esse valor é fornecido de forma explícita, ele precisa corresponder ao valor padrão:</span><span class="sxs-lookup"><span data-stu-id="3589e-479">If a route has a default value that doesn't correspond to a parameter and that value is explicitly provided, it must match the default value:</span></span>

```csharp
routes.MapRoute("blog_route", "blog/{*slug}",
    defaults: new { controller = "Blog", action = "ReadPost" });
```

<span data-ttu-id="3589e-480">A geração de link somente gera um link para essa rota quando os valores correspondentes do controlador e da ação são fornecidos.</span><span class="sxs-lookup"><span data-stu-id="3589e-480">Link generation only generates a link for this route when the matching values for controller and action are provided.</span></span>
