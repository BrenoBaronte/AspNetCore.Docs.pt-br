---
title: "Roteamento no núcleo do ASP.NET"
author: ardalis
description: "Descobrir como a funcionalidade de roteamento do ASP.NET Core é responsável para mapear uma solicitação de entrada para um manipulador de rota."
keywords: ASP.NET Core,
ms.author: riande
manager: wpickett
ms.date: 10/14/2016
ms.topic: article
ms.assetid: bbbcf9e4-3c4c-4f50-b91e-175fe9cae4e2
ms.technology: aspnet
ms.prod: asp.net-core
uid: fundamentals/routing
ms.openlocfilehash: 58388f674ed5d353c1c7208a67fb338e49fdb592
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/10/2017
---
# <a name="routing-in-aspnet-core"></a><span data-ttu-id="c50e1-104">Roteamento no núcleo do ASP.NET</span><span class="sxs-lookup"><span data-stu-id="c50e1-104">Routing in ASP.NET Core</span></span>

<span data-ttu-id="c50e1-105">Por [Ryan Nowak](https://github.com/rynowak), [Steve Smith](https://ardalis.com/), e [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="c50e1-105">By [Ryan Nowak](https://github.com/rynowak), [Steve Smith](https://ardalis.com/), and [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

<span data-ttu-id="c50e1-106">Funcionalidade de roteamento é responsável por uma solicitação de entrada de mapeamento para um manipulador de rota.</span><span class="sxs-lookup"><span data-stu-id="c50e1-106">Routing functionality is responsible for mapping an incoming request to a route handler.</span></span> <span data-ttu-id="c50e1-107">Rotas são definidas no aplicativo do ASP.NET e configuradas quando o aplicativo é iniciado.</span><span class="sxs-lookup"><span data-stu-id="c50e1-107">Routes are defined in the ASP.NET app and configured when the app starts up.</span></span> <span data-ttu-id="c50e1-108">Uma rota opcionalmente pode extrair os valores da URL contida na solicitação, e esses valores, em seguida, podem ser usados para o processamento da solicitação.</span><span class="sxs-lookup"><span data-stu-id="c50e1-108">A route can optionally extract values from the URL contained in the request, and these values can then be used for request processing.</span></span> <span data-ttu-id="c50e1-109">Usando informações de rota do aplicativo ASP.NET, a funcionalidade de roteamento também é capaz de gerar URLs que são mapeados para manipuladores de rotas.</span><span class="sxs-lookup"><span data-stu-id="c50e1-109">Using route information from the ASP.NET app, the routing functionality is also able to generate URLs that map to route handlers.</span></span> <span data-ttu-id="c50e1-110">Portanto, o roteamento pode encontrar um manipulador de rota com base em uma URL ou a URL correspondente a um manipulador de rota em questão com base nas informações do manipulador de rota.</span><span class="sxs-lookup"><span data-stu-id="c50e1-110">Therefore, routing can find a route handler based on a URL, or the URL corresponding to a given route handler based on route handler information.</span></span>

>[!IMPORTANT]
> <span data-ttu-id="c50e1-111">Este documento abrange o nível inferior ASP.NET Core roteamento.</span><span class="sxs-lookup"><span data-stu-id="c50e1-111">This document covers the low level ASP.NET Core routing.</span></span> <span data-ttu-id="c50e1-112">Para o roteamento MVC do ASP.NET Core, consulte [roteamento para ações do controlador](../mvc/controllers/routing.md)</span><span class="sxs-lookup"><span data-stu-id="c50e1-112">For ASP.NET Core MVC routing, see [Routing to Controller Actions](../mvc/controllers/routing.md)</span></span>

<span data-ttu-id="c50e1-113">[Exibir ou baixar código de exemplo](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/sample) ([como baixar](xref:tutorials/index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="c50e1-113">[View or download sample code](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/sample) ([how to download](xref:tutorials/index#how-to-download-a-sample))</span></span>

## <a name="routing-basics"></a><span data-ttu-id="c50e1-114">Noções básicas sobre roteamento</span><span class="sxs-lookup"><span data-stu-id="c50e1-114">Routing basics</span></span>

<span data-ttu-id="c50e1-115">Usa roteamento *rotas* (implementações de [IRouter](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.routing.irouter)) para:</span><span class="sxs-lookup"><span data-stu-id="c50e1-115">Routing uses *routes* (implementations of [IRouter](https://docs.microsoft.com/aspnet/core/api/microsoft.aspnetcore.routing.irouter)) to:</span></span>

* <span data-ttu-id="c50e1-116">solicitações de entrada do mapa *manipuladores de rota*</span><span class="sxs-lookup"><span data-stu-id="c50e1-116">map incoming requests to *route handlers*</span></span>

* <span data-ttu-id="c50e1-117">gerar as URLs usadas nas respostas</span><span class="sxs-lookup"><span data-stu-id="c50e1-117">generate URLs used in responses</span></span>

<span data-ttu-id="c50e1-118">Em geral, um aplicativo tem uma única coleção de rotas.</span><span class="sxs-lookup"><span data-stu-id="c50e1-118">Generally, an app has a single collection of routes.</span></span> <span data-ttu-id="c50e1-119">Quando uma solicitação chega, a coleção de rotas é processada na ordem.</span><span class="sxs-lookup"><span data-stu-id="c50e1-119">When a request arrives, the route collection is processed in order.</span></span> <span data-ttu-id="c50e1-120">A solicitação de entrada procura uma rota que corresponde à URL de solicitação chamando o `RouteAsync` método em cada rota disponível na coleção de rotas.</span><span class="sxs-lookup"><span data-stu-id="c50e1-120">The incoming request looks for a route that matches the request URL by calling the `RouteAsync` method on each available route in the route collection.</span></span> <span data-ttu-id="c50e1-121">Por outro lado, uma resposta pode usar o roteamento para gerar URLs (por exemplo, para redirecionamento ou links) com base nas informações de rota e, assim, evite ter URLs de embutir em código, que ajuda a facilidade de manutenção.</span><span class="sxs-lookup"><span data-stu-id="c50e1-121">By contrast, a response can use routing to generate URLs (for example, for redirection or links) based on route information, and thus avoid having to hard-code URLs, which helps maintainability.</span></span>

<span data-ttu-id="c50e1-122">Roteamento está conectado a [middleware](middleware.md) pipeline pela `RouterMiddleware` classe.</span><span class="sxs-lookup"><span data-stu-id="c50e1-122">Routing is connected to the [middleware](middleware.md) pipeline by the `RouterMiddleware` class.</span></span> <span data-ttu-id="c50e1-123">[ASP.NET MVC](../mvc/overview.md) adiciona o roteamento para o pipeline de middleware como parte da sua configuração.</span><span class="sxs-lookup"><span data-stu-id="c50e1-123">[ASP.NET MVC](../mvc/overview.md) adds routing to the middleware pipeline as part of its configuration.</span></span> <span data-ttu-id="c50e1-124">Para obter informações sobre como usar o roteamento como um componente autônomo, consulte [middleware de roteamento usando](#using-routing-middleware).</span><span class="sxs-lookup"><span data-stu-id="c50e1-124">To learn about using routing as a standalone component, see [using-routing-middleware](#using-routing-middleware).</span></span>

<a name="url-matching-ref"></a>

### <a name="url-matching"></a><span data-ttu-id="c50e1-125">Correspondência de URL</span><span class="sxs-lookup"><span data-stu-id="c50e1-125">URL matching</span></span>

<span data-ttu-id="c50e1-126">Correspondência de URL é o processo pelo qual expede roteamento uma entrada de solicitação para um *manipulador*.</span><span class="sxs-lookup"><span data-stu-id="c50e1-126">URL matching is the process by which routing dispatches an incoming request to a *handler*.</span></span> <span data-ttu-id="c50e1-127">Esse processo geralmente com base nos dados no caminho da URL, mas pode ser estendido para considerar todos os dados na solicitação.</span><span class="sxs-lookup"><span data-stu-id="c50e1-127">This process is generally based on data in the URL path, but can be extended to consider any data in the request.</span></span> <span data-ttu-id="c50e1-128">A capacidade de enviar solicitações para separar manipuladores é fundamental para dimensionar o tamanho e a complexidade de um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="c50e1-128">The ability to dispatch requests to separate handlers is key to scaling the size and complexity of an application.</span></span>

<span data-ttu-id="c50e1-129">Insira as solicitações de entrada a `RouterMiddleware`, que chama o `RouteAsync` método em cada rota na sequência.</span><span class="sxs-lookup"><span data-stu-id="c50e1-129">Incoming requests enter the `RouterMiddleware`, which calls the `RouteAsync` method on each route in sequence.</span></span> <span data-ttu-id="c50e1-130">O `IRouter` instância escolhe se deseja *tratar* a solicitação, definindo o `RouteContext.Handler` para não-nulo `RequestDelegate`.</span><span class="sxs-lookup"><span data-stu-id="c50e1-130">The `IRouter` instance chooses whether to *handle* the request by setting the `RouteContext.Handler` to a non-null `RequestDelegate`.</span></span> <span data-ttu-id="c50e1-131">Se uma rota define um manipulador para a solicitação, o processamento será interrompido e o manipulador de rota será invocada para processar a solicitação.</span><span class="sxs-lookup"><span data-stu-id="c50e1-131">If a route sets a handler for the request, route processing stops and the handler will be invoked to process the request.</span></span> <span data-ttu-id="c50e1-132">Se todas as rotas serão tentadas e nenhum manipulador foi encontrado para a solicitação, o middleware chama *próximo* e o próximo middleware no pipeline de solicitação é invocado.</span><span class="sxs-lookup"><span data-stu-id="c50e1-132">If all routes are tried and no handler is found for the request, the middleware calls *next* and the next middleware in the request pipeline is invoked.</span></span>

<span data-ttu-id="c50e1-133">A entrada principal para `RouteAsync` é o `RouteContext.HttpContext` associado à solicitação atual.</span><span class="sxs-lookup"><span data-stu-id="c50e1-133">The primary input to `RouteAsync` is the `RouteContext.HttpContext` associated with the current request.</span></span> <span data-ttu-id="c50e1-134">O `RouteContext.Handler` e `RouteContext.RouteData` são saídas que serão definidas depois que uma rota corresponde.</span><span class="sxs-lookup"><span data-stu-id="c50e1-134">The `RouteContext.Handler` and `RouteContext.RouteData` are outputs that will be set after a route matches.</span></span>

<span data-ttu-id="c50e1-135">Uma correspondência durante `RouteAsync` também definirá as propriedades do `RouteContext.RouteData` para os valores apropriados com base no processamento de solicitação concluído até o momento.</span><span class="sxs-lookup"><span data-stu-id="c50e1-135">A match during `RouteAsync` will also set the properties of the `RouteContext.RouteData` to appropriate values based on the request processing done so far.</span></span> <span data-ttu-id="c50e1-136">Se uma rota corresponde a uma solicitação, o `RouteContext.RouteData` conterá informações de estado importantes sobre o *resultado*.</span><span class="sxs-lookup"><span data-stu-id="c50e1-136">If a route matches a request, the `RouteContext.RouteData` will contain important state information about the *result*.</span></span>

<span data-ttu-id="c50e1-137">`RouteData.Values`é um dicionário de *valores de rota* produzidos de rota.</span><span class="sxs-lookup"><span data-stu-id="c50e1-137">`RouteData.Values` is a dictionary of *route values* produced from the route.</span></span> <span data-ttu-id="c50e1-138">Esses valores geralmente são determinados pelo gerar tokens para a URL e podem ser usados para aceitar a entrada do usuário ou para tomar decisões mais expedição dentro do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="c50e1-138">These values are usually determined by tokenizing the URL, and can be used to accept user input, or to make further dispatching decisions inside the application.</span></span>

<span data-ttu-id="c50e1-139">`RouteData.DataTokens`é um recipiente de propriedades de dados adicionais relacionados à rota correspondente.</span><span class="sxs-lookup"><span data-stu-id="c50e1-139">`RouteData.DataTokens`  is a property bag of additional data related to the matched route.</span></span> <span data-ttu-id="c50e1-140">`DataTokens`são fornecidos para oferecer suporte ao estado associando dados com cada rota para que o aplicativo possa tomar decisões mais tarde com base em qual rota correspondente.</span><span class="sxs-lookup"><span data-stu-id="c50e1-140">`DataTokens` are provided to support associating state data with each route so the application can make decisions later based on which route matched.</span></span> <span data-ttu-id="c50e1-141">Esses valores são definidos pelo desenvolvedor e **não** afetam o comportamento de roteamento de qualquer forma.</span><span class="sxs-lookup"><span data-stu-id="c50e1-141">These values are developer-defined and do **not** affect the behavior of routing in any way.</span></span> <span data-ttu-id="c50e1-142">Além disso, os valores armazenados nos tokens de dados podem ser de qualquer tipo, em contraste com valores de rota, que deve ser conversível em cadeias de caracteres.</span><span class="sxs-lookup"><span data-stu-id="c50e1-142">Additionally, values stashed in data tokens can be of any type, in contrast to route values, which must be easily convertible to and from strings.</span></span>

<span data-ttu-id="c50e1-143">`RouteData.Routers`é uma lista das rotas que participou na correspondência com êxito a solicitação.</span><span class="sxs-lookup"><span data-stu-id="c50e1-143">`RouteData.Routers` is a list of the routes that took part in successfully matching the request.</span></span> <span data-ttu-id="c50e1-144">Rotas podem ser aninhadas dentro de um do outro e o `Routers` propriedade reflete o caminho até a árvore lógica de rotas que resultou em uma correspondência.</span><span class="sxs-lookup"><span data-stu-id="c50e1-144">Routes can be nested inside one another, and the `Routers` property reflects the path through the logical tree of routes that resulted in a match.</span></span> <span data-ttu-id="c50e1-145">Geralmente o primeiro item na `Routers` é a coleção de rotas e deve ser usada para geração de URL.</span><span class="sxs-lookup"><span data-stu-id="c50e1-145">Generally the first item in `Routers` is the route collection, and should be used for URL generation.</span></span> <span data-ttu-id="c50e1-146">O último item no `Routers` é o manipulador de rota correspondente.</span><span class="sxs-lookup"><span data-stu-id="c50e1-146">The last item in `Routers` is the route handler that matched.</span></span>

### <a name="url-generation"></a><span data-ttu-id="c50e1-147">Geração de URL</span><span class="sxs-lookup"><span data-stu-id="c50e1-147">URL generation</span></span>

<span data-ttu-id="c50e1-148">Geração de URL é o processo pelo qual o roteamento pode criar um caminho de URL com base em um conjunto de valores de rota.</span><span class="sxs-lookup"><span data-stu-id="c50e1-148">URL generation is the process by which routing can create a URL path based on a set of route values.</span></span> <span data-ttu-id="c50e1-149">Isso permite uma separação lógica entre seus manipuladores e as URLs que acessá-los.</span><span class="sxs-lookup"><span data-stu-id="c50e1-149">This allows for a logical separation between your handlers and the URLs that access them.</span></span>

<span data-ttu-id="c50e1-150">Geração de URL segue um processo iterativo semelhante, mas começa com o código de usuário ou do framework chamando o `GetVirtualPath` método de coleção de rotas.</span><span class="sxs-lookup"><span data-stu-id="c50e1-150">URL generation follows a similar iterative process, but starts with user or framework code calling into the `GetVirtualPath` method of the route collection.</span></span> <span data-ttu-id="c50e1-151">Cada *rota* terá seu `GetVirtualPath` método chamado em sequência até não null `VirtualPathData` é retornado.</span><span class="sxs-lookup"><span data-stu-id="c50e1-151">Each *route* will then have its `GetVirtualPath` method called in sequence until a non-null `VirtualPathData` is returned.</span></span>

<span data-ttu-id="c50e1-152">O principal entradas para `GetVirtualPath` são:</span><span class="sxs-lookup"><span data-stu-id="c50e1-152">The primary inputs to `GetVirtualPath` are:</span></span>

* `VirtualPathContext.HttpContext`

* `VirtualPathContext.Values`

* `VirtualPathContext.AmbientValues`

<span data-ttu-id="c50e1-153">Rotas usem principalmente os valores de rota fornecidos pelo `Values` e `AmbientValues` para decidir onde é possível gerar uma URL e os valores a serem incluídos.</span><span class="sxs-lookup"><span data-stu-id="c50e1-153">Routes primarily use the route values provided by the `Values` and `AmbientValues` to decide where it is possible to generate a URL and what values to include.</span></span> <span data-ttu-id="c50e1-154">O `AmbientValues` são o conjunto de valores de rota que foram produzidas pela correspondência a solicitação atual com o sistema de roteamento.</span><span class="sxs-lookup"><span data-stu-id="c50e1-154">The `AmbientValues` are the set of route values that were produced from matching the current request with the routing system.</span></span> <span data-ttu-id="c50e1-155">Por outro lado, `Values` são os valores de rota que especificam como gerar a URL desejada para a operação atual.</span><span class="sxs-lookup"><span data-stu-id="c50e1-155">In contrast, `Values` are the route values that specify how to generate the desired URL for the current operation.</span></span> <span data-ttu-id="c50e1-156">O `HttpContext` é fornecido no caso de uma rota precisa obter serviços ou dados adicionais associados ao contexto atual.</span><span class="sxs-lookup"><span data-stu-id="c50e1-156">The `HttpContext` is provided in case a route needs to get services or additional data associated with the current context.</span></span>

<span data-ttu-id="c50e1-157">Dica: Pensar `Values` como sendo um conjunto de substituições para o `AmbientValues`.</span><span class="sxs-lookup"><span data-stu-id="c50e1-157">Tip: Think of `Values` as being a set of overrides for the `AmbientValues`.</span></span> <span data-ttu-id="c50e1-158">Geração de URL tenta reutilizar valores de rota da solicitação atual para tornar mais fácil gerar URLs para links usando o mesmo roteiro ou valores de rota.</span><span class="sxs-lookup"><span data-stu-id="c50e1-158">URL generation tries to reuse route values from the current request to make it easy to generate URLs for links using the same route or route values.</span></span>

<span data-ttu-id="c50e1-159">A saída de `GetVirtualPath` é um `VirtualPathData`.</span><span class="sxs-lookup"><span data-stu-id="c50e1-159">The output of `GetVirtualPath` is a `VirtualPathData`.</span></span> <span data-ttu-id="c50e1-160">`VirtualPathData`é um paralelo do `RouteData`; ele contém o `VirtualPath` para a URL de saída, bem como algumas propriedades adicionais que devem ser definidas pela rota.</span><span class="sxs-lookup"><span data-stu-id="c50e1-160">`VirtualPathData` is a parallel of `RouteData`; it contains the `VirtualPath` for the output URL as well as the some additional properties that should be set by the route.</span></span>

<span data-ttu-id="c50e1-161">O `VirtualPathData.VirtualPath` propriedade contém o *caminho virtual* produzido pela rota.</span><span class="sxs-lookup"><span data-stu-id="c50e1-161">The `VirtualPathData.VirtualPath` property contains the *virtual path* produced by the route.</span></span> <span data-ttu-id="c50e1-162">Dependendo de suas necessidades, talvez seja necessário processar ainda mais o caminho.</span><span class="sxs-lookup"><span data-stu-id="c50e1-162">Depending on your needs you may need to process the path further.</span></span> <span data-ttu-id="c50e1-163">Por exemplo, se você deseja processar a URL gerada em HTML, você precisa colocar o caminho base do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="c50e1-163">For instance, if you want to render the generated URL in HTML you need to prepend the base path of the application.</span></span>

<span data-ttu-id="c50e1-164">O `VirtualPathData.Router` é uma referência para a rota que é gerado com êxito a URL.</span><span class="sxs-lookup"><span data-stu-id="c50e1-164">The `VirtualPathData.Router` is a reference to the route that successfully generated the URL.</span></span>

<span data-ttu-id="c50e1-165">O `VirtualPathData.DataTokens` propriedades é um dicionário de dados adicionais relacionados à rota que gerou a URL.</span><span class="sxs-lookup"><span data-stu-id="c50e1-165">The `VirtualPathData.DataTokens` properties is a dictionary of additional data related to the route that generated the URL.</span></span> <span data-ttu-id="c50e1-166">Isso é paralelo de `RouteData.DataTokens`.</span><span class="sxs-lookup"><span data-stu-id="c50e1-166">This is the parallel of `RouteData.DataTokens`.</span></span>

### <a name="creating-routes"></a><span data-ttu-id="c50e1-167">Criar rotas</span><span class="sxs-lookup"><span data-stu-id="c50e1-167">Creating routes</span></span>

<span data-ttu-id="c50e1-168">O roteamento fornece o `Route` classe como a implementação padrão de `IRouter`.</span><span class="sxs-lookup"><span data-stu-id="c50e1-168">Routing provides the `Route` class as the standard implementation of `IRouter`.</span></span> <span data-ttu-id="c50e1-169">`Route`usa o *modelo de rota* sintaxe para definir padrões que fará a correspondência com o caminho de URL quando `RouteAsync` é chamado.</span><span class="sxs-lookup"><span data-stu-id="c50e1-169">`Route` uses the *route template* syntax to define patterns that will match against the URL path when `RouteAsync` is called.</span></span> <span data-ttu-id="c50e1-170">`Route`usará o mesmo modelo de rota para gerar uma URL quando `GetVirtualPath` é chamado.</span><span class="sxs-lookup"><span data-stu-id="c50e1-170">`Route` will use the same route template to generate a URL when `GetVirtualPath` is called.</span></span>

<span data-ttu-id="c50e1-171">A maioria dos aplicativos criará rotas chamando `MapRoute` ou um dos métodos de extensão semelhante definidos em `IRouteBuilder`.</span><span class="sxs-lookup"><span data-stu-id="c50e1-171">Most applications will create routes by calling `MapRoute` or one of the similar extension methods defined on `IRouteBuilder`.</span></span> <span data-ttu-id="c50e1-172">Todos esses métodos criará uma instância de `Route` e adicioná-la à coleção de rotas.</span><span class="sxs-lookup"><span data-stu-id="c50e1-172">All of these methods will create an instance of `Route` and add it to the route collection.</span></span>

<span data-ttu-id="c50e1-173">Observação: `MapRoute` não tem um parâmetro de manipulador de rota - ela apenas adiciona as rotas que serão tratadas pelo `DefaultHandler`.</span><span class="sxs-lookup"><span data-stu-id="c50e1-173">Note: `MapRoute` doesn't take a route handler parameter - it only adds routes that will be handled by the `DefaultHandler`.</span></span> <span data-ttu-id="c50e1-174">Como o manipulador padrão é um `IRouter`, ele pode decidir por não manipular a solicitação.</span><span class="sxs-lookup"><span data-stu-id="c50e1-174">Since the default handler is an `IRouter`, it may decide not to handle the request.</span></span> <span data-ttu-id="c50e1-175">Por exemplo, ASP.NET MVC normalmente é configurado como um manipulador padrão que só trata as solicitações que correspondem um controlador disponível e a ação.</span><span class="sxs-lookup"><span data-stu-id="c50e1-175">For example, ASP.NET MVC is typically configured as a default handler that only handles requests that match an available controller and action.</span></span> <span data-ttu-id="c50e1-176">Para saber mais sobre o roteamento para MVC, consulte [roteamento para ações do controlador](../mvc/controllers/routing.md).</span><span class="sxs-lookup"><span data-stu-id="c50e1-176">To learn more about routing to MVC, see [Routing to Controller Actions](../mvc/controllers/routing.md).</span></span>

<span data-ttu-id="c50e1-177">Este é um exemplo de um `MapRoute` chamada usada por uma definição de rota ASP.NET MVC típica:</span><span class="sxs-lookup"><span data-stu-id="c50e1-177">This is an example of a `MapRoute` call used by a typical ASP.NET MVC route definition:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="c50e1-178">Este modelo corresponderá a um caminho de URL como `/Products/Details/17` e extrair os valores de rota `{ controller = Products, action = Details, id = 17 }`.</span><span class="sxs-lookup"><span data-stu-id="c50e1-178">This template will match a URL path like `/Products/Details/17` and extract the route values `{ controller = Products, action = Details, id = 17 }`.</span></span> <span data-ttu-id="c50e1-179">Os valores de rota são determinados pelo dividir o caminho da URL em segmentos e correspondência de cada segmento com o *parâmetro de rota* nome do modelo de rota.</span><span class="sxs-lookup"><span data-stu-id="c50e1-179">The route values are determined by splitting the URL path into segments, and matching each segment with the *route parameter* name in the route template.</span></span> <span data-ttu-id="c50e1-180">Parâmetros de rota são nomeados.</span><span class="sxs-lookup"><span data-stu-id="c50e1-180">Route parameters are named.</span></span> <span data-ttu-id="c50e1-181">Eles são definidos, colocando o nome do parâmetro chaves `{ }`.</span><span class="sxs-lookup"><span data-stu-id="c50e1-181">They are defined by enclosing the parameter name in braces `{ }`.</span></span>

<span data-ttu-id="c50e1-182">O modelo acima também pode corresponder ao caminho da URL `/` e produzir valores `{ controller = Home, action = Index }`.</span><span class="sxs-lookup"><span data-stu-id="c50e1-182">The template above could also match the URL path `/` and would produce the values `{ controller = Home, action = Index }`.</span></span> <span data-ttu-id="c50e1-183">Isso acontece porque o `{controller}` e `{action}` parâmetros de rota têm valores padrão e o `id` parâmetro de rota é opcional.</span><span class="sxs-lookup"><span data-stu-id="c50e1-183">This happens because the `{controller}` and `{action}` route parameters have default values, and the `id` route parameter is optional.</span></span> <span data-ttu-id="c50e1-184">Igual a `=` sinal seguido por um valor após o nome do parâmetro de rota define um valor padrão para o parâmetro.</span><span class="sxs-lookup"><span data-stu-id="c50e1-184">An equals `=` sign followed by a value after the route parameter name defines a default value for the parameter.</span></span> <span data-ttu-id="c50e1-185">Um ponto de interrogação `?` depois que o nome do parâmetro de rota define o parâmetro como opcional.</span><span class="sxs-lookup"><span data-stu-id="c50e1-185">A question mark `?` after the route parameter name defines the parameter as optional.</span></span> <span data-ttu-id="c50e1-186">Parâmetros com um valor padrão de rota *sempre* produzir um valor de rota quando a rota corresponde - parâmetros opcionais não produzir um valor de rota se não houver nenhum segmento de caminho de URL correspondente.</span><span class="sxs-lookup"><span data-stu-id="c50e1-186">Route parameters with a default value *always* produce a route value when the route matches - optional parameters will not produce a route value if there was no corresponding URL path segment.</span></span>

<span data-ttu-id="c50e1-187">Consulte [referência de modelo de rota](#route-template-reference) para obter uma descrição completa dos recursos de modelo de rota e sintaxe.</span><span class="sxs-lookup"><span data-stu-id="c50e1-187">See [route-template-reference](#route-template-reference) for a thorough description of route template features and syntax.</span></span>

<span data-ttu-id="c50e1-188">Este exemplo inclui uma *restrição de rota*:</span><span class="sxs-lookup"><span data-stu-id="c50e1-188">This example includes a *route constraint*:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id:int}");
```

<span data-ttu-id="c50e1-189">Este modelo corresponderá a um caminho de URL como `/Products/Details/17`, mas não `/Products/Details/Apples`.</span><span class="sxs-lookup"><span data-stu-id="c50e1-189">This template will match a URL path like `/Products/Details/17`, but not `/Products/Details/Apples`.</span></span> <span data-ttu-id="c50e1-190">A definição do parâmetro de rota `{id:int}` define uma *restrição de rota* para o `id` parâmetro de rota.</span><span class="sxs-lookup"><span data-stu-id="c50e1-190">The route parameter definition `{id:int}` defines a *route constraint* for the `id` route parameter.</span></span> <span data-ttu-id="c50e1-191">Implementam restrições da rota `IRouteConstraint` e inspecionar os valores de rota para verificá-los.</span><span class="sxs-lookup"><span data-stu-id="c50e1-191">Route constraints implement `IRouteConstraint` and inspect route values to verify them.</span></span> <span data-ttu-id="c50e1-192">Neste exemplo, o valor de rota `id` deve ser conversível em inteiro.</span><span class="sxs-lookup"><span data-stu-id="c50e1-192">In this example the route value `id` must be convertible to an integer.</span></span> <span data-ttu-id="c50e1-193">Consulte [referência de restrição de rota](#route-constraint-reference) para obter uma explicação mais detalhada de restrições de rota que são fornecidos pela estrutura.</span><span class="sxs-lookup"><span data-stu-id="c50e1-193">See [route-constraint-reference](#route-constraint-reference) for a more detailed explanation of route constraints that are provided by the framework.</span></span>

<span data-ttu-id="c50e1-194">Sobrecargas adicionais de `MapRoute` aceitam valores de `constraints`, `dataTokens`, e `defaults`.</span><span class="sxs-lookup"><span data-stu-id="c50e1-194">Additional overloads of `MapRoute` accept values for `constraints`, `dataTokens`, and `defaults`.</span></span> <span data-ttu-id="c50e1-195">Esses parâmetros adicionais de `MapRoute` são definidos como tipo `object`.</span><span class="sxs-lookup"><span data-stu-id="c50e1-195">These additional parameters of `MapRoute` are defined as type `object`.</span></span> <span data-ttu-id="c50e1-196">O uso típico desses parâmetros é passar um objeto tipo anônimos, onde os nomes de propriedade da correspondência de tipo anônimo nomes de parâmetro de rota.</span><span class="sxs-lookup"><span data-stu-id="c50e1-196">The typical usage of these parameters is to pass an anonymously typed object, where the property names of the anonymous type match route parameter names.</span></span>

<span data-ttu-id="c50e1-197">Os exemplos a seguir criam rotas equivalentes:</span><span class="sxs-lookup"><span data-stu-id="c50e1-197">The following two examples create equivalent routes:</span></span>

```csharp
routes.MapRoute(
    name: "default_route",
    template: "{controller}/{action}/{id?}",
    defaults: new { controller = "Home", action = "Index" });

routes.MapRoute(
    name: "default_route",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="c50e1-198">Dica: A sintaxe embutida para definir padrões e restrições pode ser mais conveniente para rotas simples.</span><span class="sxs-lookup"><span data-stu-id="c50e1-198">Tip: The inline syntax for defining constraints and defaults can be more convenient for simple routes.</span></span> <span data-ttu-id="c50e1-199">No entanto, existem recursos, como tokens de dados que não são suportados pela sintaxe embutida.</span><span class="sxs-lookup"><span data-stu-id="c50e1-199">However, there are features such as data tokens which are not supported by inline syntax.</span></span>

<span data-ttu-id="c50e1-200">Este exemplo demonstra alguns dos recursos mais:</span><span class="sxs-lookup"><span data-stu-id="c50e1-200">This example demonstrates a few more features:</span></span>

```csharp
routes.MapRoute(
  name: "blog",
  template: "Blog/{*article}",
  defaults: new { controller = "Blog", action = "ReadArticle" });
```

<span data-ttu-id="c50e1-201">Este modelo corresponderá a um caminho de URL como `/Blog/All-About-Routing/Introduction` e extrairá os valores `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span><span class="sxs-lookup"><span data-stu-id="c50e1-201">This template will match a URL path like `/Blog/All-About-Routing/Introduction` and will extract the values `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span></span> <span data-ttu-id="c50e1-202">Valores de rota padrão para `controller` e `action` são produzidas pela rota, mesmo que não haja nenhum parâmetro de rota correspondente no modelo.</span><span class="sxs-lookup"><span data-stu-id="c50e1-202">The default route values for `controller` and `action` are produced by the route even though there are no corresponding route parameters in the template.</span></span> <span data-ttu-id="c50e1-203">Valores padrão podem ser especificados no modelo de rota.</span><span class="sxs-lookup"><span data-stu-id="c50e1-203">Default values can be specified in the route template.</span></span> <span data-ttu-id="c50e1-204">O `article` parâmetro de rota é definido como um *pega-tudo* pela aparência de um asterisco `*` antes do nome de parâmetro de rota.</span><span class="sxs-lookup"><span data-stu-id="c50e1-204">The `article` route parameter is defined as a *catch-all* by the appearance of an asterisk `*` before the route parameter name.</span></span> <span data-ttu-id="c50e1-205">Parâmetros de rota pega-tudo capturar o restante do caminho da URL e também podem corresponder a cadeia de caracteres vazia.</span><span class="sxs-lookup"><span data-stu-id="c50e1-205">Catch-all route parameters capture the remainder of the URL path, and can also match the empty string.</span></span>

<span data-ttu-id="c50e1-206">Este exemplo adiciona tokens de dados e restrições da rota:</span><span class="sxs-lookup"><span data-stu-id="c50e1-206">This example adds route constraints and data tokens:</span></span>

```csharp
routes.MapRoute(
    name: "us_english_products",
    template: "en-US/Products/{id}",
    defaults: new { controller = "Products", action = "Details" },
    constraints: new { id = new IntRouteConstraint() },
    dataTokens: new { locale = "en-US" });
```

<span data-ttu-id="c50e1-207">Este modelo corresponderá a um caminho de URL como `/Products/5` e extrairá os valores `{ controller = Products, action = Details, id = 5 }` e os tokens de dados `{ locale = en-US }`.</span><span class="sxs-lookup"><span data-stu-id="c50e1-207">This template will match a URL path like `/Products/5` and will extract the values `{ controller = Products, action = Details, id = 5 }` and the data tokens `{ locale = en-US }`.</span></span>

![Tokens do Windows locais](routing/_static/tokens.png)

<a name="id1"></a>

### <a name="url-generation"></a><span data-ttu-id="c50e1-209">Geração de URL</span><span class="sxs-lookup"><span data-stu-id="c50e1-209">URL generation</span></span>

<span data-ttu-id="c50e1-210">O `Route` classe também pode executar a geração de URL, a combinação de um conjunto de valores de rota com seu modelo de rota.</span><span class="sxs-lookup"><span data-stu-id="c50e1-210">The `Route` class can also perform URL generation by combining a set of route values with its route template.</span></span> <span data-ttu-id="c50e1-211">Logicamente, este é o processo inverso de correspondência, o caminho da URL.</span><span class="sxs-lookup"><span data-stu-id="c50e1-211">This is logically the reverse process of matching the URL path.</span></span>

<span data-ttu-id="c50e1-212">Dica: Para entender melhor a geração de URL, imagine que você deseja gerar e, em seguida, considere como um modelo de rota corresponderia a essa URL de URL.</span><span class="sxs-lookup"><span data-stu-id="c50e1-212">Tip: To better understand URL generation, imagine what URL you want to generate and then think about how a route template would match that URL.</span></span> <span data-ttu-id="c50e1-213">Quais valores deve ser produzido?</span><span class="sxs-lookup"><span data-stu-id="c50e1-213">What values would be produced?</span></span> <span data-ttu-id="c50e1-214">Este é o equivalente de como funciona a geração de URL a `Route` classe.</span><span class="sxs-lookup"><span data-stu-id="c50e1-214">This is the rough equivalent of how URL generation works in the `Route` class.</span></span>

<span data-ttu-id="c50e1-215">Este exemplo usa uma rota de estilo do ASP.NET MVC básica:</span><span class="sxs-lookup"><span data-stu-id="c50e1-215">This example uses a basic ASP.NET MVC style route:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="c50e1-216">Com os valores de rota `{ controller = Products, action = List }`, essa rota irá gerar a URL `/Products/List`.</span><span class="sxs-lookup"><span data-stu-id="c50e1-216">With the route values `{ controller = Products, action = List }`, this route will generate the URL `/Products/List`.</span></span> <span data-ttu-id="c50e1-217">Os valores de rota são substituídos para os parâmetros de rota correspondente formar o caminho da URL.</span><span class="sxs-lookup"><span data-stu-id="c50e1-217">The route values are substituted for the corresponding route parameters to form the URL path.</span></span> <span data-ttu-id="c50e1-218">Como `id` é um parâmetro de rota, não há problema se ele não tem um valor.</span><span class="sxs-lookup"><span data-stu-id="c50e1-218">Since `id` is an optional route parameter, it's no problem that it doesn't have a value.</span></span>

<span data-ttu-id="c50e1-219">Com os valores de rota `{ controller = Home, action = Index }`, essa rota irá gerar a URL `/`.</span><span class="sxs-lookup"><span data-stu-id="c50e1-219">With the route values `{ controller = Home, action = Index }`, this route will generate the URL `/`.</span></span> <span data-ttu-id="c50e1-220">Os valores de rota que foram fornecidos correspondem os valores padrão para que os segmentos correspondentes a esses valores podem ser omitidos com segurança.</span><span class="sxs-lookup"><span data-stu-id="c50e1-220">The route values that were provided match the default values so the segments corresponding to those values can be safely omitted.</span></span> <span data-ttu-id="c50e1-221">Observe que as duas URLs geradas seriam ida e volta com essa definição de rota e produzem os mesmos valores de rota que foram usados para gerar a URL.</span><span class="sxs-lookup"><span data-stu-id="c50e1-221">Note that both URLs generated would round-trip with this route definition and produce the same route values that were used to generate the URL.</span></span>

<span data-ttu-id="c50e1-222">Dica: Um aplicativo usando o ASP.NET MVC deve usar `UrlHelper` para gerar URLs, em vez de chamar diretamente o roteamento.</span><span class="sxs-lookup"><span data-stu-id="c50e1-222">Tip: An app using ASP.NET MVC should use `UrlHelper` to generate URLs instead of calling into routing directly.</span></span>

<span data-ttu-id="c50e1-223">Para obter mais detalhes sobre o processo de geração de URL, consulte [referência de geração de url](#url-generation-reference).</span><span class="sxs-lookup"><span data-stu-id="c50e1-223">For more details about the URL generation process, see [url-generation-reference](#url-generation-reference).</span></span>

## <a name="using-routing-middleware"></a><span data-ttu-id="c50e1-224">Usando o roteamento de Middleware</span><span class="sxs-lookup"><span data-stu-id="c50e1-224">Using Routing Middleware</span></span>

<span data-ttu-id="c50e1-225">Adicione o pacote do NuGet "Microsoft.AspNetCore.Routing".</span><span class="sxs-lookup"><span data-stu-id="c50e1-225">Add the NuGet package "Microsoft.AspNetCore.Routing".</span></span>

<span data-ttu-id="c50e1-226">Adicionar roteamento para o contêiner de serviço no *Startup.cs*:</span><span class="sxs-lookup"><span data-stu-id="c50e1-226">Add routing to the service container in *Startup.cs*:</span></span>

[!code-csharp[Main](../fundamentals/routing/sample/RoutingSample/Startup.cs?highlight=3&start=11&end=14)]

<span data-ttu-id="c50e1-227">Rotas devem ser configuradas no `Configure` método o `Startup` classe.</span><span class="sxs-lookup"><span data-stu-id="c50e1-227">Routes must be configured in the `Configure` method in the `Startup` class.</span></span> <span data-ttu-id="c50e1-228">O exemplo a seguir usa essas APIs:</span><span class="sxs-lookup"><span data-stu-id="c50e1-228">The sample below uses these APIs:</span></span>

* `RouteBuilder`
* `Build`
* <span data-ttu-id="c50e1-229">`MapGet`Faz a correspondência apenas das solicitações HTTP GET</span><span class="sxs-lookup"><span data-stu-id="c50e1-229">`MapGet`  Matches only HTTP GET requests</span></span>
* `UseRouter`

```csharp
public void Configure(IApplicationBuilder app, ILoggerFactory loggerFactory)
{
    var trackPackageRouteHandler = new RouteHandler(context =>
    {
        var routeValues = context.GetRouteData().Values;
        return context.Response.WriteAsync(
            $"Hello! Route values: {string.Join(", ", routeValues)}");
    });

    var routeBuilder = new RouteBuilder(app, trackPackageRouteHandler);

    routeBuilder.MapRoute(
        "Track Package Route",
        "package/{operation:regex(^(track|create|detonate)$)}/{id:int}");

    routeBuilder.MapGet("hello/{name}", context =>
    {
        var name = context.GetRouteValue("name");
        // This is the route handler when HTTP GET "hello/<anything>"  matches
        // To match HTTP GET "hello/<anything>/<anything>,
        // use routeBuilder.MapGet("hello/{*name}"
        return context.Response.WriteAsync($"Hi, {name}!");
    });

    var routes = routeBuilder.Build();
    app.UseRouter(routes);
}
```

<span data-ttu-id="c50e1-230">A tabela a seguir mostra as respostas com os URIs determinado.</span><span class="sxs-lookup"><span data-stu-id="c50e1-230">The table below shows the responses with the given URIs.</span></span>

| <span data-ttu-id="c50e1-231">URI</span><span class="sxs-lookup"><span data-stu-id="c50e1-231">URI</span></span> | <span data-ttu-id="c50e1-232">Resposta</span><span class="sxs-lookup"><span data-stu-id="c50e1-232">Response</span></span>  |
| ------- | -------- |
| <span data-ttu-id="c50e1-233">/Package/Create/3</span><span class="sxs-lookup"><span data-stu-id="c50e1-233">/package/create/3</span></span>  | <span data-ttu-id="c50e1-234">Olá!</span><span class="sxs-lookup"><span data-stu-id="c50e1-234">Hello!</span></span> <span data-ttu-id="c50e1-235">Valores de rota: [operação, criar], [id-3]</span><span class="sxs-lookup"><span data-stu-id="c50e1-235">Route values: [operation, create], [id, 3]</span></span> |
| <span data-ttu-id="c50e1-236">pacote/faixa /-3</span><span class="sxs-lookup"><span data-stu-id="c50e1-236">/package/track/-3</span></span>  | <span data-ttu-id="c50e1-237">Olá!</span><span class="sxs-lookup"><span data-stu-id="c50e1-237">Hello!</span></span> <span data-ttu-id="c50e1-238">Valores de rota: [operação, acompanhar], [id -3]</span><span class="sxs-lookup"><span data-stu-id="c50e1-238">Route values: [operation, track], [id, -3]</span></span> |
| <span data-ttu-id="c50e1-239">/ pacote/acompanhar/3 /</span><span class="sxs-lookup"><span data-stu-id="c50e1-239">/package/track/-3/</span></span> | <span data-ttu-id="c50e1-240">Olá!</span><span class="sxs-lookup"><span data-stu-id="c50e1-240">Hello!</span></span> <span data-ttu-id="c50e1-241">Valores de rota: [operação, acompanhar], [id -3]</span><span class="sxs-lookup"><span data-stu-id="c50e1-241">Route values: [operation, track], [id, -3]</span></span>  |
| <span data-ttu-id="c50e1-242">/Package./faixa /</span><span class="sxs-lookup"><span data-stu-id="c50e1-242">/package/track/</span></span> | <span data-ttu-id="c50e1-243">\<Passar, nenhuma correspondência ></span><span class="sxs-lookup"><span data-stu-id="c50e1-243">\<Fall through, no match></span></span> |
| <span data-ttu-id="c50e1-244">OBTER /hello/Joe</span><span class="sxs-lookup"><span data-stu-id="c50e1-244">GET /hello/Joe</span></span> | <span data-ttu-id="c50e1-245">Olá, Joe!</span><span class="sxs-lookup"><span data-stu-id="c50e1-245">Hi, Joe!</span></span> |
| <span data-ttu-id="c50e1-246">Lançar /hello/Joe</span><span class="sxs-lookup"><span data-stu-id="c50e1-246">POST /hello/Joe</span></span> | <span data-ttu-id="c50e1-247">\<Passar, corresponde a HTTP GET apenas ></span><span class="sxs-lookup"><span data-stu-id="c50e1-247">\<Fall through, matches HTTP GET only></span></span> |
| <span data-ttu-id="c50e1-248">OBTER /hello/Joe/Smith</span><span class="sxs-lookup"><span data-stu-id="c50e1-248">GET /hello/Joe/Smith</span></span> | <span data-ttu-id="c50e1-249">\<Passar, nenhuma correspondência ></span><span class="sxs-lookup"><span data-stu-id="c50e1-249">\<Fall through, no match></span></span> |

<span data-ttu-id="c50e1-250">Se você estiver configurando uma única rota, chame `app.UseRouter` passando um `IRouter` instância.</span><span class="sxs-lookup"><span data-stu-id="c50e1-250">If you are configuring a single route, call `app.UseRouter` passing in an `IRouter` instance.</span></span> <span data-ttu-id="c50e1-251">Você não precisará chamar `RouteBuilder`.</span><span class="sxs-lookup"><span data-stu-id="c50e1-251">You won't need to call `RouteBuilder`.</span></span>

<span data-ttu-id="c50e1-252">O framework fornece um conjunto de métodos de extensão para criar rotas, como:</span><span class="sxs-lookup"><span data-stu-id="c50e1-252">The framework provides a set of extension methods for creating routes such as:</span></span>

* `MapRoute`
* `MapGet`
* `MapPost`
* `MapPut`
* `MapDelete`
* `MapVerb`

<span data-ttu-id="c50e1-253">Alguns desses métodos, como `MapGet` exigem um `RequestDelegate` a ser fornecido.</span><span class="sxs-lookup"><span data-stu-id="c50e1-253">Some of these methods such as `MapGet` require a `RequestDelegate` to be provided.</span></span> <span data-ttu-id="c50e1-254">O `RequestDelegate` será usado como o *manipulador de rota* quando a rota corresponde.</span><span class="sxs-lookup"><span data-stu-id="c50e1-254">The `RequestDelegate` will be used as the *route handler* when the route matches.</span></span> <span data-ttu-id="c50e1-255">Outros métodos nesta família permitem configurar um pipeline de middleware que será usado como o manipulador de rota.</span><span class="sxs-lookup"><span data-stu-id="c50e1-255">Other methods in this family allow configuring a middleware pipeline which will be used as the route handler.</span></span> <span data-ttu-id="c50e1-256">Se o *mapa* método não aceita como um manipulador, `MapRoute`, em seguida, ele usará o `DefaultHandler`.</span><span class="sxs-lookup"><span data-stu-id="c50e1-256">If the *Map* method doesn't accept a handler, such as `MapRoute`, then it will use the `DefaultHandler`.</span></span>

<span data-ttu-id="c50e1-257">O `Map[Verb]` métodos usam restrições para limitar a rota para o verbo HTTP no nome do método.</span><span class="sxs-lookup"><span data-stu-id="c50e1-257">The `Map[Verb]` methods use constraints to limit the route to the HTTP Verb in the method name.</span></span> <span data-ttu-id="c50e1-258">Por exemplo, consulte [MapGet](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/RequestDelegateRouteBuilderExtensions.cs#L85-L88) e [MapVerb](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/RequestDelegateRouteBuilderExtensions.cs#L156-L180).</span><span class="sxs-lookup"><span data-stu-id="c50e1-258">For example, see [MapGet](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/RequestDelegateRouteBuilderExtensions.cs#L85-L88) and [MapVerb](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/RequestDelegateRouteBuilderExtensions.cs#L156-L180).</span></span>

## <a name="route-template-reference"></a><span data-ttu-id="c50e1-259">Referência de modelo de rota</span><span class="sxs-lookup"><span data-stu-id="c50e1-259">Route Template Reference</span></span>

<span data-ttu-id="c50e1-260">Tokens entre chaves (`{ }`) definir *parâmetros de rota* que será associado se a rota for atendida.</span><span class="sxs-lookup"><span data-stu-id="c50e1-260">Tokens within curly braces (`{ }`) define *route parameters* which will be bound if the route is matched.</span></span> <span data-ttu-id="c50e1-261">Você pode definir mais de um parâmetro de rota em um segmento de rota, mas eles devem ser separados por um valor literal.</span><span class="sxs-lookup"><span data-stu-id="c50e1-261">You can define more than one route parameter in a route segment, but they must be separated by a literal value.</span></span> <span data-ttu-id="c50e1-262">Por exemplo `{controller=Home}{action=Index}` não seria uma rota válida, porque não há nenhum valor literal entre `{controller}` e `{action}`.</span><span class="sxs-lookup"><span data-stu-id="c50e1-262">For example `{controller=Home}{action=Index}` would not be a valid route, since there is no literal value between `{controller}` and `{action}`.</span></span> <span data-ttu-id="c50e1-263">Esses parâmetros de rota devem ter um nome, e podem ter atributos adicionais especificado.</span><span class="sxs-lookup"><span data-stu-id="c50e1-263">These route parameters must have a name, and may have additional attributes specified.</span></span>

<span data-ttu-id="c50e1-264">Texto literal diferente de parâmetros de rota (por exemplo, `{id}`) e o separador de caminho `/` devem coincidir com o texto na URL.</span><span class="sxs-lookup"><span data-stu-id="c50e1-264">Literal text other than route parameters (for example, `{id}`) and the path separator `/` must match the text in the URL.</span></span> <span data-ttu-id="c50e1-265">Correspondência de texto é com base na representação decodificada do caminho URLs e diferencia maiusculas de minúsculas.</span><span class="sxs-lookup"><span data-stu-id="c50e1-265">Text matching is case-insensitive and based on the decoded representation of the URLs path.</span></span> <span data-ttu-id="c50e1-266">Para corresponder ao delimitador de parâmetro de rota literal `{` ou `}`, escape-o pelo caractere de repetição (`{{` ou `}}`).</span><span class="sxs-lookup"><span data-stu-id="c50e1-266">To match the literal route parameter delimiter `{` or  `}`, escape it by repeating the character (`{{` or `}}`).</span></span>

<span data-ttu-id="c50e1-267">Padrões de URL que tentam capturar um nome de arquivo com uma extensão de arquivo opcional têm considerações adicionais.</span><span class="sxs-lookup"><span data-stu-id="c50e1-267">URL patterns that attempt to capture a filename with an optional file extension have additional considerations.</span></span> <span data-ttu-id="c50e1-268">Por exemplo, usando o modelo `files/{filename}.{ext?}` - quando ambos `filename` e `ext` existir, os dois valores serão preenchidos.</span><span class="sxs-lookup"><span data-stu-id="c50e1-268">For example, using the template `files/{filename}.{ext?}` - When both `filename` and `ext` exist, both values will be populated.</span></span> <span data-ttu-id="c50e1-269">Se apenas `filename` existe na URL, as correspondências de rota, pois o ponto à direita `.` é opcional.</span><span class="sxs-lookup"><span data-stu-id="c50e1-269">If only `filename` exists in the URL, the route matches because the trailing period `.` is  optional.</span></span> <span data-ttu-id="c50e1-270">As seguintes URLs corresponderia essa rota:</span><span class="sxs-lookup"><span data-stu-id="c50e1-270">The following URLs would match this route:</span></span>

* `/files/myFile.txt`
* `/files/myFile.`
* `/files/myFile`

<span data-ttu-id="c50e1-271">Você pode usar o `*` caractere como um prefixo para um parâmetro de rota para ligar para o restante do URI - isso é chamado de um *pega-tudo* parâmetro.</span><span class="sxs-lookup"><span data-stu-id="c50e1-271">You can use the `*` character as a prefix to a route parameter to bind to the rest of the URI - this is called a *catch-all* parameter.</span></span> <span data-ttu-id="c50e1-272">Por exemplo, `blog/{*slug}` corresponderia qualquer URI que foi iniciado com `/blog` e tinha qualquer valor (que seriam atribuído ao `slug` rotear valor).</span><span class="sxs-lookup"><span data-stu-id="c50e1-272">For example, `blog/{*slug}` would match any URI that started with `/blog` and had any value following it (which would be assigned to the `slug` route value).</span></span> <span data-ttu-id="c50e1-273">Captura todos os parâmetros também podem corresponder a cadeia de caracteres vazia.</span><span class="sxs-lookup"><span data-stu-id="c50e1-273">Catch-all parameters can also match the empty string.</span></span>

<span data-ttu-id="c50e1-274">Parâmetros de rota podem ter *valores padrão*, designado, especificando o padrão após o nome do parâmetro, separado por um `=`.</span><span class="sxs-lookup"><span data-stu-id="c50e1-274">Route parameters may have *default values*, designated by specifying the default after the parameter name, separated by an `=`.</span></span> <span data-ttu-id="c50e1-275">Por exemplo, `{controller=Home}` definiria `Home` como o valor padrão para `controller`.</span><span class="sxs-lookup"><span data-stu-id="c50e1-275">For example, `{controller=Home}` would define `Home` as the default value for `controller`.</span></span> <span data-ttu-id="c50e1-276">O valor padrão é usado se nenhum valor estiver presente na URL para o parâmetro.</span><span class="sxs-lookup"><span data-stu-id="c50e1-276">The default value is used if no value is present in the URL for the parameter.</span></span> <span data-ttu-id="c50e1-277">Além dos valores padrão, os parâmetros de rota podem ser opcionais (especificado por meio do acréscimo um `?` ao final do nome do parâmetro, como em `id?`).</span><span class="sxs-lookup"><span data-stu-id="c50e1-277">In addition to default values, route parameters may be optional (specified by appending a `?` to the end of the parameter name, as in `id?`).</span></span> <span data-ttu-id="c50e1-278">A diferença entre opcional e "possui padrão" é que um parâmetro de rota com um valor padrão sempre produz um valor; um parâmetro opcional tem um valor somente quando é fornecida.</span><span class="sxs-lookup"><span data-stu-id="c50e1-278">The difference between optional and "has default" is that a route parameter with a default value always produces a value; an optional parameter has a value only when one is provided.</span></span>

<span data-ttu-id="c50e1-279">Parâmetros de rota também podem ter restrições, que devem corresponder ao valor de rota associado da URL.</span><span class="sxs-lookup"><span data-stu-id="c50e1-279">Route parameters may also have constraints, which must match the route value bound from the URL.</span></span> <span data-ttu-id="c50e1-280">Adição de dois-pontos `:` e depois que o nome do parâmetro de rota especifica o nome da restrição um *restrição embutida* em um parâmetro de rota.</span><span class="sxs-lookup"><span data-stu-id="c50e1-280">Adding a colon `:` and constraint name after the route parameter name specifies an *inline constraint* on a route parameter.</span></span> <span data-ttu-id="c50e1-281">Se a restrição requer argumentos aqueles fornecidos entre parênteses `( )` após o nome da restrição.</span><span class="sxs-lookup"><span data-stu-id="c50e1-281">If the constraint requires arguments those are provided enclosed in parentheses `( )` after the constraint name.</span></span> <span data-ttu-id="c50e1-282">Várias restrições embutido podem ser especificadas adicionando outra vírgula `:` e o nome da restrição.</span><span class="sxs-lookup"><span data-stu-id="c50e1-282">Multiple inline constraints can be specified by appending another colon `:` and constraint name.</span></span> <span data-ttu-id="c50e1-283">O nome da restrição é passado para o `IInlineConstraintResolver` service para criar uma instância de `IRouteConstraint` para usar no processamento de URL.</span><span class="sxs-lookup"><span data-stu-id="c50e1-283">The constraint name is passed to the `IInlineConstraintResolver` service to create an instance of `IRouteConstraint` to use in URL processing.</span></span> <span data-ttu-id="c50e1-284">Por exemplo, o modelo de rota `blog/{article:minlength(10)}` Especifica o `minlength` restrição com o argumento `10`.</span><span class="sxs-lookup"><span data-stu-id="c50e1-284">For example, the route template `blog/{article:minlength(10)}` specifies the `minlength` constraint with the argument `10`.</span></span> <span data-ttu-id="c50e1-285">Para restrições da rota mais descrição e uma lista das restrições fornecidos pelo framework, consulte [referência de restrição de rota](#route-constraint-reference).</span><span class="sxs-lookup"><span data-stu-id="c50e1-285">For more description route constraints, and a listing of the constraints provided by the framework, see [route-constraint-reference](#route-constraint-reference).</span></span>

<span data-ttu-id="c50e1-286">A tabela a seguir demonstra alguns modelos de rota e seu comportamento.</span><span class="sxs-lookup"><span data-stu-id="c50e1-286">The following table demonstrates some route templates and their behavior.</span></span>

| <span data-ttu-id="c50e1-287">Modelo de rota</span><span class="sxs-lookup"><span data-stu-id="c50e1-287">Route Template</span></span> | <span data-ttu-id="c50e1-288">Exemplo de correspondência de URL</span><span class="sxs-lookup"><span data-stu-id="c50e1-288">Example Matching URL</span></span> | <span data-ttu-id="c50e1-289">Observações</span><span class="sxs-lookup"><span data-stu-id="c50e1-289">Notes</span></span> |
| -------- | -------- | ------- |
| <span data-ttu-id="c50e1-290">hello</span><span class="sxs-lookup"><span data-stu-id="c50e1-290">hello</span></span>  | <span data-ttu-id="c50e1-291">/Hello</span><span class="sxs-lookup"><span data-stu-id="c50e1-291">/hello</span></span>  | <span data-ttu-id="c50e1-292">Somente corresponda ao caminho único`/hello`</span><span class="sxs-lookup"><span data-stu-id="c50e1-292">Only matches the single path `/hello`</span></span> |
| <span data-ttu-id="c50e1-293">{Página = Home}</span><span class="sxs-lookup"><span data-stu-id="c50e1-293">{Page=Home}</span></span> | / | <span data-ttu-id="c50e1-294">Faz a correspondência e define `Page` para`Home`</span><span class="sxs-lookup"><span data-stu-id="c50e1-294">Matches and sets `Page` to `Home`</span></span> |
| <span data-ttu-id="c50e1-295">{Página = Home}</span><span class="sxs-lookup"><span data-stu-id="c50e1-295">{Page=Home}</span></span>  | <span data-ttu-id="c50e1-296">/ Contato</span><span class="sxs-lookup"><span data-stu-id="c50e1-296">/Contact</span></span>  | <span data-ttu-id="c50e1-297">Faz a correspondência e define `Page` para`Contact`</span><span class="sxs-lookup"><span data-stu-id="c50e1-297">Matches and sets `Page` to `Contact`</span></span> |
| <span data-ttu-id="c50e1-298">{controller} / {action} / {id}?</span><span class="sxs-lookup"><span data-stu-id="c50e1-298">{controller}/{action}/{id?}</span></span> | <span data-ttu-id="c50e1-299">/ / Lista de produtos</span><span class="sxs-lookup"><span data-stu-id="c50e1-299">/Products/List</span></span> | <span data-ttu-id="c50e1-300">Mapeia para `Products` controlador e `List` ação</span><span class="sxs-lookup"><span data-stu-id="c50e1-300">Maps to `Products` controller and `List`  action</span></span> |
| <span data-ttu-id="c50e1-301">{controller} / {action} / {id}?</span><span class="sxs-lookup"><span data-stu-id="c50e1-301">{controller}/{action}/{id?}</span></span> | <span data-ttu-id="c50e1-302">Produtos/123/detalhes</span><span class="sxs-lookup"><span data-stu-id="c50e1-302">/Products/Details/123</span></span>  |  <span data-ttu-id="c50e1-303">Mapeia para `Products` controlador e `Details` ação.</span><span class="sxs-lookup"><span data-stu-id="c50e1-303">Maps to `Products` controller and  `Details` action.</span></span>  <span data-ttu-id="c50e1-304">`id`definido como 123</span><span class="sxs-lookup"><span data-stu-id="c50e1-304">`id` set to 123</span></span> |
| <span data-ttu-id="c50e1-305">{controlador = Home} / {ação = índice} / {id}?</span><span class="sxs-lookup"><span data-stu-id="c50e1-305">{controller=Home}/{action=Index}/{id?}</span></span> | /  |  <span data-ttu-id="c50e1-306">Mapeia para `Home` controlador e `Index` método; `id` será ignorado.</span><span class="sxs-lookup"><span data-stu-id="c50e1-306">Maps to `Home` controller and `Index`  method; `id` is ignored.</span></span> |

<span data-ttu-id="c50e1-307">Usando um modelo geralmente é a abordagem mais simples para roteamento.</span><span class="sxs-lookup"><span data-stu-id="c50e1-307">Using a template is generally the simplest approach to routing.</span></span> <span data-ttu-id="c50e1-308">Restrições e padrões também podem ser especificados fora o modelo de rota.</span><span class="sxs-lookup"><span data-stu-id="c50e1-308">Constraints and defaults can also be specified outside the route template.</span></span>

<span data-ttu-id="c50e1-309">Dica: Habilitar [log](xref:fundamentals/logging/index) para ver como o integradas em implementações de roteamentos, como `Route`, comparar solicitações.</span><span class="sxs-lookup"><span data-stu-id="c50e1-309">Tip: Enable [Logging](xref:fundamentals/logging/index) to see how the built in routing implementations, such as `Route`, match requests.</span></span>

## <a name="route-constraint-reference"></a><span data-ttu-id="c50e1-310">Referência de restrição de rota</span><span class="sxs-lookup"><span data-stu-id="c50e1-310">Route Constraint Reference</span></span>

<span data-ttu-id="c50e1-311">Restrições da rota executar quando um `Route` tem correspondeu a sintaxe da URL de entrada e convertidos o caminho da URL em valores de rota.</span><span class="sxs-lookup"><span data-stu-id="c50e1-311">Route constraints execute when a `Route` has matched the syntax of the incoming URL and tokenized the URL path into route values.</span></span> <span data-ttu-id="c50e1-312">Restrições da rota geralmente inspecionar o valor de rota associado por meio do modelo de rota e fazer com que um simples Sim/não decisão sobre se o valor for aceitável.</span><span class="sxs-lookup"><span data-stu-id="c50e1-312">Route constraints generally inspect the route value associated via the route template and make a simple yes/no decision about whether or not the value is acceptable.</span></span> <span data-ttu-id="c50e1-313">Algumas restrições da rota usam dados fora do valor de rota para considerar se a solicitação pode ser roteada.</span><span class="sxs-lookup"><span data-stu-id="c50e1-313">Some route constraints use data outside the route value to consider whether the request can be routed.</span></span> <span data-ttu-id="c50e1-314">Por exemplo, o `HttpMethodRouteConstraint` pode aceitar ou rejeitar uma solicitação de acordo com o verbo HTTP.</span><span class="sxs-lookup"><span data-stu-id="c50e1-314">For example, the `HttpMethodRouteConstraint` can accept or reject a request based on its HTTP verb.</span></span>

>[!WARNING]
> <span data-ttu-id="c50e1-315">Evite usar restrições de **validação de entrada**porque fazendo isso, uma entrada inválida resultará em 404 (não encontrado) em vez de um 400 com uma mensagem de erro apropriado.</span><span class="sxs-lookup"><span data-stu-id="c50e1-315">Avoid using constraints for **input validation**, because doing so means that invalid input will result in a 404 (Not Found) instead of a 400 with an appropriate error message.</span></span> <span data-ttu-id="c50e1-316">Restrições da rota devem ser usadas para **ambiguidade** entre as rotas semelhantes, não para validar as entradas para uma rota específica.</span><span class="sxs-lookup"><span data-stu-id="c50e1-316">Route constraints should be used to **disambiguate** between similar routes, not to validate the inputs for a particular route.</span></span>

<span data-ttu-id="c50e1-317">A tabela a seguir demonstra alguns restrições da rota e o comportamento esperado.</span><span class="sxs-lookup"><span data-stu-id="c50e1-317">The following table demonstrates some route constraints and their expected behavior.</span></span>

| <span data-ttu-id="c50e1-318">restrição</span><span class="sxs-lookup"><span data-stu-id="c50e1-318">constraint</span></span> | <span data-ttu-id="c50e1-319">Exemplo</span><span class="sxs-lookup"><span data-stu-id="c50e1-319">Example</span></span> | <span data-ttu-id="c50e1-320">Correspondências de exemplo</span><span class="sxs-lookup"><span data-stu-id="c50e1-320">Example Matches</span></span> | <span data-ttu-id="c50e1-321">Observações</span><span class="sxs-lookup"><span data-stu-id="c50e1-321">Notes</span></span> |
| --------   | ------- | ------------- | ----- |
| `int` | `{id:int}` | <span data-ttu-id="c50e1-322">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="c50e1-322">`123456789`, `-123456789`</span></span>  | <span data-ttu-id="c50e1-323">Corresponde a qualquer inteiro</span><span class="sxs-lookup"><span data-stu-id="c50e1-323">Matches any integer</span></span> |
| `bool`  | `{active:bool}` | <span data-ttu-id="c50e1-324">`true`, `FALSE`</span><span class="sxs-lookup"><span data-stu-id="c50e1-324">`true`, `FALSE`</span></span> | <span data-ttu-id="c50e1-325">Correspondências `true` ou `false` (diferencia maiusculas de minúsculas)</span><span class="sxs-lookup"><span data-stu-id="c50e1-325">Matches `true` or `false` (case-insensitive)</span></span> |
| `datetime` | `{dob:datetime}` | <span data-ttu-id="c50e1-326">`2016-12-31`, `2016-12-31 7:32pm`</span><span class="sxs-lookup"><span data-stu-id="c50e1-326">`2016-12-31`, `2016-12-31 7:32pm`</span></span>  | <span data-ttu-id="c50e1-327">Corresponde a uma opção válida `DateTime` valor (a cultura invariável - consulte aviso)</span><span class="sxs-lookup"><span data-stu-id="c50e1-327">Matches a valid `DateTime` value (in the invariant culture - see warning)</span></span> |
| `decimal` | `{price:decimal}` | <span data-ttu-id="c50e1-328">`49.99`, `-1,000.01`</span><span class="sxs-lookup"><span data-stu-id="c50e1-328">`49.99`, `-1,000.01`</span></span> | <span data-ttu-id="c50e1-329">Corresponde a uma opção válida `decimal` valor (a cultura invariável - consulte aviso)</span><span class="sxs-lookup"><span data-stu-id="c50e1-329">Matches a valid `decimal` value (in the invariant culture - see warning)</span></span> |
| `double`  | `{weight:double}` | <span data-ttu-id="c50e1-330">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="c50e1-330">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="c50e1-331">Corresponde a uma opção válida `double` valor (a cultura invariável - consulte aviso)</span><span class="sxs-lookup"><span data-stu-id="c50e1-331">Matches a valid `double` value (in the invariant culture - see warning)</span></span> |
| `float`  | `{weight:float}` | <span data-ttu-id="c50e1-332">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="c50e1-332">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="c50e1-333">Corresponde a uma opção válida `float` valor (a cultura invariável - consulte aviso)</span><span class="sxs-lookup"><span data-stu-id="c50e1-333">Matches a valid `float` value (in the invariant culture - see warning)</span></span> |
| `guid`  | `{id:guid}` | <span data-ttu-id="c50e1-334">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span><span class="sxs-lookup"><span data-stu-id="c50e1-334">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span></span> | <span data-ttu-id="c50e1-335">Corresponde a uma opção válida `Guid` valor</span><span class="sxs-lookup"><span data-stu-id="c50e1-335">Matches a valid `Guid` value</span></span> |
| `long` | `{ticks:long}` | <span data-ttu-id="c50e1-336">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="c50e1-336">`123456789`, `-123456789`</span></span> | <span data-ttu-id="c50e1-337">Corresponde a uma opção válida `long` valor</span><span class="sxs-lookup"><span data-stu-id="c50e1-337">Matches a valid `long` value</span></span> |
| `minlength(value)` | `{username:minlength(4)}` | `Rick` | <span data-ttu-id="c50e1-338">Cadeia de caracteres deve ter pelo menos 4 caracteres</span><span class="sxs-lookup"><span data-stu-id="c50e1-338">String must be at least 4 characters</span></span> |
| `maxlength(value)` | `{filename:maxlength(8)}` | `Richard` | <span data-ttu-id="c50e1-339">Cadeia de caracteres deve ter não mais de 8 caracteres</span><span class="sxs-lookup"><span data-stu-id="c50e1-339">String must be no more than 8 characters</span></span> |
| `length(length)` | `{filename:length(12)}` | `somefile.txt` | <span data-ttu-id="c50e1-340">Cadeia de caracteres deve ter exatamente 12 caracteres</span><span class="sxs-lookup"><span data-stu-id="c50e1-340">String must be exactly 12 characters long</span></span> |
| `length(min,max)` | `{filename:length(8,16)}` | `somefile.txt` | <span data-ttu-id="c50e1-341">Cadeia de caracteres deve ter pelo menos 8 e não mais de 16 caracteres</span><span class="sxs-lookup"><span data-stu-id="c50e1-341">String must be at least 8 and no more than 16 characters long</span></span> |
| `min(value)` | `{age:min(18)}` | `19` | <span data-ttu-id="c50e1-342">Valor inteiro deve ser pelo menos 18</span><span class="sxs-lookup"><span data-stu-id="c50e1-342">Integer value must be at least 18</span></span> |
| `max(value)` | `{age:max(120)}` |  `91` | <span data-ttu-id="c50e1-343">Valor inteiro deve ser não mais de 120</span><span class="sxs-lookup"><span data-stu-id="c50e1-343">Integer value must be no more than 120</span></span> |
| `range(min,max)` | `{age:range(18,120)}` | `91` | <span data-ttu-id="c50e1-344">Valor inteiro deve ser pelo menos 18, mas não mais de 120</span><span class="sxs-lookup"><span data-stu-id="c50e1-344">Integer value must be at least 18 but no more than 120</span></span> |
| `alpha` | `{name:alpha}` | `Rick` | <span data-ttu-id="c50e1-345">Cadeia de caracteres deve consistir em um ou mais caracteres alfabéticos (`a`-`z`, diferencia maiusculas de minúsculas)</span><span class="sxs-lookup"><span data-stu-id="c50e1-345">String must consist of one or more alphabetical characters (`a`-`z`, case-insensitive)</span></span> |
| `regex(expression)` | `{ssn:regex(^\\d{{3}}-\\d{{2}}-\\d{{4}}$)}` | `123-45-6789` | <span data-ttu-id="c50e1-346">Cadeia de caracteres deve corresponder à expressão regular (consulte dicas sobre como definir uma expressão regular)</span><span class="sxs-lookup"><span data-stu-id="c50e1-346">String must match the regular expression (see tips about defining a regular expression)</span></span> |
| `required`  | `{name:required}` | `Rick` |  <span data-ttu-id="c50e1-347">Usado para impor que um valor de parâmetro não está presente durante a geração de URL</span><span class="sxs-lookup"><span data-stu-id="c50e1-347">Used to enforce that a non-parameter value is present during URL generation</span></span> |

>[!WARNING]
> <span data-ttu-id="c50e1-348">Restrições da rota que verifique a URL podem ser convertidas em um tipo CLR (como `int` ou `DateTime`) sempre usam a cultura invariável - assumem a URL é não localizáveis.</span><span class="sxs-lookup"><span data-stu-id="c50e1-348">Route constraints that verify the URL can be converted to a CLR type (such as `int` or `DateTime`) always use the invariant culture - they assume the URL is non-localizable.</span></span> <span data-ttu-id="c50e1-349">As restrições da rota fornecida pelo framework não modifique os valores armazenados nos valores de rota.</span><span class="sxs-lookup"><span data-stu-id="c50e1-349">The framework-provided route constraints do not modify the values stored in route values.</span></span> <span data-ttu-id="c50e1-350">Todos os valores de rota analisados a partir de URL serão armazenados como cadeias de caracteres.</span><span class="sxs-lookup"><span data-stu-id="c50e1-350">All route values parsed from the URL will be stored as strings.</span></span> <span data-ttu-id="c50e1-351">Por exemplo, o [restrição de rota Float](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/Constraints/FloatRouteConstraint.cs#L44-L60) tentará converter o valor de rota em um float, mas o valor convertido é usado somente para verificar se ele pode ser convertido em float.</span><span class="sxs-lookup"><span data-stu-id="c50e1-351">For example, the [Float route constraint](https://github.com/aspnet/Routing/blob/1.0.0/src/Microsoft.AspNetCore.Routing/Constraints/FloatRouteConstraint.cs#L44-L60) will attempt to convert the route value to a float, but the converted value is used only to verify it can be converted to a float.</span></span>

## <a name="regular-expressions"></a><span data-ttu-id="c50e1-352">Expressões regulares</span><span class="sxs-lookup"><span data-stu-id="c50e1-352">Regular expressions</span></span> 

<span data-ttu-id="c50e1-353">Adiciona a estrutura do ASP.NET Core `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` para o construtor de expressão regular.</span><span class="sxs-lookup"><span data-stu-id="c50e1-353">The ASP.NET Core framework adds `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` to the regular expression constructor.</span></span> <span data-ttu-id="c50e1-354">Consulte [RegexOptions Enumeration](https://docs.microsoft.com/dotnet/api/system.text.regularexpressions.regexoptions) para obter uma descrição desses membros.</span><span class="sxs-lookup"><span data-stu-id="c50e1-354">See [RegexOptions Enumeration](https://docs.microsoft.com/dotnet/api/system.text.regularexpressions.regexoptions) for a description of these members.</span></span>

<span data-ttu-id="c50e1-355">Expressões regulares usam delimitadores e símbolos semelhantes aos usados pelo roteamento e a linguagem c#.</span><span class="sxs-lookup"><span data-stu-id="c50e1-355">Regular expressions use delimiters and tokens similar to those used by Routing and the C# language.</span></span> <span data-ttu-id="c50e1-356">Tokens de expressão regular devem ser de escape.</span><span class="sxs-lookup"><span data-stu-id="c50e1-356">Regular expression tokens must be escaped.</span></span> <span data-ttu-id="c50e1-357">Por exemplo, para usar a expressão regular `^\d{3}-\d{2}-\d{4}$` roteamento, ele precisa ter o `\` caracteres digitados no como `\\` no arquivo de origem c# para escapar o `\` caractere de escape da cadeia de caracteres (a menos que usando [textuais literais de cadeia de caracteres](https://docs.microsoft.com/dotnet/csharp/language-reference/keywords/string).</span><span class="sxs-lookup"><span data-stu-id="c50e1-357">For example, to use the regular expression `^\d{3}-\d{2}-\d{4}$` in Routing, it needs to have the `\` characters typed in as `\\` in the C# source file to escape the `\` string escape character (unless using [verbatim string literals](https://docs.microsoft.com/dotnet/csharp/language-reference/keywords/string).</span></span> <span data-ttu-id="c50e1-358">O `{` , `}` , ' [' e ']' caracteres precisam ser substituídas por aspas duplas para escapar os caracteres de delimitador de parâmetro de roteamento.</span><span class="sxs-lookup"><span data-stu-id="c50e1-358">The `{` , `}` , '[' and ']' characters need to be escaped by doubling them to escape the Routing parameter delimiter characters.</span></span>  <span data-ttu-id="c50e1-359">A tabela a seguir mostra uma expressão regular e a versão de escape.</span><span class="sxs-lookup"><span data-stu-id="c50e1-359">The table below shows a regular expression and the escaped version.</span></span>

| <span data-ttu-id="c50e1-360">Expressão</span><span class="sxs-lookup"><span data-stu-id="c50e1-360">Expression</span></span>               | <span data-ttu-id="c50e1-361">Observação</span><span class="sxs-lookup"><span data-stu-id="c50e1-361">Note</span></span> |
| ----------------- | ------------ | 
| `^\d{3}-\d{2}-\d{4}$` | <span data-ttu-id="c50e1-362">Expressão regular</span><span class="sxs-lookup"><span data-stu-id="c50e1-362">Regular expression</span></span> |
| `^\\d{{3}}-\\d{{2}}-\\d{{4}}$` | <span data-ttu-id="c50e1-363">Escape</span><span class="sxs-lookup"><span data-stu-id="c50e1-363">Escaped</span></span>  |
| `^[a-z]{2}$` | <span data-ttu-id="c50e1-364">Expressão regular</span><span class="sxs-lookup"><span data-stu-id="c50e1-364">Regular expression</span></span> |
| `^[[a-z]]{{2}}$` | <span data-ttu-id="c50e1-365">Escape</span><span class="sxs-lookup"><span data-stu-id="c50e1-365">Escaped</span></span>  |

<span data-ttu-id="c50e1-366">Expressões regulares usadas em roteamento geralmente começa com o `^` caractere (correspondência de início da cadeia de caracteres) e terminam com o `$` caractere (correspondência terminando a posição da cadeia de caracteres).</span><span class="sxs-lookup"><span data-stu-id="c50e1-366">Regular expressions used in routing will often start with the `^` character (match starting position of the string) and end with the `$` character (match ending position of the string).</span></span> <span data-ttu-id="c50e1-367">O `^` e `$` caracteres Certifique-se de que o valor do parâmetro de rota toda a correspondência da expressão regular.</span><span class="sxs-lookup"><span data-stu-id="c50e1-367">The `^` and `$` characters ensure that the regular expression match the entire route parameter value.</span></span> <span data-ttu-id="c50e1-368">Sem o `^` e `$` caracteres de expressão regular corresponderá a qualquer subcadeia de caracteres na cadeia de caracteres, que é geralmente não é o desejado.</span><span class="sxs-lookup"><span data-stu-id="c50e1-368">Without the `^` and `$` characters the regular expression will match any sub-string within the string, which is often not what you want.</span></span> <span data-ttu-id="c50e1-369">A tabela a seguir mostra alguns exemplos e explica por que eles correspondam ou não corresponde.</span><span class="sxs-lookup"><span data-stu-id="c50e1-369">The table below shows some examples and explains why they match or fail to match.</span></span>

| <span data-ttu-id="c50e1-370">Expressão</span><span class="sxs-lookup"><span data-stu-id="c50e1-370">Expression</span></span>               | <span data-ttu-id="c50e1-371">Cadeia de caracteres</span><span class="sxs-lookup"><span data-stu-id="c50e1-371">String</span></span> | <span data-ttu-id="c50e1-372">Corresponder a</span><span class="sxs-lookup"><span data-stu-id="c50e1-372">Match</span></span> | <span data-ttu-id="c50e1-373">Comentário</span><span class="sxs-lookup"><span data-stu-id="c50e1-373">Comment</span></span> |
| ----------------- | ------------ |  ------------ |  ------------ | 
| `[a-z]{2}` | <span data-ttu-id="c50e1-374">hello</span><span class="sxs-lookup"><span data-stu-id="c50e1-374">hello</span></span> | <span data-ttu-id="c50e1-375">sim</span><span class="sxs-lookup"><span data-stu-id="c50e1-375">yes</span></span> | <span data-ttu-id="c50e1-376">correspondência de subcadeia de caracteres</span><span class="sxs-lookup"><span data-stu-id="c50e1-376">substring matches</span></span> |
| `[a-z]{2}` | <span data-ttu-id="c50e1-377">123abc456</span><span class="sxs-lookup"><span data-stu-id="c50e1-377">123abc456</span></span> | <span data-ttu-id="c50e1-378">sim</span><span class="sxs-lookup"><span data-stu-id="c50e1-378">yes</span></span> | <span data-ttu-id="c50e1-379">correspondência de subcadeia de caracteres</span><span class="sxs-lookup"><span data-stu-id="c50e1-379">substring matches</span></span> |
| `[a-z]{2}` | <span data-ttu-id="c50e1-380">mz</span><span class="sxs-lookup"><span data-stu-id="c50e1-380">mz</span></span> | <span data-ttu-id="c50e1-381">sim</span><span class="sxs-lookup"><span data-stu-id="c50e1-381">yes</span></span> | <span data-ttu-id="c50e1-382">coincide com a expressão</span><span class="sxs-lookup"><span data-stu-id="c50e1-382">matches expression</span></span> |
| `[a-z]{2}` | <span data-ttu-id="c50e1-383">MZ</span><span class="sxs-lookup"><span data-stu-id="c50e1-383">MZ</span></span> | <span data-ttu-id="c50e1-384">sim</span><span class="sxs-lookup"><span data-stu-id="c50e1-384">yes</span></span> | <span data-ttu-id="c50e1-385">não entre maiusculas e minúsculas</span><span class="sxs-lookup"><span data-stu-id="c50e1-385">not case sensitive</span></span> |
| `^[a-z]{2}$` |  <span data-ttu-id="c50e1-386">hello</span><span class="sxs-lookup"><span data-stu-id="c50e1-386">hello</span></span> | <span data-ttu-id="c50e1-387">no</span><span class="sxs-lookup"><span data-stu-id="c50e1-387">no</span></span> | <span data-ttu-id="c50e1-388">consulte `^` e `$` acima</span><span class="sxs-lookup"><span data-stu-id="c50e1-388">see `^` and `$` above</span></span> |
| `^[a-z]{2}$` |  <span data-ttu-id="c50e1-389">123abc456</span><span class="sxs-lookup"><span data-stu-id="c50e1-389">123abc456</span></span> | <span data-ttu-id="c50e1-390">no</span><span class="sxs-lookup"><span data-stu-id="c50e1-390">no</span></span> | <span data-ttu-id="c50e1-391">consulte `^` e `$` acima</span><span class="sxs-lookup"><span data-stu-id="c50e1-391">see `^` and `$` above</span></span> |

<span data-ttu-id="c50e1-392">Consulte [expressões regulares do .NET Framework](https://docs.microsoft.com/dotnet/standard/base-types/regular-expression-language-quick-reference) para obter mais informações sobre a sintaxe de expressão regular.</span><span class="sxs-lookup"><span data-stu-id="c50e1-392">Refer to [.NET Framework Regular Expressions](https://docs.microsoft.com/dotnet/standard/base-types/regular-expression-language-quick-reference) for more information on regular expression syntax.</span></span>

<span data-ttu-id="c50e1-393">Para restringir um parâmetro para um conjunto conhecido de valores possíveis, use uma expressão regular.</span><span class="sxs-lookup"><span data-stu-id="c50e1-393">To constrain a parameter to a known set of possible values, use a regular expression.</span></span> <span data-ttu-id="c50e1-394">Por exemplo `{action:regex(^(list|get|create)$)}` corresponde apenas a `action` rotear o valor para `list`, `get`, ou `create`.</span><span class="sxs-lookup"><span data-stu-id="c50e1-394">For example `{action:regex(^(list|get|create)$)}` only matches the `action` route value to `list`, `get`, or `create`.</span></span> <span data-ttu-id="c50e1-395">Se passado para o dicionário de restrições, a cadeia de caracteres "^ (lista | get | criar) $" seria equivalente.</span><span class="sxs-lookup"><span data-stu-id="c50e1-395">If passed into the constraints dictionary, the string "^(list|get|create)$" would be equivalent.</span></span> <span data-ttu-id="c50e1-396">Restrições que são passadas no dicionário de restrições (não embutido dentro de um modelo) que não correspondem a uma das restrições conhecidas também são tratadas como expressões regulares.</span><span class="sxs-lookup"><span data-stu-id="c50e1-396">Constraints that are passed in the constraints dictionary (not inline within a template) that don't match one of the known constraints are also treated as regular expressions.</span></span>

## <a name="url-generation-reference"></a><span data-ttu-id="c50e1-397">Referência de geração de URL</span><span class="sxs-lookup"><span data-stu-id="c50e1-397">URL Generation Reference</span></span>

<span data-ttu-id="c50e1-398">O exemplo a seguir mostra como gerar um link para uma rota com um dicionário de valores de rota e uma `RouteCollection`.</span><span class="sxs-lookup"><span data-stu-id="c50e1-398">The example below shows how to generate a link to a route given a dictionary of route values and a `RouteCollection`.</span></span>

[!code-csharp[Main](../fundamentals/routing/sample/RoutingSample/Startup.cs?range=45-59)]

<span data-ttu-id="c50e1-399">O `VirtualPath` gerado no final do exemplo acima é `/package/create/123`.</span><span class="sxs-lookup"><span data-stu-id="c50e1-399">The `VirtualPath` generated at the end of the sample above is `/package/create/123`.</span></span>

<span data-ttu-id="c50e1-400">O segundo parâmetro para o `VirtualPathContext` construtor é uma coleção de *valores ambiente*.</span><span class="sxs-lookup"><span data-stu-id="c50e1-400">The second parameter to the `VirtualPathContext` constructor is a collection of *ambient values*.</span></span> <span data-ttu-id="c50e1-401">Valores de ambiente proporcionar conveniência, limitando o número de valores que deve especificar um desenvolvedor em um determinado contexto de solicitação.</span><span class="sxs-lookup"><span data-stu-id="c50e1-401">Ambient values provide convenience by limiting the number of values a developer must specify within a certain request context.</span></span> <span data-ttu-id="c50e1-402">Os valores de rota atual da solicitação atual são considerados valores de ambiente para a geração de link.</span><span class="sxs-lookup"><span data-stu-id="c50e1-402">The current route values of the current request are considered ambient values for link generation.</span></span> <span data-ttu-id="c50e1-403">Por exemplo, em um aplicativo ASP.NET MVC, se você estiver no `About` ação do `HomeController`, você não precisa especificar o valor de rota do controlador para vincular ao `Index` ação (o valor de ambiente de `Home` será usado).</span><span class="sxs-lookup"><span data-stu-id="c50e1-403">For example, in an ASP.NET MVC app if you are in the `About` action of the `HomeController`, you don't need to specify the controller route value to link to the `Index` action (the ambient value of `Home` will be used).</span></span>

<span data-ttu-id="c50e1-404">Valores de ambiente não corresponderem a um parâmetro são ignorados e ambiente valores também são ignorados quando um valor explicitamente fornecido substituições, vai da esquerda para a direita na URL.</span><span class="sxs-lookup"><span data-stu-id="c50e1-404">Ambient values that don't match a parameter are ignored, and ambient values are also ignored when an explicitly-provided value overrides it, going from left to right in the URL.</span></span>

<span data-ttu-id="c50e1-405">Valores que são explicitamente fornecidas, mas que não corresponde a qualquer coisa são adicionados à cadeia de caracteres de consulta.</span><span class="sxs-lookup"><span data-stu-id="c50e1-405">Values that are explicitly provided but which don't match anything are added to the query string.</span></span> <span data-ttu-id="c50e1-406">A tabela a seguir mostra o resultado ao usar o modelo de rota `{controller}/{action}/{id?}`.</span><span class="sxs-lookup"><span data-stu-id="c50e1-406">The following table shows the result when using the route template `{controller}/{action}/{id?}`.</span></span>

| <span data-ttu-id="c50e1-407">Valores de ambiente</span><span class="sxs-lookup"><span data-stu-id="c50e1-407">Ambient Values</span></span> | <span data-ttu-id="c50e1-408">Valores explícitos</span><span class="sxs-lookup"><span data-stu-id="c50e1-408">Explicit Values</span></span> | <span data-ttu-id="c50e1-409">Resultado</span><span class="sxs-lookup"><span data-stu-id="c50e1-409">Result</span></span> |
| -------------   | -------------- | ------ |
| <span data-ttu-id="c50e1-410">controlador = "Início"</span><span class="sxs-lookup"><span data-stu-id="c50e1-410">controller="Home"</span></span> | <span data-ttu-id="c50e1-411">ação = "Sobre"</span><span class="sxs-lookup"><span data-stu-id="c50e1-411">action="About"</span></span> | `/Home/About` |
| <span data-ttu-id="c50e1-412">controlador = "Início"</span><span class="sxs-lookup"><span data-stu-id="c50e1-412">controller="Home"</span></span> | <span data-ttu-id="c50e1-413">controlador = "Order", ação = "Sobre"</span><span class="sxs-lookup"><span data-stu-id="c50e1-413">controller="Order",action="About"</span></span> | `/Order/About` |
| <span data-ttu-id="c50e1-414">controlador = "Home", color = "Red"</span><span class="sxs-lookup"><span data-stu-id="c50e1-414">controller="Home",color="Red"</span></span> | <span data-ttu-id="c50e1-415">ação = "Sobre"</span><span class="sxs-lookup"><span data-stu-id="c50e1-415">action="About"</span></span> | `/Home/About` |
| <span data-ttu-id="c50e1-416">controlador = "Início"</span><span class="sxs-lookup"><span data-stu-id="c50e1-416">controller="Home"</span></span> | <span data-ttu-id="c50e1-417">ação = "Sobre" cor = "Red"</span><span class="sxs-lookup"><span data-stu-id="c50e1-417">action="About",color="Red"</span></span> | `/Home/About?color=Red`

<span data-ttu-id="c50e1-418">Se uma rota tem um valor padrão que não corresponde a um parâmetro e esse valor é explicitamente fornecido, ele deve corresponder o valor padrão.</span><span class="sxs-lookup"><span data-stu-id="c50e1-418">If a route has a default value that doesn't correspond to a parameter and that value is explicitly provided, it must match the default value.</span></span> <span data-ttu-id="c50e1-419">Por exemplo:</span><span class="sxs-lookup"><span data-stu-id="c50e1-419">For example:</span></span>

```csharp
routes.MapRoute("blog_route", "blog/{*slug}",
  defaults: new { controller = "Blog", action = "ReadPost" });
```

<span data-ttu-id="c50e1-420">Geração de link só poderia gerar um link para essa rota quando os valores correspondentes para o controlador e ação são fornecidos.</span><span class="sxs-lookup"><span data-stu-id="c50e1-420">Link generation would only generate a link for this route when the matching values for controller and action are provided.</span></span>
