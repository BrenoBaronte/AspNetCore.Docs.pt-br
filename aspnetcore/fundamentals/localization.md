---
<span data-ttu-id="77187-101">Título: globalização e localização no ASP.NET Core autor: Rick – descrição de Anderson: saiba como ASP.NET Core fornece serviços e middleware para localizar conteúdo em diferentes idiomas e culturas.</span><span class="sxs-lookup"><span data-stu-id="77187-101">title: Globalization and localization in ASP.NET Core author: rick-anderson description: Learn how ASP.NET Core provides services and middleware for localizing content into different languages and cultures.</span></span>
<span data-ttu-id="77187-102">MS. Author: Riande MS. Date: 11/30/2019 no-loc:</span><span class="sxs-lookup"><span data-stu-id="77187-102">ms.author: riande ms.date: 11/30/2019 no-loc:</span></span>
- <span data-ttu-id="77187-103">'Blazor'</span><span class="sxs-lookup"><span data-stu-id="77187-103">'Blazor'</span></span>
- <span data-ttu-id="77187-104">'Identity'</span><span class="sxs-lookup"><span data-stu-id="77187-104">'Identity'</span></span>
- <span data-ttu-id="77187-105">'Let's Encrypt'</span><span class="sxs-lookup"><span data-stu-id="77187-105">'Let's Encrypt'</span></span>
- <span data-ttu-id="77187-106">'Razor'</span><span class="sxs-lookup"><span data-stu-id="77187-106">'Razor'</span></span>
- <span data-ttu-id="77187-107">SignalRUID: conceitos básicos/localização</span><span class="sxs-lookup"><span data-stu-id="77187-107">'SignalR' uid: fundamentals/localization</span></span>

---
# <a name="globalization-and-localization-in-aspnet-core"></a><span data-ttu-id="77187-108">Globalização e localização no ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="77187-108">Globalization and localization in ASP.NET Core</span></span>

::: moniker range=">= aspnetcore-3.0 < aspnetcore-5.0"

<span data-ttu-id="77187-109">Por [Rick Anderson](https://twitter.com/RickAndMSFT), [Damien Bowden](https://twitter.com/damien_bod), [Bart Calixto](https://twitter.com/bartmax), [Nadeem Afana](https://afana.me/) e [Hisham Bin Ateya](https://twitter.com/hishambinateya)</span><span class="sxs-lookup"><span data-stu-id="77187-109">By [Rick Anderson](https://twitter.com/RickAndMSFT), [Damien Bowden](https://twitter.com/damien_bod), [Bart Calixto](https://twitter.com/bartmax), [Nadeem Afana](https://afana.me/), and [Hisham Bin Ateya](https://twitter.com/hishambinateya)</span></span>

<span data-ttu-id="77187-110">Um site multilíngue permite que o site alcance um público mais amplo.</span><span class="sxs-lookup"><span data-stu-id="77187-110">A multilingual website allows the site to reach a wider audience.</span></span> <span data-ttu-id="77187-111">O ASP.NET Core fornece serviços e middleware para localização em diferentes idiomas e culturas.</span><span class="sxs-lookup"><span data-stu-id="77187-111">ASP.NET Core provides services and middleware for localizing into different languages and cultures.</span></span>

<span data-ttu-id="77187-112">A internacionalização envolve [Globalização](/dotnet/api/system.globalization) e [Localização](/dotnet/standard/globalization-localization/localization).</span><span class="sxs-lookup"><span data-stu-id="77187-112">Internationalization involves [Globalization](/dotnet/api/system.globalization) and [Localization](/dotnet/standard/globalization-localization/localization).</span></span> <span data-ttu-id="77187-113">Globalização é o processo de criação de aplicativos que dão suporte a diferentes culturas.</span><span class="sxs-lookup"><span data-stu-id="77187-113">Globalization is the process of designing apps that support different cultures.</span></span> <span data-ttu-id="77187-114">A globalização adiciona suporte para entrada, exibição e saída de um conjunto definido de scripts de idiomas relacionados a áreas geográficas específicas.</span><span class="sxs-lookup"><span data-stu-id="77187-114">Globalization adds support for input, display, and output of a defined set of language scripts that relate to specific geographic areas.</span></span>

<span data-ttu-id="77187-115">Localização é o processo de adaptar um aplicativo globalizado, que você já processou para possibilidade de localização, a determinada cultura/localidade.</span><span class="sxs-lookup"><span data-stu-id="77187-115">Localization is the process of adapting a globalized app, which you have already processed for localizability, to a particular culture/locale.</span></span> <span data-ttu-id="77187-116">Para obter mais informações, consulte **Termos de globalização e localização** próximo ao final deste documento.</span><span class="sxs-lookup"><span data-stu-id="77187-116">For more information see **Globalization and localization terms** near the end of this document.</span></span>

<span data-ttu-id="77187-117">A localização de aplicativos envolve o seguinte:</span><span class="sxs-lookup"><span data-stu-id="77187-117">App localization involves the following:</span></span>

1. <span data-ttu-id="77187-118">Tornar o conteúdo do aplicativo localizável</span><span class="sxs-lookup"><span data-stu-id="77187-118">Make the app's content localizable</span></span>
1. <span data-ttu-id="77187-119">Fornecer recursos localizados para as culturas e os idiomas aos quais você dá suporte</span><span class="sxs-lookup"><span data-stu-id="77187-119">Provide localized resources for the languages and cultures you support</span></span>
1. <span data-ttu-id="77187-120">Implementar uma estratégia para selecionar o idioma e a cultura para cada solicitação</span><span class="sxs-lookup"><span data-stu-id="77187-120">Implement a strategy to select the language/culture for each request</span></span>

<span data-ttu-id="77187-121">[Exibir ou baixar código de exemplo](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/localization/sample/Localization) ([como baixar](xref:index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="77187-121">[View or download sample code](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/localization/sample/Localization) ([how to download](xref:index#how-to-download-a-sample))</span></span>

## <a name="make-the-apps-content-localizable"></a><span data-ttu-id="77187-122">Tornar o conteúdo do aplicativo localizável</span><span class="sxs-lookup"><span data-stu-id="77187-122">Make the app's content localizable</span></span>

<span data-ttu-id="77187-123"><xref:Microsoft.Extensions.Localization.IStringLocalizer>e <xref:Microsoft.Extensions.Localization.IStringLocalizer%601> foram arquitetados para melhorar a produtividade ao desenvolver aplicativos localizados.</span><span class="sxs-lookup"><span data-stu-id="77187-123"><xref:Microsoft.Extensions.Localization.IStringLocalizer> and <xref:Microsoft.Extensions.Localization.IStringLocalizer%601> were architected to improve productivity when developing localized apps.</span></span> <span data-ttu-id="77187-124">`IStringLocalizer`usa o <xref:System.Resources.ResourceManager> e o <xref:System.Resources.ResourceReader> para fornecer recursos específicos de cultura em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="77187-124">`IStringLocalizer` uses the <xref:System.Resources.ResourceManager> and <xref:System.Resources.ResourceReader> to provide culture-specific resources at run time.</span></span> <span data-ttu-id="77187-125">A interface tem um indexador e um `IEnumerable` para retornar cadeias de caracteres localizadas.</span><span class="sxs-lookup"><span data-stu-id="77187-125">The interface has an indexer and an `IEnumerable` for returning localized strings.</span></span> <span data-ttu-id="77187-126">`IStringLocalizer`Não requer o armazenamento das cadeias de caracteres de idioma padrão em um arquivo de recurso.</span><span class="sxs-lookup"><span data-stu-id="77187-126">`IStringLocalizer` doesn't require storing the default language strings in a resource file.</span></span> <span data-ttu-id="77187-127">Você pode desenvolver um aplicativo direcionado à localização e não precisa criar arquivos de recurso no início do desenvolvimento.</span><span class="sxs-lookup"><span data-stu-id="77187-127">You can develop an app targeted for localization and not need to create resource files early in development.</span></span> <span data-ttu-id="77187-128">O código abaixo mostra como encapsular a cadeia de caracteres "About Title" para localização.</span><span class="sxs-lookup"><span data-stu-id="77187-128">The code below shows how to wrap the string "About Title" for localization.</span></span>

[!code-csharp[](localization/sample/Localization/Controllers/AboutController.cs)]

<span data-ttu-id="77187-129">No código anterior, a `IStringLocalizer<T>` implementação vem da [injeção de dependência](dependency-injection.md).</span><span class="sxs-lookup"><span data-stu-id="77187-129">In the preceding code, the `IStringLocalizer<T>` implementation comes from [Dependency Injection](dependency-injection.md).</span></span> <span data-ttu-id="77187-130">Se o valor localizado de "About Title" não é encontrado, a chave do indexador é retornada, ou seja, a cadeia de caracteres "About Title".</span><span class="sxs-lookup"><span data-stu-id="77187-130">If the localized value of "About Title" isn't found, then the indexer key is returned, that is, the string "About Title".</span></span> <span data-ttu-id="77187-131">Deixe as cadeias de caracteres literais de idioma padrão no aplicativo e encapsule-as no localizador, de modo que você possa se concentrar no desenvolvimento do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="77187-131">You can leave the default language literal strings in the app and wrap them in the localizer, so that you can focus on developing the app.</span></span> <span data-ttu-id="77187-132">Você pode desenvolve seu aplicativo com o idioma padrão e prepará-lo para a etapa de localização sem primeiro criar um arquivo de recurso padrão.</span><span class="sxs-lookup"><span data-stu-id="77187-132">You develop your app with your default language and prepare it for the localization step without first creating a default resource file.</span></span> <span data-ttu-id="77187-133">Como alternativa, você pode usar a abordagem tradicional e fornecer uma chave para recuperar a cadeia de caracteres de idioma padrão.</span><span class="sxs-lookup"><span data-stu-id="77187-133">Alternatively, you can use the traditional approach and provide a key to retrieve the default language string.</span></span> <span data-ttu-id="77187-134">Para muitos desenvolvedores, o novo fluxo de trabalho de não ter um arquivo *.resx* de idioma padrão e simplesmente encapsular os literais de cadeia de caracteres pode reduzir a sobrecarga de localizar um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="77187-134">For many developers the new workflow of not having a default language *.resx* file and simply wrapping the string literals can reduce the overhead of localizing an app.</span></span> <span data-ttu-id="77187-135">Outros desenvolvedores preferirão o fluxo de trabalho tradicional, pois ele pode facilitar o trabalho com literais de cadeia de caracteres mais longas e a atualização de cadeias de caracteres localizadas.</span><span class="sxs-lookup"><span data-stu-id="77187-135">Other developers will prefer the traditional work flow as it can make it easier to work with longer string literals and make it easier to update localized strings.</span></span>

<span data-ttu-id="77187-136">Use a implementação `IHtmlLocalizer<T>` para recursos que contêm HTML.</span><span class="sxs-lookup"><span data-stu-id="77187-136">Use the `IHtmlLocalizer<T>` implementation for resources that contain HTML.</span></span> <span data-ttu-id="77187-137">O `IHtmlLocalizer` codifica em HTML os argumentos que são formatados na cadeia de caracteres de recurso, mas não codifica em HTML a cadeia de caracteres de recurso em si.</span><span class="sxs-lookup"><span data-stu-id="77187-137">`IHtmlLocalizer` HTML encodes arguments that are formatted in the resource string, but doesn't HTML encode the resource string itself.</span></span> <span data-ttu-id="77187-138">Na amostra realçada abaixo, apenas o valor do parâmetro `name` é codificado em HTML.</span><span class="sxs-lookup"><span data-stu-id="77187-138">In the sample highlighted below, only the value of `name` parameter is HTML encoded.</span></span>

[!code-csharp[](../fundamentals/localization/sample/Localization/Controllers/BookController.cs?highlight=3,5,20&start=1&end=24)]

<span data-ttu-id="77187-139">**Observação:** em geral, recomendamos localizar somente o texto e não o HTML.</span><span class="sxs-lookup"><span data-stu-id="77187-139">**Note:** You generally want to only localize text and not HTML.</span></span>

<span data-ttu-id="77187-140">No nível mais baixo, você pode obter `IStringLocalizerFactory` com a [Injeção de Dependência](dependency-injection.md):</span><span class="sxs-lookup"><span data-stu-id="77187-140">At the lowest level, you can get `IStringLocalizerFactory` out of [Dependency Injection](dependency-injection.md):</span></span>

[!code-csharp[](localization/sample/Localization/Controllers/TestController.cs?start=9&end=26&highlight=7-13)]

<span data-ttu-id="77187-141">O código acima demonstra cada um dos dois métodos Create de alocador.</span><span class="sxs-lookup"><span data-stu-id="77187-141">The code above demonstrates each of the two factory create methods.</span></span>

<span data-ttu-id="77187-142">Você pode particionar as cadeias de caracteres localizadas por controlador, área ou ter apenas um contêiner.</span><span class="sxs-lookup"><span data-stu-id="77187-142">You can partition your localized strings by controller, area, or have just one container.</span></span> <span data-ttu-id="77187-143">No aplicativo de exemplo, uma classe fictícia chamada `SharedResource` é usada para recursos compartilhados.</span><span class="sxs-lookup"><span data-stu-id="77187-143">In the sample app, a dummy class named `SharedResource` is used for shared resources.</span></span>

[!code-csharp[](localization/sample/Localization/Resources/SharedResource.cs)]

<span data-ttu-id="77187-144">Alguns desenvolvedores usam a classe `Startup` para conter cadeias de caracteres globais ou compartilhadas.</span><span class="sxs-lookup"><span data-stu-id="77187-144">Some developers use the `Startup` class to contain global or shared strings.</span></span> <span data-ttu-id="77187-145">Na amostra abaixo, os localizadores `InfoController` e `SharedResource` são usados:</span><span class="sxs-lookup"><span data-stu-id="77187-145">In the sample below, the `InfoController` and the `SharedResource` localizers are used:</span></span>

[!code-csharp[](localization/sample/Localization/Controllers/InfoController.cs?range=9-26)]

## <a name="view-localization"></a><span data-ttu-id="77187-146">Localização de exibição</span><span class="sxs-lookup"><span data-stu-id="77187-146">View localization</span></span>

<span data-ttu-id="77187-147">O serviço `IViewLocalizer` fornece cadeias de caracteres localizadas para uma [exibição](xref:mvc/views/overview).</span><span class="sxs-lookup"><span data-stu-id="77187-147">The `IViewLocalizer` service provides localized strings for a [view](xref:mvc/views/overview).</span></span> <span data-ttu-id="77187-148">A classe `ViewLocalizer` implementa essa interface e encontra o local do recurso no caminho do arquivo de exibição.</span><span class="sxs-lookup"><span data-stu-id="77187-148">The `ViewLocalizer` class implements this interface and finds the resource location from the view file path.</span></span> <span data-ttu-id="77187-149">O seguinte código mostra como usar a implementação padrão de `IViewLocalizer`:</span><span class="sxs-lookup"><span data-stu-id="77187-149">The following code shows how to use the default implementation of `IViewLocalizer`:</span></span>

[!code-cshtml[](localization/sample/Localization/Views/Home/About.cshtml)]

<span data-ttu-id="77187-150">A implementação padrão de `IViewLocalizer` encontra o arquivo de recurso com base no nome de arquivo da exibição.</span><span class="sxs-lookup"><span data-stu-id="77187-150">The default implementation of `IViewLocalizer` finds the resource file based on the view's file name.</span></span> <span data-ttu-id="77187-151">Não há nenhuma opção para usar um arquivo de recurso compartilhado global.</span><span class="sxs-lookup"><span data-stu-id="77187-151">There's no option to use a global shared resource file.</span></span> <span data-ttu-id="77187-152">`ViewLocalizer`implementa o localizador usando `IHtmlLocalizer` , portanto, Razor não codifica a cadeia de caracteres localizada em HTML.</span><span class="sxs-lookup"><span data-stu-id="77187-152">`ViewLocalizer` implements the localizer using `IHtmlLocalizer`, so Razor doesn't HTML encode the localized string.</span></span> <span data-ttu-id="77187-153">Parametrize cadeias de recurso e o `IViewLocalizer` codificará em HTML os parâmetros, mas não a cadeia de caracteres de recurso.</span><span class="sxs-lookup"><span data-stu-id="77187-153">You can parameterize resource strings and `IViewLocalizer` will HTML encode the parameters, but not the resource string.</span></span> <span data-ttu-id="77187-154">Considere a seguinte Razor marcação:</span><span class="sxs-lookup"><span data-stu-id="77187-154">Consider the following Razor markup:</span></span>

```cshtml
@Localizer["<i>Hello</i> <b>{0}!</b>", UserManager.GetUserName(User)]
```

<span data-ttu-id="77187-155">Um arquivo de recurso em francês pode conter o seguinte:</span><span class="sxs-lookup"><span data-stu-id="77187-155">A French resource file could contain the following:</span></span>

| <span data-ttu-id="77187-156">Chave</span><span class="sxs-lookup"><span data-stu-id="77187-156">Key</span></span> | <span data-ttu-id="77187-157">Valor</span><span class="sxs-lookup"><span data-stu-id="77187-157">Value</span></span> |
| ----- | ------ |
| `<i>Hello</i> <b>{0}!</b>` | `<i>Bonjour</i> <b>{0} !</b>` |

<span data-ttu-id="77187-158">A exibição renderizada contém a marcação HTML do arquivo de recurso.</span><span class="sxs-lookup"><span data-stu-id="77187-158">The rendered view would contain the HTML markup from the resource file.</span></span>

<span data-ttu-id="77187-159">**Observação:** em geral, recomendamos localizar somente o texto e não o HTML.</span><span class="sxs-lookup"><span data-stu-id="77187-159">**Note:** You generally want to only localize text and not HTML.</span></span>

<span data-ttu-id="77187-160">Para usar um arquivo de recurso compartilhado em uma exibição, injete `IHtmlLocalizer<T>`:</span><span class="sxs-lookup"><span data-stu-id="77187-160">To use a shared resource file in a view, inject `IHtmlLocalizer<T>`:</span></span>

[!code-cshtml[](../fundamentals/localization/sample/Localization/Views/Test/About.cshtml?highlight=5,12)]

## <a name="dataannotations-localization"></a><span data-ttu-id="77187-161">Localização de DataAnnotations</span><span class="sxs-lookup"><span data-stu-id="77187-161">DataAnnotations localization</span></span>

<span data-ttu-id="77187-162">As mensagens de erro de DataAnnotations são localizadas com `IStringLocalizer<T>`.</span><span class="sxs-lookup"><span data-stu-id="77187-162">DataAnnotations error messages are localized with `IStringLocalizer<T>`.</span></span> <span data-ttu-id="77187-163">Usando a opção `ResourcesPath = "Resources"`, as mensagens de erro em `RegisterViewModel` podem ser armazenadas em um dos seguintes caminhos:</span><span class="sxs-lookup"><span data-stu-id="77187-163">Using the option `ResourcesPath = "Resources"`, the error messages in `RegisterViewModel` can be stored in either of the following paths:</span></span>

* <span data-ttu-id="77187-164">*Recursos/ViewModels. Account. RegisterViewModel. fr. resx*</span><span class="sxs-lookup"><span data-stu-id="77187-164">*Resources/ViewModels.Account.RegisterViewModel.fr.resx*</span></span>
* <span data-ttu-id="77187-165">*Resources/ViewModels/Account/RegisterViewModel.fr.resx*</span><span class="sxs-lookup"><span data-stu-id="77187-165">*Resources/ViewModels/Account/RegisterViewModel.fr.resx*</span></span>

[!code-csharp[](localization/sample/Localization/ViewModels/Account/RegisterViewModel.cs?start=9&end=26)]

<span data-ttu-id="77187-166">No ASP.NET Core MVC 1.1.0 e superior, atributos que não sejam de validação são localizados.</span><span class="sxs-lookup"><span data-stu-id="77187-166">In ASP.NET Core MVC 1.1.0 and higher, non-validation attributes are localized.</span></span> <span data-ttu-id="77187-167">O ASP.NET Core MVC 1.0 **não** pesquisa cadeias de caracteres localizadas para atributos que não sejam de validação.</span><span class="sxs-lookup"><span data-stu-id="77187-167">ASP.NET Core MVC 1.0 does **not** look up localized strings for non-validation attributes.</span></span>

<a name="one-resource-string-multiple-classes"></a>

### <a name="using-one-resource-string-for-multiple-classes"></a><span data-ttu-id="77187-168">Usando uma cadeia de caracteres de recurso para várias classes</span><span class="sxs-lookup"><span data-stu-id="77187-168">Using one resource string for multiple classes</span></span>

<span data-ttu-id="77187-169">O seguinte código mostra como usar uma cadeia de caracteres de recurso para atributos de validação com várias classes:</span><span class="sxs-lookup"><span data-stu-id="77187-169">The following code shows how to use one resource string for validation attributes with multiple classes:</span></span>

```csharp
public void ConfigureServices(IServiceCollection services)
{
    services.AddMvc()
        .AddDataAnnotationsLocalization(options => {
            options.DataAnnotationLocalizerProvider = (type, factory) =>
                factory.Create(typeof(SharedResource));
        });
}
```

<span data-ttu-id="77187-170">No código anterior, `SharedResource` é a classe correspondente ao resx em que as mensagens de validação são armazenadas.</span><span class="sxs-lookup"><span data-stu-id="77187-170">In the preceding code, `SharedResource` is the class corresponding to the resx where your validation messages are stored.</span></span> <span data-ttu-id="77187-171">Com essa abordagem, DataAnnotations usará apenas `SharedResource`, em vez de o recurso para cada classe.</span><span class="sxs-lookup"><span data-stu-id="77187-171">With this approach, DataAnnotations will only use `SharedResource`, rather than the resource for each class.</span></span>

## <a name="provide-localized-resources-for-the-languages-and-cultures-you-support"></a><span data-ttu-id="77187-172">Fornecer recursos localizados para as culturas e os idiomas aos quais você dá suporte</span><span class="sxs-lookup"><span data-stu-id="77187-172">Provide localized resources for the languages and cultures you support</span></span>

### <a name="supportedcultures-and-supporteduicultures"></a><span data-ttu-id="77187-173">SupportedCultures e SupportedUICultures</span><span class="sxs-lookup"><span data-stu-id="77187-173">SupportedCultures and SupportedUICultures</span></span>

<span data-ttu-id="77187-174">O ASP.NET Core permite que você especifique dois valores de cultura, `SupportedCultures` e `SupportedUICultures`.</span><span class="sxs-lookup"><span data-stu-id="77187-174">ASP.NET Core allows you to specify two culture values, `SupportedCultures` and `SupportedUICultures`.</span></span> <span data-ttu-id="77187-175">O objeto [CultureInfo](/dotnet/api/system.globalization.cultureinfo) para `SupportedCultures` determina os resultados das funções dependentes de cultura, como data, hora, número e formatação de moeda.</span><span class="sxs-lookup"><span data-stu-id="77187-175">The [CultureInfo](/dotnet/api/system.globalization.cultureinfo) object for `SupportedCultures` determines the results of culture-dependent functions, such as date, time, number, and currency formatting.</span></span> <span data-ttu-id="77187-176">`SupportedCultures` também determina a ordem de classificação de texto, convenções de uso de maiúsculas e comparações de cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="77187-176">`SupportedCultures` also determines the sorting order of text, casing conventions, and string comparisons.</span></span> <span data-ttu-id="77187-177">Consulte [CultureInfo.CurrentCulture](/dotnet/api/system.stringcomparer.currentculture#System_StringComparer_CurrentCulture) para obter mais informações sobre como o servidor obtém a Cultura.</span><span class="sxs-lookup"><span data-stu-id="77187-177">See [CultureInfo.CurrentCulture](/dotnet/api/system.stringcomparer.currentculture#System_StringComparer_CurrentCulture) for more info on how the server gets the Culture.</span></span> <span data-ttu-id="77187-178">O `SupportedUICultures` determina quais cadeias de caracteres traduzidas (de arquivos *. resx* ) são pesquisadas pelo [ResourceManager](/dotnet/api/system.resources.resourcemanager).</span><span class="sxs-lookup"><span data-stu-id="77187-178">The `SupportedUICultures` determines which translated strings (from *.resx* files) are looked up by the [ResourceManager](/dotnet/api/system.resources.resourcemanager).</span></span> <span data-ttu-id="77187-179">O `ResourceManager` apenas pesquisa cadeias de caracteres específicas a uma cultura determinadas por `CurrentUICulture`.</span><span class="sxs-lookup"><span data-stu-id="77187-179">The `ResourceManager` simply looks up culture-specific strings that's determined by `CurrentUICulture`.</span></span> <span data-ttu-id="77187-180">Cada thread no .NET tem objetos `CurrentCulture` e `CurrentUICulture`.</span><span class="sxs-lookup"><span data-stu-id="77187-180">Every thread in .NET has `CurrentCulture` and `CurrentUICulture` objects.</span></span> <span data-ttu-id="77187-181">O ASP.NET Core inspeciona esses valores durante a renderização de funções dependentes de cultura.</span><span class="sxs-lookup"><span data-stu-id="77187-181">ASP.NET Core inspects these values when rendering culture-dependent functions.</span></span> <span data-ttu-id="77187-182">Por exemplo, se a cultura do thread atual estiver definida como "en-US" (inglês, Estados Unidos), `DateTime.Now.ToLongDateString()` exibirá "Thursday, February 18, 2016", mas se `CurrentCulture` estiver definida como "es-ES" (espanhol, Espanha), o resultado será "jueves, 18 de febrero de 2016".</span><span class="sxs-lookup"><span data-stu-id="77187-182">For example, if the current thread's culture is set to "en-US" (English, United States), `DateTime.Now.ToLongDateString()` displays "Thursday, February 18, 2016", but if `CurrentCulture` is set to "es-ES" (Spanish, Spain) the output will be "jueves, 18 de febrero de 2016".</span></span>

## <a name="resource-files"></a><span data-ttu-id="77187-183">Arquivos de recurso</span><span class="sxs-lookup"><span data-stu-id="77187-183">Resource files</span></span>

<span data-ttu-id="77187-184">Um arquivo de recurso é um mecanismo útil para separar cadeias de caracteres localizáveis do código.</span><span class="sxs-lookup"><span data-stu-id="77187-184">A resource file is a useful mechanism for separating localizable strings from code.</span></span> <span data-ttu-id="77187-185">As cadeias de caracteres traduzidas para o idioma não padrão são isoladas em arquivos de recurso *. resx* .</span><span class="sxs-lookup"><span data-stu-id="77187-185">Translated strings for the non-default language are isolated in *.resx* resource files.</span></span> <span data-ttu-id="77187-186">Por exemplo, talvez você queira criar um arquivo de recurso em espanhol chamado *Welcome.es.resx* contendo cadeias de caracteres traduzidas.</span><span class="sxs-lookup"><span data-stu-id="77187-186">For example, you might want to create Spanish resource file named *Welcome.es.resx* containing translated strings.</span></span> <span data-ttu-id="77187-187">"es" são o código de idioma para o espanhol.</span><span class="sxs-lookup"><span data-stu-id="77187-187">"es" is the language code for Spanish.</span></span> <span data-ttu-id="77187-188">Para criar esse arquivo de recurso no Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="77187-188">To create this resource file in Visual Studio:</span></span>

1. <span data-ttu-id="77187-189">No **Gerenciador de Soluções**, clique com o botão direito do mouse na pasta que conterá o arquivo de recurso > **Adicionar** > **Novo Item**.</span><span class="sxs-lookup"><span data-stu-id="77187-189">In **Solution Explorer**, right click on the folder which will contain the resource file > **Add** > **New Item**.</span></span>

    ![Menu contextual aninhado: no Gerenciador de Soluções, um menu contextual é aberto para Recursos.](localization/_static/newi.png)

2. <span data-ttu-id="77187-192">Na caixa **Pesquisar modelos instalados**, insira "recurso" e nomeie o arquivo.</span><span class="sxs-lookup"><span data-stu-id="77187-192">In the **Search installed templates** box, enter "resource" and name the file.</span></span>

    ![Caixa de diálogo Adicionar Novo Item](localization/_static/res.png)

3. <span data-ttu-id="77187-194">Insira o valor da chave (cadeia de caracteres nativa) na coluna **Nome** e a cadeia de caracteres traduzida na coluna **Valor**.</span><span class="sxs-lookup"><span data-stu-id="77187-194">Enter the key value (native string) in the **Name** column and the translated string in the **Value** column.</span></span>

    ![Arquivo Welcome.es.resx (o arquivo de recurso Welcome em espanhol) com a palavra Hello na coluna Nome e a palavra Hola (Olá, em espanhol) na coluna valor](localization/_static/hola.png)

    <span data-ttu-id="77187-196">O Visual Studio mostra o arquivo *Welcome.es.resx*.</span><span class="sxs-lookup"><span data-stu-id="77187-196">Visual Studio shows the *Welcome.es.resx* file.</span></span>

    ![Gerenciador de Soluções mostrando o arquivo de recurso Welcome em espanhol (es)](localization/_static/se.png)

## <a name="resource-file-naming"></a><span data-ttu-id="77187-198">Nomenclatura do arquivo de recurso</span><span class="sxs-lookup"><span data-stu-id="77187-198">Resource file naming</span></span>

<span data-ttu-id="77187-199">Os recursos são nomeados com o nome completo do tipo de sua classe menos o nome do assembly.</span><span class="sxs-lookup"><span data-stu-id="77187-199">Resources are named for the full type name of their class minus the assembly name.</span></span> <span data-ttu-id="77187-200">Por exemplo, um recurso em francês em um projeto cujo assembly principal é `LocalizationWebsite.Web.dll` para a classe `LocalizationWebsite.Web.Startup` será nomeado *Startup.fr.resx*.</span><span class="sxs-lookup"><span data-stu-id="77187-200">For example, a French resource in a project whose main assembly is `LocalizationWebsite.Web.dll` for the class `LocalizationWebsite.Web.Startup` would be named *Startup.fr.resx*.</span></span> <span data-ttu-id="77187-201">Um recurso para a classe `LocalizationWebsite.Web.Controllers.HomeController` será nomeado *Controllers.HomeController.fr.resx*.</span><span class="sxs-lookup"><span data-stu-id="77187-201">A resource for the class `LocalizationWebsite.Web.Controllers.HomeController` would be named *Controllers.HomeController.fr.resx*.</span></span> <span data-ttu-id="77187-202">Se o namespace da classe de destino não for o mesmo que o nome do assembly, você precisará do nome completo do tipo.</span><span class="sxs-lookup"><span data-stu-id="77187-202">If your targeted class's namespace isn't the same as the assembly name you will need the full type name.</span></span> <span data-ttu-id="77187-203">Por exemplo, no projeto de exemplo, um recurso para o tipo `ExtraNamespace.Tools` será nomeado *ExtraNamespace.Tools.fr.resx*.</span><span class="sxs-lookup"><span data-stu-id="77187-203">For example, in the sample project a resource for the type `ExtraNamespace.Tools` would be named *ExtraNamespace.Tools.fr.resx*.</span></span>

<span data-ttu-id="77187-204">No projeto de exemplo, o método `ConfigureServices` define o `ResourcesPath` como "Resources", de modo que o caminho relativo do projeto para o arquivo de recurso em francês do controlador principal seja *Resources/Controllers.HomeController.fr.resx*.</span><span class="sxs-lookup"><span data-stu-id="77187-204">In the sample project, the `ConfigureServices` method sets the `ResourcesPath` to "Resources", so the project relative path for the home controller's French resource file is *Resources/Controllers.HomeController.fr.resx*.</span></span> <span data-ttu-id="77187-205">Como alternativa, você pode usar pastas para organizar arquivos de recurso.</span><span class="sxs-lookup"><span data-stu-id="77187-205">Alternatively, you can use folders to organize resource files.</span></span> <span data-ttu-id="77187-206">Para o controlador principal, o caminho será *Resources/Controllers/HomeController.fr.resx*.</span><span class="sxs-lookup"><span data-stu-id="77187-206">For the home controller, the path would be *Resources/Controllers/HomeController.fr.resx*.</span></span> <span data-ttu-id="77187-207">Se você não usar a opção `ResourcesPath`, o arquivo *.resx* entrará no diretório base do projeto.</span><span class="sxs-lookup"><span data-stu-id="77187-207">If you don't use the `ResourcesPath` option, the *.resx* file would go in the project base directory.</span></span> <span data-ttu-id="77187-208">O arquivo de recurso para `HomeController` será nomeado *Controllers.HomeController.fr.resx*.</span><span class="sxs-lookup"><span data-stu-id="77187-208">The resource file for `HomeController` would be named *Controllers.HomeController.fr.resx*.</span></span> <span data-ttu-id="77187-209">A opção de usar a convenção de nomenclatura de ponto ou caminho depende de como você deseja organizar os arquivos de recurso.</span><span class="sxs-lookup"><span data-stu-id="77187-209">The choice of using the dot or path naming convention depends on how you want to organize your resource files.</span></span>

| <span data-ttu-id="77187-210">Nome do recurso</span><span class="sxs-lookup"><span data-stu-id="77187-210">Resource name</span></span> | <span data-ttu-id="77187-211">Nomenclatura de ponto ou caminho</span><span class="sxs-lookup"><span data-stu-id="77187-211">Dot or path naming</span></span> |
| ------------   | ------------- |
| <span data-ttu-id="77187-212">Resources/Controllers.HomeController.fr.resx</span><span class="sxs-lookup"><span data-stu-id="77187-212">Resources/Controllers.HomeController.fr.resx</span></span> | <span data-ttu-id="77187-213">Ponto</span><span class="sxs-lookup"><span data-stu-id="77187-213">Dot</span></span>  |
| <span data-ttu-id="77187-214">Resources/Controllers/HomeController.fr.resx</span><span class="sxs-lookup"><span data-stu-id="77187-214">Resources/Controllers/HomeController.fr.resx</span></span>  | <span data-ttu-id="77187-215">Caminho</span><span class="sxs-lookup"><span data-stu-id="77187-215">Path</span></span> |
|    |     |

<span data-ttu-id="77187-216">Os arquivos de recurso usando `@inject IViewLocalizer` em Razor exibições seguem um padrão semelhante.</span><span class="sxs-lookup"><span data-stu-id="77187-216">Resource files using `@inject IViewLocalizer` in Razor views follow a similar pattern.</span></span> <span data-ttu-id="77187-217">O arquivo de recurso de uma exibição pode ser nomeado usando a nomenclatura de ponto ou de caminho.</span><span class="sxs-lookup"><span data-stu-id="77187-217">The resource file for a view can be named using either dot naming or path naming.</span></span> Razor<span data-ttu-id="77187-218">exiba os arquivos de recurso que imitam o caminho do arquivo de exibição associado.</span><span class="sxs-lookup"><span data-stu-id="77187-218"> view resource files mimic the path of their associated view file.</span></span> <span data-ttu-id="77187-219">Supondo que definimos o `ResourcesPath` como "Resources", o arquivo de recurso em francês associado à exibição *Views/Home/About.cshtml* pode ser um dos seguintes:</span><span class="sxs-lookup"><span data-stu-id="77187-219">Assuming we set the `ResourcesPath` to "Resources", the French resource file associated with the *Views/Home/About.cshtml* view could be either of the following:</span></span>

* <span data-ttu-id="77187-220">Resources/Views/Home/About.fr.resx</span><span class="sxs-lookup"><span data-stu-id="77187-220">Resources/Views/Home/About.fr.resx</span></span>

* <span data-ttu-id="77187-221">Resources/Views.Home.About.fr.resx</span><span class="sxs-lookup"><span data-stu-id="77187-221">Resources/Views.Home.About.fr.resx</span></span>

<span data-ttu-id="77187-222">Se você não usar a opção `ResourcesPath`, o arquivo *.resx* de uma exibição estará localizado na mesma pasta da exibição.</span><span class="sxs-lookup"><span data-stu-id="77187-222">If you don't use the `ResourcesPath` option, the *.resx* file for a view would be located in the same folder as the view.</span></span>

### <a name="rootnamespaceattribute"></a><span data-ttu-id="77187-223">RootNamespaceAttribute</span><span class="sxs-lookup"><span data-stu-id="77187-223">RootNamespaceAttribute</span></span> 

<span data-ttu-id="77187-224">O atributo [RootNamespace](/dotnet/api/microsoft.extensions.localization.rootnamespaceattribute?view=aspnetcore-2.1) fornece o namespace raiz de um assembly quando o namespace raiz de um assembly é diferente do nome do assembly.</span><span class="sxs-lookup"><span data-stu-id="77187-224">The [RootNamespace](/dotnet/api/microsoft.extensions.localization.rootnamespaceattribute?view=aspnetcore-2.1) attribute provides the root namespace of an assembly when the root namespace of an assembly is different than the assembly name.</span></span> 

> [!WARNING]
> <span data-ttu-id="77187-225">Isso pode ocorrer quando o nome de um projeto não é um identificador .NET válido.</span><span class="sxs-lookup"><span data-stu-id="77187-225">This can occur when a project's name is not a valid .NET identifier.</span></span> <span data-ttu-id="77187-226">Por exemplo `my-project-name.csproj` , usará o namespace raiz `my_project_name` e o nome do assembly `my-project-name` que levam a esse erro.</span><span class="sxs-lookup"><span data-stu-id="77187-226">For instance `my-project-name.csproj` will use the root namespace `my_project_name` and the assembly name `my-project-name` leading to this error.</span></span> 

<span data-ttu-id="77187-227">Se o namespace raiz de um assembly é diferente do nome do assembly:</span><span class="sxs-lookup"><span data-stu-id="77187-227">If the root namespace of an assembly is different than the assembly name:</span></span>

* <span data-ttu-id="77187-228">A localização não funciona por padrão.</span><span class="sxs-lookup"><span data-stu-id="77187-228">Localization does not work by default.</span></span>
* <span data-ttu-id="77187-229">A localização falha devido à maneira como os recursos são pesquisados dentro do assembly.</span><span class="sxs-lookup"><span data-stu-id="77187-229">Localization fails due to the way resources are searched for within the assembly.</span></span> <span data-ttu-id="77187-230">`RootNamespace` é um valor de tempo de build que não está disponível para o processo em execução.</span><span class="sxs-lookup"><span data-stu-id="77187-230">`RootNamespace` is a build-time value which is not available to the executing process.</span></span> 

<span data-ttu-id="77187-231">Se o `RootNamespace` é diferente de `AssemblyName`, inclua o seguinte no *AssemblyInfo.cs* (com valores de parâmetro substituídos pelos valores reais):</span><span class="sxs-lookup"><span data-stu-id="77187-231">If the `RootNamespace` is different from the `AssemblyName`, include the following in *AssemblyInfo.cs* (with parameter values replaced with the actual values):</span></span>

```csharp
using System.Reflection;
using Microsoft.Extensions.Localization;

[assembly: ResourceLocation("Resource Folder Name")]
[assembly: RootNamespace("App Root Namespace")]
```

<span data-ttu-id="77187-232">O código anterior permite a resolução bem-sucedida de arquivos resx.</span><span class="sxs-lookup"><span data-stu-id="77187-232">The preceding code enables the successful resolution of resx files.</span></span>

## <a name="culture-fallback-behavior"></a><span data-ttu-id="77187-233">Comportamento de fallback da cultura</span><span class="sxs-lookup"><span data-stu-id="77187-233">Culture fallback behavior</span></span>

<span data-ttu-id="77187-234">Ao procurar por um recurso, a localização participa do "fallback de cultura".</span><span class="sxs-lookup"><span data-stu-id="77187-234">When searching for a resource, localization engages in "culture fallback".</span></span> <span data-ttu-id="77187-235">Começando com a cultura solicitada, se ela não for encontrada, ela será revertida para a cultura pai dessa cultura.</span><span class="sxs-lookup"><span data-stu-id="77187-235">Starting from the requested culture, if not found, it reverts to the parent culture of that culture.</span></span> <span data-ttu-id="77187-236">Além disso, a propriedade [CultureInfo.Parent](/dotnet/api/system.globalization.cultureinfo.parent) representa a cultura pai.</span><span class="sxs-lookup"><span data-stu-id="77187-236">As an aside, the [CultureInfo.Parent](/dotnet/api/system.globalization.cultureinfo.parent) property represents the parent culture.</span></span> <span data-ttu-id="77187-237">Isso normalmente (mas nem sempre) significa a remoção do significante do ISO.</span><span class="sxs-lookup"><span data-stu-id="77187-237">This usually (but not always) means removing the national signifier from the ISO.</span></span> <span data-ttu-id="77187-238">Por exemplo, o dialeto do espanhol falado no México é "es-MX".</span><span class="sxs-lookup"><span data-stu-id="77187-238">For example, the dialect of Spanish spoken in Mexico is "es-MX".</span></span> <span data-ttu-id="77187-239">Ele tem o pai "es", ou seja, espanhol, não específico de nenhum país.</span><span class="sxs-lookup"><span data-stu-id="77187-239">It has the parent "es"&mdash;Spanish non-specific to any country.</span></span>

<span data-ttu-id="77187-240">Imagine que seu site receba uma solicitação de um recurso “Boas-vindas" usando a cultura"fr-CA".</span><span class="sxs-lookup"><span data-stu-id="77187-240">Imagine your site receives a request for a "Welcome" resource using culture "fr-CA".</span></span> <span data-ttu-id="77187-241">O sistema de localização procura os seguintes recursos, em ordem, e seleciona a primeira correspondência:</span><span class="sxs-lookup"><span data-stu-id="77187-241">The localization system looks for the following resources, in order, and selects the first match:</span></span>

* <span data-ttu-id="77187-242">*Welcome.fr-CA.resx*</span><span class="sxs-lookup"><span data-stu-id="77187-242">*Welcome.fr-CA.resx*</span></span>
* <span data-ttu-id="77187-243">*Welcome.fr.resx*</span><span class="sxs-lookup"><span data-stu-id="77187-243">*Welcome.fr.resx*</span></span>
* <span data-ttu-id="77187-244">*Welcome.resx* (se o `NeutralResourcesLanguage` for "fr-CA")</span><span class="sxs-lookup"><span data-stu-id="77187-244">*Welcome.resx* (if the `NeutralResourcesLanguage` is "fr-CA")</span></span>

<span data-ttu-id="77187-245">Por exemplo, se você remover o designador de cultura ".fr" e tiver a cultura definida como francês, o arquivo de recurso padrão será lido e as cadeias de caracteres serão localizadas.</span><span class="sxs-lookup"><span data-stu-id="77187-245">As an example, if you remove the ".fr" culture designator and you have the culture set to French, the default resource file is read and strings are localized.</span></span> <span data-ttu-id="77187-246">O Gerenciador de Recursos designa um padrão ou um recurso de fallback para quando nenhuma opção atende à cultura solicitada.</span><span class="sxs-lookup"><span data-stu-id="77187-246">The Resource manager designates a default or fallback resource for when nothing meets your requested culture.</span></span> <span data-ttu-id="77187-247">Se você deseja apenas retornar a chave quando um recurso está ausente para a cultura solicitada, não deve ter um arquivo de recurso padrão.</span><span class="sxs-lookup"><span data-stu-id="77187-247">If you want to just return the key when missing a resource for the requested culture you must not have a default resource file.</span></span>

### <a name="generate-resource-files-with-visual-studio"></a><span data-ttu-id="77187-248">Gerar arquivos de recurso com o Visual Studio</span><span class="sxs-lookup"><span data-stu-id="77187-248">Generate resource files with Visual Studio</span></span>

<span data-ttu-id="77187-249">Se você criar um arquivo de recurso no Visual Studio sem uma cultura no nome do arquivo (por exemplo, *Welcome.resx*), o Visual Studio criará uma classe do C# com uma propriedade para cada cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="77187-249">If you create a resource file in Visual Studio without a culture in the file name (for example, *Welcome.resx*), Visual Studio will create a C# class with a property for each string.</span></span> <span data-ttu-id="77187-250">Geralmente isso não é o desejado com o ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="77187-250">That's usually not what you want with ASP.NET Core.</span></span> <span data-ttu-id="77187-251">Normalmente você não tem um arquivo de recurso *.resx* padrão (um arquivo *.resx* sem o nome de cultura).</span><span class="sxs-lookup"><span data-stu-id="77187-251">You typically don't have a default *.resx* resource file (a *.resx* file without the culture name).</span></span> <span data-ttu-id="77187-252">Sugerimos que você crie o arquivo *.resx* com um nome de cultura (por exemplo *Welcome.fr.resx*).</span><span class="sxs-lookup"><span data-stu-id="77187-252">We suggest you create the *.resx* file with a culture name (for example *Welcome.fr.resx*).</span></span> <span data-ttu-id="77187-253">Quando você criar um arquivo *.resx* com um nome de cultura, o Visual Studio não gerará o arquivo de classe.</span><span class="sxs-lookup"><span data-stu-id="77187-253">When you create a *.resx* file with a culture name, Visual Studio won't generate the class file.</span></span>

### <a name="add-other-cultures"></a><span data-ttu-id="77187-254">Adicionar outras culturas</span><span class="sxs-lookup"><span data-stu-id="77187-254">Add other cultures</span></span>

<span data-ttu-id="77187-255">Cada combinação de idioma e cultura (que não seja o idioma padrão) exige um arquivo de recurso exclusivo.</span><span class="sxs-lookup"><span data-stu-id="77187-255">Each language and culture combination (other than the default language) requires a unique resource file.</span></span> <span data-ttu-id="77187-256">Crie arquivos de recurso para diferentes culturas e localidades criando novos arquivos de recurso, nos quais os códigos ISO e de idioma fazem parte do nome do arquivo (por exemplo, **en-us**, **fr-ca** e **en-gb**).</span><span class="sxs-lookup"><span data-stu-id="77187-256">You create resource files for different cultures and locales by creating new resource files in which the ISO language codes are part of the file name (for example, **en-us**, **fr-ca**, and **en-gb**).</span></span> <span data-ttu-id="77187-257">Esses códigos ISO são colocados entre o nome do arquivo e a extensão de arquivo *.resx*, como em *Welcome.es-MX.resx* (espanhol/México).</span><span class="sxs-lookup"><span data-stu-id="77187-257">These ISO codes are placed between the file name and the *.resx* file extension, as in *Welcome.es-MX.resx* (Spanish/Mexico).</span></span>

## <a name="implement-a-strategy-to-select-the-languageculture-for-each-request"></a><span data-ttu-id="77187-258">Implementar uma estratégia para selecionar o idioma e a cultura para cada solicitação</span><span class="sxs-lookup"><span data-stu-id="77187-258">Implement a strategy to select the language/culture for each request</span></span>

### <a name="configure-localization"></a><span data-ttu-id="77187-259">Configurar a localização</span><span class="sxs-lookup"><span data-stu-id="77187-259">Configure localization</span></span>

<span data-ttu-id="77187-260">A localização é configurada no método `Startup.ConfigureServices`:</span><span class="sxs-lookup"><span data-stu-id="77187-260">Localization is configured in the `Startup.ConfigureServices` method:</span></span>

[!code-csharp[](localization/sample/Localization/Startup.cs?name=snippet1)]

* <span data-ttu-id="77187-261">`AddLocalization` Adiciona os serviços de localização ao contêiner de serviços.</span><span class="sxs-lookup"><span data-stu-id="77187-261">`AddLocalization` Adds the localization services to the services container.</span></span> <span data-ttu-id="77187-262">O código acima também define o caminho de recursos como "Resources".</span><span class="sxs-lookup"><span data-stu-id="77187-262">The code above also sets the resources path to "Resources".</span></span>

* <span data-ttu-id="77187-263">`AddViewLocalization` Adiciona suporte para os arquivos de exibição localizados.</span><span class="sxs-lookup"><span data-stu-id="77187-263">`AddViewLocalization` Adds support for localized view files.</span></span> <span data-ttu-id="77187-264">Nesta amostra, a localização de exibição se baseia no sufixo do arquivo de exibição.</span><span class="sxs-lookup"><span data-stu-id="77187-264">In this sample view localization is based on the view file suffix.</span></span> <span data-ttu-id="77187-265">Por exemplo, "fr" no arquivo *Index.fr.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="77187-265">For example "fr" in the *Index.fr.cshtml* file.</span></span>

* <span data-ttu-id="77187-266">`AddDataAnnotationsLocalization` Adiciona suporte para as mensagens de validação `DataAnnotations` localizadas por meio de abstrações `IStringLocalizer`.</span><span class="sxs-lookup"><span data-stu-id="77187-266">`AddDataAnnotationsLocalization` Adds support for localized `DataAnnotations` validation messages through `IStringLocalizer` abstractions.</span></span>

### <a name="localization-middleware"></a><span data-ttu-id="77187-267">Middleware de localização</span><span class="sxs-lookup"><span data-stu-id="77187-267">Localization middleware</span></span>

<span data-ttu-id="77187-268">A cultura atual em uma solicitação é definida no [Middleware](xref:fundamentals/middleware/index) de localização.</span><span class="sxs-lookup"><span data-stu-id="77187-268">The current culture on a request is set in the localization [Middleware](xref:fundamentals/middleware/index).</span></span> <span data-ttu-id="77187-269">O middleware de localização é habilitado no método `Startup.Configure`.</span><span class="sxs-lookup"><span data-stu-id="77187-269">The localization middleware is enabled in the `Startup.Configure` method.</span></span> <span data-ttu-id="77187-270">O middleware de localização precisa ser configurado antes de qualquer middleware que possa verificar a cultura de solicitação (por exemplo, `app.UseMvcWithDefaultRoute()`).</span><span class="sxs-lookup"><span data-stu-id="77187-270">The localization middleware must be configured before any middleware which might check the request culture (for example, `app.UseMvcWithDefaultRoute()`).</span></span>

[!code-csharp[](localization/sample/Localization/Startup.cs?name=snippet2)]
[!INCLUDE[about the series](~/includes/code-comments-loc.md)]

<span data-ttu-id="77187-271">`UseRequestLocalization` inicializa um objeto `RequestLocalizationOptions`.</span><span class="sxs-lookup"><span data-stu-id="77187-271">`UseRequestLocalization` initializes a `RequestLocalizationOptions` object.</span></span> <span data-ttu-id="77187-272">Em cada solicitação, a lista de `RequestCultureProvider` em `RequestLocalizationOptions` é enumerada e o primeiro provedor que pode determinar com êxito a cultura de solicitação é usado.</span><span class="sxs-lookup"><span data-stu-id="77187-272">On every request the list of `RequestCultureProvider` in the `RequestLocalizationOptions` is enumerated and the first provider that can successfully determine the request culture is used.</span></span> <span data-ttu-id="77187-273">Os provedores padrão são obtidos da classe `RequestLocalizationOptions`:</span><span class="sxs-lookup"><span data-stu-id="77187-273">The default providers come from the `RequestLocalizationOptions` class:</span></span>

1. `QueryStringRequestCultureProvider`
2. `CookieRequestCultureProvider`
3. `AcceptLanguageHeaderRequestCultureProvider`

<span data-ttu-id="77187-274">A lista padrão é apresentada do mais específico ao menos específico.</span><span class="sxs-lookup"><span data-stu-id="77187-274">The default list goes from most specific to least specific.</span></span> <span data-ttu-id="77187-275">Mais adiante neste artigo, veremos como você pode alterar a ordem e até mesmo adicionar um provedor de cultura personalizado.</span><span class="sxs-lookup"><span data-stu-id="77187-275">Later in the article we'll see how you can change the order and even add a custom culture provider.</span></span> <span data-ttu-id="77187-276">Se nenhum dos provedores pode determinar a cultura de solicitação, o `DefaultRequestCulture` é usado.</span><span class="sxs-lookup"><span data-stu-id="77187-276">If none of the providers can determine the request culture, the `DefaultRequestCulture` is used.</span></span>

### <a name="querystringrequestcultureprovider"></a><span data-ttu-id="77187-277">QueryStringRequestCultureProvider</span><span class="sxs-lookup"><span data-stu-id="77187-277">QueryStringRequestCultureProvider</span></span>

<span data-ttu-id="77187-278">Alguns aplicativos usarão uma cadeia de caracteres de consulta para definir a [cultura e a cultura da interface do usuário](https://msdn.microsoft.com/library/system.globalization.cultureinfo.aspx).</span><span class="sxs-lookup"><span data-stu-id="77187-278">Some apps will use a query string to set the [culture and UI culture](https://msdn.microsoft.com/library/system.globalization.cultureinfo.aspx).</span></span> <span data-ttu-id="77187-279">Para aplicativos que usam a abordagem do cabeçalho Accept-Language ou do cookie, a adição de uma cadeia de caracteres de consulta à URL é útil para depurar e testar o código.</span><span class="sxs-lookup"><span data-stu-id="77187-279">For apps that use the cookie or Accept-Language header approach, adding a query string to the URL is useful for debugging and testing code.</span></span> <span data-ttu-id="77187-280">Por padrão, o `QueryStringRequestCultureProvider` é registrado como o primeiro provedor de localização na lista `RequestCultureProvider`.</span><span class="sxs-lookup"><span data-stu-id="77187-280">By default, the `QueryStringRequestCultureProvider` is registered as the first localization provider in the `RequestCultureProvider` list.</span></span> <span data-ttu-id="77187-281">Passe os parâmetros `culture` e `ui-culture` da cadeia de caracteres de consulta.</span><span class="sxs-lookup"><span data-stu-id="77187-281">You pass the query string parameters `culture` and `ui-culture`.</span></span> <span data-ttu-id="77187-282">O seguinte exemplo define a cultura específica (idioma e região) como espanhol/México:</span><span class="sxs-lookup"><span data-stu-id="77187-282">The following example sets the specific culture (language and region) to Spanish/Mexico:</span></span>

   `http://localhost:5000/?culture=es-MX&ui-culture=es-MX`

<span data-ttu-id="77187-283">Se você passar somente uma das duas (`culture` ou `ui-culture`), o provedor da cadeia de caracteres de consulta definirá os dois valores usando aquela que foi passada.</span><span class="sxs-lookup"><span data-stu-id="77187-283">If you only pass in one of the two (`culture` or `ui-culture`), the query string provider will set both values using the one you passed in.</span></span> <span data-ttu-id="77187-284">Por exemplo, a definição apenas da cultura definirá a `Culture` e a `UICulture`:</span><span class="sxs-lookup"><span data-stu-id="77187-284">For example, setting just the culture will set both the `Culture` and the `UICulture`:</span></span>

   `http://localhost:5000/?culture=es-MX`

### <a name="cookierequestcultureprovider"></a><span data-ttu-id="77187-285">CookieRequestCultureProvider</span><span class="sxs-lookup"><span data-stu-id="77187-285">CookieRequestCultureProvider</span></span>

<span data-ttu-id="77187-286">Em geral, aplicativos de produção fornecerão um mecanismo para definir a cultura com o cookie de cultura do ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="77187-286">Production apps will often provide a mechanism to set the culture with the ASP.NET Core culture cookie.</span></span> <span data-ttu-id="77187-287">Use o método `MakeCookieValue` para criar um cookie.</span><span class="sxs-lookup"><span data-stu-id="77187-287">Use the `MakeCookieValue` method to create a cookie.</span></span>

<span data-ttu-id="77187-288">O `CookieRequestCultureProvider` `DefaultCookieName` retorna o nome de cookie padrão usado para rastrear as informações de cultura preferencial do usuário.</span><span class="sxs-lookup"><span data-stu-id="77187-288">The `CookieRequestCultureProvider` `DefaultCookieName` returns the default cookie name used to track the user's preferred culture information.</span></span> <span data-ttu-id="77187-289">O nome padrão do cookie é `.AspNetCore.Culture`.</span><span class="sxs-lookup"><span data-stu-id="77187-289">The default cookie name is `.AspNetCore.Culture`.</span></span>

<span data-ttu-id="77187-290">O formato do cookie é `c=%LANGCODE%|uic=%LANGCODE%`, em que `c` é `Culture` e `uic` é `UICulture`, por exemplo:</span><span class="sxs-lookup"><span data-stu-id="77187-290">The cookie format is `c=%LANGCODE%|uic=%LANGCODE%`, where `c` is `Culture` and `uic` is `UICulture`, for example:</span></span>

    c=en-UK|uic=en-US

<span data-ttu-id="77187-291">Se você especificar apenas as informações de cultura e a cultura da interface do usuário, a cultura especificada será usada para as informações de cultura e para a cultura da interface do usuário.</span><span class="sxs-lookup"><span data-stu-id="77187-291">If you only specify one of culture info and UI culture, the specified culture will be used for both culture info and UI culture.</span></span>

### <a name="the-accept-language-http-header"></a><span data-ttu-id="77187-292">O cabeçalho HTTP Accept-Language</span><span class="sxs-lookup"><span data-stu-id="77187-292">The Accept-Language HTTP header</span></span>

<span data-ttu-id="77187-293">O [cabeçalho Accept-Language](https://www.w3.org/International/questions/qa-accept-lang-locales) é configurável na maioria dos navegadores e originalmente foi criado para especificar o idioma do usuário.</span><span class="sxs-lookup"><span data-stu-id="77187-293">The [Accept-Language header](https://www.w3.org/International/questions/qa-accept-lang-locales) is settable in most browsers and was originally intended to specify the user's language.</span></span> <span data-ttu-id="77187-294">Essa configuração indica que o navegador foi definido para enviar ou herdou do sistema operacional subjacente.</span><span class="sxs-lookup"><span data-stu-id="77187-294">This setting indicates what the browser has been set to send or has inherited from the underlying operating system.</span></span> <span data-ttu-id="77187-295">O cabeçalho HTTP Accept-Language de uma solicitação do navegador não é uma maneira infalível de detectar o idioma preferencial do usuário (consulte [Definindo preferências de idioma em um navegador](https://www.w3.org/International/questions/qa-lang-priorities.en.php)).</span><span class="sxs-lookup"><span data-stu-id="77187-295">The Accept-Language HTTP header from a browser request isn't an infallible way to detect the user's preferred language (see [Setting language preferences in a browser](https://www.w3.org/International/questions/qa-lang-priorities.en.php)).</span></span> <span data-ttu-id="77187-296">Um aplicativo de produção deve incluir uma maneira para que um usuário personalize sua opção de cultura.</span><span class="sxs-lookup"><span data-stu-id="77187-296">A production app should include a way for a user to customize their choice of culture.</span></span>

### <a name="set-the-accept-language-http-header-in-ie"></a><span data-ttu-id="77187-297">Definir o cabeçalho HTTP Accept-Language no IE</span><span class="sxs-lookup"><span data-stu-id="77187-297">Set the Accept-Language HTTP header in IE</span></span>

1. <span data-ttu-id="77187-298">No ícone de engrenagem, toque em **Opções da Internet**.</span><span class="sxs-lookup"><span data-stu-id="77187-298">From the gear icon, tap **Internet Options**.</span></span>

2. <span data-ttu-id="77187-299">Toque em **Idiomas**.</span><span class="sxs-lookup"><span data-stu-id="77187-299">Tap **Languages**.</span></span>

    ![Opções da Internet](localization/_static/lang.png)

3. <span data-ttu-id="77187-301">Toque em **Definir Preferências de Idioma**.</span><span class="sxs-lookup"><span data-stu-id="77187-301">Tap **Set Language Preferences**.</span></span>

4. <span data-ttu-id="77187-302">Toque em **Adicionar um idioma**.</span><span class="sxs-lookup"><span data-stu-id="77187-302">Tap **Add a language**.</span></span>

5. <span data-ttu-id="77187-303">Adicione o idioma.</span><span class="sxs-lookup"><span data-stu-id="77187-303">Add the language.</span></span>

6. <span data-ttu-id="77187-304">Toque no idioma e, em seguida, em **Mover Para Cima**.</span><span class="sxs-lookup"><span data-stu-id="77187-304">Tap the language, then tap **Move Up**.</span></span>

### <a name="use-a-custom-provider"></a><span data-ttu-id="77187-305">Usar um provedor personalizado</span><span class="sxs-lookup"><span data-stu-id="77187-305">Use a custom provider</span></span>

<span data-ttu-id="77187-306">Suponha que você deseje permitir que os clientes armazenem seus idiomas e culturas nos bancos de dados.</span><span class="sxs-lookup"><span data-stu-id="77187-306">Suppose you want to let your customers store their language and culture in your databases.</span></span> <span data-ttu-id="77187-307">Você pode escrever um provedor para pesquisar esses valores para o usuário.</span><span class="sxs-lookup"><span data-stu-id="77187-307">You could write a provider to look up these values for the user.</span></span> <span data-ttu-id="77187-308">O seguinte código mostra como adicionar um provedor personalizado:</span><span class="sxs-lookup"><span data-stu-id="77187-308">The following code shows how to add a custom provider:</span></span>

```csharp
private const string enUSCulture = "en-US";

services.Configure<RequestLocalizationOptions>(options =>
{
    var supportedCultures = new[]
    {
        new CultureInfo(enUSCulture),
        new CultureInfo("fr")
    };

    options.DefaultRequestCulture = new RequestCulture(culture: enUSCulture, uiCulture: enUSCulture);
    options.SupportedCultures = supportedCultures;
    options.SupportedUICultures = supportedCultures;

    options.AddInitialRequestCultureProvider(new CustomRequestCultureProvider(async context =>
    {
        // My custom request culture logic
        return new ProviderCultureResult("en");
    }));
});
```

<span data-ttu-id="77187-309">Use `RequestLocalizationOptions` para adicionar ou remover provedores de localização.</span><span class="sxs-lookup"><span data-stu-id="77187-309">Use `RequestLocalizationOptions` to add or remove localization providers.</span></span>

### <a name="set-the-culture-programmatically"></a><span data-ttu-id="77187-310">Definir a cultura de forma programática</span><span class="sxs-lookup"><span data-stu-id="77187-310">Set the culture programmatically</span></span>

<span data-ttu-id="77187-311">Este projeto de exemplo **Localization.StarterWeb** no [GitHub](https://github.com/aspnet/entropy) contém a interface do usuário para definir a `Culture`.</span><span class="sxs-lookup"><span data-stu-id="77187-311">This sample **Localization.StarterWeb** project on [GitHub](https://github.com/aspnet/entropy) contains UI to set the `Culture`.</span></span> <span data-ttu-id="77187-312">O arquivo *Views/Shared/_SelectLanguagePartial.cshtml* permite que você selecione a cultura na lista de culturas compatíveis:</span><span class="sxs-lookup"><span data-stu-id="77187-312">The *Views/Shared/_SelectLanguagePartial.cshtml* file allows you to select the culture from the list of supported cultures:</span></span>

[!code-cshtml[](localization/sample/Localization/Views/Shared/_SelectLanguagePartial.cshtml)]

<span data-ttu-id="77187-313">O arquivo *Views/Shared/_SelectLanguagePartial.cshtml* é adicionado à seção `footer` do arquivo de layout para que ele fique disponível para todos os exibições:</span><span class="sxs-lookup"><span data-stu-id="77187-313">The *Views/Shared/_SelectLanguagePartial.cshtml* file is added to the `footer` section of the layout file so it will be available to all views:</span></span>

[!code-cshtml[](localization/sample/Localization/Views/Shared/_Layout.cshtml?range=43-56&highlight=10)]

<span data-ttu-id="77187-314">O método `SetLanguage` define o cookie de cultura.</span><span class="sxs-lookup"><span data-stu-id="77187-314">The `SetLanguage` method sets the culture cookie.</span></span>

[!code-csharp[](localization/sample/Localization/Controllers/HomeController.cs?range=57-67)]

<span data-ttu-id="77187-315">Não é possível conectar o *_SelectLanguagePartial.cshtml* ao código de exemplo para este projeto.</span><span class="sxs-lookup"><span data-stu-id="77187-315">You can't plug in the *_SelectLanguagePartial.cshtml* to sample code for this project.</span></span> <span data-ttu-id="77187-316">O projeto **Localization. StarterWeb** no [GitHub](https://github.com/aspnet/entropy) tem código para fluir `RequestLocalizationOptions` para um Razor parcial por meio do contêiner de [injeção de dependência](dependency-injection.md) .</span><span class="sxs-lookup"><span data-stu-id="77187-316">The **Localization.StarterWeb** project on [GitHub](https://github.com/aspnet/entropy) has code to flow the `RequestLocalizationOptions` to a Razor partial through the [Dependency Injection](dependency-injection.md) container.</span></span>

## <a name="model-binding-route-data-and-query-strings"></a><span data-ttu-id="77187-317">Dados de rota de associação de modelo e cadeias de caracteres de consulta</span><span class="sxs-lookup"><span data-stu-id="77187-317">Model binding route data and query strings</span></span>

<span data-ttu-id="77187-318">Consulte [comportamento de globalização de dados de rota de associação de modelo e cadeias de consulta](xref:mvc/models/model-binding#glob).</span><span class="sxs-lookup"><span data-stu-id="77187-318">See [Globalization behavior of model binding route data and query strings](xref:mvc/models/model-binding#glob).</span></span>

## <a name="globalization-and-localization-terms"></a><span data-ttu-id="77187-319">Termos de globalização e localização</span><span class="sxs-lookup"><span data-stu-id="77187-319">Globalization and localization terms</span></span>

<span data-ttu-id="77187-320">O processo de localização do aplicativo também exige uma compreensão básica dos conjuntos de caracteres relevantes geralmente usados no desenvolvimento moderno de software e uma compreensão dos problemas associados a eles.</span><span class="sxs-lookup"><span data-stu-id="77187-320">The process of localizing your app also requires a basic understanding of relevant character sets commonly used in modern software development and an understanding of the issues associated with them.</span></span> <span data-ttu-id="77187-321">Embora todos os computadores armazenem texto como números (códigos), diferentes sistemas armazenam o mesmo texto usando números diferentes.</span><span class="sxs-lookup"><span data-stu-id="77187-321">Although all computers store text as numbers (codes), different systems store the same text using different numbers.</span></span> <span data-ttu-id="77187-322">O processo de localização se refere à tradução da interface do usuário do aplicativo para uma cultura/localidade específica.</span><span class="sxs-lookup"><span data-stu-id="77187-322">The localization process refers to translating the app user interface (UI) for a specific culture/locale.</span></span>

<span data-ttu-id="77187-323">[Possibilidade de localização](/dotnet/standard/globalization-localization/localizability-review) é um processo intermediário usado para verificar se um aplicativo globalizado está pronto para localização.</span><span class="sxs-lookup"><span data-stu-id="77187-323">[Localizability](/dotnet/standard/globalization-localization/localizability-review) is an intermediate process for verifying that a globalized app is ready for localization.</span></span>

<span data-ttu-id="77187-324">O formato [RFC 4646](https://www.ietf.org/rfc/rfc4646.txt) para o nome de cultura é `<languagecode2>-<country/regioncode2>`, em que `<languagecode2>` é o código de idioma e `<country/regioncode2>` é o código de subcultura.</span><span class="sxs-lookup"><span data-stu-id="77187-324">The [RFC 4646](https://www.ietf.org/rfc/rfc4646.txt) format for the culture name is `<languagecode2>-<country/regioncode2>`, where `<languagecode2>` is the language code and `<country/regioncode2>` is the subculture code.</span></span> <span data-ttu-id="77187-325">Por exemplo, `es-CL` para Espanhol (Chile), `en-US` para inglês (Estados Unidos) e `en-AU` para inglês (Austrália).</span><span class="sxs-lookup"><span data-stu-id="77187-325">For example, `es-CL` for Spanish (Chile), `en-US` for English (United States), and `en-AU` for English (Australia).</span></span> <span data-ttu-id="77187-326">O [RFC 4646](https://www.ietf.org/rfc/rfc4646.txt) é uma combinação de um código de cultura de duas letras minúsculas ISO 639 associado a um idioma e um código de subcultura de duas letras maiúsculas ISO 3166 associado a um país ou uma região.</span><span class="sxs-lookup"><span data-stu-id="77187-326">[RFC 4646](https://www.ietf.org/rfc/rfc4646.txt) is a combination of an ISO 639 two-letter lowercase culture code associated with a language and an ISO 3166 two-letter uppercase subculture code associated with a country or region.</span></span> <span data-ttu-id="77187-327">Consulte [Nome da cultura de idioma](https://msdn.microsoft.com/library/ee825488(v=cs.20).aspx).</span><span class="sxs-lookup"><span data-stu-id="77187-327">See [Language Culture Name](https://msdn.microsoft.com/library/ee825488(v=cs.20).aspx).</span></span>

<span data-ttu-id="77187-328">Muitas vezes, internacionalização é abreviada como "I18N".</span><span class="sxs-lookup"><span data-stu-id="77187-328">Internationalization is often abbreviated to "I18N".</span></span> <span data-ttu-id="77187-329">A abreviação usa a primeira e última letras e o número de letras entre elas e, portanto, 18 significa o número de letras entre o primeiro "I" e o último "N".</span><span class="sxs-lookup"><span data-stu-id="77187-329">The abbreviation takes the first and last letters and the number of letters between them, so 18 stands for the number of letters between the first "I" and the last "N".</span></span> <span data-ttu-id="77187-330">O mesmo se aplica a Globalização (G11N) e Localização (L10N).</span><span class="sxs-lookup"><span data-stu-id="77187-330">The same applies to Globalization (G11N), and Localization (L10N).</span></span>

<span data-ttu-id="77187-331">Termos:</span><span class="sxs-lookup"><span data-stu-id="77187-331">Terms:</span></span>

* <span data-ttu-id="77187-332">Globalização (G11N): o processo de fazer com que um aplicativo dê suporte a diferentes idiomas e regiões.</span><span class="sxs-lookup"><span data-stu-id="77187-332">Globalization (G11N): The process of making an app support different languages and regions.</span></span>
* <span data-ttu-id="77187-333">Localização (L10N): o processo de personalizar um aplicativo para determinado idioma e região.</span><span class="sxs-lookup"><span data-stu-id="77187-333">Localization (L10N): The process of customizing an app for a given language and region.</span></span>
* <span data-ttu-id="77187-334">Internacionalização (I18N): descreve a globalização e a localização.</span><span class="sxs-lookup"><span data-stu-id="77187-334">Internationalization (I18N): Describes both globalization and localization.</span></span>
* <span data-ttu-id="77187-335">Cultura: um idioma e, opcionalmente, uma região.</span><span class="sxs-lookup"><span data-stu-id="77187-335">Culture: It's a language and, optionally, a region.</span></span>
* <span data-ttu-id="77187-336">Cultura neutra: uma cultura que tem um idioma especificado, mas não uma região.</span><span class="sxs-lookup"><span data-stu-id="77187-336">Neutral culture: A culture that has a specified language, but not a region.</span></span> <span data-ttu-id="77187-337">(por exemplo, "en", "es")</span><span class="sxs-lookup"><span data-stu-id="77187-337">(for example "en", "es")</span></span>
* <span data-ttu-id="77187-338">Cultura específica: uma cultura que tem um idioma e uma região especificados.</span><span class="sxs-lookup"><span data-stu-id="77187-338">Specific culture: A culture that has a specified language and region.</span></span> <span data-ttu-id="77187-339">(por exemplo, "en-US", "en-GB", "es-CL")</span><span class="sxs-lookup"><span data-stu-id="77187-339">(for example "en-US", "en-GB", "es-CL")</span></span>
* <span data-ttu-id="77187-340">Cultura pai: a cultura neutra que contém uma cultura específica.</span><span class="sxs-lookup"><span data-stu-id="77187-340">Parent culture: The neutral culture that contains a specific culture.</span></span> <span data-ttu-id="77187-341">(por exemplo, "en" é a cultura pai de "en-US" e "en-GB")</span><span class="sxs-lookup"><span data-stu-id="77187-341">(for example, "en" is the parent culture of "en-US" and "en-GB")</span></span>
* <span data-ttu-id="77187-342">Localidade: uma localidade é o mesmo que uma cultura.</span><span class="sxs-lookup"><span data-stu-id="77187-342">Locale: A locale is the same as a culture.</span></span>

[!INCLUDE[](~/includes/localization/currency.md)]

[!INCLUDE[](~/includes/localization/unsupported-culture-log-level.md)]

## <a name="additional-resources"></a><span data-ttu-id="77187-343">Recursos adicionais</span><span class="sxs-lookup"><span data-stu-id="77187-343">Additional resources</span></span>

* <xref:fundamentals/troubleshoot-aspnet-core-localization>
* <span data-ttu-id="77187-344">O [projeto Localization.StarterWeb](https://github.com/aspnet/Entropy/tree/master/samples/Localization.StarterWeb) usado no artigo.</span><span class="sxs-lookup"><span data-stu-id="77187-344">[Localization.StarterWeb project](https://github.com/aspnet/Entropy/tree/master/samples/Localization.StarterWeb) used in the article.</span></span>
* [<span data-ttu-id="77187-345">Globalizando e localizando aplicativos do .NET</span><span class="sxs-lookup"><span data-stu-id="77187-345">Globalizing and localizing .NET applications</span></span>](/dotnet/standard/globalization-localization/index)
* [<span data-ttu-id="77187-346">Recursos em arquivos. resx</span><span class="sxs-lookup"><span data-stu-id="77187-346">Resources in .resx Files</span></span>](/dotnet/framework/resources/working-with-resx-files-programmatically)
* [<span data-ttu-id="77187-347">Kit de Ferramentas de Aplicativo Multilíngue da Microsoft</span><span class="sxs-lookup"><span data-stu-id="77187-347">Microsoft Multilingual App Toolkit</span></span>](https://marketplace.visualstudio.com/items?itemName=MultilingualAppToolkit.MultilingualAppToolkit-18308)
* [<span data-ttu-id="77187-348">Localização e genéricos</span><span class="sxs-lookup"><span data-stu-id="77187-348">Localization & Generics</span></span>](http://hishambinateya.com/localization-and-generics)

::: moniker-end

::: moniker range="< aspnetcore-3.0"

<span data-ttu-id="77187-349">Por [Rick Anderson](https://twitter.com/RickAndMSFT), [Damien Bowden](https://twitter.com/damien_bod), [Bart Calixto](https://twitter.com/bartmax), [Nadeem Afana](https://afana.me/) e [Hisham Bin Ateya](https://twitter.com/hishambinateya)</span><span class="sxs-lookup"><span data-stu-id="77187-349">By [Rick Anderson](https://twitter.com/RickAndMSFT), [Damien Bowden](https://twitter.com/damien_bod), [Bart Calixto](https://twitter.com/bartmax), [Nadeem Afana](https://afana.me/), and [Hisham Bin Ateya](https://twitter.com/hishambinateya)</span></span>

<span data-ttu-id="77187-350">Um site multilíngue permite que o site alcance um público mais amplo.</span><span class="sxs-lookup"><span data-stu-id="77187-350">A multilingual website allows the site to reach a wider audience.</span></span> <span data-ttu-id="77187-351">O ASP.NET Core fornece serviços e middleware para localização em diferentes idiomas e culturas.</span><span class="sxs-lookup"><span data-stu-id="77187-351">ASP.NET Core provides services and middleware for localizing into different languages and cultures.</span></span>

<span data-ttu-id="77187-352">A internacionalização envolve [Globalização](/dotnet/api/system.globalization) e [Localização](/dotnet/standard/globalization-localization/localization).</span><span class="sxs-lookup"><span data-stu-id="77187-352">Internationalization involves [Globalization](/dotnet/api/system.globalization) and [Localization](/dotnet/standard/globalization-localization/localization).</span></span> <span data-ttu-id="77187-353">Globalização é o processo de criação de aplicativos que dão suporte a diferentes culturas.</span><span class="sxs-lookup"><span data-stu-id="77187-353">Globalization is the process of designing apps that support different cultures.</span></span> <span data-ttu-id="77187-354">A globalização adiciona suporte para entrada, exibição e saída de um conjunto definido de scripts de idiomas relacionados a áreas geográficas específicas.</span><span class="sxs-lookup"><span data-stu-id="77187-354">Globalization adds support for input, display, and output of a defined set of language scripts that relate to specific geographic areas.</span></span>

<span data-ttu-id="77187-355">Localização é o processo de adaptar um aplicativo globalizado, que você já processou para possibilidade de localização, a determinada cultura/localidade.</span><span class="sxs-lookup"><span data-stu-id="77187-355">Localization is the process of adapting a globalized app, which you have already processed for localizability, to a particular culture/locale.</span></span> <span data-ttu-id="77187-356">Para obter mais informações, consulte **Termos de globalização e localização** próximo ao final deste documento.</span><span class="sxs-lookup"><span data-stu-id="77187-356">For more information see **Globalization and localization terms** near the end of this document.</span></span>

<span data-ttu-id="77187-357">A localização de aplicativos envolve o seguinte:</span><span class="sxs-lookup"><span data-stu-id="77187-357">App localization involves the following:</span></span>

1. <span data-ttu-id="77187-358">Tornar o conteúdo do aplicativo localizável</span><span class="sxs-lookup"><span data-stu-id="77187-358">Make the app's content localizable</span></span>
1. <span data-ttu-id="77187-359">Fornecer recursos localizados para as culturas e os idiomas aos quais você dá suporte</span><span class="sxs-lookup"><span data-stu-id="77187-359">Provide localized resources for the languages and cultures you support</span></span>
1. <span data-ttu-id="77187-360">Implementar uma estratégia para selecionar o idioma e a cultura para cada solicitação</span><span class="sxs-lookup"><span data-stu-id="77187-360">Implement a strategy to select the language/culture for each request</span></span>

<span data-ttu-id="77187-361">[Exibir ou baixar código de exemplo](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/localization/sample/Localization) ([como baixar](xref:index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="77187-361">[View or download sample code](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/localization/sample/Localization) ([how to download](xref:index#how-to-download-a-sample))</span></span>

## <a name="make-the-apps-content-localizable"></a><span data-ttu-id="77187-362">Tornar o conteúdo do aplicativo localizável</span><span class="sxs-lookup"><span data-stu-id="77187-362">Make the app's content localizable</span></span>

<span data-ttu-id="77187-363"><xref:Microsoft.Extensions.Localization.IStringLocalizer>e <xref:Microsoft.Extensions.Localization.IStringLocalizer%601> foram arquitetados para melhorar a produtividade ao desenvolver aplicativos localizados.</span><span class="sxs-lookup"><span data-stu-id="77187-363"><xref:Microsoft.Extensions.Localization.IStringLocalizer> and <xref:Microsoft.Extensions.Localization.IStringLocalizer%601> were architected to improve productivity when developing localized apps.</span></span> <span data-ttu-id="77187-364">`IStringLocalizer`usa o <xref:System.Resources.ResourceManager> e o <xref:System.Resources.ResourceReader> para fornecer recursos específicos de cultura em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="77187-364">`IStringLocalizer` uses the <xref:System.Resources.ResourceManager> and <xref:System.Resources.ResourceReader> to provide culture-specific resources at run time.</span></span> <span data-ttu-id="77187-365">A interface tem um indexador e um `IEnumerable` para retornar cadeias de caracteres localizadas.</span><span class="sxs-lookup"><span data-stu-id="77187-365">The interface has an indexer and an `IEnumerable` for returning localized strings.</span></span> <span data-ttu-id="77187-366">`IStringLocalizer`Não requer o armazenamento das cadeias de caracteres de idioma padrão em um arquivo de recurso.</span><span class="sxs-lookup"><span data-stu-id="77187-366">`IStringLocalizer` doesn't require storing the default language strings in a resource file.</span></span> <span data-ttu-id="77187-367">Você pode desenvolver um aplicativo direcionado à localização e não precisa criar arquivos de recurso no início do desenvolvimento.</span><span class="sxs-lookup"><span data-stu-id="77187-367">You can develop an app targeted for localization and not need to create resource files early in development.</span></span> <span data-ttu-id="77187-368">O código abaixo mostra como encapsular a cadeia de caracteres "About Title" para localização.</span><span class="sxs-lookup"><span data-stu-id="77187-368">The code below shows how to wrap the string "About Title" for localization.</span></span>

[!code-csharp[](localization/sample/Localization/Controllers/AboutController.cs)]

<span data-ttu-id="77187-369">No código anterior, a `IStringLocalizer<T>` implementação vem da [injeção de dependência](dependency-injection.md).</span><span class="sxs-lookup"><span data-stu-id="77187-369">In the preceding code, the `IStringLocalizer<T>` implementation comes from [Dependency Injection](dependency-injection.md).</span></span> <span data-ttu-id="77187-370">Se o valor localizado de "About Title" não é encontrado, a chave do indexador é retornada, ou seja, a cadeia de caracteres "About Title".</span><span class="sxs-lookup"><span data-stu-id="77187-370">If the localized value of "About Title" isn't found, then the indexer key is returned, that is, the string "About Title".</span></span> <span data-ttu-id="77187-371">Deixe as cadeias de caracteres literais de idioma padrão no aplicativo e encapsule-as no localizador, de modo que você possa se concentrar no desenvolvimento do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="77187-371">You can leave the default language literal strings in the app and wrap them in the localizer, so that you can focus on developing the app.</span></span> <span data-ttu-id="77187-372">Você pode desenvolve seu aplicativo com o idioma padrão e prepará-lo para a etapa de localização sem primeiro criar um arquivo de recurso padrão.</span><span class="sxs-lookup"><span data-stu-id="77187-372">You develop your app with your default language and prepare it for the localization step without first creating a default resource file.</span></span> <span data-ttu-id="77187-373">Como alternativa, você pode usar a abordagem tradicional e fornecer uma chave para recuperar a cadeia de caracteres de idioma padrão.</span><span class="sxs-lookup"><span data-stu-id="77187-373">Alternatively, you can use the traditional approach and provide a key to retrieve the default language string.</span></span> <span data-ttu-id="77187-374">Para muitos desenvolvedores, o novo fluxo de trabalho de não ter um arquivo *.resx* de idioma padrão e simplesmente encapsular os literais de cadeia de caracteres pode reduzir a sobrecarga de localizar um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="77187-374">For many developers the new workflow of not having a default language *.resx* file and simply wrapping the string literals can reduce the overhead of localizing an app.</span></span> <span data-ttu-id="77187-375">Outros desenvolvedores preferirão o fluxo de trabalho tradicional, pois ele pode facilitar o trabalho com literais de cadeia de caracteres mais longas e a atualização de cadeias de caracteres localizadas.</span><span class="sxs-lookup"><span data-stu-id="77187-375">Other developers will prefer the traditional work flow as it can make it easier to work with longer string literals and make it easier to update localized strings.</span></span>

<span data-ttu-id="77187-376">Use a implementação `IHtmlLocalizer<T>` para recursos que contêm HTML.</span><span class="sxs-lookup"><span data-stu-id="77187-376">Use the `IHtmlLocalizer<T>` implementation for resources that contain HTML.</span></span> <span data-ttu-id="77187-377">O `IHtmlLocalizer` codifica em HTML os argumentos que são formatados na cadeia de caracteres de recurso, mas não codifica em HTML a cadeia de caracteres de recurso em si.</span><span class="sxs-lookup"><span data-stu-id="77187-377">`IHtmlLocalizer` HTML encodes arguments that are formatted in the resource string, but doesn't HTML encode the resource string itself.</span></span> <span data-ttu-id="77187-378">Na amostra realçada abaixo, apenas o valor do parâmetro `name` é codificado em HTML.</span><span class="sxs-lookup"><span data-stu-id="77187-378">In the sample highlighted below, only the value of `name` parameter is HTML encoded.</span></span>

[!code-csharp[](../fundamentals/localization/sample/Localization/Controllers/BookController.cs?highlight=3,5,20&start=1&end=24)]

<span data-ttu-id="77187-379">**Observação:** em geral, recomendamos localizar somente o texto e não o HTML.</span><span class="sxs-lookup"><span data-stu-id="77187-379">**Note:** You generally want to only localize text and not HTML.</span></span>

<span data-ttu-id="77187-380">No nível mais baixo, você pode obter `IStringLocalizerFactory` com a [Injeção de Dependência](dependency-injection.md):</span><span class="sxs-lookup"><span data-stu-id="77187-380">At the lowest level, you can get `IStringLocalizerFactory` out of [Dependency Injection](dependency-injection.md):</span></span>

[!code-csharp[](localization/sample/Localization/Controllers/TestController.cs?start=9&end=26&highlight=7-13)]

<span data-ttu-id="77187-381">O código acima demonstra cada um dos dois métodos Create de alocador.</span><span class="sxs-lookup"><span data-stu-id="77187-381">The code above demonstrates each of the two factory create methods.</span></span>

<span data-ttu-id="77187-382">Você pode particionar as cadeias de caracteres localizadas por controlador, área ou ter apenas um contêiner.</span><span class="sxs-lookup"><span data-stu-id="77187-382">You can partition your localized strings by controller, area, or have just one container.</span></span> <span data-ttu-id="77187-383">No aplicativo de exemplo, uma classe fictícia chamada `SharedResource` é usada para recursos compartilhados.</span><span class="sxs-lookup"><span data-stu-id="77187-383">In the sample app, a dummy class named `SharedResource` is used for shared resources.</span></span>

[!code-csharp[](localization/sample/Localization/Resources/SharedResource.cs)]

<span data-ttu-id="77187-384">Alguns desenvolvedores usam a classe `Startup` para conter cadeias de caracteres globais ou compartilhadas.</span><span class="sxs-lookup"><span data-stu-id="77187-384">Some developers use the `Startup` class to contain global or shared strings.</span></span> <span data-ttu-id="77187-385">Na amostra abaixo, os localizadores `InfoController` e `SharedResource` são usados:</span><span class="sxs-lookup"><span data-stu-id="77187-385">In the sample below, the `InfoController` and the `SharedResource` localizers are used:</span></span>

[!code-csharp[](localization/sample/Localization/Controllers/InfoController.cs?range=9-26)]

## <a name="view-localization"></a><span data-ttu-id="77187-386">Localização de exibição</span><span class="sxs-lookup"><span data-stu-id="77187-386">View localization</span></span>

<span data-ttu-id="77187-387">O serviço `IViewLocalizer` fornece cadeias de caracteres localizadas para uma [exibição](xref:mvc/views/overview).</span><span class="sxs-lookup"><span data-stu-id="77187-387">The `IViewLocalizer` service provides localized strings for a [view](xref:mvc/views/overview).</span></span> <span data-ttu-id="77187-388">A classe `ViewLocalizer` implementa essa interface e encontra o local do recurso no caminho do arquivo de exibição.</span><span class="sxs-lookup"><span data-stu-id="77187-388">The `ViewLocalizer` class implements this interface and finds the resource location from the view file path.</span></span> <span data-ttu-id="77187-389">O seguinte código mostra como usar a implementação padrão de `IViewLocalizer`:</span><span class="sxs-lookup"><span data-stu-id="77187-389">The following code shows how to use the default implementation of `IViewLocalizer`:</span></span>

[!code-cshtml[](localization/sample/Localization/Views/Home/About.cshtml)]

<span data-ttu-id="77187-390">A implementação padrão de `IViewLocalizer` encontra o arquivo de recurso com base no nome de arquivo da exibição.</span><span class="sxs-lookup"><span data-stu-id="77187-390">The default implementation of `IViewLocalizer` finds the resource file based on the view's file name.</span></span> <span data-ttu-id="77187-391">Não há nenhuma opção para usar um arquivo de recurso compartilhado global.</span><span class="sxs-lookup"><span data-stu-id="77187-391">There's no option to use a global shared resource file.</span></span> <span data-ttu-id="77187-392">`ViewLocalizer`implementa o localizador usando `IHtmlLocalizer` , portanto, Razor não codifica a cadeia de caracteres localizada em HTML.</span><span class="sxs-lookup"><span data-stu-id="77187-392">`ViewLocalizer` implements the localizer using `IHtmlLocalizer`, so Razor doesn't HTML encode the localized string.</span></span> <span data-ttu-id="77187-393">Parametrize cadeias de recurso e o `IViewLocalizer` codificará em HTML os parâmetros, mas não a cadeia de caracteres de recurso.</span><span class="sxs-lookup"><span data-stu-id="77187-393">You can parameterize resource strings and `IViewLocalizer` will HTML encode the parameters, but not the resource string.</span></span> <span data-ttu-id="77187-394">Considere a seguinte Razor marcação:</span><span class="sxs-lookup"><span data-stu-id="77187-394">Consider the following Razor markup:</span></span>

```cshtml
@Localizer["<i>Hello</i> <b>{0}!</b>", UserManager.GetUserName(User)]
```

<span data-ttu-id="77187-395">Um arquivo de recurso em francês pode conter o seguinte:</span><span class="sxs-lookup"><span data-stu-id="77187-395">A French resource file could contain the following:</span></span>

| <span data-ttu-id="77187-396">Chave</span><span class="sxs-lookup"><span data-stu-id="77187-396">Key</span></span> | <span data-ttu-id="77187-397">Valor</span><span class="sxs-lookup"><span data-stu-id="77187-397">Value</span></span> |
| ----- | ------ |
| `<i>Hello</i> <b>{0}!</b>` | `<i>Bonjour</i> <b>{0} !</b>` |

<span data-ttu-id="77187-398">A exibição renderizada contém a marcação HTML do arquivo de recurso.</span><span class="sxs-lookup"><span data-stu-id="77187-398">The rendered view would contain the HTML markup from the resource file.</span></span>

<span data-ttu-id="77187-399">**Observação:** em geral, recomendamos localizar somente o texto e não o HTML.</span><span class="sxs-lookup"><span data-stu-id="77187-399">**Note:** You generally want to only localize text and not HTML.</span></span>

<span data-ttu-id="77187-400">Para usar um arquivo de recurso compartilhado em uma exibição, injete `IHtmlLocalizer<T>`:</span><span class="sxs-lookup"><span data-stu-id="77187-400">To use a shared resource file in a view, inject `IHtmlLocalizer<T>`:</span></span>

[!code-cshtml[](../fundamentals/localization/sample/Localization/Views/Test/About.cshtml?highlight=5,12)]

## <a name="dataannotations-localization"></a><span data-ttu-id="77187-401">Localização de DataAnnotations</span><span class="sxs-lookup"><span data-stu-id="77187-401">DataAnnotations localization</span></span>

<span data-ttu-id="77187-402">As mensagens de erro de DataAnnotations são localizadas com `IStringLocalizer<T>`.</span><span class="sxs-lookup"><span data-stu-id="77187-402">DataAnnotations error messages are localized with `IStringLocalizer<T>`.</span></span> <span data-ttu-id="77187-403">Usando a opção `ResourcesPath = "Resources"`, as mensagens de erro em `RegisterViewModel` podem ser armazenadas em um dos seguintes caminhos:</span><span class="sxs-lookup"><span data-stu-id="77187-403">Using the option `ResourcesPath = "Resources"`, the error messages in `RegisterViewModel` can be stored in either of the following paths:</span></span>

* <span data-ttu-id="77187-404">*Recursos/ViewModels. Account. RegisterViewModel. fr. resx*</span><span class="sxs-lookup"><span data-stu-id="77187-404">*Resources/ViewModels.Account.RegisterViewModel.fr.resx*</span></span>
* <span data-ttu-id="77187-405">*Resources/ViewModels/Account/RegisterViewModel.fr.resx*</span><span class="sxs-lookup"><span data-stu-id="77187-405">*Resources/ViewModels/Account/RegisterViewModel.fr.resx*</span></span>

[!code-csharp[](localization/sample/Localization/ViewModels/Account/RegisterViewModel.cs?start=9&end=26)]

<span data-ttu-id="77187-406">No ASP.NET Core MVC 1.1.0 e superior, atributos que não sejam de validação são localizados.</span><span class="sxs-lookup"><span data-stu-id="77187-406">In ASP.NET Core MVC 1.1.0 and higher, non-validation attributes are localized.</span></span> <span data-ttu-id="77187-407">O ASP.NET Core MVC 1.0 **não** pesquisa cadeias de caracteres localizadas para atributos que não sejam de validação.</span><span class="sxs-lookup"><span data-stu-id="77187-407">ASP.NET Core MVC 1.0 does **not** look up localized strings for non-validation attributes.</span></span>

<a name="one-resource-string-multiple-classes"></a>

### <a name="using-one-resource-string-for-multiple-classes"></a><span data-ttu-id="77187-408">Usando uma cadeia de caracteres de recurso para várias classes</span><span class="sxs-lookup"><span data-stu-id="77187-408">Using one resource string for multiple classes</span></span>

<span data-ttu-id="77187-409">O seguinte código mostra como usar uma cadeia de caracteres de recurso para atributos de validação com várias classes:</span><span class="sxs-lookup"><span data-stu-id="77187-409">The following code shows how to use one resource string for validation attributes with multiple classes:</span></span>

```csharp
public void ConfigureServices(IServiceCollection services)
{
    services.AddMvc()
        .AddDataAnnotationsLocalization(options => {
            options.DataAnnotationLocalizerProvider = (type, factory) =>
                factory.Create(typeof(SharedResource));
        });
}
```

<span data-ttu-id="77187-410">No código anterior, `SharedResource` é a classe correspondente ao resx em que as mensagens de validação são armazenadas.</span><span class="sxs-lookup"><span data-stu-id="77187-410">In the preceding code, `SharedResource` is the class corresponding to the resx where your validation messages are stored.</span></span> <span data-ttu-id="77187-411">Com essa abordagem, DataAnnotations usará apenas `SharedResource`, em vez de o recurso para cada classe.</span><span class="sxs-lookup"><span data-stu-id="77187-411">With this approach, DataAnnotations will only use `SharedResource`, rather than the resource for each class.</span></span>

## <a name="provide-localized-resources-for-the-languages-and-cultures-you-support"></a><span data-ttu-id="77187-412">Fornecer recursos localizados para as culturas e os idiomas aos quais você dá suporte</span><span class="sxs-lookup"><span data-stu-id="77187-412">Provide localized resources for the languages and cultures you support</span></span>

### <a name="supportedcultures-and-supporteduicultures"></a><span data-ttu-id="77187-413">SupportedCultures e SupportedUICultures</span><span class="sxs-lookup"><span data-stu-id="77187-413">SupportedCultures and SupportedUICultures</span></span>

<span data-ttu-id="77187-414">O ASP.NET Core permite que você especifique dois valores de cultura, `SupportedCultures` e `SupportedUICultures`.</span><span class="sxs-lookup"><span data-stu-id="77187-414">ASP.NET Core allows you to specify two culture values, `SupportedCultures` and `SupportedUICultures`.</span></span> <span data-ttu-id="77187-415">O objeto [CultureInfo](/dotnet/api/system.globalization.cultureinfo) para `SupportedCultures` determina os resultados das funções dependentes de cultura, como data, hora, número e formatação de moeda.</span><span class="sxs-lookup"><span data-stu-id="77187-415">The [CultureInfo](/dotnet/api/system.globalization.cultureinfo) object for `SupportedCultures` determines the results of culture-dependent functions, such as date, time, number, and currency formatting.</span></span> <span data-ttu-id="77187-416">`SupportedCultures` também determina a ordem de classificação de texto, convenções de uso de maiúsculas e comparações de cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="77187-416">`SupportedCultures` also determines the sorting order of text, casing conventions, and string comparisons.</span></span> <span data-ttu-id="77187-417">Consulte [CultureInfo.CurrentCulture](/dotnet/api/system.stringcomparer.currentculture#System_StringComparer_CurrentCulture) para obter mais informações sobre como o servidor obtém a Cultura.</span><span class="sxs-lookup"><span data-stu-id="77187-417">See [CultureInfo.CurrentCulture](/dotnet/api/system.stringcomparer.currentculture#System_StringComparer_CurrentCulture) for more info on how the server gets the Culture.</span></span> <span data-ttu-id="77187-418">O `SupportedUICultures` determina quais cadeias de caracteres traduzidas (de arquivos *. resx* ) são pesquisadas pelo [ResourceManager](/dotnet/api/system.resources.resourcemanager).</span><span class="sxs-lookup"><span data-stu-id="77187-418">The `SupportedUICultures` determines which translated strings (from *.resx* files) are looked up by the [ResourceManager](/dotnet/api/system.resources.resourcemanager).</span></span> <span data-ttu-id="77187-419">O `ResourceManager` apenas pesquisa cadeias de caracteres específicas a uma cultura determinadas por `CurrentUICulture`.</span><span class="sxs-lookup"><span data-stu-id="77187-419">The `ResourceManager` simply looks up culture-specific strings that's determined by `CurrentUICulture`.</span></span> <span data-ttu-id="77187-420">Cada thread no .NET tem objetos `CurrentCulture` e `CurrentUICulture`.</span><span class="sxs-lookup"><span data-stu-id="77187-420">Every thread in .NET has `CurrentCulture` and `CurrentUICulture` objects.</span></span> <span data-ttu-id="77187-421">O ASP.NET Core inspeciona esses valores durante a renderização de funções dependentes de cultura.</span><span class="sxs-lookup"><span data-stu-id="77187-421">ASP.NET Core inspects these values when rendering culture-dependent functions.</span></span> <span data-ttu-id="77187-422">Por exemplo, se a cultura do thread atual estiver definida como "en-US" (inglês, Estados Unidos), `DateTime.Now.ToLongDateString()` exibirá "Thursday, February 18, 2016", mas se `CurrentCulture` estiver definida como "es-ES" (espanhol, Espanha), o resultado será "jueves, 18 de febrero de 2016".</span><span class="sxs-lookup"><span data-stu-id="77187-422">For example, if the current thread's culture is set to "en-US" (English, United States), `DateTime.Now.ToLongDateString()` displays "Thursday, February 18, 2016", but if `CurrentCulture` is set to "es-ES" (Spanish, Spain) the output will be "jueves, 18 de febrero de 2016".</span></span>

## <a name="resource-files"></a><span data-ttu-id="77187-423">Arquivos de recurso</span><span class="sxs-lookup"><span data-stu-id="77187-423">Resource files</span></span>

<span data-ttu-id="77187-424">Um arquivo de recurso é um mecanismo útil para separar cadeias de caracteres localizáveis do código.</span><span class="sxs-lookup"><span data-stu-id="77187-424">A resource file is a useful mechanism for separating localizable strings from code.</span></span> <span data-ttu-id="77187-425">As cadeias de caracteres traduzidas para o idioma não padrão são isoladas em arquivos de recurso *. resx* .</span><span class="sxs-lookup"><span data-stu-id="77187-425">Translated strings for the non-default language are isolated in *.resx* resource files.</span></span> <span data-ttu-id="77187-426">Por exemplo, talvez você queira criar um arquivo de recurso em espanhol chamado *Welcome.es.resx* contendo cadeias de caracteres traduzidas.</span><span class="sxs-lookup"><span data-stu-id="77187-426">For example, you might want to create Spanish resource file named *Welcome.es.resx* containing translated strings.</span></span> <span data-ttu-id="77187-427">"es" são o código de idioma para o espanhol.</span><span class="sxs-lookup"><span data-stu-id="77187-427">"es" is the language code for Spanish.</span></span> <span data-ttu-id="77187-428">Para criar esse arquivo de recurso no Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="77187-428">To create this resource file in Visual Studio:</span></span>

1. <span data-ttu-id="77187-429">No **Gerenciador de Soluções**, clique com o botão direito do mouse na pasta que conterá o arquivo de recurso > **Adicionar** > **Novo Item**.</span><span class="sxs-lookup"><span data-stu-id="77187-429">In **Solution Explorer**, right click on the folder which will contain the resource file > **Add** > **New Item**.</span></span>

    ![Menu contextual aninhado: no Gerenciador de Soluções, um menu contextual é aberto para Recursos.](localization/_static/newi.png)

2. <span data-ttu-id="77187-432">Na caixa **Pesquisar modelos instalados**, insira "recurso" e nomeie o arquivo.</span><span class="sxs-lookup"><span data-stu-id="77187-432">In the **Search installed templates** box, enter "resource" and name the file.</span></span>

    ![Caixa de diálogo Adicionar Novo Item](localization/_static/res.png)

3. <span data-ttu-id="77187-434">Insira o valor da chave (cadeia de caracteres nativa) na coluna **Nome** e a cadeia de caracteres traduzida na coluna **Valor**.</span><span class="sxs-lookup"><span data-stu-id="77187-434">Enter the key value (native string) in the **Name** column and the translated string in the **Value** column.</span></span>

    ![Arquivo Welcome.es.resx (o arquivo de recurso Welcome em espanhol) com a palavra Hello na coluna Nome e a palavra Hola (Olá, em espanhol) na coluna valor](localization/_static/hola.png)

    <span data-ttu-id="77187-436">O Visual Studio mostra o arquivo *Welcome.es.resx*.</span><span class="sxs-lookup"><span data-stu-id="77187-436">Visual Studio shows the *Welcome.es.resx* file.</span></span>

    ![Gerenciador de Soluções mostrando o arquivo de recurso Welcome em espanhol (es)](localization/_static/se.png)

## <a name="resource-file-naming"></a><span data-ttu-id="77187-438">Nomenclatura do arquivo de recurso</span><span class="sxs-lookup"><span data-stu-id="77187-438">Resource file naming</span></span>

<span data-ttu-id="77187-439">Os recursos são nomeados com o nome completo do tipo de sua classe menos o nome do assembly.</span><span class="sxs-lookup"><span data-stu-id="77187-439">Resources are named for the full type name of their class minus the assembly name.</span></span> <span data-ttu-id="77187-440">Por exemplo, um recurso em francês em um projeto cujo assembly principal é `LocalizationWebsite.Web.dll` para a classe `LocalizationWebsite.Web.Startup` será nomeado *Startup.fr.resx*.</span><span class="sxs-lookup"><span data-stu-id="77187-440">For example, a French resource in a project whose main assembly is `LocalizationWebsite.Web.dll` for the class `LocalizationWebsite.Web.Startup` would be named *Startup.fr.resx*.</span></span> <span data-ttu-id="77187-441">Um recurso para a classe `LocalizationWebsite.Web.Controllers.HomeController` será nomeado *Controllers.HomeController.fr.resx*.</span><span class="sxs-lookup"><span data-stu-id="77187-441">A resource for the class `LocalizationWebsite.Web.Controllers.HomeController` would be named *Controllers.HomeController.fr.resx*.</span></span> <span data-ttu-id="77187-442">Se o namespace da classe de destino não for o mesmo que o nome do assembly, você precisará do nome completo do tipo.</span><span class="sxs-lookup"><span data-stu-id="77187-442">If your targeted class's namespace isn't the same as the assembly name you will need the full type name.</span></span> <span data-ttu-id="77187-443">Por exemplo, no projeto de exemplo, um recurso para o tipo `ExtraNamespace.Tools` será nomeado *ExtraNamespace.Tools.fr.resx*.</span><span class="sxs-lookup"><span data-stu-id="77187-443">For example, in the sample project a resource for the type `ExtraNamespace.Tools` would be named *ExtraNamespace.Tools.fr.resx*.</span></span>

<span data-ttu-id="77187-444">No projeto de exemplo, o método `ConfigureServices` define o `ResourcesPath` como "Resources", de modo que o caminho relativo do projeto para o arquivo de recurso em francês do controlador principal seja *Resources/Controllers.HomeController.fr.resx*.</span><span class="sxs-lookup"><span data-stu-id="77187-444">In the sample project, the `ConfigureServices` method sets the `ResourcesPath` to "Resources", so the project relative path for the home controller's French resource file is *Resources/Controllers.HomeController.fr.resx*.</span></span> <span data-ttu-id="77187-445">Como alternativa, você pode usar pastas para organizar arquivos de recurso.</span><span class="sxs-lookup"><span data-stu-id="77187-445">Alternatively, you can use folders to organize resource files.</span></span> <span data-ttu-id="77187-446">Para o controlador principal, o caminho será *Resources/Controllers/HomeController.fr.resx*.</span><span class="sxs-lookup"><span data-stu-id="77187-446">For the home controller, the path would be *Resources/Controllers/HomeController.fr.resx*.</span></span> <span data-ttu-id="77187-447">Se você não usar a opção `ResourcesPath`, o arquivo *.resx* entrará no diretório base do projeto.</span><span class="sxs-lookup"><span data-stu-id="77187-447">If you don't use the `ResourcesPath` option, the *.resx* file would go in the project base directory.</span></span> <span data-ttu-id="77187-448">O arquivo de recurso para `HomeController` será nomeado *Controllers.HomeController.fr.resx*.</span><span class="sxs-lookup"><span data-stu-id="77187-448">The resource file for `HomeController` would be named *Controllers.HomeController.fr.resx*.</span></span> <span data-ttu-id="77187-449">A opção de usar a convenção de nomenclatura de ponto ou caminho depende de como você deseja organizar os arquivos de recurso.</span><span class="sxs-lookup"><span data-stu-id="77187-449">The choice of using the dot or path naming convention depends on how you want to organize your resource files.</span></span>

| <span data-ttu-id="77187-450">Nome do recurso</span><span class="sxs-lookup"><span data-stu-id="77187-450">Resource name</span></span> | <span data-ttu-id="77187-451">Nomenclatura de ponto ou caminho</span><span class="sxs-lookup"><span data-stu-id="77187-451">Dot or path naming</span></span> |
| ------------   | ------------- |
| <span data-ttu-id="77187-452">Resources/Controllers.HomeController.fr.resx</span><span class="sxs-lookup"><span data-stu-id="77187-452">Resources/Controllers.HomeController.fr.resx</span></span> | <span data-ttu-id="77187-453">Ponto</span><span class="sxs-lookup"><span data-stu-id="77187-453">Dot</span></span>  |
| <span data-ttu-id="77187-454">Resources/Controllers/HomeController.fr.resx</span><span class="sxs-lookup"><span data-stu-id="77187-454">Resources/Controllers/HomeController.fr.resx</span></span>  | <span data-ttu-id="77187-455">Caminho</span><span class="sxs-lookup"><span data-stu-id="77187-455">Path</span></span> |
|    |     |

<span data-ttu-id="77187-456">Os arquivos de recurso usando `@inject IViewLocalizer` em Razor exibições seguem um padrão semelhante.</span><span class="sxs-lookup"><span data-stu-id="77187-456">Resource files using `@inject IViewLocalizer` in Razor views follow a similar pattern.</span></span> <span data-ttu-id="77187-457">O arquivo de recurso de uma exibição pode ser nomeado usando a nomenclatura de ponto ou de caminho.</span><span class="sxs-lookup"><span data-stu-id="77187-457">The resource file for a view can be named using either dot naming or path naming.</span></span> Razor<span data-ttu-id="77187-458">exiba os arquivos de recurso que imitam o caminho do arquivo de exibição associado.</span><span class="sxs-lookup"><span data-stu-id="77187-458"> view resource files mimic the path of their associated view file.</span></span> <span data-ttu-id="77187-459">Supondo que definimos o `ResourcesPath` como "Resources", o arquivo de recurso em francês associado à exibição *Views/Home/About.cshtml* pode ser um dos seguintes:</span><span class="sxs-lookup"><span data-stu-id="77187-459">Assuming we set the `ResourcesPath` to "Resources", the French resource file associated with the *Views/Home/About.cshtml* view could be either of the following:</span></span>

* <span data-ttu-id="77187-460">Resources/Views/Home/About.fr.resx</span><span class="sxs-lookup"><span data-stu-id="77187-460">Resources/Views/Home/About.fr.resx</span></span>

* <span data-ttu-id="77187-461">Resources/Views.Home.About.fr.resx</span><span class="sxs-lookup"><span data-stu-id="77187-461">Resources/Views.Home.About.fr.resx</span></span>

<span data-ttu-id="77187-462">Se você não usar a opção `ResourcesPath`, o arquivo *.resx* de uma exibição estará localizado na mesma pasta da exibição.</span><span class="sxs-lookup"><span data-stu-id="77187-462">If you don't use the `ResourcesPath` option, the *.resx* file for a view would be located in the same folder as the view.</span></span>

### <a name="rootnamespaceattribute"></a><span data-ttu-id="77187-463">RootNamespaceAttribute</span><span class="sxs-lookup"><span data-stu-id="77187-463">RootNamespaceAttribute</span></span> 

<span data-ttu-id="77187-464">O atributo [RootNamespace](/dotnet/api/microsoft.extensions.localization.rootnamespaceattribute?view=aspnetcore-2.1) fornece o namespace raiz de um assembly quando o namespace raiz de um assembly é diferente do nome do assembly.</span><span class="sxs-lookup"><span data-stu-id="77187-464">The [RootNamespace](/dotnet/api/microsoft.extensions.localization.rootnamespaceattribute?view=aspnetcore-2.1) attribute provides the root namespace of an assembly when the root namespace of an assembly is different than the assembly name.</span></span> 

> [!WARNING]
> <span data-ttu-id="77187-465">Isso pode ocorrer quando o nome de um projeto não é um identificador .NET válido.</span><span class="sxs-lookup"><span data-stu-id="77187-465">This can occur when a project's name is not a valid .NET identifier.</span></span> <span data-ttu-id="77187-466">Por exemplo `my-project-name.csproj` , usará o namespace raiz `my_project_name` e o nome do assembly `my-project-name` que levam a esse erro.</span><span class="sxs-lookup"><span data-stu-id="77187-466">For instance `my-project-name.csproj` will use the root namespace `my_project_name` and the assembly name `my-project-name` leading to this error.</span></span> 

<span data-ttu-id="77187-467">Se o namespace raiz de um assembly é diferente do nome do assembly:</span><span class="sxs-lookup"><span data-stu-id="77187-467">If the root namespace of an assembly is different than the assembly name:</span></span>

* <span data-ttu-id="77187-468">A localização não funciona por padrão.</span><span class="sxs-lookup"><span data-stu-id="77187-468">Localization does not work by default.</span></span>
* <span data-ttu-id="77187-469">A localização falha devido à maneira como os recursos são pesquisados dentro do assembly.</span><span class="sxs-lookup"><span data-stu-id="77187-469">Localization fails due to the way resources are searched for within the assembly.</span></span> <span data-ttu-id="77187-470">`RootNamespace` é um valor de tempo de build que não está disponível para o processo em execução.</span><span class="sxs-lookup"><span data-stu-id="77187-470">`RootNamespace` is a build-time value which is not available to the executing process.</span></span> 

<span data-ttu-id="77187-471">Se o `RootNamespace` é diferente de `AssemblyName`, inclua o seguinte no *AssemblyInfo.cs* (com valores de parâmetro substituídos pelos valores reais):</span><span class="sxs-lookup"><span data-stu-id="77187-471">If the `RootNamespace` is different from the `AssemblyName`, include the following in *AssemblyInfo.cs* (with parameter values replaced with the actual values):</span></span>

```csharp
using System.Reflection;
using Microsoft.Extensions.Localization;

[assembly: ResourceLocation("Resource Folder Name")]
[assembly: RootNamespace("App Root Namespace")]
```

<span data-ttu-id="77187-472">O código anterior permite a resolução bem-sucedida de arquivos resx.</span><span class="sxs-lookup"><span data-stu-id="77187-472">The preceding code enables the successful resolution of resx files.</span></span>

## <a name="culture-fallback-behavior"></a><span data-ttu-id="77187-473">Comportamento de fallback da cultura</span><span class="sxs-lookup"><span data-stu-id="77187-473">Culture fallback behavior</span></span>

<span data-ttu-id="77187-474">Ao procurar por um recurso, a localização participa do "fallback de cultura".</span><span class="sxs-lookup"><span data-stu-id="77187-474">When searching for a resource, localization engages in "culture fallback".</span></span> <span data-ttu-id="77187-475">Começando com a cultura solicitada, se ela não for encontrada, ela será revertida para a cultura pai dessa cultura.</span><span class="sxs-lookup"><span data-stu-id="77187-475">Starting from the requested culture, if not found, it reverts to the parent culture of that culture.</span></span> <span data-ttu-id="77187-476">Além disso, a propriedade [CultureInfo.Parent](/dotnet/api/system.globalization.cultureinfo.parent) representa a cultura pai.</span><span class="sxs-lookup"><span data-stu-id="77187-476">As an aside, the [CultureInfo.Parent](/dotnet/api/system.globalization.cultureinfo.parent) property represents the parent culture.</span></span> <span data-ttu-id="77187-477">Isso normalmente (mas nem sempre) significa a remoção do significante do ISO.</span><span class="sxs-lookup"><span data-stu-id="77187-477">This usually (but not always) means removing the national signifier from the ISO.</span></span> <span data-ttu-id="77187-478">Por exemplo, o dialeto do espanhol falado no México é "es-MX".</span><span class="sxs-lookup"><span data-stu-id="77187-478">For example, the dialect of Spanish spoken in Mexico is "es-MX".</span></span> <span data-ttu-id="77187-479">Ele tem o pai "es", ou seja, espanhol, não específico de nenhum país.</span><span class="sxs-lookup"><span data-stu-id="77187-479">It has the parent "es"&mdash;Spanish non-specific to any country.</span></span>

<span data-ttu-id="77187-480">Imagine que seu site receba uma solicitação de um recurso “Boas-vindas" usando a cultura"fr-CA".</span><span class="sxs-lookup"><span data-stu-id="77187-480">Imagine your site receives a request for a "Welcome" resource using culture "fr-CA".</span></span> <span data-ttu-id="77187-481">O sistema de localização procura os seguintes recursos, em ordem, e seleciona a primeira correspondência:</span><span class="sxs-lookup"><span data-stu-id="77187-481">The localization system looks for the following resources, in order, and selects the first match:</span></span>

* <span data-ttu-id="77187-482">*Welcome.fr-CA.resx*</span><span class="sxs-lookup"><span data-stu-id="77187-482">*Welcome.fr-CA.resx*</span></span>
* <span data-ttu-id="77187-483">*Welcome.fr.resx*</span><span class="sxs-lookup"><span data-stu-id="77187-483">*Welcome.fr.resx*</span></span>
* <span data-ttu-id="77187-484">*Welcome.resx* (se o `NeutralResourcesLanguage` for "fr-CA")</span><span class="sxs-lookup"><span data-stu-id="77187-484">*Welcome.resx* (if the `NeutralResourcesLanguage` is "fr-CA")</span></span>

<span data-ttu-id="77187-485">Por exemplo, se você remover o designador de cultura ".fr" e tiver a cultura definida como francês, o arquivo de recurso padrão será lido e as cadeias de caracteres serão localizadas.</span><span class="sxs-lookup"><span data-stu-id="77187-485">As an example, if you remove the ".fr" culture designator and you have the culture set to French, the default resource file is read and strings are localized.</span></span> <span data-ttu-id="77187-486">O Gerenciador de Recursos designa um padrão ou um recurso de fallback para quando nenhuma opção atende à cultura solicitada.</span><span class="sxs-lookup"><span data-stu-id="77187-486">The Resource manager designates a default or fallback resource for when nothing meets your requested culture.</span></span> <span data-ttu-id="77187-487">Se você deseja apenas retornar a chave quando um recurso está ausente para a cultura solicitada, não deve ter um arquivo de recurso padrão.</span><span class="sxs-lookup"><span data-stu-id="77187-487">If you want to just return the key when missing a resource for the requested culture you must not have a default resource file.</span></span>

### <a name="generate-resource-files-with-visual-studio"></a><span data-ttu-id="77187-488">Gerar arquivos de recurso com o Visual Studio</span><span class="sxs-lookup"><span data-stu-id="77187-488">Generate resource files with Visual Studio</span></span>

<span data-ttu-id="77187-489">Se você criar um arquivo de recurso no Visual Studio sem uma cultura no nome do arquivo (por exemplo, *Welcome.resx*), o Visual Studio criará uma classe do C# com uma propriedade para cada cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="77187-489">If you create a resource file in Visual Studio without a culture in the file name (for example, *Welcome.resx*), Visual Studio will create a C# class with a property for each string.</span></span> <span data-ttu-id="77187-490">Geralmente isso não é o desejado com o ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="77187-490">That's usually not what you want with ASP.NET Core.</span></span> <span data-ttu-id="77187-491">Normalmente você não tem um arquivo de recurso *.resx* padrão (um arquivo *.resx* sem o nome de cultura).</span><span class="sxs-lookup"><span data-stu-id="77187-491">You typically don't have a default *.resx* resource file (a *.resx* file without the culture name).</span></span> <span data-ttu-id="77187-492">Sugerimos que você crie o arquivo *.resx* com um nome de cultura (por exemplo *Welcome.fr.resx*).</span><span class="sxs-lookup"><span data-stu-id="77187-492">We suggest you create the *.resx* file with a culture name (for example *Welcome.fr.resx*).</span></span> <span data-ttu-id="77187-493">Quando você criar um arquivo *.resx* com um nome de cultura, o Visual Studio não gerará o arquivo de classe.</span><span class="sxs-lookup"><span data-stu-id="77187-493">When you create a *.resx* file with a culture name, Visual Studio won't generate the class file.</span></span>

### <a name="add-other-cultures"></a><span data-ttu-id="77187-494">Adicionar outras culturas</span><span class="sxs-lookup"><span data-stu-id="77187-494">Add other cultures</span></span>

<span data-ttu-id="77187-495">Cada combinação de idioma e cultura (que não seja o idioma padrão) exige um arquivo de recurso exclusivo.</span><span class="sxs-lookup"><span data-stu-id="77187-495">Each language and culture combination (other than the default language) requires a unique resource file.</span></span> <span data-ttu-id="77187-496">Crie arquivos de recurso para diferentes culturas e localidades criando novos arquivos de recurso, nos quais os códigos ISO e de idioma fazem parte do nome do arquivo (por exemplo, **en-us**, **fr-ca** e **en-gb**).</span><span class="sxs-lookup"><span data-stu-id="77187-496">You create resource files for different cultures and locales by creating new resource files in which the ISO language codes are part of the file name (for example, **en-us**, **fr-ca**, and **en-gb**).</span></span> <span data-ttu-id="77187-497">Esses códigos ISO são colocados entre o nome do arquivo e a extensão de arquivo *.resx*, como em *Welcome.es-MX.resx* (espanhol/México).</span><span class="sxs-lookup"><span data-stu-id="77187-497">These ISO codes are placed between the file name and the *.resx* file extension, as in *Welcome.es-MX.resx* (Spanish/Mexico).</span></span>

## <a name="implement-a-strategy-to-select-the-languageculture-for-each-request"></a><span data-ttu-id="77187-498">Implementar uma estratégia para selecionar o idioma e a cultura para cada solicitação</span><span class="sxs-lookup"><span data-stu-id="77187-498">Implement a strategy to select the language/culture for each request</span></span>

### <a name="configure-localization"></a><span data-ttu-id="77187-499">Configurar a localização</span><span class="sxs-lookup"><span data-stu-id="77187-499">Configure localization</span></span>

<span data-ttu-id="77187-500">A localização é configurada no método `Startup.ConfigureServices`:</span><span class="sxs-lookup"><span data-stu-id="77187-500">Localization is configured in the `Startup.ConfigureServices` method:</span></span>

[!code-csharp[](localization/sample/Localization/Startup.cs?name=snippet1)]

* <span data-ttu-id="77187-501">`AddLocalization` Adiciona os serviços de localização ao contêiner de serviços.</span><span class="sxs-lookup"><span data-stu-id="77187-501">`AddLocalization` Adds the localization services to the services container.</span></span> <span data-ttu-id="77187-502">O código acima também define o caminho de recursos como "Resources".</span><span class="sxs-lookup"><span data-stu-id="77187-502">The code above also sets the resources path to "Resources".</span></span>

* <span data-ttu-id="77187-503">`AddViewLocalization` Adiciona suporte para os arquivos de exibição localizados.</span><span class="sxs-lookup"><span data-stu-id="77187-503">`AddViewLocalization` Adds support for localized view files.</span></span> <span data-ttu-id="77187-504">Nesta amostra, a localização de exibição se baseia no sufixo do arquivo de exibição.</span><span class="sxs-lookup"><span data-stu-id="77187-504">In this sample view localization is based on the view file suffix.</span></span> <span data-ttu-id="77187-505">Por exemplo, "fr" no arquivo *Index.fr.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="77187-505">For example "fr" in the *Index.fr.cshtml* file.</span></span>

* <span data-ttu-id="77187-506">`AddDataAnnotationsLocalization` Adiciona suporte para as mensagens de validação `DataAnnotations` localizadas por meio de abstrações `IStringLocalizer`.</span><span class="sxs-lookup"><span data-stu-id="77187-506">`AddDataAnnotationsLocalization` Adds support for localized `DataAnnotations` validation messages through `IStringLocalizer` abstractions.</span></span>

### <a name="localization-middleware"></a><span data-ttu-id="77187-507">Middleware de localização</span><span class="sxs-lookup"><span data-stu-id="77187-507">Localization middleware</span></span>

<span data-ttu-id="77187-508">A cultura atual em uma solicitação é definida no [Middleware](xref:fundamentals/middleware/index) de localização.</span><span class="sxs-lookup"><span data-stu-id="77187-508">The current culture on a request is set in the localization [Middleware](xref:fundamentals/middleware/index).</span></span> <span data-ttu-id="77187-509">O middleware de localização é habilitado no método `Startup.Configure`.</span><span class="sxs-lookup"><span data-stu-id="77187-509">The localization middleware is enabled in the `Startup.Configure` method.</span></span> <span data-ttu-id="77187-510">O middleware de localização precisa ser configurado antes de qualquer middleware que possa verificar a cultura de solicitação (por exemplo, `app.UseMvcWithDefaultRoute()`).</span><span class="sxs-lookup"><span data-stu-id="77187-510">The localization middleware must be configured before any middleware which might check the request culture (for example, `app.UseMvcWithDefaultRoute()`).</span></span>

[!code-csharp[](localization/sample/Localization/Startup.cs?name=snippet2)]
[!INCLUDE[about the series](~/includes/code-comments-loc.md)]

<span data-ttu-id="77187-511">`UseRequestLocalization` inicializa um objeto `RequestLocalizationOptions`.</span><span class="sxs-lookup"><span data-stu-id="77187-511">`UseRequestLocalization` initializes a `RequestLocalizationOptions` object.</span></span> <span data-ttu-id="77187-512">Em cada solicitação, a lista de `RequestCultureProvider` em `RequestLocalizationOptions` é enumerada e o primeiro provedor que pode determinar com êxito a cultura de solicitação é usado.</span><span class="sxs-lookup"><span data-stu-id="77187-512">On every request the list of `RequestCultureProvider` in the `RequestLocalizationOptions` is enumerated and the first provider that can successfully determine the request culture is used.</span></span> <span data-ttu-id="77187-513">Os provedores padrão são obtidos da classe `RequestLocalizationOptions`:</span><span class="sxs-lookup"><span data-stu-id="77187-513">The default providers come from the `RequestLocalizationOptions` class:</span></span>

1. `QueryStringRequestCultureProvider`
2. `CookieRequestCultureProvider`
3. `AcceptLanguageHeaderRequestCultureProvider`

<span data-ttu-id="77187-514">A lista padrão é apresentada do mais específico ao menos específico.</span><span class="sxs-lookup"><span data-stu-id="77187-514">The default list goes from most specific to least specific.</span></span> <span data-ttu-id="77187-515">Mais adiante neste artigo, veremos como você pode alterar a ordem e até mesmo adicionar um provedor de cultura personalizado.</span><span class="sxs-lookup"><span data-stu-id="77187-515">Later in the article we'll see how you can change the order and even add a custom culture provider.</span></span> <span data-ttu-id="77187-516">Se nenhum dos provedores pode determinar a cultura de solicitação, o `DefaultRequestCulture` é usado.</span><span class="sxs-lookup"><span data-stu-id="77187-516">If none of the providers can determine the request culture, the `DefaultRequestCulture` is used.</span></span>

### <a name="querystringrequestcultureprovider"></a><span data-ttu-id="77187-517">QueryStringRequestCultureProvider</span><span class="sxs-lookup"><span data-stu-id="77187-517">QueryStringRequestCultureProvider</span></span>

<span data-ttu-id="77187-518">Alguns aplicativos usarão uma cadeia de caracteres de consulta para definir a [cultura e a cultura da interface do usuário](https://msdn.microsoft.com/library/system.globalization.cultureinfo.aspx).</span><span class="sxs-lookup"><span data-stu-id="77187-518">Some apps will use a query string to set the [culture and UI culture](https://msdn.microsoft.com/library/system.globalization.cultureinfo.aspx).</span></span> <span data-ttu-id="77187-519">Para aplicativos que usam a abordagem do cabeçalho Accept-Language ou do cookie, a adição de uma cadeia de caracteres de consulta à URL é útil para depurar e testar o código.</span><span class="sxs-lookup"><span data-stu-id="77187-519">For apps that use the cookie or Accept-Language header approach, adding a query string to the URL is useful for debugging and testing code.</span></span> <span data-ttu-id="77187-520">Por padrão, o `QueryStringRequestCultureProvider` é registrado como o primeiro provedor de localização na lista `RequestCultureProvider`.</span><span class="sxs-lookup"><span data-stu-id="77187-520">By default, the `QueryStringRequestCultureProvider` is registered as the first localization provider in the `RequestCultureProvider` list.</span></span> <span data-ttu-id="77187-521">Passe os parâmetros `culture` e `ui-culture` da cadeia de caracteres de consulta.</span><span class="sxs-lookup"><span data-stu-id="77187-521">You pass the query string parameters `culture` and `ui-culture`.</span></span> <span data-ttu-id="77187-522">O seguinte exemplo define a cultura específica (idioma e região) como espanhol/México:</span><span class="sxs-lookup"><span data-stu-id="77187-522">The following example sets the specific culture (language and region) to Spanish/Mexico:</span></span>

   `http://localhost:5000/?culture=es-MX&ui-culture=es-MX`

<span data-ttu-id="77187-523">Se você passar somente uma das duas (`culture` ou `ui-culture`), o provedor da cadeia de caracteres de consulta definirá os dois valores usando aquela que foi passada.</span><span class="sxs-lookup"><span data-stu-id="77187-523">If you only pass in one of the two (`culture` or `ui-culture`), the query string provider will set both values using the one you passed in.</span></span> <span data-ttu-id="77187-524">Por exemplo, a definição apenas da cultura definirá a `Culture` e a `UICulture`:</span><span class="sxs-lookup"><span data-stu-id="77187-524">For example, setting just the culture will set both the `Culture` and the `UICulture`:</span></span>

   `http://localhost:5000/?culture=es-MX`

### <a name="cookierequestcultureprovider"></a><span data-ttu-id="77187-525">CookieRequestCultureProvider</span><span class="sxs-lookup"><span data-stu-id="77187-525">CookieRequestCultureProvider</span></span>

<span data-ttu-id="77187-526">Em geral, aplicativos de produção fornecerão um mecanismo para definir a cultura com o cookie de cultura do ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="77187-526">Production apps will often provide a mechanism to set the culture with the ASP.NET Core culture cookie.</span></span> <span data-ttu-id="77187-527">Use o método `MakeCookieValue` para criar um cookie.</span><span class="sxs-lookup"><span data-stu-id="77187-527">Use the `MakeCookieValue` method to create a cookie.</span></span>

<span data-ttu-id="77187-528">O `CookieRequestCultureProvider` `DefaultCookieName` retorna o nome de cookie padrão usado para rastrear as informações de cultura preferencial do usuário.</span><span class="sxs-lookup"><span data-stu-id="77187-528">The `CookieRequestCultureProvider` `DefaultCookieName` returns the default cookie name used to track the user's preferred culture information.</span></span> <span data-ttu-id="77187-529">O nome padrão do cookie é `.AspNetCore.Culture`.</span><span class="sxs-lookup"><span data-stu-id="77187-529">The default cookie name is `.AspNetCore.Culture`.</span></span>

<span data-ttu-id="77187-530">O formato do cookie é `c=%LANGCODE%|uic=%LANGCODE%`, em que `c` é `Culture` e `uic` é `UICulture`, por exemplo:</span><span class="sxs-lookup"><span data-stu-id="77187-530">The cookie format is `c=%LANGCODE%|uic=%LANGCODE%`, where `c` is `Culture` and `uic` is `UICulture`, for example:</span></span>

    c=en-UK|uic=en-US

<span data-ttu-id="77187-531">Se você especificar apenas as informações de cultura e a cultura da interface do usuário, a cultura especificada será usada para as informações de cultura e para a cultura da interface do usuário.</span><span class="sxs-lookup"><span data-stu-id="77187-531">If you only specify one of culture info and UI culture, the specified culture will be used for both culture info and UI culture.</span></span>

### <a name="the-accept-language-http-header"></a><span data-ttu-id="77187-532">O cabeçalho HTTP Accept-Language</span><span class="sxs-lookup"><span data-stu-id="77187-532">The Accept-Language HTTP header</span></span>

<span data-ttu-id="77187-533">O [cabeçalho Accept-Language](https://www.w3.org/International/questions/qa-accept-lang-locales) é configurável na maioria dos navegadores e originalmente foi criado para especificar o idioma do usuário.</span><span class="sxs-lookup"><span data-stu-id="77187-533">The [Accept-Language header](https://www.w3.org/International/questions/qa-accept-lang-locales) is settable in most browsers and was originally intended to specify the user's language.</span></span> <span data-ttu-id="77187-534">Essa configuração indica que o navegador foi definido para enviar ou herdou do sistema operacional subjacente.</span><span class="sxs-lookup"><span data-stu-id="77187-534">This setting indicates what the browser has been set to send or has inherited from the underlying operating system.</span></span> <span data-ttu-id="77187-535">O cabeçalho HTTP Accept-Language de uma solicitação do navegador não é uma maneira infalível de detectar o idioma preferencial do usuário (consulte [Definindo preferências de idioma em um navegador](https://www.w3.org/International/questions/qa-lang-priorities.en.php)).</span><span class="sxs-lookup"><span data-stu-id="77187-535">The Accept-Language HTTP header from a browser request isn't an infallible way to detect the user's preferred language (see [Setting language preferences in a browser](https://www.w3.org/International/questions/qa-lang-priorities.en.php)).</span></span> <span data-ttu-id="77187-536">Um aplicativo de produção deve incluir uma maneira para que um usuário personalize sua opção de cultura.</span><span class="sxs-lookup"><span data-stu-id="77187-536">A production app should include a way for a user to customize their choice of culture.</span></span>

### <a name="set-the-accept-language-http-header-in-ie"></a><span data-ttu-id="77187-537">Definir o cabeçalho HTTP Accept-Language no IE</span><span class="sxs-lookup"><span data-stu-id="77187-537">Set the Accept-Language HTTP header in IE</span></span>

1. <span data-ttu-id="77187-538">No ícone de engrenagem, toque em **Opções da Internet**.</span><span class="sxs-lookup"><span data-stu-id="77187-538">From the gear icon, tap **Internet Options**.</span></span>

2. <span data-ttu-id="77187-539">Toque em **Idiomas**.</span><span class="sxs-lookup"><span data-stu-id="77187-539">Tap **Languages**.</span></span>

    ![Opções da Internet](localization/_static/lang.png)

3. <span data-ttu-id="77187-541">Toque em **Definir Preferências de Idioma**.</span><span class="sxs-lookup"><span data-stu-id="77187-541">Tap **Set Language Preferences**.</span></span>

4. <span data-ttu-id="77187-542">Toque em **Adicionar um idioma**.</span><span class="sxs-lookup"><span data-stu-id="77187-542">Tap **Add a language**.</span></span>

5. <span data-ttu-id="77187-543">Adicione o idioma.</span><span class="sxs-lookup"><span data-stu-id="77187-543">Add the language.</span></span>

6. <span data-ttu-id="77187-544">Toque no idioma e, em seguida, em **Mover Para Cima**.</span><span class="sxs-lookup"><span data-stu-id="77187-544">Tap the language, then tap **Move Up**.</span></span>

### <a name="use-a-custom-provider"></a><span data-ttu-id="77187-545">Usar um provedor personalizado</span><span class="sxs-lookup"><span data-stu-id="77187-545">Use a custom provider</span></span>

<span data-ttu-id="77187-546">Suponha que você deseje permitir que os clientes armazenem seus idiomas e culturas nos bancos de dados.</span><span class="sxs-lookup"><span data-stu-id="77187-546">Suppose you want to let your customers store their language and culture in your databases.</span></span> <span data-ttu-id="77187-547">Você pode escrever um provedor para pesquisar esses valores para o usuário.</span><span class="sxs-lookup"><span data-stu-id="77187-547">You could write a provider to look up these values for the user.</span></span> <span data-ttu-id="77187-548">O seguinte código mostra como adicionar um provedor personalizado:</span><span class="sxs-lookup"><span data-stu-id="77187-548">The following code shows how to add a custom provider:</span></span>

```csharp
private const string enUSCulture = "en-US";

services.Configure<RequestLocalizationOptions>(options =>
{
    var supportedCultures = new[]
    {
        new CultureInfo(enUSCulture),
        new CultureInfo("fr")
    };

    options.DefaultRequestCulture = new RequestCulture(culture: enUSCulture, uiCulture: enUSCulture);
    options.SupportedCultures = supportedCultures;
    options.SupportedUICultures = supportedCultures;

    options.RequestCultureProviders.Insert(0, new CustomRequestCultureProvider(async context =>
    {
        // My custom request culture logic
        return new ProviderCultureResult("en");
    }));
});
```

<span data-ttu-id="77187-549">Use `RequestLocalizationOptions` para adicionar ou remover provedores de localização.</span><span class="sxs-lookup"><span data-stu-id="77187-549">Use `RequestLocalizationOptions` to add or remove localization providers.</span></span>

### <a name="set-the-culture-programmatically"></a><span data-ttu-id="77187-550">Definir a cultura de forma programática</span><span class="sxs-lookup"><span data-stu-id="77187-550">Set the culture programmatically</span></span>

<span data-ttu-id="77187-551">Este projeto de exemplo **Localization.StarterWeb** no [GitHub](https://github.com/aspnet/entropy) contém a interface do usuário para definir a `Culture`.</span><span class="sxs-lookup"><span data-stu-id="77187-551">This sample **Localization.StarterWeb** project on [GitHub](https://github.com/aspnet/entropy) contains UI to set the `Culture`.</span></span> <span data-ttu-id="77187-552">O arquivo *Views/Shared/_SelectLanguagePartial.cshtml* permite que você selecione a cultura na lista de culturas compatíveis:</span><span class="sxs-lookup"><span data-stu-id="77187-552">The *Views/Shared/_SelectLanguagePartial.cshtml* file allows you to select the culture from the list of supported cultures:</span></span>

[!code-cshtml[](localization/sample/Localization/Views/Shared/_SelectLanguagePartial.cshtml)]

<span data-ttu-id="77187-553">O arquivo *Views/Shared/_SelectLanguagePartial.cshtml* é adicionado à seção `footer` do arquivo de layout para que ele fique disponível para todos os exibições:</span><span class="sxs-lookup"><span data-stu-id="77187-553">The *Views/Shared/_SelectLanguagePartial.cshtml* file is added to the `footer` section of the layout file so it will be available to all views:</span></span>

[!code-cshtml[](localization/sample/Localization/Views/Shared/_Layout.cshtml?range=43-56&highlight=10)]

<span data-ttu-id="77187-554">O método `SetLanguage` define o cookie de cultura.</span><span class="sxs-lookup"><span data-stu-id="77187-554">The `SetLanguage` method sets the culture cookie.</span></span>

[!code-csharp[](localization/sample/Localization/Controllers/HomeController.cs?range=57-67)]

<span data-ttu-id="77187-555">Não é possível conectar o *_SelectLanguagePartial.cshtml* ao código de exemplo para este projeto.</span><span class="sxs-lookup"><span data-stu-id="77187-555">You can't plug in the *_SelectLanguagePartial.cshtml* to sample code for this project.</span></span> <span data-ttu-id="77187-556">O projeto **Localization. StarterWeb** no [GitHub](https://github.com/aspnet/entropy) tem código para fluir `RequestLocalizationOptions` para um Razor parcial por meio do contêiner de [injeção de dependência](dependency-injection.md) .</span><span class="sxs-lookup"><span data-stu-id="77187-556">The **Localization.StarterWeb** project on [GitHub](https://github.com/aspnet/entropy) has code to flow the `RequestLocalizationOptions` to a Razor partial through the [Dependency Injection](dependency-injection.md) container.</span></span>

## <a name="model-binding-route-data-and-query-strings"></a><span data-ttu-id="77187-557">Dados de rota de associação de modelo e cadeias de caracteres de consulta</span><span class="sxs-lookup"><span data-stu-id="77187-557">Model binding route data and query strings</span></span>

<span data-ttu-id="77187-558">Consulte [comportamento de globalização de dados de rota de associação de modelo e cadeias de consulta](xref:mvc/models/model-binding#glob).</span><span class="sxs-lookup"><span data-stu-id="77187-558">See [Globalization behavior of model binding route data and query strings](xref:mvc/models/model-binding#glob).</span></span>

## <a name="globalization-and-localization-terms"></a><span data-ttu-id="77187-559">Termos de globalização e localização</span><span class="sxs-lookup"><span data-stu-id="77187-559">Globalization and localization terms</span></span>

<span data-ttu-id="77187-560">O processo de localização do aplicativo também exige uma compreensão básica dos conjuntos de caracteres relevantes geralmente usados no desenvolvimento moderno de software e uma compreensão dos problemas associados a eles.</span><span class="sxs-lookup"><span data-stu-id="77187-560">The process of localizing your app also requires a basic understanding of relevant character sets commonly used in modern software development and an understanding of the issues associated with them.</span></span> <span data-ttu-id="77187-561">Embora todos os computadores armazenem texto como números (códigos), diferentes sistemas armazenam o mesmo texto usando números diferentes.</span><span class="sxs-lookup"><span data-stu-id="77187-561">Although all computers store text as numbers (codes), different systems store the same text using different numbers.</span></span> <span data-ttu-id="77187-562">O processo de localização se refere à tradução da interface do usuário do aplicativo para uma cultura/localidade específica.</span><span class="sxs-lookup"><span data-stu-id="77187-562">The localization process refers to translating the app user interface (UI) for a specific culture/locale.</span></span>

<span data-ttu-id="77187-563">[Possibilidade de localização](/dotnet/standard/globalization-localization/localizability-review) é um processo intermediário usado para verificar se um aplicativo globalizado está pronto para localização.</span><span class="sxs-lookup"><span data-stu-id="77187-563">[Localizability](/dotnet/standard/globalization-localization/localizability-review) is an intermediate process for verifying that a globalized app is ready for localization.</span></span>

<span data-ttu-id="77187-564">O formato [RFC 4646](https://www.ietf.org/rfc/rfc4646.txt) para o nome de cultura é `<languagecode2>-<country/regioncode2>`, em que `<languagecode2>` é o código de idioma e `<country/regioncode2>` é o código de subcultura.</span><span class="sxs-lookup"><span data-stu-id="77187-564">The [RFC 4646](https://www.ietf.org/rfc/rfc4646.txt) format for the culture name is `<languagecode2>-<country/regioncode2>`, where `<languagecode2>` is the language code and `<country/regioncode2>` is the subculture code.</span></span> <span data-ttu-id="77187-565">Por exemplo, `es-CL` para Espanhol (Chile), `en-US` para inglês (Estados Unidos) e `en-AU` para inglês (Austrália).</span><span class="sxs-lookup"><span data-stu-id="77187-565">For example, `es-CL` for Spanish (Chile), `en-US` for English (United States), and `en-AU` for English (Australia).</span></span> <span data-ttu-id="77187-566">O [RFC 4646](https://www.ietf.org/rfc/rfc4646.txt) é uma combinação de um código de cultura de duas letras minúsculas ISO 639 associado a um idioma e um código de subcultura de duas letras maiúsculas ISO 3166 associado a um país ou uma região.</span><span class="sxs-lookup"><span data-stu-id="77187-566">[RFC 4646](https://www.ietf.org/rfc/rfc4646.txt) is a combination of an ISO 639 two-letter lowercase culture code associated with a language and an ISO 3166 two-letter uppercase subculture code associated with a country or region.</span></span> <span data-ttu-id="77187-567">Consulte [Nome da cultura de idioma](https://msdn.microsoft.com/library/ee825488(v=cs.20).aspx).</span><span class="sxs-lookup"><span data-stu-id="77187-567">See [Language Culture Name](https://msdn.microsoft.com/library/ee825488(v=cs.20).aspx).</span></span>

<span data-ttu-id="77187-568">Muitas vezes, internacionalização é abreviada como "I18N".</span><span class="sxs-lookup"><span data-stu-id="77187-568">Internationalization is often abbreviated to "I18N".</span></span> <span data-ttu-id="77187-569">A abreviação usa a primeira e última letras e o número de letras entre elas e, portanto, 18 significa o número de letras entre o primeiro "I" e o último "N".</span><span class="sxs-lookup"><span data-stu-id="77187-569">The abbreviation takes the first and last letters and the number of letters between them, so 18 stands for the number of letters between the first "I" and the last "N".</span></span> <span data-ttu-id="77187-570">O mesmo se aplica a Globalização (G11N) e Localização (L10N).</span><span class="sxs-lookup"><span data-stu-id="77187-570">The same applies to Globalization (G11N), and Localization (L10N).</span></span>

<span data-ttu-id="77187-571">Termos:</span><span class="sxs-lookup"><span data-stu-id="77187-571">Terms:</span></span>

* <span data-ttu-id="77187-572">Globalização (G11N): o processo de fazer com que um aplicativo dê suporte a diferentes idiomas e regiões.</span><span class="sxs-lookup"><span data-stu-id="77187-572">Globalization (G11N): The process of making an app support different languages and regions.</span></span>
* <span data-ttu-id="77187-573">Localização (L10N): o processo de personalizar um aplicativo para determinado idioma e região.</span><span class="sxs-lookup"><span data-stu-id="77187-573">Localization (L10N): The process of customizing an app for a given language and region.</span></span>
* <span data-ttu-id="77187-574">Internacionalização (I18N): descreve a globalização e a localização.</span><span class="sxs-lookup"><span data-stu-id="77187-574">Internationalization (I18N): Describes both globalization and localization.</span></span>
* <span data-ttu-id="77187-575">Cultura: um idioma e, opcionalmente, uma região.</span><span class="sxs-lookup"><span data-stu-id="77187-575">Culture: It's a language and, optionally, a region.</span></span>
* <span data-ttu-id="77187-576">Cultura neutra: uma cultura que tem um idioma especificado, mas não uma região.</span><span class="sxs-lookup"><span data-stu-id="77187-576">Neutral culture: A culture that has a specified language, but not a region.</span></span> <span data-ttu-id="77187-577">(por exemplo, "en", "es")</span><span class="sxs-lookup"><span data-stu-id="77187-577">(for example "en", "es")</span></span>
* <span data-ttu-id="77187-578">Cultura específica: uma cultura que tem um idioma e uma região especificados.</span><span class="sxs-lookup"><span data-stu-id="77187-578">Specific culture: A culture that has a specified language and region.</span></span> <span data-ttu-id="77187-579">(por exemplo, "en-US", "en-GB", "es-CL")</span><span class="sxs-lookup"><span data-stu-id="77187-579">(for example "en-US", "en-GB", "es-CL")</span></span>
* <span data-ttu-id="77187-580">Cultura pai: a cultura neutra que contém uma cultura específica.</span><span class="sxs-lookup"><span data-stu-id="77187-580">Parent culture: The neutral culture that contains a specific culture.</span></span> <span data-ttu-id="77187-581">(por exemplo, "en" é a cultura pai de "en-US" e "en-GB")</span><span class="sxs-lookup"><span data-stu-id="77187-581">(for example, "en" is the parent culture of "en-US" and "en-GB")</span></span>
* <span data-ttu-id="77187-582">Localidade: uma localidade é o mesmo que uma cultura.</span><span class="sxs-lookup"><span data-stu-id="77187-582">Locale: A locale is the same as a culture.</span></span>

[!INCLUDE[](~/includes/localization/currency.md)]

## <a name="additional-resources"></a><span data-ttu-id="77187-583">Recursos adicionais</span><span class="sxs-lookup"><span data-stu-id="77187-583">Additional resources</span></span>

* <xref:fundamentals/troubleshoot-aspnet-core-localization>
* <span data-ttu-id="77187-584">O [projeto Localization.StarterWeb](https://github.com/aspnet/Entropy/tree/master/samples/Localization.StarterWeb) usado no artigo.</span><span class="sxs-lookup"><span data-stu-id="77187-584">[Localization.StarterWeb project](https://github.com/aspnet/Entropy/tree/master/samples/Localization.StarterWeb) used in the article.</span></span>
* [<span data-ttu-id="77187-585">Globalizando e localizando aplicativos do .NET</span><span class="sxs-lookup"><span data-stu-id="77187-585">Globalizing and localizing .NET applications</span></span>](/dotnet/standard/globalization-localization/index)
* [<span data-ttu-id="77187-586">Recursos em arquivos. resx</span><span class="sxs-lookup"><span data-stu-id="77187-586">Resources in .resx Files</span></span>](/dotnet/framework/resources/working-with-resx-files-programmatically)
* [<span data-ttu-id="77187-587">Kit de Ferramentas de Aplicativo Multilíngue da Microsoft</span><span class="sxs-lookup"><span data-stu-id="77187-587">Microsoft Multilingual App Toolkit</span></span>](https://marketplace.visualstudio.com/items?itemName=MultilingualAppToolkit.MultilingualAppToolkit-18308)
* [<span data-ttu-id="77187-588">Localização e genéricos</span><span class="sxs-lookup"><span data-stu-id="77187-588">Localization & Generics</span></span>](http://hishambinateya.com/localization-and-generics)

::: moniker-end

<!-- ASP.NET Core 5.x starts here -->
::: moniker range="> aspnetcore-3.1"

<span data-ttu-id="77187-589">Por [Rick Anderson](https://twitter.com/RickAndMSFT), [Damien Bowden](https://twitter.com/damien_bod), [Bart Calixto](https://twitter.com/bartmax), [Nadeem Afana](https://afana.me/) e [Hisham Bin Ateya](https://twitter.com/hishambinateya)</span><span class="sxs-lookup"><span data-stu-id="77187-589">By [Rick Anderson](https://twitter.com/RickAndMSFT), [Damien Bowden](https://twitter.com/damien_bod), [Bart Calixto](https://twitter.com/bartmax), [Nadeem Afana](https://afana.me/), and [Hisham Bin Ateya](https://twitter.com/hishambinateya)</span></span>

<span data-ttu-id="77187-590">Um site multilíngue permite que o site alcance um público mais amplo.</span><span class="sxs-lookup"><span data-stu-id="77187-590">A multilingual website allows the site to reach a wider audience.</span></span> <span data-ttu-id="77187-591">O ASP.NET Core fornece serviços e middleware para localização em diferentes idiomas e culturas.</span><span class="sxs-lookup"><span data-stu-id="77187-591">ASP.NET Core provides services and middleware for localizing into different languages and cultures.</span></span>

<span data-ttu-id="77187-592">A internacionalização envolve [Globalização](/dotnet/api/system.globalization) e [Localização](/dotnet/standard/globalization-localization/localization).</span><span class="sxs-lookup"><span data-stu-id="77187-592">Internationalization involves [Globalization](/dotnet/api/system.globalization) and [Localization](/dotnet/standard/globalization-localization/localization).</span></span> <span data-ttu-id="77187-593">Globalização é o processo de criação de aplicativos que dão suporte a diferentes culturas.</span><span class="sxs-lookup"><span data-stu-id="77187-593">Globalization is the process of designing apps that support different cultures.</span></span> <span data-ttu-id="77187-594">A globalização adiciona suporte para entrada, exibição e saída de um conjunto definido de scripts de idiomas relacionados a áreas geográficas específicas.</span><span class="sxs-lookup"><span data-stu-id="77187-594">Globalization adds support for input, display, and output of a defined set of language scripts that relate to specific geographic areas.</span></span>

<span data-ttu-id="77187-595">Localização é o processo de adaptar um aplicativo globalizado, que você já processou para possibilidade de localização, a determinada cultura/localidade.</span><span class="sxs-lookup"><span data-stu-id="77187-595">Localization is the process of adapting a globalized app, which you have already processed for localizability, to a particular culture/locale.</span></span> <span data-ttu-id="77187-596">Para obter mais informações, consulte **Termos de globalização e localização** próximo ao final deste documento.</span><span class="sxs-lookup"><span data-stu-id="77187-596">For more information see **Globalization and localization terms** near the end of this document.</span></span>

<span data-ttu-id="77187-597">A localização de aplicativos envolve o seguinte:</span><span class="sxs-lookup"><span data-stu-id="77187-597">App localization involves the following:</span></span>

1. <span data-ttu-id="77187-598">Tornar o conteúdo do aplicativo localizável</span><span class="sxs-lookup"><span data-stu-id="77187-598">Make the app's content localizable</span></span>
1. <span data-ttu-id="77187-599">Fornecer recursos localizados para as culturas e os idiomas aos quais você dá suporte</span><span class="sxs-lookup"><span data-stu-id="77187-599">Provide localized resources for the languages and cultures you support</span></span>
1. <span data-ttu-id="77187-600">Implementar uma estratégia para selecionar o idioma e a cultura para cada solicitação</span><span class="sxs-lookup"><span data-stu-id="77187-600">Implement a strategy to select the language/culture for each request</span></span>

<span data-ttu-id="77187-601">[Exibir ou baixar código de exemplo](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/localization/sample/Localization) ([como baixar](xref:index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="77187-601">[View or download sample code](https://github.com/dotnet/AspNetCore.Docs/tree/master/aspnetcore/fundamentals/localization/sample/Localization) ([how to download](xref:index#how-to-download-a-sample))</span></span>

## <a name="make-the-apps-content-localizable"></a><span data-ttu-id="77187-602">Tornar o conteúdo do aplicativo localizável</span><span class="sxs-lookup"><span data-stu-id="77187-602">Make the app's content localizable</span></span>

<span data-ttu-id="77187-603"><xref:Microsoft.Extensions.Localization.IStringLocalizer>e <xref:Microsoft.Extensions.Localization.IStringLocalizer%601> foram arquitetados para melhorar a produtividade ao desenvolver aplicativos localizados.</span><span class="sxs-lookup"><span data-stu-id="77187-603"><xref:Microsoft.Extensions.Localization.IStringLocalizer> and <xref:Microsoft.Extensions.Localization.IStringLocalizer%601> were architected to improve productivity when developing localized apps.</span></span> <span data-ttu-id="77187-604">`IStringLocalizer`usa o <xref:System.Resources.ResourceManager> e o <xref:System.Resources.ResourceReader> para fornecer recursos específicos de cultura em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="77187-604">`IStringLocalizer` uses the <xref:System.Resources.ResourceManager> and <xref:System.Resources.ResourceReader> to provide culture-specific resources at run time.</span></span> <span data-ttu-id="77187-605">A interface tem um indexador e um `IEnumerable` para retornar cadeias de caracteres localizadas.</span><span class="sxs-lookup"><span data-stu-id="77187-605">The interface has an indexer and an `IEnumerable` for returning localized strings.</span></span> <span data-ttu-id="77187-606">`IStringLocalizer`Não requer o armazenamento das cadeias de caracteres de idioma padrão em um arquivo de recurso.</span><span class="sxs-lookup"><span data-stu-id="77187-606">`IStringLocalizer` doesn't require storing the default language strings in a resource file.</span></span> <span data-ttu-id="77187-607">Você pode desenvolver um aplicativo direcionado à localização e não precisa criar arquivos de recurso no início do desenvolvimento.</span><span class="sxs-lookup"><span data-stu-id="77187-607">You can develop an app targeted for localization and not need to create resource files early in development.</span></span> <span data-ttu-id="77187-608">O código abaixo mostra como encapsular a cadeia de caracteres "About Title" para localização.</span><span class="sxs-lookup"><span data-stu-id="77187-608">The code below shows how to wrap the string "About Title" for localization.</span></span>

[!code-csharp[](localization/sample/Localization/Controllers/AboutController.cs)]

<span data-ttu-id="77187-609">No código anterior, a `IStringLocalizer<T>` implementação vem da [injeção de dependência](dependency-injection.md).</span><span class="sxs-lookup"><span data-stu-id="77187-609">In the preceding code, the `IStringLocalizer<T>` implementation comes from [Dependency Injection](dependency-injection.md).</span></span> <span data-ttu-id="77187-610">Se o valor localizado de "About Title" não é encontrado, a chave do indexador é retornada, ou seja, a cadeia de caracteres "About Title".</span><span class="sxs-lookup"><span data-stu-id="77187-610">If the localized value of "About Title" isn't found, then the indexer key is returned, that is, the string "About Title".</span></span> <span data-ttu-id="77187-611">Deixe as cadeias de caracteres literais de idioma padrão no aplicativo e encapsule-as no localizador, de modo que você possa se concentrar no desenvolvimento do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="77187-611">You can leave the default language literal strings in the app and wrap them in the localizer, so that you can focus on developing the app.</span></span> <span data-ttu-id="77187-612">Você pode desenvolve seu aplicativo com o idioma padrão e prepará-lo para a etapa de localização sem primeiro criar um arquivo de recurso padrão.</span><span class="sxs-lookup"><span data-stu-id="77187-612">You develop your app with your default language and prepare it for the localization step without first creating a default resource file.</span></span> <span data-ttu-id="77187-613">Como alternativa, você pode usar a abordagem tradicional e fornecer uma chave para recuperar a cadeia de caracteres de idioma padrão.</span><span class="sxs-lookup"><span data-stu-id="77187-613">Alternatively, you can use the traditional approach and provide a key to retrieve the default language string.</span></span> <span data-ttu-id="77187-614">Para muitos desenvolvedores, o novo fluxo de trabalho de não ter um arquivo *.resx* de idioma padrão e simplesmente encapsular os literais de cadeia de caracteres pode reduzir a sobrecarga de localizar um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="77187-614">For many developers the new workflow of not having a default language *.resx* file and simply wrapping the string literals can reduce the overhead of localizing an app.</span></span> <span data-ttu-id="77187-615">Outros desenvolvedores preferirão o fluxo de trabalho tradicional, pois ele pode facilitar o trabalho com literais de cadeia de caracteres mais longas e a atualização de cadeias de caracteres localizadas.</span><span class="sxs-lookup"><span data-stu-id="77187-615">Other developers will prefer the traditional work flow as it can make it easier to work with longer string literals and make it easier to update localized strings.</span></span>

<span data-ttu-id="77187-616">Use a implementação `IHtmlLocalizer<T>` para recursos que contêm HTML.</span><span class="sxs-lookup"><span data-stu-id="77187-616">Use the `IHtmlLocalizer<T>` implementation for resources that contain HTML.</span></span> <span data-ttu-id="77187-617">O `IHtmlLocalizer` codifica em HTML os argumentos que são formatados na cadeia de caracteres de recurso, mas não codifica em HTML a cadeia de caracteres de recurso em si.</span><span class="sxs-lookup"><span data-stu-id="77187-617">`IHtmlLocalizer` HTML encodes arguments that are formatted in the resource string, but doesn't HTML encode the resource string itself.</span></span> <span data-ttu-id="77187-618">Na amostra realçada abaixo, apenas o valor do parâmetro `name` é codificado em HTML.</span><span class="sxs-lookup"><span data-stu-id="77187-618">In the sample highlighted below, only the value of `name` parameter is HTML encoded.</span></span>

[!code-csharp[](../fundamentals/localization/sample/Localization/Controllers/BookController.cs?highlight=3,5,20&start=1&end=24)]

<span data-ttu-id="77187-619">**Observação:** em geral, recomendamos localizar somente o texto e não o HTML.</span><span class="sxs-lookup"><span data-stu-id="77187-619">**Note:** You generally want to only localize text and not HTML.</span></span>

<span data-ttu-id="77187-620">No nível mais baixo, você pode obter `IStringLocalizerFactory` com a [Injeção de Dependência](dependency-injection.md):</span><span class="sxs-lookup"><span data-stu-id="77187-620">At the lowest level, you can get `IStringLocalizerFactory` out of [Dependency Injection](dependency-injection.md):</span></span>

[!code-csharp[](localization/sample/Localization/Controllers/TestController.cs?start=9&end=26&highlight=7-13)]

<span data-ttu-id="77187-621">O código acima demonstra cada um dos dois métodos Create de alocador.</span><span class="sxs-lookup"><span data-stu-id="77187-621">The code above demonstrates each of the two factory create methods.</span></span>

<span data-ttu-id="77187-622">Você pode particionar as cadeias de caracteres localizadas por controlador, área ou ter apenas um contêiner.</span><span class="sxs-lookup"><span data-stu-id="77187-622">You can partition your localized strings by controller, area, or have just one container.</span></span> <span data-ttu-id="77187-623">No aplicativo de exemplo, uma classe fictícia chamada `SharedResource` é usada para recursos compartilhados.</span><span class="sxs-lookup"><span data-stu-id="77187-623">In the sample app, a dummy class named `SharedResource` is used for shared resources.</span></span>

[!code-csharp[](localization/sample/Localization/Resources/SharedResource.cs)]

<span data-ttu-id="77187-624">Alguns desenvolvedores usam a classe `Startup` para conter cadeias de caracteres globais ou compartilhadas.</span><span class="sxs-lookup"><span data-stu-id="77187-624">Some developers use the `Startup` class to contain global or shared strings.</span></span> <span data-ttu-id="77187-625">Na amostra abaixo, os localizadores `InfoController` e `SharedResource` são usados:</span><span class="sxs-lookup"><span data-stu-id="77187-625">In the sample below, the `InfoController` and the `SharedResource` localizers are used:</span></span>

[!code-csharp[](localization/sample/Localization/Controllers/InfoController.cs?range=9-26)]

## <a name="view-localization"></a><span data-ttu-id="77187-626">Localização de exibição</span><span class="sxs-lookup"><span data-stu-id="77187-626">View localization</span></span>

<span data-ttu-id="77187-627">O serviço `IViewLocalizer` fornece cadeias de caracteres localizadas para uma [exibição](xref:mvc/views/overview).</span><span class="sxs-lookup"><span data-stu-id="77187-627">The `IViewLocalizer` service provides localized strings for a [view](xref:mvc/views/overview).</span></span> <span data-ttu-id="77187-628">A classe `ViewLocalizer` implementa essa interface e encontra o local do recurso no caminho do arquivo de exibição.</span><span class="sxs-lookup"><span data-stu-id="77187-628">The `ViewLocalizer` class implements this interface and finds the resource location from the view file path.</span></span> <span data-ttu-id="77187-629">O seguinte código mostra como usar a implementação padrão de `IViewLocalizer`:</span><span class="sxs-lookup"><span data-stu-id="77187-629">The following code shows how to use the default implementation of `IViewLocalizer`:</span></span>

[!code-cshtml[](localization/sample/Localization/Views/Home/About.cshtml)]

<span data-ttu-id="77187-630">A implementação padrão de `IViewLocalizer` encontra o arquivo de recurso com base no nome de arquivo da exibição.</span><span class="sxs-lookup"><span data-stu-id="77187-630">The default implementation of `IViewLocalizer` finds the resource file based on the view's file name.</span></span> <span data-ttu-id="77187-631">Não há nenhuma opção para usar um arquivo de recurso compartilhado global.</span><span class="sxs-lookup"><span data-stu-id="77187-631">There's no option to use a global shared resource file.</span></span> <span data-ttu-id="77187-632">`ViewLocalizer`implementa o localizador usando `IHtmlLocalizer` , portanto, Razor não codifica a cadeia de caracteres localizada em HTML.</span><span class="sxs-lookup"><span data-stu-id="77187-632">`ViewLocalizer` implements the localizer using `IHtmlLocalizer`, so Razor doesn't HTML encode the localized string.</span></span> <span data-ttu-id="77187-633">Parametrize cadeias de recurso e o `IViewLocalizer` codificará em HTML os parâmetros, mas não a cadeia de caracteres de recurso.</span><span class="sxs-lookup"><span data-stu-id="77187-633">You can parameterize resource strings and `IViewLocalizer` will HTML encode the parameters, but not the resource string.</span></span> <span data-ttu-id="77187-634">Considere a seguinte Razor marcação:</span><span class="sxs-lookup"><span data-stu-id="77187-634">Consider the following Razor markup:</span></span>

```cshtml
@Localizer["<i>Hello</i> <b>{0}!</b>", UserManager.GetUserName(User)]
```

<span data-ttu-id="77187-635">Um arquivo de recurso em francês pode conter o seguinte:</span><span class="sxs-lookup"><span data-stu-id="77187-635">A French resource file could contain the following:</span></span>

| <span data-ttu-id="77187-636">Chave</span><span class="sxs-lookup"><span data-stu-id="77187-636">Key</span></span> | <span data-ttu-id="77187-637">Valor</span><span class="sxs-lookup"><span data-stu-id="77187-637">Value</span></span> |
| ----- | ------ |
| `<i>Hello</i> <b>{0}!</b>` | `<i>Bonjour</i> <b>{0} !</b>` |

<span data-ttu-id="77187-638">A exibição renderizada contém a marcação HTML do arquivo de recurso.</span><span class="sxs-lookup"><span data-stu-id="77187-638">The rendered view would contain the HTML markup from the resource file.</span></span>

<span data-ttu-id="77187-639">**Observação:** em geral, recomendamos localizar somente o texto e não o HTML.</span><span class="sxs-lookup"><span data-stu-id="77187-639">**Note:** You generally want to only localize text and not HTML.</span></span>

<span data-ttu-id="77187-640">Para usar um arquivo de recurso compartilhado em uma exibição, injete `IHtmlLocalizer<T>`:</span><span class="sxs-lookup"><span data-stu-id="77187-640">To use a shared resource file in a view, inject `IHtmlLocalizer<T>`:</span></span>

[!code-cshtml[](../fundamentals/localization/sample/Localization/Views/Test/About.cshtml?highlight=5,12)]

## <a name="dataannotations-localization"></a><span data-ttu-id="77187-641">Localização de DataAnnotations</span><span class="sxs-lookup"><span data-stu-id="77187-641">DataAnnotations localization</span></span>

<span data-ttu-id="77187-642">As mensagens de erro de DataAnnotations são localizadas com `IStringLocalizer<T>`.</span><span class="sxs-lookup"><span data-stu-id="77187-642">DataAnnotations error messages are localized with `IStringLocalizer<T>`.</span></span> <span data-ttu-id="77187-643">Usando a opção `ResourcesPath = "Resources"`, as mensagens de erro em `RegisterViewModel` podem ser armazenadas em um dos seguintes caminhos:</span><span class="sxs-lookup"><span data-stu-id="77187-643">Using the option `ResourcesPath = "Resources"`, the error messages in `RegisterViewModel` can be stored in either of the following paths:</span></span>

* <span data-ttu-id="77187-644">*Recursos/ViewModels. Account. RegisterViewModel. fr. resx*</span><span class="sxs-lookup"><span data-stu-id="77187-644">*Resources/ViewModels.Account.RegisterViewModel.fr.resx*</span></span>
* <span data-ttu-id="77187-645">*Resources/ViewModels/Account/RegisterViewModel.fr.resx*</span><span class="sxs-lookup"><span data-stu-id="77187-645">*Resources/ViewModels/Account/RegisterViewModel.fr.resx*</span></span>

[!code-csharp[](localization/sample/Localization/ViewModels/Account/RegisterViewModel.cs?start=9&end=26)]

<span data-ttu-id="77187-646">No ASP.NET Core MVC 1.1.0 e superior, atributos que não sejam de validação são localizados.</span><span class="sxs-lookup"><span data-stu-id="77187-646">In ASP.NET Core MVC 1.1.0 and higher, non-validation attributes are localized.</span></span> <span data-ttu-id="77187-647">O ASP.NET Core MVC 1.0 **não** pesquisa cadeias de caracteres localizadas para atributos que não sejam de validação.</span><span class="sxs-lookup"><span data-stu-id="77187-647">ASP.NET Core MVC 1.0 does **not** look up localized strings for non-validation attributes.</span></span>

<a name="one-resource-string-multiple-classes"></a>

### <a name="using-one-resource-string-for-multiple-classes"></a><span data-ttu-id="77187-648">Usando uma cadeia de caracteres de recurso para várias classes</span><span class="sxs-lookup"><span data-stu-id="77187-648">Using one resource string for multiple classes</span></span>

<span data-ttu-id="77187-649">O seguinte código mostra como usar uma cadeia de caracteres de recurso para atributos de validação com várias classes:</span><span class="sxs-lookup"><span data-stu-id="77187-649">The following code shows how to use one resource string for validation attributes with multiple classes:</span></span>

```csharp
public void ConfigureServices(IServiceCollection services)
{
    services.AddMvc()
        .AddDataAnnotationsLocalization(options => {
            options.DataAnnotationLocalizerProvider = (type, factory) =>
                factory.Create(typeof(SharedResource));
        });
}
```

<span data-ttu-id="77187-650">No código anterior, `SharedResource` é a classe correspondente ao resx em que as mensagens de validação são armazenadas.</span><span class="sxs-lookup"><span data-stu-id="77187-650">In the preceding code, `SharedResource` is the class corresponding to the resx where your validation messages are stored.</span></span> <span data-ttu-id="77187-651">Com essa abordagem, DataAnnotations usará apenas `SharedResource`, em vez de o recurso para cada classe.</span><span class="sxs-lookup"><span data-stu-id="77187-651">With this approach, DataAnnotations will only use `SharedResource`, rather than the resource for each class.</span></span>

## <a name="provide-localized-resources-for-the-languages-and-cultures-you-support"></a><span data-ttu-id="77187-652">Fornecer recursos localizados para as culturas e os idiomas aos quais você dá suporte</span><span class="sxs-lookup"><span data-stu-id="77187-652">Provide localized resources for the languages and cultures you support</span></span>

### <a name="supportedcultures-and-supporteduicultures"></a><span data-ttu-id="77187-653">SupportedCultures e SupportedUICultures</span><span class="sxs-lookup"><span data-stu-id="77187-653">SupportedCultures and SupportedUICultures</span></span>

<span data-ttu-id="77187-654">O ASP.NET Core permite que você especifique dois valores de cultura, `SupportedCultures` e `SupportedUICultures`.</span><span class="sxs-lookup"><span data-stu-id="77187-654">ASP.NET Core allows you to specify two culture values, `SupportedCultures` and `SupportedUICultures`.</span></span> <span data-ttu-id="77187-655">O objeto [CultureInfo](/dotnet/api/system.globalization.cultureinfo) para `SupportedCultures` determina os resultados das funções dependentes de cultura, como data, hora, número e formatação de moeda.</span><span class="sxs-lookup"><span data-stu-id="77187-655">The [CultureInfo](/dotnet/api/system.globalization.cultureinfo) object for `SupportedCultures` determines the results of culture-dependent functions, such as date, time, number, and currency formatting.</span></span> <span data-ttu-id="77187-656">`SupportedCultures` também determina a ordem de classificação de texto, convenções de uso de maiúsculas e comparações de cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="77187-656">`SupportedCultures` also determines the sorting order of text, casing conventions, and string comparisons.</span></span> <span data-ttu-id="77187-657">Consulte [CultureInfo.CurrentCulture](/dotnet/api/system.stringcomparer.currentculture#System_StringComparer_CurrentCulture) para obter mais informações sobre como o servidor obtém a Cultura.</span><span class="sxs-lookup"><span data-stu-id="77187-657">See [CultureInfo.CurrentCulture](/dotnet/api/system.stringcomparer.currentculture#System_StringComparer_CurrentCulture) for more info on how the server gets the Culture.</span></span> <span data-ttu-id="77187-658">O `SupportedUICultures` determina quais cadeias de caracteres traduzidas (de arquivos *. resx* ) são pesquisadas pelo [ResourceManager](/dotnet/api/system.resources.resourcemanager).</span><span class="sxs-lookup"><span data-stu-id="77187-658">The `SupportedUICultures` determines which translated strings (from *.resx* files) are looked up by the [ResourceManager](/dotnet/api/system.resources.resourcemanager).</span></span> <span data-ttu-id="77187-659">O `ResourceManager` apenas pesquisa cadeias de caracteres específicas a uma cultura determinadas por `CurrentUICulture`.</span><span class="sxs-lookup"><span data-stu-id="77187-659">The `ResourceManager` simply looks up culture-specific strings that's determined by `CurrentUICulture`.</span></span> <span data-ttu-id="77187-660">Cada thread no .NET tem objetos `CurrentCulture` e `CurrentUICulture`.</span><span class="sxs-lookup"><span data-stu-id="77187-660">Every thread in .NET has `CurrentCulture` and `CurrentUICulture` objects.</span></span> <span data-ttu-id="77187-661">O ASP.NET Core inspeciona esses valores durante a renderização de funções dependentes de cultura.</span><span class="sxs-lookup"><span data-stu-id="77187-661">ASP.NET Core inspects these values when rendering culture-dependent functions.</span></span> <span data-ttu-id="77187-662">Por exemplo, se a cultura do thread atual estiver definida como "en-US" (inglês, Estados Unidos), `DateTime.Now.ToLongDateString()` exibirá "Thursday, February 18, 2016", mas se `CurrentCulture` estiver definida como "es-ES" (espanhol, Espanha), o resultado será "jueves, 18 de febrero de 2016".</span><span class="sxs-lookup"><span data-stu-id="77187-662">For example, if the current thread's culture is set to "en-US" (English, United States), `DateTime.Now.ToLongDateString()` displays "Thursday, February 18, 2016", but if `CurrentCulture` is set to "es-ES" (Spanish, Spain) the output will be "jueves, 18 de febrero de 2016".</span></span>

## <a name="resource-files"></a><span data-ttu-id="77187-663">Arquivos de recurso</span><span class="sxs-lookup"><span data-stu-id="77187-663">Resource files</span></span>

<span data-ttu-id="77187-664">Um arquivo de recurso é um mecanismo útil para separar cadeias de caracteres localizáveis do código.</span><span class="sxs-lookup"><span data-stu-id="77187-664">A resource file is a useful mechanism for separating localizable strings from code.</span></span> <span data-ttu-id="77187-665">As cadeias de caracteres traduzidas para o idioma não padrão são isoladas em arquivos de recurso *. resx* .</span><span class="sxs-lookup"><span data-stu-id="77187-665">Translated strings for the non-default language are isolated in *.resx* resource files.</span></span> <span data-ttu-id="77187-666">Por exemplo, talvez você queira criar um arquivo de recurso em espanhol chamado *Welcome.es.resx* contendo cadeias de caracteres traduzidas.</span><span class="sxs-lookup"><span data-stu-id="77187-666">For example, you might want to create Spanish resource file named *Welcome.es.resx* containing translated strings.</span></span> <span data-ttu-id="77187-667">"es" são o código de idioma para o espanhol.</span><span class="sxs-lookup"><span data-stu-id="77187-667">"es" is the language code for Spanish.</span></span> <span data-ttu-id="77187-668">Para criar esse arquivo de recurso no Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="77187-668">To create this resource file in Visual Studio:</span></span>

1. <span data-ttu-id="77187-669">No **Gerenciador de Soluções**, clique com o botão direito do mouse na pasta que conterá o arquivo de recurso > **Adicionar** > **Novo Item**.</span><span class="sxs-lookup"><span data-stu-id="77187-669">In **Solution Explorer**, right click on the folder which will contain the resource file > **Add** > **New Item**.</span></span>

    ![Menu contextual aninhado: no Gerenciador de Soluções, um menu contextual é aberto para Recursos.](localization/_static/newi.png)

2. <span data-ttu-id="77187-672">Na caixa **Pesquisar modelos instalados**, insira "recurso" e nomeie o arquivo.</span><span class="sxs-lookup"><span data-stu-id="77187-672">In the **Search installed templates** box, enter "resource" and name the file.</span></span>

    ![Caixa de diálogo Adicionar Novo Item](localization/_static/res.png)

3. <span data-ttu-id="77187-674">Insira o valor da chave (cadeia de caracteres nativa) na coluna **Nome** e a cadeia de caracteres traduzida na coluna **Valor**.</span><span class="sxs-lookup"><span data-stu-id="77187-674">Enter the key value (native string) in the **Name** column and the translated string in the **Value** column.</span></span>

    ![Arquivo Welcome.es.resx (o arquivo de recurso Welcome em espanhol) com a palavra Hello na coluna Nome e a palavra Hola (Olá, em espanhol) na coluna valor](localization/_static/hola.png)

    <span data-ttu-id="77187-676">O Visual Studio mostra o arquivo *Welcome.es.resx*.</span><span class="sxs-lookup"><span data-stu-id="77187-676">Visual Studio shows the *Welcome.es.resx* file.</span></span>

    ![Gerenciador de Soluções mostrando o arquivo de recurso Welcome em espanhol (es)](localization/_static/se.png)

## <a name="resource-file-naming"></a><span data-ttu-id="77187-678">Nomenclatura do arquivo de recurso</span><span class="sxs-lookup"><span data-stu-id="77187-678">Resource file naming</span></span>

<span data-ttu-id="77187-679">Os recursos são nomeados com o nome completo do tipo de sua classe menos o nome do assembly.</span><span class="sxs-lookup"><span data-stu-id="77187-679">Resources are named for the full type name of their class minus the assembly name.</span></span> <span data-ttu-id="77187-680">Por exemplo, um recurso em francês em um projeto cujo assembly principal é `LocalizationWebsite.Web.dll` para a classe `LocalizationWebsite.Web.Startup` será nomeado *Startup.fr.resx*.</span><span class="sxs-lookup"><span data-stu-id="77187-680">For example, a French resource in a project whose main assembly is `LocalizationWebsite.Web.dll` for the class `LocalizationWebsite.Web.Startup` would be named *Startup.fr.resx*.</span></span> <span data-ttu-id="77187-681">Um recurso para a classe `LocalizationWebsite.Web.Controllers.HomeController` será nomeado *Controllers.HomeController.fr.resx*.</span><span class="sxs-lookup"><span data-stu-id="77187-681">A resource for the class `LocalizationWebsite.Web.Controllers.HomeController` would be named *Controllers.HomeController.fr.resx*.</span></span> <span data-ttu-id="77187-682">Se o namespace da classe de destino não for o mesmo que o nome do assembly, você precisará do nome completo do tipo.</span><span class="sxs-lookup"><span data-stu-id="77187-682">If your targeted class's namespace isn't the same as the assembly name you will need the full type name.</span></span> <span data-ttu-id="77187-683">Por exemplo, no projeto de exemplo, um recurso para o tipo `ExtraNamespace.Tools` será nomeado *ExtraNamespace.Tools.fr.resx*.</span><span class="sxs-lookup"><span data-stu-id="77187-683">For example, in the sample project a resource for the type `ExtraNamespace.Tools` would be named *ExtraNamespace.Tools.fr.resx*.</span></span>

<span data-ttu-id="77187-684">No projeto de exemplo, o método `ConfigureServices` define o `ResourcesPath` como "Resources", de modo que o caminho relativo do projeto para o arquivo de recurso em francês do controlador principal seja *Resources/Controllers.HomeController.fr.resx*.</span><span class="sxs-lookup"><span data-stu-id="77187-684">In the sample project, the `ConfigureServices` method sets the `ResourcesPath` to "Resources", so the project relative path for the home controller's French resource file is *Resources/Controllers.HomeController.fr.resx*.</span></span> <span data-ttu-id="77187-685">Como alternativa, você pode usar pastas para organizar arquivos de recurso.</span><span class="sxs-lookup"><span data-stu-id="77187-685">Alternatively, you can use folders to organize resource files.</span></span> <span data-ttu-id="77187-686">Para o controlador principal, o caminho será *Resources/Controllers/HomeController.fr.resx*.</span><span class="sxs-lookup"><span data-stu-id="77187-686">For the home controller, the path would be *Resources/Controllers/HomeController.fr.resx*.</span></span> <span data-ttu-id="77187-687">Se você não usar a opção `ResourcesPath`, o arquivo *.resx* entrará no diretório base do projeto.</span><span class="sxs-lookup"><span data-stu-id="77187-687">If you don't use the `ResourcesPath` option, the *.resx* file would go in the project base directory.</span></span> <span data-ttu-id="77187-688">O arquivo de recurso para `HomeController` será nomeado *Controllers.HomeController.fr.resx*.</span><span class="sxs-lookup"><span data-stu-id="77187-688">The resource file for `HomeController` would be named *Controllers.HomeController.fr.resx*.</span></span> <span data-ttu-id="77187-689">A opção de usar a convenção de nomenclatura de ponto ou caminho depende de como você deseja organizar os arquivos de recurso.</span><span class="sxs-lookup"><span data-stu-id="77187-689">The choice of using the dot or path naming convention depends on how you want to organize your resource files.</span></span>

| <span data-ttu-id="77187-690">Nome do recurso</span><span class="sxs-lookup"><span data-stu-id="77187-690">Resource name</span></span> | <span data-ttu-id="77187-691">Nomenclatura de ponto ou caminho</span><span class="sxs-lookup"><span data-stu-id="77187-691">Dot or path naming</span></span> |
| ------------   | ------------- |
| <span data-ttu-id="77187-692">Resources/Controllers.HomeController.fr.resx</span><span class="sxs-lookup"><span data-stu-id="77187-692">Resources/Controllers.HomeController.fr.resx</span></span> | <span data-ttu-id="77187-693">Ponto</span><span class="sxs-lookup"><span data-stu-id="77187-693">Dot</span></span>  |
| <span data-ttu-id="77187-694">Resources/Controllers/HomeController.fr.resx</span><span class="sxs-lookup"><span data-stu-id="77187-694">Resources/Controllers/HomeController.fr.resx</span></span>  | <span data-ttu-id="77187-695">Caminho</span><span class="sxs-lookup"><span data-stu-id="77187-695">Path</span></span> |
|    |     |

<span data-ttu-id="77187-696">Os arquivos de recurso usando `@inject IViewLocalizer` em Razor exibições seguem um padrão semelhante.</span><span class="sxs-lookup"><span data-stu-id="77187-696">Resource files using `@inject IViewLocalizer` in Razor views follow a similar pattern.</span></span> <span data-ttu-id="77187-697">O arquivo de recurso de uma exibição pode ser nomeado usando a nomenclatura de ponto ou de caminho.</span><span class="sxs-lookup"><span data-stu-id="77187-697">The resource file for a view can be named using either dot naming or path naming.</span></span> Razor<span data-ttu-id="77187-698">exiba os arquivos de recurso que imitam o caminho do arquivo de exibição associado.</span><span class="sxs-lookup"><span data-stu-id="77187-698"> view resource files mimic the path of their associated view file.</span></span> <span data-ttu-id="77187-699">Supondo que definimos o `ResourcesPath` como "Resources", o arquivo de recurso em francês associado à exibição *Views/Home/About.cshtml* pode ser um dos seguintes:</span><span class="sxs-lookup"><span data-stu-id="77187-699">Assuming we set the `ResourcesPath` to "Resources", the French resource file associated with the *Views/Home/About.cshtml* view could be either of the following:</span></span>

* <span data-ttu-id="77187-700">Resources/Views/Home/About.fr.resx</span><span class="sxs-lookup"><span data-stu-id="77187-700">Resources/Views/Home/About.fr.resx</span></span>

* <span data-ttu-id="77187-701">Resources/Views.Home.About.fr.resx</span><span class="sxs-lookup"><span data-stu-id="77187-701">Resources/Views.Home.About.fr.resx</span></span>

<span data-ttu-id="77187-702">Se você não usar a opção `ResourcesPath`, o arquivo *.resx* de uma exibição estará localizado na mesma pasta da exibição.</span><span class="sxs-lookup"><span data-stu-id="77187-702">If you don't use the `ResourcesPath` option, the *.resx* file for a view would be located in the same folder as the view.</span></span>

### <a name="rootnamespaceattribute"></a><span data-ttu-id="77187-703">RootNamespaceAttribute</span><span class="sxs-lookup"><span data-stu-id="77187-703">RootNamespaceAttribute</span></span> 

<span data-ttu-id="77187-704">O atributo [RootNamespace](/dotnet/api/microsoft.extensions.localization.rootnamespaceattribute?view=aspnetcore-2.1) fornece o namespace raiz de um assembly quando o namespace raiz de um assembly é diferente do nome do assembly.</span><span class="sxs-lookup"><span data-stu-id="77187-704">The [RootNamespace](/dotnet/api/microsoft.extensions.localization.rootnamespaceattribute?view=aspnetcore-2.1) attribute provides the root namespace of an assembly when the root namespace of an assembly is different than the assembly name.</span></span> 

> [!WARNING]
> <span data-ttu-id="77187-705">Isso pode ocorrer quando o nome de um projeto não é um identificador .NET válido.</span><span class="sxs-lookup"><span data-stu-id="77187-705">This can occur when a project's name is not a valid .NET identifier.</span></span> <span data-ttu-id="77187-706">Por exemplo `my-project-name.csproj` , usará o namespace raiz `my_project_name` e o nome do assembly `my-project-name` que levam a esse erro.</span><span class="sxs-lookup"><span data-stu-id="77187-706">For instance `my-project-name.csproj` will use the root namespace `my_project_name` and the assembly name `my-project-name` leading to this error.</span></span> 

<span data-ttu-id="77187-707">Se o namespace raiz de um assembly é diferente do nome do assembly:</span><span class="sxs-lookup"><span data-stu-id="77187-707">If the root namespace of an assembly is different than the assembly name:</span></span>

* <span data-ttu-id="77187-708">A localização não funciona por padrão.</span><span class="sxs-lookup"><span data-stu-id="77187-708">Localization does not work by default.</span></span>
* <span data-ttu-id="77187-709">A localização falha devido à maneira como os recursos são pesquisados dentro do assembly.</span><span class="sxs-lookup"><span data-stu-id="77187-709">Localization fails due to the way resources are searched for within the assembly.</span></span> <span data-ttu-id="77187-710">`RootNamespace` é um valor de tempo de build que não está disponível para o processo em execução.</span><span class="sxs-lookup"><span data-stu-id="77187-710">`RootNamespace` is a build-time value which is not available to the executing process.</span></span> 

<span data-ttu-id="77187-711">Se o `RootNamespace` é diferente de `AssemblyName`, inclua o seguinte no *AssemblyInfo.cs* (com valores de parâmetro substituídos pelos valores reais):</span><span class="sxs-lookup"><span data-stu-id="77187-711">If the `RootNamespace` is different from the `AssemblyName`, include the following in *AssemblyInfo.cs* (with parameter values replaced with the actual values):</span></span>

```csharp
using System.Reflection;
using Microsoft.Extensions.Localization;

[assembly: ResourceLocation("Resource Folder Name")]
[assembly: RootNamespace("App Root Namespace")]
```

<span data-ttu-id="77187-712">O código anterior permite a resolução bem-sucedida de arquivos resx.</span><span class="sxs-lookup"><span data-stu-id="77187-712">The preceding code enables the successful resolution of resx files.</span></span>

## <a name="culture-fallback-behavior"></a><span data-ttu-id="77187-713">Comportamento de fallback da cultura</span><span class="sxs-lookup"><span data-stu-id="77187-713">Culture fallback behavior</span></span>

<span data-ttu-id="77187-714">Ao procurar por um recurso, a localização participa do "fallback de cultura".</span><span class="sxs-lookup"><span data-stu-id="77187-714">When searching for a resource, localization engages in "culture fallback".</span></span> <span data-ttu-id="77187-715">Começando com a cultura solicitada, se ela não for encontrada, ela será revertida para a cultura pai dessa cultura.</span><span class="sxs-lookup"><span data-stu-id="77187-715">Starting from the requested culture, if not found, it reverts to the parent culture of that culture.</span></span> <span data-ttu-id="77187-716">Além disso, a propriedade [CultureInfo.Parent](/dotnet/api/system.globalization.cultureinfo.parent) representa a cultura pai.</span><span class="sxs-lookup"><span data-stu-id="77187-716">As an aside, the [CultureInfo.Parent](/dotnet/api/system.globalization.cultureinfo.parent) property represents the parent culture.</span></span> <span data-ttu-id="77187-717">Isso normalmente (mas nem sempre) significa a remoção do significante do ISO.</span><span class="sxs-lookup"><span data-stu-id="77187-717">This usually (but not always) means removing the national signifier from the ISO.</span></span> <span data-ttu-id="77187-718">Por exemplo, o dialeto do espanhol falado no México é "es-MX".</span><span class="sxs-lookup"><span data-stu-id="77187-718">For example, the dialect of Spanish spoken in Mexico is "es-MX".</span></span> <span data-ttu-id="77187-719">Ele tem o pai "es", ou seja, espanhol, não específico de nenhum país.</span><span class="sxs-lookup"><span data-stu-id="77187-719">It has the parent "es"&mdash;Spanish non-specific to any country.</span></span>

<span data-ttu-id="77187-720">Imagine que seu site receba uma solicitação de um recurso “Boas-vindas" usando a cultura"fr-CA".</span><span class="sxs-lookup"><span data-stu-id="77187-720">Imagine your site receives a request for a "Welcome" resource using culture "fr-CA".</span></span> <span data-ttu-id="77187-721">O sistema de localização procura os seguintes recursos, em ordem, e seleciona a primeira correspondência:</span><span class="sxs-lookup"><span data-stu-id="77187-721">The localization system looks for the following resources, in order, and selects the first match:</span></span>

* <span data-ttu-id="77187-722">*Welcome.fr-CA.resx*</span><span class="sxs-lookup"><span data-stu-id="77187-722">*Welcome.fr-CA.resx*</span></span>
* <span data-ttu-id="77187-723">*Welcome.fr.resx*</span><span class="sxs-lookup"><span data-stu-id="77187-723">*Welcome.fr.resx*</span></span>
* <span data-ttu-id="77187-724">*Welcome.resx* (se o `NeutralResourcesLanguage` for "fr-CA")</span><span class="sxs-lookup"><span data-stu-id="77187-724">*Welcome.resx* (if the `NeutralResourcesLanguage` is "fr-CA")</span></span>

<span data-ttu-id="77187-725">Por exemplo, se você remover o designador de cultura ".fr" e tiver a cultura definida como francês, o arquivo de recurso padrão será lido e as cadeias de caracteres serão localizadas.</span><span class="sxs-lookup"><span data-stu-id="77187-725">As an example, if you remove the ".fr" culture designator and you have the culture set to French, the default resource file is read and strings are localized.</span></span> <span data-ttu-id="77187-726">O Gerenciador de Recursos designa um padrão ou um recurso de fallback para quando nenhuma opção atende à cultura solicitada.</span><span class="sxs-lookup"><span data-stu-id="77187-726">The Resource manager designates a default or fallback resource for when nothing meets your requested culture.</span></span> <span data-ttu-id="77187-727">Se você deseja apenas retornar a chave quando um recurso está ausente para a cultura solicitada, não deve ter um arquivo de recurso padrão.</span><span class="sxs-lookup"><span data-stu-id="77187-727">If you want to just return the key when missing a resource for the requested culture you must not have a default resource file.</span></span>

### <a name="generate-resource-files-with-visual-studio"></a><span data-ttu-id="77187-728">Gerar arquivos de recurso com o Visual Studio</span><span class="sxs-lookup"><span data-stu-id="77187-728">Generate resource files with Visual Studio</span></span>

<span data-ttu-id="77187-729">Se você criar um arquivo de recurso no Visual Studio sem uma cultura no nome do arquivo (por exemplo, *Welcome.resx*), o Visual Studio criará uma classe do C# com uma propriedade para cada cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="77187-729">If you create a resource file in Visual Studio without a culture in the file name (for example, *Welcome.resx*), Visual Studio will create a C# class with a property for each string.</span></span> <span data-ttu-id="77187-730">Geralmente isso não é o desejado com o ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="77187-730">That's usually not what you want with ASP.NET Core.</span></span> <span data-ttu-id="77187-731">Normalmente você não tem um arquivo de recurso *.resx* padrão (um arquivo *.resx* sem o nome de cultura).</span><span class="sxs-lookup"><span data-stu-id="77187-731">You typically don't have a default *.resx* resource file (a *.resx* file without the culture name).</span></span> <span data-ttu-id="77187-732">Sugerimos que você crie o arquivo *.resx* com um nome de cultura (por exemplo *Welcome.fr.resx*).</span><span class="sxs-lookup"><span data-stu-id="77187-732">We suggest you create the *.resx* file with a culture name (for example *Welcome.fr.resx*).</span></span> <span data-ttu-id="77187-733">Quando você criar um arquivo *.resx* com um nome de cultura, o Visual Studio não gerará o arquivo de classe.</span><span class="sxs-lookup"><span data-stu-id="77187-733">When you create a *.resx* file with a culture name, Visual Studio won't generate the class file.</span></span>

### <a name="add-other-cultures"></a><span data-ttu-id="77187-734">Adicionar outras culturas</span><span class="sxs-lookup"><span data-stu-id="77187-734">Add other cultures</span></span>

<span data-ttu-id="77187-735">Cada combinação de idioma e cultura (que não seja o idioma padrão) exige um arquivo de recurso exclusivo.</span><span class="sxs-lookup"><span data-stu-id="77187-735">Each language and culture combination (other than the default language) requires a unique resource file.</span></span> <span data-ttu-id="77187-736">Crie arquivos de recurso para diferentes culturas e localidades criando novos arquivos de recurso, nos quais os códigos ISO e de idioma fazem parte do nome do arquivo (por exemplo, **en-us**, **fr-ca** e **en-gb**).</span><span class="sxs-lookup"><span data-stu-id="77187-736">You create resource files for different cultures and locales by creating new resource files in which the ISO language codes are part of the file name (for example, **en-us**, **fr-ca**, and **en-gb**).</span></span> <span data-ttu-id="77187-737">Esses códigos ISO são colocados entre o nome do arquivo e a extensão de arquivo *.resx*, como em *Welcome.es-MX.resx* (espanhol/México).</span><span class="sxs-lookup"><span data-stu-id="77187-737">These ISO codes are placed between the file name and the *.resx* file extension, as in *Welcome.es-MX.resx* (Spanish/Mexico).</span></span>

## <a name="implement-a-strategy-to-select-the-languageculture-for-each-request"></a><span data-ttu-id="77187-738">Implementar uma estratégia para selecionar o idioma e a cultura para cada solicitação</span><span class="sxs-lookup"><span data-stu-id="77187-738">Implement a strategy to select the language/culture for each request</span></span>

### <a name="configure-localization"></a><span data-ttu-id="77187-739">Configurar a localização</span><span class="sxs-lookup"><span data-stu-id="77187-739">Configure localization</span></span>

<span data-ttu-id="77187-740">A localização é configurada no método `Startup.ConfigureServices`:</span><span class="sxs-lookup"><span data-stu-id="77187-740">Localization is configured in the `Startup.ConfigureServices` method:</span></span>

[!code-csharp[](localization/sample/Localization/Startup.cs?name=snippet1)]

* <span data-ttu-id="77187-741">`AddLocalization` Adiciona os serviços de localização ao contêiner de serviços.</span><span class="sxs-lookup"><span data-stu-id="77187-741">`AddLocalization` Adds the localization services to the services container.</span></span> <span data-ttu-id="77187-742">O código acima também define o caminho de recursos como "Resources".</span><span class="sxs-lookup"><span data-stu-id="77187-742">The code above also sets the resources path to "Resources".</span></span>

* <span data-ttu-id="77187-743">`AddViewLocalization` Adiciona suporte para os arquivos de exibição localizados.</span><span class="sxs-lookup"><span data-stu-id="77187-743">`AddViewLocalization` Adds support for localized view files.</span></span> <span data-ttu-id="77187-744">Nesta amostra, a localização de exibição se baseia no sufixo do arquivo de exibição.</span><span class="sxs-lookup"><span data-stu-id="77187-744">In this sample view localization is based on the view file suffix.</span></span> <span data-ttu-id="77187-745">Por exemplo, "fr" no arquivo *Index.fr.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="77187-745">For example "fr" in the *Index.fr.cshtml* file.</span></span>

* <span data-ttu-id="77187-746">`AddDataAnnotationsLocalization` Adiciona suporte para as mensagens de validação `DataAnnotations` localizadas por meio de abstrações `IStringLocalizer`.</span><span class="sxs-lookup"><span data-stu-id="77187-746">`AddDataAnnotationsLocalization` Adds support for localized `DataAnnotations` validation messages through `IStringLocalizer` abstractions.</span></span>

### <a name="localization-middleware"></a><span data-ttu-id="77187-747">Middleware de localização</span><span class="sxs-lookup"><span data-stu-id="77187-747">Localization middleware</span></span>

<span data-ttu-id="77187-748">A cultura atual em uma solicitação é definida no [Middleware](xref:fundamentals/middleware/index) de localização.</span><span class="sxs-lookup"><span data-stu-id="77187-748">The current culture on a request is set in the localization [Middleware](xref:fundamentals/middleware/index).</span></span> <span data-ttu-id="77187-749">O middleware de localização é habilitado no método `Startup.Configure`.</span><span class="sxs-lookup"><span data-stu-id="77187-749">The localization middleware is enabled in the `Startup.Configure` method.</span></span> <span data-ttu-id="77187-750">O middleware de localização precisa ser configurado antes de qualquer middleware que possa verificar a cultura de solicitação (por exemplo, `app.UseMvcWithDefaultRoute()`).</span><span class="sxs-lookup"><span data-stu-id="77187-750">The localization middleware must be configured before any middleware which might check the request culture (for example, `app.UseMvcWithDefaultRoute()`).</span></span>

[!code-csharp[](localization/sample/Localization/Startup.cs?name=snippet2)]
[!INCLUDE[about the series](~/includes/code-comments-loc.md)]

<span data-ttu-id="77187-751">`UseRequestLocalization` inicializa um objeto `RequestLocalizationOptions`.</span><span class="sxs-lookup"><span data-stu-id="77187-751">`UseRequestLocalization` initializes a `RequestLocalizationOptions` object.</span></span> <span data-ttu-id="77187-752">Em cada solicitação, a lista de `RequestCultureProvider` em `RequestLocalizationOptions` é enumerada e o primeiro provedor que pode determinar com êxito a cultura de solicitação é usado.</span><span class="sxs-lookup"><span data-stu-id="77187-752">On every request the list of `RequestCultureProvider` in the `RequestLocalizationOptions` is enumerated and the first provider that can successfully determine the request culture is used.</span></span> <span data-ttu-id="77187-753">Os provedores padrão são obtidos da classe `RequestLocalizationOptions`:</span><span class="sxs-lookup"><span data-stu-id="77187-753">The default providers come from the `RequestLocalizationOptions` class:</span></span>

1. `QueryStringRequestCultureProvider`
2. `CookieRequestCultureProvider`
3. `AcceptLanguageHeaderRequestCultureProvider`

<span data-ttu-id="77187-754">A lista padrão é apresentada do mais específico ao menos específico.</span><span class="sxs-lookup"><span data-stu-id="77187-754">The default list goes from most specific to least specific.</span></span> <span data-ttu-id="77187-755">Mais adiante neste artigo, veremos como você pode alterar a ordem e até mesmo adicionar um provedor de cultura personalizado.</span><span class="sxs-lookup"><span data-stu-id="77187-755">Later in the article we'll see how you can change the order and even add a custom culture provider.</span></span> <span data-ttu-id="77187-756">Se nenhum dos provedores pode determinar a cultura de solicitação, o `DefaultRequestCulture` é usado.</span><span class="sxs-lookup"><span data-stu-id="77187-756">If none of the providers can determine the request culture, the `DefaultRequestCulture` is used.</span></span>

### <a name="querystringrequestcultureprovider"></a><span data-ttu-id="77187-757">QueryStringRequestCultureProvider</span><span class="sxs-lookup"><span data-stu-id="77187-757">QueryStringRequestCultureProvider</span></span>

<span data-ttu-id="77187-758">Alguns aplicativos usarão uma cadeia de caracteres de consulta para definir a [cultura e a cultura da interface do usuário](https://msdn.microsoft.com/library/system.globalization.cultureinfo.aspx).</span><span class="sxs-lookup"><span data-stu-id="77187-758">Some apps will use a query string to set the [culture and UI culture](https://msdn.microsoft.com/library/system.globalization.cultureinfo.aspx).</span></span> <span data-ttu-id="77187-759">Para aplicativos que usam a abordagem do cabeçalho Accept-Language ou do cookie, a adição de uma cadeia de caracteres de consulta à URL é útil para depurar e testar o código.</span><span class="sxs-lookup"><span data-stu-id="77187-759">For apps that use the cookie or Accept-Language header approach, adding a query string to the URL is useful for debugging and testing code.</span></span> <span data-ttu-id="77187-760">Por padrão, o `QueryStringRequestCultureProvider` é registrado como o primeiro provedor de localização na lista `RequestCultureProvider`.</span><span class="sxs-lookup"><span data-stu-id="77187-760">By default, the `QueryStringRequestCultureProvider` is registered as the first localization provider in the `RequestCultureProvider` list.</span></span> <span data-ttu-id="77187-761">Passe os parâmetros `culture` e `ui-culture` da cadeia de caracteres de consulta.</span><span class="sxs-lookup"><span data-stu-id="77187-761">You pass the query string parameters `culture` and `ui-culture`.</span></span> <span data-ttu-id="77187-762">O seguinte exemplo define a cultura específica (idioma e região) como espanhol/México:</span><span class="sxs-lookup"><span data-stu-id="77187-762">The following example sets the specific culture (language and region) to Spanish/Mexico:</span></span>

   `http://localhost:5000/?culture=es-MX&ui-culture=es-MX`

<span data-ttu-id="77187-763">Se você passar somente uma das duas (`culture` ou `ui-culture`), o provedor da cadeia de caracteres de consulta definirá os dois valores usando aquela que foi passada.</span><span class="sxs-lookup"><span data-stu-id="77187-763">If you only pass in one of the two (`culture` or `ui-culture`), the query string provider will set both values using the one you passed in.</span></span> <span data-ttu-id="77187-764">Por exemplo, a definição apenas da cultura definirá a `Culture` e a `UICulture`:</span><span class="sxs-lookup"><span data-stu-id="77187-764">For example, setting just the culture will set both the `Culture` and the `UICulture`:</span></span>

   `http://localhost:5000/?culture=es-MX`

### <a name="cookierequestcultureprovider"></a><span data-ttu-id="77187-765">CookieRequestCultureProvider</span><span class="sxs-lookup"><span data-stu-id="77187-765">CookieRequestCultureProvider</span></span>

<span data-ttu-id="77187-766">Em geral, aplicativos de produção fornecerão um mecanismo para definir a cultura com o cookie de cultura do ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="77187-766">Production apps will often provide a mechanism to set the culture with the ASP.NET Core culture cookie.</span></span> <span data-ttu-id="77187-767">Use o método `MakeCookieValue` para criar um cookie.</span><span class="sxs-lookup"><span data-stu-id="77187-767">Use the `MakeCookieValue` method to create a cookie.</span></span>

<span data-ttu-id="77187-768">O `CookieRequestCultureProvider` `DefaultCookieName` retorna o nome de cookie padrão usado para rastrear as informações de cultura preferencial do usuário.</span><span class="sxs-lookup"><span data-stu-id="77187-768">The `CookieRequestCultureProvider` `DefaultCookieName` returns the default cookie name used to track the user's preferred culture information.</span></span> <span data-ttu-id="77187-769">O nome padrão do cookie é `.AspNetCore.Culture`.</span><span class="sxs-lookup"><span data-stu-id="77187-769">The default cookie name is `.AspNetCore.Culture`.</span></span>

<span data-ttu-id="77187-770">O formato do cookie é `c=%LANGCODE%|uic=%LANGCODE%`, em que `c` é `Culture` e `uic` é `UICulture`, por exemplo:</span><span class="sxs-lookup"><span data-stu-id="77187-770">The cookie format is `c=%LANGCODE%|uic=%LANGCODE%`, where `c` is `Culture` and `uic` is `UICulture`, for example:</span></span>

    c=en-UK|uic=en-US

<span data-ttu-id="77187-771">Se você especificar apenas as informações de cultura e a cultura da interface do usuário, a cultura especificada será usada para as informações de cultura e para a cultura da interface do usuário.</span><span class="sxs-lookup"><span data-stu-id="77187-771">If you only specify one of culture info and UI culture, the specified culture will be used for both culture info and UI culture.</span></span>

### <a name="the-accept-language-http-header"></a><span data-ttu-id="77187-772">O cabeçalho HTTP Accept-Language</span><span class="sxs-lookup"><span data-stu-id="77187-772">The Accept-Language HTTP header</span></span>

<span data-ttu-id="77187-773">O [cabeçalho Accept-Language](https://www.w3.org/International/questions/qa-accept-lang-locales) é configurável na maioria dos navegadores e originalmente foi criado para especificar o idioma do usuário.</span><span class="sxs-lookup"><span data-stu-id="77187-773">The [Accept-Language header](https://www.w3.org/International/questions/qa-accept-lang-locales) is settable in most browsers and was originally intended to specify the user's language.</span></span> <span data-ttu-id="77187-774">Essa configuração indica que o navegador foi definido para enviar ou herdou do sistema operacional subjacente.</span><span class="sxs-lookup"><span data-stu-id="77187-774">This setting indicates what the browser has been set to send or has inherited from the underlying operating system.</span></span> <span data-ttu-id="77187-775">O cabeçalho HTTP Accept-Language de uma solicitação do navegador não é uma maneira infalível de detectar o idioma preferencial do usuário (consulte [Definindo preferências de idioma em um navegador](https://www.w3.org/International/questions/qa-lang-priorities.en.php)).</span><span class="sxs-lookup"><span data-stu-id="77187-775">The Accept-Language HTTP header from a browser request isn't an infallible way to detect the user's preferred language (see [Setting language preferences in a browser](https://www.w3.org/International/questions/qa-lang-priorities.en.php)).</span></span> <span data-ttu-id="77187-776">Um aplicativo de produção deve incluir uma maneira para que um usuário personalize sua opção de cultura.</span><span class="sxs-lookup"><span data-stu-id="77187-776">A production app should include a way for a user to customize their choice of culture.</span></span>

### <a name="set-the-accept-language-http-header-in-ie"></a><span data-ttu-id="77187-777">Definir o cabeçalho HTTP Accept-Language no IE</span><span class="sxs-lookup"><span data-stu-id="77187-777">Set the Accept-Language HTTP header in IE</span></span>

1. <span data-ttu-id="77187-778">No ícone de engrenagem, toque em **Opções da Internet**.</span><span class="sxs-lookup"><span data-stu-id="77187-778">From the gear icon, tap **Internet Options**.</span></span>

2. <span data-ttu-id="77187-779">Toque em **Idiomas**.</span><span class="sxs-lookup"><span data-stu-id="77187-779">Tap **Languages**.</span></span>

    ![Opções da Internet](localization/_static/lang.png)

3. <span data-ttu-id="77187-781">Toque em **Definir Preferências de Idioma**.</span><span class="sxs-lookup"><span data-stu-id="77187-781">Tap **Set Language Preferences**.</span></span>

4. <span data-ttu-id="77187-782">Toque em **Adicionar um idioma**.</span><span class="sxs-lookup"><span data-stu-id="77187-782">Tap **Add a language**.</span></span>

5. <span data-ttu-id="77187-783">Adicione o idioma.</span><span class="sxs-lookup"><span data-stu-id="77187-783">Add the language.</span></span>

6. <span data-ttu-id="77187-784">Toque no idioma e, em seguida, em **Mover Para Cima**.</span><span class="sxs-lookup"><span data-stu-id="77187-784">Tap the language, then tap **Move Up**.</span></span>

### <a name="the-content-language-http-header"></a><span data-ttu-id="77187-785">O cabeçalho HTTP do idioma do conteúdo</span><span class="sxs-lookup"><span data-stu-id="77187-785">The Content-Language HTTP header</span></span>

<span data-ttu-id="77187-786">O cabeçalho da entidade de [linguagem de conteúdo](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Language) :</span><span class="sxs-lookup"><span data-stu-id="77187-786">The [Content-Language](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Language) entity header:</span></span>

 - <span data-ttu-id="77187-787">É usado para descrever os idiomas destinados ao público.</span><span class="sxs-lookup"><span data-stu-id="77187-787">Is used to describe the language(s) intended for the audience.</span></span>
 - <span data-ttu-id="77187-788">Permite que um usuário diferencie de acordo com a linguagem preferencial dos usuários.</span><span class="sxs-lookup"><span data-stu-id="77187-788">Allows a user to differentiate according to the users' own preferred language.</span></span>

<span data-ttu-id="77187-789">Os cabeçalhos de entidade são usados tanto em solicitações HTTP quanto em respostas.</span><span class="sxs-lookup"><span data-stu-id="77187-789">Entity headers are used in both HTTP requests and responses.</span></span>

<span data-ttu-id="77187-790">O `Content-Language` cabeçalho pode ser adicionado definindo a propriedade `ApplyCurrentCultureToResponseHeaders` .</span><span class="sxs-lookup"><span data-stu-id="77187-790">The `Content-Language` header can be added by setting the property `ApplyCurrentCultureToResponseHeaders`.</span></span>

<span data-ttu-id="77187-791">Adicionando o `Content-Language` cabeçalho:</span><span class="sxs-lookup"><span data-stu-id="77187-791">Adding the `Content-Language` header:</span></span>

 - <span data-ttu-id="77187-792">Permite que o RequestLocalizationMiddleware defina o `Content-Language` cabeçalho com o `CurrentUICulture` .</span><span class="sxs-lookup"><span data-stu-id="77187-792">Allows the RequestLocalizationMiddleware to set the `Content-Language` header with the `CurrentUICulture`.</span></span>
 - <span data-ttu-id="77187-793">Elimina a necessidade de definir o cabeçalho de resposta `Content-Language` explicitamente.</span><span class="sxs-lookup"><span data-stu-id="77187-793">Eliminates the need to set the response header `Content-Language` explicitly.</span></span>

```csharp
app.UseRequestLocalization(new RequestLocalizationOptions
{
    ApplyCurrentCultureToResponseHeaders = true
});
```

### <a name="use-a-custom-provider"></a><span data-ttu-id="77187-794">Usar um provedor personalizado</span><span class="sxs-lookup"><span data-stu-id="77187-794">Use a custom provider</span></span>

<span data-ttu-id="77187-795">Suponha que você deseje permitir que os clientes armazenem seus idiomas e culturas nos bancos de dados.</span><span class="sxs-lookup"><span data-stu-id="77187-795">Suppose you want to let your customers store their language and culture in your databases.</span></span> <span data-ttu-id="77187-796">Você pode escrever um provedor para pesquisar esses valores para o usuário.</span><span class="sxs-lookup"><span data-stu-id="77187-796">You could write a provider to look up these values for the user.</span></span> <span data-ttu-id="77187-797">O seguinte código mostra como adicionar um provedor personalizado:</span><span class="sxs-lookup"><span data-stu-id="77187-797">The following code shows how to add a custom provider:</span></span>

```csharp
private const string enUSCulture = "en-US";

services.Configure<RequestLocalizationOptions>(options =>
{
    var supportedCultures = new[]
    {
        new CultureInfo(enUSCulture),
        new CultureInfo("fr")
    };

    options.DefaultRequestCulture = new RequestCulture(culture: enUSCulture, uiCulture: enUSCulture);
    options.SupportedCultures = supportedCultures;
    options.SupportedUICultures = supportedCultures;

    options.AddInitialRequestCultureProvider(new CustomRequestCultureProvider(async context =>
    {
        // My custom request culture logic
        return new ProviderCultureResult("en");
    }));
});
```

<span data-ttu-id="77187-798">Use `RequestLocalizationOptions` para adicionar ou remover provedores de localização.</span><span class="sxs-lookup"><span data-stu-id="77187-798">Use `RequestLocalizationOptions` to add or remove localization providers.</span></span>

### <a name="set-the-culture-programmatically"></a><span data-ttu-id="77187-799">Definir a cultura de forma programática</span><span class="sxs-lookup"><span data-stu-id="77187-799">Set the culture programmatically</span></span>

<span data-ttu-id="77187-800">Este projeto de exemplo **Localization.StarterWeb** no [GitHub](https://github.com/aspnet/entropy) contém a interface do usuário para definir a `Culture`.</span><span class="sxs-lookup"><span data-stu-id="77187-800">This sample **Localization.StarterWeb** project on [GitHub](https://github.com/aspnet/entropy) contains UI to set the `Culture`.</span></span> <span data-ttu-id="77187-801">O arquivo *Views/Shared/_SelectLanguagePartial.cshtml* permite que você selecione a cultura na lista de culturas compatíveis:</span><span class="sxs-lookup"><span data-stu-id="77187-801">The *Views/Shared/_SelectLanguagePartial.cshtml* file allows you to select the culture from the list of supported cultures:</span></span>

[!code-cshtml[](localization/sample/Localization/Views/Shared/_SelectLanguagePartial.cshtml)]

<span data-ttu-id="77187-802">O arquivo *Views/Shared/_SelectLanguagePartial.cshtml* é adicionado à seção `footer` do arquivo de layout para que ele fique disponível para todos os exibições:</span><span class="sxs-lookup"><span data-stu-id="77187-802">The *Views/Shared/_SelectLanguagePartial.cshtml* file is added to the `footer` section of the layout file so it will be available to all views:</span></span>

[!code-cshtml[](localization/sample/Localization/Views/Shared/_Layout.cshtml?range=43-56&highlight=10)]

<span data-ttu-id="77187-803">O método `SetLanguage` define o cookie de cultura.</span><span class="sxs-lookup"><span data-stu-id="77187-803">The `SetLanguage` method sets the culture cookie.</span></span>

[!code-csharp[](localization/sample/Localization/Controllers/HomeController.cs?range=57-67)]

<span data-ttu-id="77187-804">Não é possível conectar o *_SelectLanguagePartial.cshtml* ao código de exemplo para este projeto.</span><span class="sxs-lookup"><span data-stu-id="77187-804">You can't plug in the *_SelectLanguagePartial.cshtml* to sample code for this project.</span></span> <span data-ttu-id="77187-805">O projeto **Localization. StarterWeb** no [GitHub](https://github.com/aspnet/entropy) tem código para fluir `RequestLocalizationOptions` para um Razor parcial por meio do contêiner de [injeção de dependência](dependency-injection.md) .</span><span class="sxs-lookup"><span data-stu-id="77187-805">The **Localization.StarterWeb** project on [GitHub](https://github.com/aspnet/entropy) has code to flow the `RequestLocalizationOptions` to a Razor partial through the [Dependency Injection](dependency-injection.md) container.</span></span>

## <a name="model-binding-route-data-and-query-strings"></a><span data-ttu-id="77187-806">Dados de rota de associação de modelo e cadeias de caracteres de consulta</span><span class="sxs-lookup"><span data-stu-id="77187-806">Model binding route data and query strings</span></span>

<span data-ttu-id="77187-807">Consulte [comportamento de globalização de dados de rota de associação de modelo e cadeias de consulta](xref:mvc/models/model-binding#glob).</span><span class="sxs-lookup"><span data-stu-id="77187-807">See [Globalization behavior of model binding route data and query strings](xref:mvc/models/model-binding#glob).</span></span>

## <a name="globalization-and-localization-terms"></a><span data-ttu-id="77187-808">Termos de globalização e localização</span><span class="sxs-lookup"><span data-stu-id="77187-808">Globalization and localization terms</span></span>

<span data-ttu-id="77187-809">O processo de localização do aplicativo também exige uma compreensão básica dos conjuntos de caracteres relevantes geralmente usados no desenvolvimento moderno de software e uma compreensão dos problemas associados a eles.</span><span class="sxs-lookup"><span data-stu-id="77187-809">The process of localizing your app also requires a basic understanding of relevant character sets commonly used in modern software development and an understanding of the issues associated with them.</span></span> <span data-ttu-id="77187-810">Embora todos os computadores armazenem texto como números (códigos), diferentes sistemas armazenam o mesmo texto usando números diferentes.</span><span class="sxs-lookup"><span data-stu-id="77187-810">Although all computers store text as numbers (codes), different systems store the same text using different numbers.</span></span> <span data-ttu-id="77187-811">O processo de localização se refere à tradução da interface do usuário do aplicativo para uma cultura/localidade específica.</span><span class="sxs-lookup"><span data-stu-id="77187-811">The localization process refers to translating the app user interface (UI) for a specific culture/locale.</span></span>

<span data-ttu-id="77187-812">[Possibilidade de localização](/dotnet/standard/globalization-localization/localizability-review) é um processo intermediário usado para verificar se um aplicativo globalizado está pronto para localização.</span><span class="sxs-lookup"><span data-stu-id="77187-812">[Localizability](/dotnet/standard/globalization-localization/localizability-review) is an intermediate process for verifying that a globalized app is ready for localization.</span></span>

<span data-ttu-id="77187-813">O formato [RFC 4646](https://www.ietf.org/rfc/rfc4646.txt) para o nome de cultura é `<languagecode2>-<country/regioncode2>`, em que `<languagecode2>` é o código de idioma e `<country/regioncode2>` é o código de subcultura.</span><span class="sxs-lookup"><span data-stu-id="77187-813">The [RFC 4646](https://www.ietf.org/rfc/rfc4646.txt) format for the culture name is `<languagecode2>-<country/regioncode2>`, where `<languagecode2>` is the language code and `<country/regioncode2>` is the subculture code.</span></span> <span data-ttu-id="77187-814">Por exemplo, `es-CL` para Espanhol (Chile), `en-US` para inglês (Estados Unidos) e `en-AU` para inglês (Austrália).</span><span class="sxs-lookup"><span data-stu-id="77187-814">For example, `es-CL` for Spanish (Chile), `en-US` for English (United States), and `en-AU` for English (Australia).</span></span> <span data-ttu-id="77187-815">O [RFC 4646](https://www.ietf.org/rfc/rfc4646.txt) é uma combinação de um código de cultura de duas letras minúsculas ISO 639 associado a um idioma e um código de subcultura de duas letras maiúsculas ISO 3166 associado a um país ou uma região.</span><span class="sxs-lookup"><span data-stu-id="77187-815">[RFC 4646](https://www.ietf.org/rfc/rfc4646.txt) is a combination of an ISO 639 two-letter lowercase culture code associated with a language and an ISO 3166 two-letter uppercase subculture code associated with a country or region.</span></span> <span data-ttu-id="77187-816">Consulte [Nome da cultura de idioma](https://msdn.microsoft.com/library/ee825488(v=cs.20).aspx).</span><span class="sxs-lookup"><span data-stu-id="77187-816">See [Language Culture Name](https://msdn.microsoft.com/library/ee825488(v=cs.20).aspx).</span></span>

<span data-ttu-id="77187-817">Muitas vezes, internacionalização é abreviada como "I18N".</span><span class="sxs-lookup"><span data-stu-id="77187-817">Internationalization is often abbreviated to "I18N".</span></span> <span data-ttu-id="77187-818">A abreviação usa a primeira e última letras e o número de letras entre elas e, portanto, 18 significa o número de letras entre o primeiro "I" e o último "N".</span><span class="sxs-lookup"><span data-stu-id="77187-818">The abbreviation takes the first and last letters and the number of letters between them, so 18 stands for the number of letters between the first "I" and the last "N".</span></span> <span data-ttu-id="77187-819">O mesmo se aplica a Globalização (G11N) e Localização (L10N).</span><span class="sxs-lookup"><span data-stu-id="77187-819">The same applies to Globalization (G11N), and Localization (L10N).</span></span>

<span data-ttu-id="77187-820">Termos:</span><span class="sxs-lookup"><span data-stu-id="77187-820">Terms:</span></span>

* <span data-ttu-id="77187-821">Globalização (G11N): o processo de fazer com que um aplicativo dê suporte a diferentes idiomas e regiões.</span><span class="sxs-lookup"><span data-stu-id="77187-821">Globalization (G11N): The process of making an app support different languages and regions.</span></span>
* <span data-ttu-id="77187-822">Localização (L10N): o processo de personalizar um aplicativo para determinado idioma e região.</span><span class="sxs-lookup"><span data-stu-id="77187-822">Localization (L10N): The process of customizing an app for a given language and region.</span></span>
* <span data-ttu-id="77187-823">Internacionalização (I18N): descreve a globalização e a localização.</span><span class="sxs-lookup"><span data-stu-id="77187-823">Internationalization (I18N): Describes both globalization and localization.</span></span>
* <span data-ttu-id="77187-824">Cultura: um idioma e, opcionalmente, uma região.</span><span class="sxs-lookup"><span data-stu-id="77187-824">Culture: It's a language and, optionally, a region.</span></span>
* <span data-ttu-id="77187-825">Cultura neutra: uma cultura que tem um idioma especificado, mas não uma região.</span><span class="sxs-lookup"><span data-stu-id="77187-825">Neutral culture: A culture that has a specified language, but not a region.</span></span> <span data-ttu-id="77187-826">(por exemplo, "en", "es")</span><span class="sxs-lookup"><span data-stu-id="77187-826">(for example "en", "es")</span></span>
* <span data-ttu-id="77187-827">Cultura específica: uma cultura que tem um idioma e uma região especificados.</span><span class="sxs-lookup"><span data-stu-id="77187-827">Specific culture: A culture that has a specified language and region.</span></span> <span data-ttu-id="77187-828">(por exemplo, "en-US", "en-GB", "es-CL")</span><span class="sxs-lookup"><span data-stu-id="77187-828">(for example "en-US", "en-GB", "es-CL")</span></span>
* <span data-ttu-id="77187-829">Cultura pai: a cultura neutra que contém uma cultura específica.</span><span class="sxs-lookup"><span data-stu-id="77187-829">Parent culture: The neutral culture that contains a specific culture.</span></span> <span data-ttu-id="77187-830">(por exemplo, "en" é a cultura pai de "en-US" e "en-GB")</span><span class="sxs-lookup"><span data-stu-id="77187-830">(for example, "en" is the parent culture of "en-US" and "en-GB")</span></span>
* <span data-ttu-id="77187-831">Localidade: uma localidade é o mesmo que uma cultura.</span><span class="sxs-lookup"><span data-stu-id="77187-831">Locale: A locale is the same as a culture.</span></span>

[!INCLUDE[](~/includes/localization/currency.md)]

[!INCLUDE[](~/includes/localization/unsupported-culture-log-level.md)]

## <a name="additional-resources"></a><span data-ttu-id="77187-832">Recursos adicionais</span><span class="sxs-lookup"><span data-stu-id="77187-832">Additional resources</span></span>

* <xref:fundamentals/troubleshoot-aspnet-core-localization>
* <span data-ttu-id="77187-833">O [projeto Localization.StarterWeb](https://github.com/aspnet/Entropy/tree/master/samples/Localization.StarterWeb) usado no artigo.</span><span class="sxs-lookup"><span data-stu-id="77187-833">[Localization.StarterWeb project](https://github.com/aspnet/Entropy/tree/master/samples/Localization.StarterWeb) used in the article.</span></span>
* [<span data-ttu-id="77187-834">Globalizando e localizando aplicativos do .NET</span><span class="sxs-lookup"><span data-stu-id="77187-834">Globalizing and localizing .NET applications</span></span>](/dotnet/standard/globalization-localization/index)
* [<span data-ttu-id="77187-835">Recursos em arquivos. resx</span><span class="sxs-lookup"><span data-stu-id="77187-835">Resources in .resx Files</span></span>](/dotnet/framework/resources/working-with-resx-files-programmatically)
* [<span data-ttu-id="77187-836">Kit de Ferramentas de Aplicativo Multilíngue da Microsoft</span><span class="sxs-lookup"><span data-stu-id="77187-836">Microsoft Multilingual App Toolkit</span></span>](https://marketplace.visualstudio.com/items?itemName=MultilingualAppToolkit.MultilingualAppToolkit-18308)
* [<span data-ttu-id="77187-837">Localização e genéricos</span><span class="sxs-lookup"><span data-stu-id="77187-837">Localization & Generics</span></span>](http://hishambinateya.com/localization-and-generics)

::: moniker-end
