---
title: "Trabalhando com vários ambientes no núcleo do ASP.NET"
author: ardalis
description: "Saiba como o ASP.NET Core fornece suporte para controlar o comportamento do aplicativo em vários ambientes."
keywords: "Núcleo do ASP.NET, configurações de ambiente, ASPNETCORE_ENVIRONMENT"
ms.author: riande
manager: wpickett
ms.date: 10/14/2016
ms.topic: article
ms.assetid: b5bba985-be12-4464-9a01-df3599b2a6f1
ms.technology: aspnet
ms.prod: asp.net-core
uid: fundamentals/environments
ms.openlocfilehash: 3eb19aa090d0a979ceaf4edc56752472ba47ae84
ms.sourcegitcommit: 8f42ab93402c1b8044815e1e48d0bb84c81f8b59
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/29/2017
---
# <a name="working-with-multiple-environments"></a><span data-ttu-id="dc15b-104">Trabalhando com vários ambientes</span><span class="sxs-lookup"><span data-stu-id="dc15b-104">Working with multiple environments</span></span>

<span data-ttu-id="dc15b-105">Por [Steve Smith](https://ardalis.com/)</span><span class="sxs-lookup"><span data-stu-id="dc15b-105">By [Steve Smith](https://ardalis.com/)</span></span>

<span data-ttu-id="dc15b-106">ASP.NET Core fornece suporte para controlar o comportamento do aplicativo em vários ambientes, como desenvolvimento, teste e produção.</span><span class="sxs-lookup"><span data-stu-id="dc15b-106">ASP.NET Core provides support for controlling app behavior across multiple environments, such as development, staging, and production.</span></span> <span data-ttu-id="dc15b-107">Variáveis de ambiente são usadas para indicar o ambiente de tempo de execução, permitindo que o aplicativo a ser configurado para esse ambiente.</span><span class="sxs-lookup"><span data-stu-id="dc15b-107">Environment variables are used to indicate the runtime environment, allowing the app to be configured for that environment.</span></span>

<span data-ttu-id="dc15b-108">[Exibir ou baixar código de exemplo](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/environments/sample) ([como baixar](xref:tutorials/index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="dc15b-108">[View or download sample code](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/environments/sample) ([how to download](xref:tutorials/index#how-to-download-a-sample))</span></span>

## <a name="development-staging-production"></a><span data-ttu-id="dc15b-109">Desenvolvimento, teste, produção</span><span class="sxs-lookup"><span data-stu-id="dc15b-109">Development, Staging, Production</span></span>

<span data-ttu-id="dc15b-110">ASP.NET Core faz referência a uma variável de ambiente `ASPNETCORE_ENVIRONMENT` para descrever o ambiente em que o aplicativo está sendo executado no.</span><span class="sxs-lookup"><span data-stu-id="dc15b-110">ASP.NET Core references a particular environment variable, `ASPNETCORE_ENVIRONMENT` to describe the environment the application is currently running in.</span></span> <span data-ttu-id="dc15b-111">Essa variável pode ser definida como qualquer valor que você deseja, mas três valores são usados por convenção: `Development`, `Staging`, e `Production`.</span><span class="sxs-lookup"><span data-stu-id="dc15b-111">This variable can be set to any value you like, but three values are used by convention: `Development`, `Staging`, and `Production`.</span></span> <span data-ttu-id="dc15b-112">Você encontrará esses valores usados nos exemplos e os modelos fornecidos com o ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="dc15b-112">You will find these values used in the samples and templates provided with ASP.NET Core.</span></span>

<span data-ttu-id="dc15b-113">A configuração atual do ambiente pode ser detectada programaticamente de dentro de seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="dc15b-113">The current environment setting can be detected programmatically from within your application.</span></span> <span data-ttu-id="dc15b-114">Além disso, você pode usar o ambiente [auxiliar de marca](../mvc/views/tag-helpers/index.md) para incluir algumas seções no seu [exibição](../mvc/views/index.md) com base no ambiente do aplicativo atual.</span><span class="sxs-lookup"><span data-stu-id="dc15b-114">In addition, you can use the Environment [tag helper](../mvc/views/tag-helpers/index.md) to include certain sections in your [view](../mvc/views/index.md) based on the current application environment.</span></span>

<span data-ttu-id="dc15b-115">Observação: No Windows e macOS, o nome de ambiente especificada diferencia maiusculas de minúsculas.</span><span class="sxs-lookup"><span data-stu-id="dc15b-115">Note: On Windows and macOS, the specified environment name is case insensitive.</span></span> <span data-ttu-id="dc15b-116">Se você definir a variável `Development` ou `development` ou `DEVELOPMENT` os resultados serão os mesmos.</span><span class="sxs-lookup"><span data-stu-id="dc15b-116">Whether you set the variable to `Development` or `development` or `DEVELOPMENT` the results will be the same.</span></span> <span data-ttu-id="dc15b-117">No entanto, o Linux é um **diferencia maiusculas de minúsculas** sistema operacional por padrão.</span><span class="sxs-lookup"><span data-stu-id="dc15b-117">However, Linux is a **case sensitive** OS by default.</span></span> <span data-ttu-id="dc15b-118">Variáveis de ambiente, nomes de arquivos e configurações requerem a diferenciação de maiusculas e minúsculas.</span><span class="sxs-lookup"><span data-stu-id="dc15b-118">Environment variables, file names and settings require case sensitivity.</span></span>

### <a name="development"></a><span data-ttu-id="dc15b-119">Desenvolvimento</span><span class="sxs-lookup"><span data-stu-id="dc15b-119">Development</span></span>

<span data-ttu-id="dc15b-120">Isso deve ser o ambiente usado ao desenvolver um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="dc15b-120">This should be the environment used when developing an application.</span></span> <span data-ttu-id="dc15b-121">Ela é normalmente usada para habilitar os recursos que você não iria querer estar disponível quando o aplicativo for executado em produção, como o [página de exceção de desenvolvedor](xref:fundamentals/error-handling#the-developer-exception-page).</span><span class="sxs-lookup"><span data-stu-id="dc15b-121">It is typically used to enable features that you wouldn't want to be available when the app runs in production, such as the [developer exception page](xref:fundamentals/error-handling#the-developer-exception-page).</span></span>

<span data-ttu-id="dc15b-122">Se você estiver usando o Visual Studio, o ambiente pode ser configurado em perfis de depuração do projeto.</span><span class="sxs-lookup"><span data-stu-id="dc15b-122">If you're using Visual Studio, the environment can be configured in your project's debug profiles.</span></span> <span data-ttu-id="dc15b-123">Perfis de depuração especificar o [server](xref:fundamentals/servers/index) para usar ao iniciar o aplicativo e as variáveis de ambiente a ser definido.</span><span class="sxs-lookup"><span data-stu-id="dc15b-123">Debug profiles specify the [server](xref:fundamentals/servers/index) to use when launching the application and any environment variables to be set.</span></span> <span data-ttu-id="dc15b-124">Seu projeto pode ter vários perfis de depuração que definir variáveis de ambiente de modo diferente.</span><span class="sxs-lookup"><span data-stu-id="dc15b-124">Your project can have multiple debug profiles that set environment variables differently.</span></span> <span data-ttu-id="dc15b-125">Gerenciar esses perfis usando o **depurar** guia de seu projeto de aplicativo web **propriedades** menu.</span><span class="sxs-lookup"><span data-stu-id="dc15b-125">You manage these profiles by using the **Debug** tab of your web application project's **Properties** menu.</span></span> <span data-ttu-id="dc15b-126">Os valores definidos nas propriedades do projeto são persistentes no *launchSettings.json* arquivo e você também pode configurar perfis, editando o arquivo diretamente.</span><span class="sxs-lookup"><span data-stu-id="dc15b-126">The values you set in project properties are persisted in the *launchSettings.json* file, and you can also configure profiles by editing that file directly.</span></span>

<span data-ttu-id="dc15b-127">O perfil para o IIS Express é mostrado aqui:</span><span class="sxs-lookup"><span data-stu-id="dc15b-127">The profile for IIS Express is shown here:</span></span>

![Variáveis de ambiente de configuração de propriedades do projeto](environments/_static/project-properties-debug.png)

<span data-ttu-id="dc15b-129">Aqui está uma `launchSettings.json` arquivo que inclui perfis para `Development` e `Staging`:</span><span class="sxs-lookup"><span data-stu-id="dc15b-129">Here is a `launchSettings.json` file that includes profiles for `Development` and `Staging`:</span></span>

[!code-json[Main](../fundamentals/environments/sample/src/Environments/Properties/launchSettings.json?highlight=15,22)]

<span data-ttu-id="dc15b-130">As alterações feitas aos perfis de projeto podem não ter efeito até que o servidor web usado seja reiniciado (em particular, Kestrel deve ser reiniciado para que ele detectará as alterações feitas em seu ambiente).</span><span class="sxs-lookup"><span data-stu-id="dc15b-130">Changes made to project profiles may not take effect until the web server used is restarted (in particular, Kestrel must be restarted before it will detect changes made to its environment).</span></span>

>[!WARNING]
> <span data-ttu-id="dc15b-131">Variáveis de ambiente são armazenados em *launchSettings.json* não estão protegidos de qualquer forma e fará parte do repositório de código de origem para o seu projeto, se você usar um.</span><span class="sxs-lookup"><span data-stu-id="dc15b-131">Environment variables stored in *launchSettings.json* are not secured in any way and will be part of the source code repository for your project, if you use one.</span></span> <span data-ttu-id="dc15b-132">**Nunca armazene credenciais ou outros dados secretos nesse arquivo.**</span><span class="sxs-lookup"><span data-stu-id="dc15b-132">**Never store credentials or other secret data in this file.**</span></span> <span data-ttu-id="dc15b-133">Se você precisar de um local para armazenar esses dados, use o *Manager segredo* ferramenta descrita no [armazenamento seguro de segredos do aplicativo durante o desenvolvimento](xref:security/app-secrets).</span><span class="sxs-lookup"><span data-stu-id="dc15b-133">If you need a place to store such data, use the *Secret Manager* tool described in [Safe storage of app secrets during development](xref:security/app-secrets).</span></span>

### <a name="staging"></a><span data-ttu-id="dc15b-134">Preparação</span><span class="sxs-lookup"><span data-stu-id="dc15b-134">Staging</span></span>

<span data-ttu-id="dc15b-135">Por convenção, um `Staging` ambiente é um ambiente de pré-produção usado para teste final antes da implantação de produção.</span><span class="sxs-lookup"><span data-stu-id="dc15b-135">By convention, a `Staging` environment is a pre-production environment used for final testing before deployment to production.</span></span> <span data-ttu-id="dc15b-136">Idealmente, suas características físicas devem ser espelhada de produção, para que os problemas que podem surgir em produção ocorrem primeiro no ambiente de preparo, onde podem ser resolvidas sem causar impacto aos usuários.</span><span class="sxs-lookup"><span data-stu-id="dc15b-136">Ideally, its physical characteristics should mirror that of production, so that any issues that may arise in production occur first in the staging environment, where they can be addressed without impact to users.</span></span>

### <a name="production"></a><span data-ttu-id="dc15b-137">Produção</span><span class="sxs-lookup"><span data-stu-id="dc15b-137">Production</span></span>

<span data-ttu-id="dc15b-138">O `Production` ambiente é o ambiente no qual o aplicativo é executado quando ele está ativo e sendo usado por usuários finais.</span><span class="sxs-lookup"><span data-stu-id="dc15b-138">The `Production` environment is the environment in which the application runs when it is live and being used by end users.</span></span> <span data-ttu-id="dc15b-139">Esse ambiente deve ser configurado para maximizar a segurança, desempenho e eficiência do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="dc15b-139">This environment should be configured to maximize security, performance, and application robustness.</span></span> <span data-ttu-id="dc15b-140">Algumas configurações comuns que pode ter um ambiente de produção que seriam diferentes de desenvolvimento incluem:</span><span class="sxs-lookup"><span data-stu-id="dc15b-140">Some common settings that a production environment might have that would differ from development include:</span></span>

* <span data-ttu-id="dc15b-141">Ativar cache</span><span class="sxs-lookup"><span data-stu-id="dc15b-141">Turn on caching</span></span>

* <span data-ttu-id="dc15b-142">Verifique se todos os recursos do lado do cliente são agrupados, minimizados e potencialmente atendidos a partir de uma CDN</span><span class="sxs-lookup"><span data-stu-id="dc15b-142">Ensure all client-side resources are bundled, minified, and potentially served from a CDN</span></span>

* <span data-ttu-id="dc15b-143">Desativar ErrorPages diagnóstico</span><span class="sxs-lookup"><span data-stu-id="dc15b-143">Turn off diagnostic ErrorPages</span></span>

* <span data-ttu-id="dc15b-144">Ativar páginas de erro amigável</span><span class="sxs-lookup"><span data-stu-id="dc15b-144">Turn on friendly error pages</span></span>

* <span data-ttu-id="dc15b-145">Habilitar registro em log e monitoramento de produção (por exemplo, [Application Insights](https://azure.microsoft.com/documentation/articles/app-insights-asp-net-five/))</span><span class="sxs-lookup"><span data-stu-id="dc15b-145">Enable production logging and monitoring (for example, [Application Insights](https://azure.microsoft.com/documentation/articles/app-insights-asp-net-five/))</span></span>

<span data-ttu-id="dc15b-146">Isso não deve ser uma lista completa.</span><span class="sxs-lookup"><span data-stu-id="dc15b-146">This is by no means meant to be a complete list.</span></span> <span data-ttu-id="dc15b-147">É melhor evitar dispersão verificações de ambiente em muitas partes do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="dc15b-147">It's best to avoid scattering environment checks in many parts of your application.</span></span> <span data-ttu-id="dc15b-148">Em vez disso, a abordagem recomendada é executar essas verificações dentro do aplicativo `Startup` classe (s) sempre que possível</span><span class="sxs-lookup"><span data-stu-id="dc15b-148">Instead, the recommended approach is to perform such checks within the application's `Startup` class(es) wherever possible</span></span>

## <a name="setting-the-environment"></a><span data-ttu-id="dc15b-149">Configurando o ambiente</span><span class="sxs-lookup"><span data-stu-id="dc15b-149">Setting the environment</span></span>

<span data-ttu-id="dc15b-150">O método para definir o ambiente depende do sistema operacional.</span><span class="sxs-lookup"><span data-stu-id="dc15b-150">The method for setting the environment depends on the operating system.</span></span>

### <a name="windows"></a><span data-ttu-id="dc15b-151">Windows</span><span class="sxs-lookup"><span data-stu-id="dc15b-151">Windows</span></span>
<span data-ttu-id="dc15b-152">Para definir o `ASPNETCORE_ENVIRONMENT` para a sessão atual, se o aplicativo é iniciado usando `dotnet run`, os comandos a seguir são usados</span><span class="sxs-lookup"><span data-stu-id="dc15b-152">To set the `ASPNETCORE_ENVIRONMENT` for the current session, if the app is started using `dotnet run`, the following commands are used</span></span>

<span data-ttu-id="dc15b-153">**Linha de comando**</span><span class="sxs-lookup"><span data-stu-id="dc15b-153">**Command line**</span></span>
```
set ASPNETCORE_ENVIRONMENT=Development
```
<span data-ttu-id="dc15b-154">**PowerShell**</span><span class="sxs-lookup"><span data-stu-id="dc15b-154">**PowerShell**</span></span>
```
$Env:ASPNETCORE_ENVIRONMENT = "Development"
```

<span data-ttu-id="dc15b-155">Esses comandos têm efeito somente para a janela atual.</span><span class="sxs-lookup"><span data-stu-id="dc15b-155">These commands take effect only for the current window.</span></span> <span data-ttu-id="dc15b-156">Quando a janela for fechada, a configuração ASPNETCORE_ENVIRONMENT é revertida para a configuração padrão ou o valor de máquina.</span><span class="sxs-lookup"><span data-stu-id="dc15b-156">When the window is closed, the ASPNETCORE_ENVIRONMENT setting reverts to the default setting or machine value.</span></span> <span data-ttu-id="dc15b-157">Para definir o valor global em janelas abertas do **painel de controle** > **sistema** > **configurações avançadas do sistema** e adicionar ou editar o `ASPNETCORE_ENVIRONMENT` valor.</span><span class="sxs-lookup"><span data-stu-id="dc15b-157">In order to set the value globally on Windows open the **Control Panel** > **System** > **Advanced system settings** and add or edit the `ASPNETCORE_ENVIRONMENT` value.</span></span>

![Propriedades avançadas do sistema](environments/_static/systemsetting_environment.png)

![Variável de ambiente do ASPNET Core](environments/_static/windows_aspnetcore_environment.png) 

<span data-ttu-id="dc15b-160">**Web. config**</span><span class="sxs-lookup"><span data-stu-id="dc15b-160">**web.config**</span></span>

<span data-ttu-id="dc15b-161">Consulte o *definir variáveis de ambiente* seção o [referência de configuração do módulo do ASP.NET Core](xref:hosting/aspnet-core-module#setting-environment-variables) tópico.</span><span class="sxs-lookup"><span data-stu-id="dc15b-161">See the *Setting environment variables* section of the [ASP.NET Core Module configuration reference](xref:hosting/aspnet-core-module#setting-environment-variables) topic.</span></span>

<span data-ttu-id="dc15b-162">**Por Pool de aplicativos do IIS**</span><span class="sxs-lookup"><span data-stu-id="dc15b-162">**Per IIS Application Pool**</span></span>

<span data-ttu-id="dc15b-163">Se precisar definir variáveis de ambiente para aplicativos individuais executados em Pools de Aplicativos isolados (com suporte no IIS 10.0+), consulte a seção *comando AppCmd.exe* do tópico [Variáveis de ambiente \<environmentVariables>](/iis/configuration/system.applicationHost/applicationPools/add/environmentVariables/#appcmdexe) na documentação de referência do IIS.</span><span class="sxs-lookup"><span data-stu-id="dc15b-163">If you need to set environment variables for individual apps running in isolated Application Pools (supported on IIS 10.0+), see the *AppCmd.exe command* section of the [Environment Variables \<environmentVariables>](/iis/configuration/system.applicationHost/applicationPools/add/environmentVariables/#appcmdexe) topic in the IIS reference documentation.</span></span>

### <a name="macos"></a><span data-ttu-id="dc15b-164">macOS</span><span class="sxs-lookup"><span data-stu-id="dc15b-164">macOS</span></span>
<span data-ttu-id="dc15b-165">Configurar o ambiente atual para macOS pode ser feito na linha ao executar o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="dc15b-165">Setting the current environment for macOS can be done in-line when running the application;</span></span>

```bash
ASPNETCORE_ENVIRONMENT=Development dotnet run
```
<span data-ttu-id="dc15b-166">ou usar `export` para defini-lo antes de executar o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="dc15b-166">or using `export` to set it prior to running the app.</span></span>

```bash
export ASPNETCORE_ENVIRONMENT=Development
``` 
<span data-ttu-id="dc15b-167">Variáveis de ambiente de nível de máquina são definidas no *. bashrc* ou *. bash_profile* arquivo.</span><span class="sxs-lookup"><span data-stu-id="dc15b-167">Machine level environment variables are set in the *.bashrc*  or *.bash_profile* file.</span></span> <span data-ttu-id="dc15b-168">Editar o arquivo usando qualquer editor de texto e adicione a seguinte instrução.</span><span class="sxs-lookup"><span data-stu-id="dc15b-168">Edit the file using any text editor and add the following statment.</span></span>

```
export ASPNETCORE_ENVIRONMENT=Development
```  

### <a name="linux"></a><span data-ttu-id="dc15b-169">Linux</span><span class="sxs-lookup"><span data-stu-id="dc15b-169">Linux</span></span>
<span data-ttu-id="dc15b-170">Para distribuições de Linux, use o `export` para sessão com base em configurações de variável de comando na linha de comando e *bash_profile* arquivo de configurações de ambiente de nível de máquina.</span><span class="sxs-lookup"><span data-stu-id="dc15b-170">For Linux distros, use the `export` command at the command line for session based variable settings and *bash_profile* file for machine level environment settings.</span></span>

## <a name="determining-the-environment-at-runtime"></a><span data-ttu-id="dc15b-171">Determinando o ambiente em tempo de execução</span><span class="sxs-lookup"><span data-stu-id="dc15b-171">Determining the environment at runtime</span></span>

<span data-ttu-id="dc15b-172">O `IHostingEnvironment` serviço fornece a abstração de núcleo para trabalhar com ambientes.</span><span class="sxs-lookup"><span data-stu-id="dc15b-172">The `IHostingEnvironment` service provides the core abstraction for working with environments.</span></span> <span data-ttu-id="dc15b-173">Esse serviço é fornecido pelo ASP.NET hospedagem da camada e pode ser inserida na sua lógica de inicialização por meio de [injeção de dependência](dependency-injection.md).</span><span class="sxs-lookup"><span data-stu-id="dc15b-173">This service is provided by the ASP.NET hosting layer, and can be injected into your startup logic via [Dependency Injection](dependency-injection.md).</span></span> <span data-ttu-id="dc15b-174">O modelo de site da web do ASP.NET Core no Visual Studio usa essa abordagem para carregar arquivos de configuração específicos ao ambiente (se houver) e para personalizar as configurações de tratamento de erros do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="dc15b-174">The ASP.NET Core web site template in Visual Studio uses this approach to load environment-specific configuration files (if present) and to customize the app's error handling settings.</span></span> <span data-ttu-id="dc15b-175">Em ambos os casos, esse comportamento é obtido consultando o ambiente no momento especificado chamando `EnvironmentName` ou `IsEnvironment` na instância do `IHostingEnvironment` passado para o método apropriado.</span><span class="sxs-lookup"><span data-stu-id="dc15b-175">In both cases, this behavior is achieved by referring to the currently specified environment by calling `EnvironmentName` or `IsEnvironment` on the instance of `IHostingEnvironment` passed into the appropriate method.</span></span>

> [!NOTE]
> <span data-ttu-id="dc15b-176">Se você precisa verificar se o aplicativo está em execução em um ambiente específico, use `env.IsEnvironment("environmentname")` desde que ele irá ignorar corretamente caso (em vez de verificar se `env.EnvironmentName == "Development"` por exemplo).</span><span class="sxs-lookup"><span data-stu-id="dc15b-176">If you need to check whether the application is running in a particular environment, use `env.IsEnvironment("environmentname")` since it will correctly ignore case (instead of checking if `env.EnvironmentName == "Development"` for example).</span></span>

<span data-ttu-id="dc15b-177">Por exemplo, você pode usar o código a seguir em seu método de configurar para configurar o tratamento de erro específico do ambiente:</span><span class="sxs-lookup"><span data-stu-id="dc15b-177">For example, you can use the following code in your Configure method to setup environment specific error handling:</span></span>

[!code-csharp[Main](environments/sample/src/Environments/Startup.cs?range=19-30)]

<span data-ttu-id="dc15b-178">Se o aplicativo for executado em um `Development` ambiente, ele habilita o suporte de tempo de execução necessário para usar o recurso de "BrowserLink" no Visual Studio, as páginas de erro específico de desenvolvimento (que normalmente não devem ser executadas em produção) e o erro de banco de dados especial páginas (que fornecem uma maneira de aplicar as migrações e devem, portanto, ser usadas apenas em desenvolvimento).</span><span class="sxs-lookup"><span data-stu-id="dc15b-178">If the app is running in a `Development` environment, then it enables the runtime support necessary to use the "BrowserLink" feature in Visual Studio, development-specific error pages (which typically should not be run in production) and special database error pages (which provide a way to apply migrations and should therefore only be used in development).</span></span> <span data-ttu-id="dc15b-179">Caso contrário, se o aplicativo não está em execução em um ambiente de desenvolvimento, uma página de tratamento de erro padrão é configurada para ser exibido em resposta a todas as exceções sem tratamento.</span><span class="sxs-lookup"><span data-stu-id="dc15b-179">Otherwise, if the app is not running in a development environment, a standard error handling page is configured to be displayed in response to any unhandled exceptions.</span></span>

<span data-ttu-id="dc15b-180">Talvez seja necessário determinar qual conteúdo para enviar ao cliente em tempo de execução, dependendo do ambiente atual.</span><span class="sxs-lookup"><span data-stu-id="dc15b-180">You may need to determine which content to send to the client at runtime, depending on the current environment.</span></span> <span data-ttu-id="dc15b-181">Por exemplo, em um ambiente de desenvolvimento é geralmente servir não minimizado scripts e folhas de estilo, o que torna mais fácil de depuração.</span><span class="sxs-lookup"><span data-stu-id="dc15b-181">For example, in a development environment you generally serve non-minimized scripts and style sheets, which makes debugging easier.</span></span> <span data-ttu-id="dc15b-182">Ambientes de produção e de teste devem atender as versões minimizadas e geralmente de uma CDN.</span><span class="sxs-lookup"><span data-stu-id="dc15b-182">Production and test environments should serve the minified versions and generally from a CDN.</span></span> <span data-ttu-id="dc15b-183">Você pode fazer isso usando o ambiente [auxiliar de marca](../mvc/views/tag-helpers/intro.md).</span><span class="sxs-lookup"><span data-stu-id="dc15b-183">You can do this using the Environment [tag helper](../mvc/views/tag-helpers/intro.md).</span></span> <span data-ttu-id="dc15b-184">O auxiliar de marca de ambiente somente processar seu conteúdo se o ambiente atual corresponde a um dos ambientes especificados usando o `names` atributo.</span><span class="sxs-lookup"><span data-stu-id="dc15b-184">The Environment tag helper will only render its contents if the current environment matches one of the environments specified using the `names` attribute.</span></span>

[!code-html[Main](environments/sample/src/Environments/Views/Shared/_Layout.cshtml?range=13-22)]

<span data-ttu-id="dc15b-185">Para começar a usar os auxiliares de marcação no seu aplicativo, consulte [Introdução ao auxiliares de marcação](../mvc/views/tag-helpers/intro.md).</span><span class="sxs-lookup"><span data-stu-id="dc15b-185">To get started with using tag helpers in your application see [Introduction to Tag Helpers](../mvc/views/tag-helpers/intro.md).</span></span>

## <a name="startup-conventions"></a><span data-ttu-id="dc15b-186">Convenções de inicialização</span><span class="sxs-lookup"><span data-stu-id="dc15b-186">Startup conventions</span></span>

<span data-ttu-id="dc15b-187">ASP.NET Core dá suporte a uma abordagem baseado em convenção para configurar a inicialização de um aplicativo com base no ambiente atual.</span><span class="sxs-lookup"><span data-stu-id="dc15b-187">ASP.NET Core supports a convention-based approach to configuring an application's startup based on the current environment.</span></span> <span data-ttu-id="dc15b-188">Também por meio de programação, você pode controlar como o seu aplicativo se comporta de acordo com o ambiente é, permitindo que você criar e gerenciar suas próprias convenções.</span><span class="sxs-lookup"><span data-stu-id="dc15b-188">You can also programmatically control how your application behaves according to which environment it is in, allowing you to create and manage your own conventions.</span></span>

<span data-ttu-id="dc15b-189">Quando um aplicativo do ASP.NET Core é iniciado, o `Startup` classe é usada para inicializar o aplicativo, carregue suas definições de configuração, etc. ([saber mais sobre a inicialização do ASP.NET](startup.md)).</span><span class="sxs-lookup"><span data-stu-id="dc15b-189">When an ASP.NET Core application starts, the `Startup` class is used to bootstrap the application, load its configuration settings, etc. ([learn more about ASP.NET startup](startup.md)).</span></span> <span data-ttu-id="dc15b-190">No entanto, se existir uma classe denominada `Startup{EnvironmentName}` (por exemplo `StartupDevelopment`) e o `ASPNETCORE_ENVIRONMENT` esse nome, em seguida, que corresponde a variável de ambiente `Startup` classe é usada em vez disso.</span><span class="sxs-lookup"><span data-stu-id="dc15b-190">However, if a class exists named `Startup{EnvironmentName}` (for example `StartupDevelopment`), and the `ASPNETCORE_ENVIRONMENT` environment variable matches that name, then that `Startup` class is used instead.</span></span> <span data-ttu-id="dc15b-191">Assim, você pode configurar `Startup` para o desenvolvimento, mas possuem um separado `StartupProduction` que seria usada quando o aplicativo é executado em produção.</span><span class="sxs-lookup"><span data-stu-id="dc15b-191">Thus, you could configure `Startup` for development, but have a separate `StartupProduction` that would be used when the app is run in production.</span></span> <span data-ttu-id="dc15b-192">Ou vice-versa.</span><span class="sxs-lookup"><span data-stu-id="dc15b-192">Or vice versa.</span></span>

> [!NOTE]
> <span data-ttu-id="dc15b-193">Chamando `WebHostBuilder.UseStartup<TStartup>()` substitui seções de configuração.</span><span class="sxs-lookup"><span data-stu-id="dc15b-193">Calling `WebHostBuilder.UseStartup<TStartup>()` overrides configuration sections.</span></span>

<span data-ttu-id="dc15b-194">Além de usar totalmente separados `Startup` classe com base no ambiente atual, você também pode fazer ajustes como o aplicativo é configurado em um `Startup` classe.</span><span class="sxs-lookup"><span data-stu-id="dc15b-194">In addition to using an entirely separate `Startup` class based on the current environment, you can also make adjustments to how the application is configured within a `Startup` class.</span></span> <span data-ttu-id="dc15b-195">O `Configure()` e `ConfigureServices()` métodos oferecem suporte a versões de específico do ambiente semelhante de `Startup` classe em si, de forma `Configure{EnvironmentName}()` e `Configure{EnvironmentName}Services()`.</span><span class="sxs-lookup"><span data-stu-id="dc15b-195">The `Configure()` and `ConfigureServices()` methods support environment-specific versions similar to the `Startup` class itself, of the form `Configure{EnvironmentName}()` and `Configure{EnvironmentName}Services()`.</span></span> <span data-ttu-id="dc15b-196">Se você definir um método `ConfigureDevelopment()` será chamado em vez de `Configure()` quando o ambiente é definido para o desenvolvimento.</span><span class="sxs-lookup"><span data-stu-id="dc15b-196">If you define a method `ConfigureDevelopment()` it will be called instead of `Configure()` when the environment is set to development.</span></span> <span data-ttu-id="dc15b-197">Da mesma forma, `ConfigureDevelopmentServices()` deve ser chamado em vez de `ConfigureServices()` no mesmo ambiente.</span><span class="sxs-lookup"><span data-stu-id="dc15b-197">Likewise, `ConfigureDevelopmentServices()` would be called instead of `ConfigureServices()` in the same environment.</span></span>

## <a name="summary"></a><span data-ttu-id="dc15b-198">Resumo</span><span class="sxs-lookup"><span data-stu-id="dc15b-198">Summary</span></span>

<span data-ttu-id="dc15b-199">ASP.NET Core fornece uma série de recursos e convenções que permitem aos desenvolvedores controlar facilmente como seus aplicativos se comportam em ambientes diferentes.</span><span class="sxs-lookup"><span data-stu-id="dc15b-199">ASP.NET Core provides a number of features and conventions that allow developers to easily control how their applications behave in different environments.</span></span> <span data-ttu-id="dc15b-200">Ao publicar um aplicativo de desenvolvimento para teste em produção, conjunto de variáveis de ambiente adequadamente para o ambiente permitir para a otimização do aplicativo para uso de depuração, teste ou produção, conforme apropriado.</span><span class="sxs-lookup"><span data-stu-id="dc15b-200">When publishing an application from development to staging to production, environment variables set appropriately for the environment allow for optimization of the application for debugging, testing, or production use, as appropriate.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="dc15b-201">Recursos adicionais</span><span class="sxs-lookup"><span data-stu-id="dc15b-201">Additional Resources</span></span>

* [<span data-ttu-id="dc15b-202">Configuração</span><span class="sxs-lookup"><span data-stu-id="dc15b-202">Configuration</span></span>](xref:fundamentals/configuration/index)

* [<span data-ttu-id="dc15b-203">Introdução aos auxiliares de marcação</span><span class="sxs-lookup"><span data-stu-id="dc15b-203">Introduction to Tag Helpers</span></span>](../mvc/views/tag-helpers/intro.md)
