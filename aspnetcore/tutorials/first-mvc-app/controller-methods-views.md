---
title: Parte 6, métodos e exibições do controlador no ASP.NET Core
author: rick-anderson
description: Parte 6, adicionar um modelo a um aplicativo ASP.NET Core MVC
ms.author: riande
ms.date: 12/13/2018
no-loc:
- Blazor
- Blazor Server
- Blazor WebAssembly
- Identity
- Let's Encrypt
- Razor
- SignalR
uid: tutorials/first-mvc-app/controller-methods-views
ms.openlocfilehash: a22bc9f9156b671d7bf17b56b62e384a60b2568b
ms.sourcegitcommit: d65a027e78bf0b83727f975235a18863e685d902
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 06/26/2020
ms.locfileid: "85405257"
---
# <a name="part-6-controller-methods-and-views-in-aspnet-core"></a><span data-ttu-id="47fb0-103">Parte 6, métodos e exibições do controlador no ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="47fb0-103">Part 6, controller methods and views in ASP.NET Core</span></span>

<span data-ttu-id="47fb0-104">De [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="47fb0-104">By [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

<span data-ttu-id="47fb0-105">Temos um bom começo para o aplicativo de filme, mas a apresentação não é ideal. Por exemplo, **ReleaseDate** deveria ser separado em duas palavras.</span><span class="sxs-lookup"><span data-stu-id="47fb0-105">We have a good start to the movie app, but the presentation isn't ideal, for example, **ReleaseDate** should be two words.</span></span>

![Exibição de índice: a Data de Lançamento é uma palavra (sem espaço) e cada data de lançamento do filme mostra o horário 12h](working-with-sql/_static/m55.png)

<span data-ttu-id="47fb0-107">Abra o arquivo *Models/Movie.cs* e adicione as linhas realçadas mostradas abaixo:</span><span class="sxs-lookup"><span data-stu-id="47fb0-107">Open the *Models/Movie.cs* file and add the highlighted lines shown below:</span></span>

[!code-csharp[](start-mvc/sample/MvcMovie22/Models/MovieDateFixed.cs?name=snippet_1&highlight=2,3,12-13,17)]

<span data-ttu-id="47fb0-108">Abordaremos [DataAnnotations](/aspnet/mvc/overview/older-versions/mvc-music-store/mvc-music-store-part-6) no próximo tutorial.</span><span class="sxs-lookup"><span data-stu-id="47fb0-108">We cover [DataAnnotations](/aspnet/mvc/overview/older-versions/mvc-music-store/mvc-music-store-part-6) in the next tutorial.</span></span> <span data-ttu-id="47fb0-109">O atributo [Display](/dotnet/api/microsoft.aspnetcore.mvc.modelbinding.metadata.displaymetadata) especifica o que deve ser exibido no nome de um campo (neste caso, “Release Date” em vez de “ReleaseDate”).</span><span class="sxs-lookup"><span data-stu-id="47fb0-109">The [Display](/dotnet/api/microsoft.aspnetcore.mvc.modelbinding.metadata.displaymetadata) attribute specifies what to display for the name of a field (in this case "Release Date" instead of "ReleaseDate").</span></span> <span data-ttu-id="47fb0-110">O atributo [DataType](/dotnet/api/microsoft.aspnetcore.mvc.dataannotations.internal.datatypeattributeadapter) especifica o tipo de dados (Data) e, portanto, as informações de hora armazenadas no campo não são exibidas.</span><span class="sxs-lookup"><span data-stu-id="47fb0-110">The [DataType](/dotnet/api/microsoft.aspnetcore.mvc.dataannotations.internal.datatypeattributeadapter) attribute specifies the type of the data (Date), so the time information stored in the field isn't displayed.</span></span>

<span data-ttu-id="47fb0-111">A anotação de dados `[Column(TypeName = "decimal(18, 2)")]` é necessária para que o Entity Framework Core possa mapear corretamente o `Price` para a moeda no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="47fb0-111">The `[Column(TypeName = "decimal(18, 2)")]` data annotation is required so Entity Framework Core can correctly map `Price` to currency in the database.</span></span> <span data-ttu-id="47fb0-112">Para obter mais informações, veja [Tipos de Dados](/ef/core/modeling/relational/data-types).</span><span class="sxs-lookup"><span data-stu-id="47fb0-112">For more information, see [Data Types](/ef/core/modeling/relational/data-types).</span></span>

<span data-ttu-id="47fb0-113">Procure o controlador `Movies` e mantenha o ponteiro do mouse pressionado sobre um link **Editar** para ver a URL de destino.</span><span class="sxs-lookup"><span data-stu-id="47fb0-113">Browse to the `Movies` controller and hold the mouse pointer over an **Edit** link to see the target URL.</span></span>

![São mostrados uma janela do navegador com o mouse sobre o link de edição e um link da URL https://localhost:5001/Movies/Edit/5](~/tutorials/first-mvc-app/controller-methods-views/_static/edit7.png)

<span data-ttu-id="47fb0-115">Os links **Editar**, **Detalhes** e **Excluir** são gerados pelo Auxiliar de Marcação de Âncora do MVC Core no arquivo *Views/Movies/Index.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="47fb0-115">The **Edit**, **Details**, and **Delete** links are generated by the Core MVC Anchor Tag Helper in the *Views/Movies/Index.cshtml* file.</span></span>

[!code-HTML[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Views/Movies/IndexOriginal.cshtml?highlight=1-3&range=46-50)]

<span data-ttu-id="47fb0-116">Os [auxiliares de marca](xref:mvc/views/tag-helpers/intro) permitem que o código do servidor participe da criação e renderização de elementos HTML em Razor arquivos.</span><span class="sxs-lookup"><span data-stu-id="47fb0-116">[Tag Helpers](xref:mvc/views/tag-helpers/intro) enable server-side code to participate in creating and rendering HTML elements in Razor files.</span></span> <span data-ttu-id="47fb0-117">No código acima, o `AnchorTagHelper` gera dinamicamente o valor do `href` atributo HTML do método de ação do controlador e da ID da rota. Use o **modo de exibição de origem** do seu navegador favorito ou use as ferramentas de desenvolvedor para examinar a marcação gerada.</span><span class="sxs-lookup"><span data-stu-id="47fb0-117">In the code above, the `AnchorTagHelper` dynamically generates the HTML `href` attribute value from the controller action method and route id. You use **View Source** from your favorite browser or use the developer tools to examine the generated markup.</span></span> <span data-ttu-id="47fb0-118">Uma parte do HTML gerado é mostrada abaixo:</span><span class="sxs-lookup"><span data-stu-id="47fb0-118">A portion of the generated HTML is shown below:</span></span>

```html
 <td>
    <a href="/Movies/Edit/4"> Edit </a> |
    <a href="/Movies/Details/4"> Details </a> |
    <a href="/Movies/Delete/4"> Delete </a>
</td>
```

<span data-ttu-id="47fb0-119">Lembre-se do formato do [roteamento](xref:mvc/controllers/routing) definido no arquivo *Startup.cs*:</span><span class="sxs-lookup"><span data-stu-id="47fb0-119">Recall the format for [routing](xref:mvc/controllers/routing) set in the *Startup.cs* file:</span></span>

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie3/Startup.cs?name=snippet_1&highlight=5)]

<span data-ttu-id="47fb0-120">O ASP.NET Core converte `https://localhost:5001/Movies/Edit/4` de uma solicitação no método de ação `Edit` do controlador `Movies` com o parâmetro `Id` igual a 4.</span><span class="sxs-lookup"><span data-stu-id="47fb0-120">ASP.NET Core translates `https://localhost:5001/Movies/Edit/4` into a request to the `Edit` action method of the `Movies` controller with the parameter `Id` of 4.</span></span> <span data-ttu-id="47fb0-121">(Os métodos do controlador também são conhecidos como métodos de ação.)</span><span class="sxs-lookup"><span data-stu-id="47fb0-121">(Controller methods are also known as action methods.)</span></span>

<span data-ttu-id="47fb0-122">Os [Auxiliares de Marcação](xref:mvc/views/tag-helpers/intro) são um dos novos recursos mais populares do ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="47fb0-122">[Tag Helpers](xref:mvc/views/tag-helpers/intro) are one of the most popular new features in ASP.NET Core.</span></span> <span data-ttu-id="47fb0-123">Para obter mais informações, consulte [Recursos adicionais](#additional-resources).</span><span class="sxs-lookup"><span data-stu-id="47fb0-123">For more information, see [Additional resources](#additional-resources).</span></span>

<a name="get-post"></a>

<span data-ttu-id="47fb0-124">Abra o controlador `Movies` e examine os dois métodos de ação `Edit`.</span><span class="sxs-lookup"><span data-stu-id="47fb0-124">Open the `Movies` controller and examine the two `Edit` action methods.</span></span> <span data-ttu-id="47fb0-125">O código a seguir mostra o `HTTP GET Edit` método, que busca o filme e popula o formulário de edição gerado pelo arquivo *Edit. cshtml* Razor .</span><span class="sxs-lookup"><span data-stu-id="47fb0-125">The following code shows the `HTTP GET Edit` method, which fetches the movie and populates the edit form generated by the *Edit.cshtml* Razor file.</span></span>

::: moniker range=">= aspnetcore-2.1"

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie21/Controllers/MC1.cs?name=snippet_edit1)]

<span data-ttu-id="47fb0-126">O código a seguir mostra o método `HTTP POST Edit`, que processa os valores de filmes postados:</span><span class="sxs-lookup"><span data-stu-id="47fb0-126">The following code shows the `HTTP POST Edit` method, which processes the posted movie values:</span></span>

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/MC1.cs?name=snippet_edit2)]

::: moniker-end

::: moniker range="<= aspnetcore-2.0"

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/MC1.cs?name=snippet_edit1)]

<span data-ttu-id="47fb0-127">O código a seguir mostra o método `HTTP POST Edit`, que processa os valores de filmes postados:</span><span class="sxs-lookup"><span data-stu-id="47fb0-127">The following code shows the `HTTP POST Edit` method, which processes the posted movie values:</span></span>

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/MC1.cs?name=snippet_edit2)]

::: moniker-end

<span data-ttu-id="47fb0-128">O atributo `[Bind]` é uma maneira de proteger contra o [excesso de postagem](/aspnet/mvc/overview/getting-started/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application#overpost).</span><span class="sxs-lookup"><span data-stu-id="47fb0-128">The `[Bind]` attribute is one way to protect against [over-posting](/aspnet/mvc/overview/getting-started/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application#overpost).</span></span> <span data-ttu-id="47fb0-129">Você somente deve incluir as propriedades do atributo `[Bind]` que deseja alterar.</span><span class="sxs-lookup"><span data-stu-id="47fb0-129">You should only include properties in the `[Bind]` attribute that you want to change.</span></span> <span data-ttu-id="47fb0-130">Para obter mais informações, consulte [Proteger o controlador contra o excesso de postagem](/aspnet/mvc/overview/getting-started/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application).</span><span class="sxs-lookup"><span data-stu-id="47fb0-130">For more information, see [Protect your controller from over-posting](/aspnet/mvc/overview/getting-started/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application).</span></span> <span data-ttu-id="47fb0-131">[ViewModels](https://rachelappel.com/use-viewmodels-to-manage-data-amp-organize-code-in-asp-net-mvc-applications/) fornece uma abordagem alternativa para prevenir o excesso de postagem.</span><span class="sxs-lookup"><span data-stu-id="47fb0-131">[ViewModels](https://rachelappel.com/use-viewmodels-to-manage-data-amp-organize-code-in-asp-net-mvc-applications/) provide an alternative approach to prevent over-posting.</span></span>

<span data-ttu-id="47fb0-132">Observe se o segundo método de ação `Edit` é precedido pelo atributo `[HttpPost]`.</span><span class="sxs-lookup"><span data-stu-id="47fb0-132">Notice the second `Edit` action method is preceded by the `[HttpPost]` attribute.</span></span>

::: moniker range=">= aspnetcore-2.1"

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie21/Controllers/MC1.cs?name=snippet_edit2&highlight=1)]

::: moniker-end

::: moniker range="<= aspnetcore-2.0"

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/MC1.cs?name=snippet_edit2&highlight=4)]

::: moniker-end

<span data-ttu-id="47fb0-133">O atributo `HttpPost` especifica que esse método `Edit` pode ser invocado *somente* para solicitações `POST`.</span><span class="sxs-lookup"><span data-stu-id="47fb0-133">The `HttpPost` attribute specifies that this `Edit` method can be invoked *only* for `POST` requests.</span></span> <span data-ttu-id="47fb0-134">Você pode aplicar o atributo `[HttpGet]` ao primeiro método de edição, mas isso não é necessário porque `[HttpGet]` é o padrão.</span><span class="sxs-lookup"><span data-stu-id="47fb0-134">You could apply the `[HttpGet]` attribute to the first edit method, but that's not necessary because `[HttpGet]` is the default.</span></span>

<span data-ttu-id="47fb0-135">O atributo `ValidateAntiForgeryToken` é usado para [prevenir a falsificação de uma solicitação](xref:security/anti-request-forgery) e é associado a um token antifalsificação gerado no arquivo de exibição de edição (*Views/Movies/Edit.cshtml*).</span><span class="sxs-lookup"><span data-stu-id="47fb0-135">The `ValidateAntiForgeryToken` attribute is used to [prevent forgery of a request](xref:security/anti-request-forgery) and is paired up with an anti-forgery token generated in the edit view file (*Views/Movies/Edit.cshtml*).</span></span> <span data-ttu-id="47fb0-136">O arquivo de exibição de edição gera o token antifalsificação com o [Auxiliar de Marcação de Formulário](xref:mvc/views/working-with-forms).</span><span class="sxs-lookup"><span data-stu-id="47fb0-136">The edit view file generates the anti-forgery token with the [Form Tag Helper](xref:mvc/views/working-with-forms).</span></span>

[!code-HTML[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Views/Movies/Edit.cshtml?range=9)]

<span data-ttu-id="47fb0-137">O [Auxiliar de Marcação de Formulário](xref:mvc/views/working-with-forms) gera um token antifalsificação oculto que deve corresponder ao token antifalsificação gerado `[ValidateAntiForgeryToken]` no método `Edit` do controlador Movies.</span><span class="sxs-lookup"><span data-stu-id="47fb0-137">The [Form Tag Helper](xref:mvc/views/working-with-forms) generates a hidden anti-forgery token that must match the `[ValidateAntiForgeryToken]` generated anti-forgery token in the `Edit` method of the Movies controller.</span></span> <span data-ttu-id="47fb0-138">Para obter mais informações, consulte [Falsificação de antissolicitação](xref:security/anti-request-forgery).</span><span class="sxs-lookup"><span data-stu-id="47fb0-138">For more information, see [Anti-Request Forgery](xref:security/anti-request-forgery).</span></span>

<span data-ttu-id="47fb0-139">O método `HttpGet Edit` usa o parâmetro `ID` de filme, pesquisa o filme usando o método `FindAsync` do Entity Framework e retorna o filme selecionado para a exibição de Edição.</span><span class="sxs-lookup"><span data-stu-id="47fb0-139">The `HttpGet Edit` method takes the movie `ID` parameter, looks up the movie using the Entity Framework `FindAsync` method, and returns the selected movie to the Edit view.</span></span> <span data-ttu-id="47fb0-140">Se um filme não for encontrado, `NotFound` (HTTP 404) será retornado.</span><span class="sxs-lookup"><span data-stu-id="47fb0-140">If a movie cannot be found, `NotFound` (HTTP 404) is returned.</span></span>

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie21/Controllers/MC1.cs?name=snippet_edit1)]

<span data-ttu-id="47fb0-141">Quando o sistema de scaffolding criou a exibição de Edição, ele examinou a classe `Movie` e o código criado para renderizar os elementos `<label>` e `<input>` de cada propriedade da classe.</span><span class="sxs-lookup"><span data-stu-id="47fb0-141">When the scaffolding system created the Edit view, it examined the `Movie` class and created code to render `<label>` and `<input>` elements for each property of the class.</span></span> <span data-ttu-id="47fb0-142">O seguinte exemplo mostra a exibição de Edição que foi gerada pelo sistema de scaffolding do Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="47fb0-142">The following example shows the Edit view that was generated by the Visual Studio scaffolding system:</span></span>

[!code-HTML[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie22/Views/Movies/EditOriginal.cshtml)]

<span data-ttu-id="47fb0-143">Observe como o modelo de exibição tem uma instrução `@model MvcMovie.Models.Movie` na parte superior do arquivo.</span><span class="sxs-lookup"><span data-stu-id="47fb0-143">Notice how the view template has a `@model MvcMovie.Models.Movie` statement at the top of the file.</span></span> <span data-ttu-id="47fb0-144">`@model MvcMovie.Models.Movie` especifica que a exibição espera que o modelo de exibição seja do tipo `Movie`.</span><span class="sxs-lookup"><span data-stu-id="47fb0-144">`@model MvcMovie.Models.Movie` specifies that the view expects the model for the view template to be of type `Movie`.</span></span>

<span data-ttu-id="47fb0-145">O código com scaffolding usa vários métodos de Auxiliares de Marcação para simplificar a marcação HTML.</span><span class="sxs-lookup"><span data-stu-id="47fb0-145">The scaffolded code uses several Tag Helper methods to streamline the HTML markup.</span></span> <span data-ttu-id="47fb0-146">O [auxiliar de marca de rótulo](xref:mvc/views/working-with-forms) exibe o nome do campo ("título", "liberado", "gênero" ou "preço").</span><span class="sxs-lookup"><span data-stu-id="47fb0-146">The [Label Tag Helper](xref:mvc/views/working-with-forms) displays the name of the field ("Title", "ReleaseDate", "Genre", or "Price").</span></span> <span data-ttu-id="47fb0-147">O [Auxiliar de Marcação de Entrada](xref:mvc/views/working-with-forms) renderiza um elemento `<input>` HTML.</span><span class="sxs-lookup"><span data-stu-id="47fb0-147">The [Input Tag Helper](xref:mvc/views/working-with-forms) renders an HTML `<input>` element.</span></span> <span data-ttu-id="47fb0-148">O [Auxiliar de Marcação de Validação](xref:mvc/views/working-with-forms) exibe todas as mensagens de validação associadas a essa propriedade.</span><span class="sxs-lookup"><span data-stu-id="47fb0-148">The [Validation Tag Helper](xref:mvc/views/working-with-forms) displays any validation messages associated with that property.</span></span>

<span data-ttu-id="47fb0-149">Execute o aplicativo e navegue para a URL `/Movies`.</span><span class="sxs-lookup"><span data-stu-id="47fb0-149">Run the application and navigate to the `/Movies` URL.</span></span> <span data-ttu-id="47fb0-150">Clique em um link de **edição** .</span><span class="sxs-lookup"><span data-stu-id="47fb0-150">Click an **Edit** link.</span></span> <span data-ttu-id="47fb0-151">No navegador, exiba a origem da página.</span><span class="sxs-lookup"><span data-stu-id="47fb0-151">In the browser, view the source for the page.</span></span> <span data-ttu-id="47fb0-152">O HTML gerado para o elemento `<form>` é mostrado abaixo.</span><span class="sxs-lookup"><span data-stu-id="47fb0-152">The generated HTML for the `<form>` element is shown below.</span></span>

[!code-HTML[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Views/Shared/edit_view_source.html?highlight=1,6,10,17,24,28)]

<span data-ttu-id="47fb0-153">Os elementos `<input>` estão em um elemento `HTML <form>` cujo atributo `action` está definido para ser postado para a URL `/Movies/Edit/id`.</span><span class="sxs-lookup"><span data-stu-id="47fb0-153">The `<input>` elements are in an `HTML <form>` element whose `action` attribute is set to post to the `/Movies/Edit/id` URL.</span></span> <span data-ttu-id="47fb0-154">Os dados de formulário serão postados com o servidor quando o botão `Save` receber um clique.</span><span class="sxs-lookup"><span data-stu-id="47fb0-154">The form data will be posted to the server when the `Save` button is clicked.</span></span> <span data-ttu-id="47fb0-155">A última linha antes do elemento `</form>` de fechamento mostra o token [XSRF](xref:security/anti-request-forgery) oculto gerado pelo [Auxiliar de Marcação de Formulário](xref:mvc/views/working-with-forms).</span><span class="sxs-lookup"><span data-stu-id="47fb0-155">The last line before the closing `</form>` element shows the hidden [XSRF](xref:security/anti-request-forgery) token generated by the [Form Tag Helper](xref:mvc/views/working-with-forms).</span></span>

## <a name="processing-the-post-request"></a><span data-ttu-id="47fb0-156">Processando a solicitação POST</span><span class="sxs-lookup"><span data-stu-id="47fb0-156">Processing the POST Request</span></span>

<span data-ttu-id="47fb0-157">A lista a seguir mostra a versão `[HttpPost]` do método de ação `Edit`.</span><span class="sxs-lookup"><span data-stu-id="47fb0-157">The following listing shows the `[HttpPost]` version of the `Edit` action method.</span></span>

::: moniker range=">= aspnetcore-2.1"

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie21/Controllers/MC1.cs?name=snippet_edit2)]

::: moniker-end

::: moniker range="<= aspnetcore-2.0"

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/MC1.cs?name=snippet_edit2)]

::: moniker-end

<span data-ttu-id="47fb0-158">O atributo `[ValidateAntiForgeryToken]` valida o token [XSRF](xref:security/anti-request-forgery) oculto gerado pelo gerador de tokens antifalsificação no [Auxiliar de Marcação de Formulário](xref:mvc/views/working-with-forms)</span><span class="sxs-lookup"><span data-stu-id="47fb0-158">The `[ValidateAntiForgeryToken]` attribute validates the hidden [XSRF](xref:security/anti-request-forgery) token generated by the anti-forgery token generator in the [Form Tag Helper](xref:mvc/views/working-with-forms)</span></span>

<span data-ttu-id="47fb0-159">O sistema de [model binding](xref:mvc/models/model-binding) usa os valores de formulário postados e cria um objeto `Movie` que é passado como o parâmetro `movie`.</span><span class="sxs-lookup"><span data-stu-id="47fb0-159">The [model binding](xref:mvc/models/model-binding) system takes the posted form values and creates a `Movie` object that's passed as the `movie` parameter.</span></span> <span data-ttu-id="47fb0-160">O método `ModelState.IsValid` verifica se os dados enviados no formulário podem ser usados para modificar (editar ou atualizar) um objeto `Movie`.</span><span class="sxs-lookup"><span data-stu-id="47fb0-160">The `ModelState.IsValid` method verifies that the data submitted in the form can be used to modify (edit or update) a `Movie` object.</span></span> <span data-ttu-id="47fb0-161">Se os dados forem válidos, eles serão salvos.</span><span class="sxs-lookup"><span data-stu-id="47fb0-161">If the data is valid, it's saved.</span></span> <span data-ttu-id="47fb0-162">Os dados de filmes atualizados (editados) são salvos no banco de dados chamando o método `SaveChangesAsync` do contexto de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="47fb0-162">The updated (edited) movie data is saved to the database by calling the `SaveChangesAsync` method of database context.</span></span> <span data-ttu-id="47fb0-163">Depois de salvar os dados, o código redireciona o usuário para o método de ação `Index` da classe `MoviesController`, que exibe a coleção de filmes, incluindo as alterações feitas recentemente.</span><span class="sxs-lookup"><span data-stu-id="47fb0-163">After saving the data, the code redirects the user to the `Index` action method of the `MoviesController` class, which displays the movie collection, including the changes just made.</span></span>

<span data-ttu-id="47fb0-164">Antes que o formulário seja postado no servidor, a validação do lado do cliente verifica as regras de validação nos campos.</span><span class="sxs-lookup"><span data-stu-id="47fb0-164">Before the form is posted to the server, client-side validation checks any validation rules on the fields.</span></span> <span data-ttu-id="47fb0-165">Se houver erros de validação, será exibida uma mensagem de erro e o formulário não será postado.</span><span class="sxs-lookup"><span data-stu-id="47fb0-165">If there are any validation errors, an error message is displayed and the form isn't posted.</span></span> <span data-ttu-id="47fb0-166">Se o JavaScript estiver desabilitado, você não terá a validação do lado do cliente, mas o servidor detectará os valores postados que não forem válidos e os valores de formulário serão exibidos novamente com mensagens de erro.</span><span class="sxs-lookup"><span data-stu-id="47fb0-166">If JavaScript is disabled, you won't have client-side validation but the server will detect the posted values that are not valid, and the form values will be redisplayed with error messages.</span></span> <span data-ttu-id="47fb0-167">Mais adiante no tutorial, examinamos a [Validação de Modelos](xref:mvc/models/validation) mais detalhadamente.</span><span class="sxs-lookup"><span data-stu-id="47fb0-167">Later in the tutorial we examine [Model Validation](xref:mvc/models/validation) in more detail.</span></span> <span data-ttu-id="47fb0-168">O [Auxiliar de Marcação de Validação](xref:mvc/views/working-with-forms) no modelo de exibição *Views/Movies/Edit.cshtml* é responsável por exibir as mensagens de erro apropriadas.</span><span class="sxs-lookup"><span data-stu-id="47fb0-168">The [Validation Tag Helper](xref:mvc/views/working-with-forms) in the *Views/Movies/Edit.cshtml* view template takes care of displaying appropriate error messages.</span></span>

![Exibição de edição: uma exceção para o valor de Preço incorreto abc informa que o campo Preço deve ser um número.](~/tutorials/first-mvc-app/controller-methods-views/_static/val.png)

<span data-ttu-id="47fb0-171">Todos os métodos `HttpGet` no controlador de filme seguem um padrão semelhante.</span><span class="sxs-lookup"><span data-stu-id="47fb0-171">All the `HttpGet` methods in the movie controller follow a similar pattern.</span></span> <span data-ttu-id="47fb0-172">Eles obtêm um objeto de filme (ou uma lista de objetos, no caso de `Index`) e passam o objeto (modelo) para a exibição.</span><span class="sxs-lookup"><span data-stu-id="47fb0-172">They get a movie object (or list of objects, in the case of `Index`), and pass the object (model) to the view.</span></span> <span data-ttu-id="47fb0-173">O método `Create` passa um objeto de filme vazio para a exibição `Create`.</span><span class="sxs-lookup"><span data-stu-id="47fb0-173">The `Create` method passes an empty movie object to the `Create` view.</span></span> <span data-ttu-id="47fb0-174">Todos os métodos que criam, editam, excluem ou, de outro modo, modificam dados fazem isso na sobrecarga `[HttpPost]` do método.</span><span class="sxs-lookup"><span data-stu-id="47fb0-174">All the methods that create, edit, delete, or otherwise modify data do so in the `[HttpPost]` overload of the method.</span></span> <span data-ttu-id="47fb0-175">A modificação de dados em um método `HTTP GET` é um risco de segurança.</span><span class="sxs-lookup"><span data-stu-id="47fb0-175">Modifying data in an `HTTP GET` method is a security risk.</span></span> <span data-ttu-id="47fb0-176">A modificação de dados em um método `HTTP GET` também viola as melhores práticas de HTTP e o padrão [REST](http://rest.elkstein.org/) de arquitetura, que especifica que as solicitações GET não devem alterar o estado do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="47fb0-176">Modifying data in an `HTTP GET` method also violates HTTP best practices and the architectural [REST](http://rest.elkstein.org/) pattern, which specifies that GET requests shouldn't change the state of your application.</span></span> <span data-ttu-id="47fb0-177">Em outras palavras, a execução de uma operação GET deve ser uma operação segura que não tem efeitos colaterais e não modifica os dados persistentes.</span><span class="sxs-lookup"><span data-stu-id="47fb0-177">In other words, performing a GET operation should be a safe operation that has no side effects and doesn't modify your persisted data.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="47fb0-178">Recursos adicionais</span><span class="sxs-lookup"><span data-stu-id="47fb0-178">Additional resources</span></span>

* [<span data-ttu-id="47fb0-179">Globalização e localização</span><span class="sxs-lookup"><span data-stu-id="47fb0-179">Globalization and localization</span></span>](xref:fundamentals/localization)
* [<span data-ttu-id="47fb0-180">Introdução aos auxiliares de marcação</span><span class="sxs-lookup"><span data-stu-id="47fb0-180">Introduction to Tag Helpers</span></span>](xref:mvc/views/tag-helpers/intro)
* [<span data-ttu-id="47fb0-181">Auxiliares de marca de autor</span><span class="sxs-lookup"><span data-stu-id="47fb0-181">Author Tag Helpers</span></span>](xref:mvc/views/tag-helpers/authoring)
* [<span data-ttu-id="47fb0-182">Falsificação de solicitação</span><span class="sxs-lookup"><span data-stu-id="47fb0-182">Anti-Request Forgery</span></span>](xref:security/anti-request-forgery)
* <span data-ttu-id="47fb0-183">Proteger o controlador contra o [excesso de postagem](/aspnet/mvc/overview/getting-started/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application)</span><span class="sxs-lookup"><span data-stu-id="47fb0-183">Protect your controller from [over-posting](/aspnet/mvc/overview/getting-started/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application)</span></span>
* [<span data-ttu-id="47fb0-184">ViewModels</span><span class="sxs-lookup"><span data-stu-id="47fb0-184">ViewModels</span></span>](https://rachelappel.com/use-viewmodels-to-manage-data-amp-organize-code-in-asp-net-mvc-applications/)
* [<span data-ttu-id="47fb0-185">Auxiliar de marca de formulário</span><span class="sxs-lookup"><span data-stu-id="47fb0-185">Form Tag Helper</span></span>](xref:mvc/views/working-with-forms)
* [<span data-ttu-id="47fb0-186">Auxiliar de marcação de entrada</span><span class="sxs-lookup"><span data-stu-id="47fb0-186">Input Tag Helper</span></span>](xref:mvc/views/working-with-forms)
* [<span data-ttu-id="47fb0-187">Auxiliar de marcação de rótulo</span><span class="sxs-lookup"><span data-stu-id="47fb0-187">Label Tag Helper</span></span>](xref:mvc/views/working-with-forms)
* [<span data-ttu-id="47fb0-188">Selecionar o auxiliar de marcação</span><span class="sxs-lookup"><span data-stu-id="47fb0-188">Select Tag Helper</span></span>](xref:mvc/views/working-with-forms)
* [<span data-ttu-id="47fb0-189">Auxiliar de marcação de validação</span><span class="sxs-lookup"><span data-stu-id="47fb0-189">Validation Tag Helper</span></span>](xref:mvc/views/working-with-forms)

> [!div class="step-by-step"]
> <span data-ttu-id="47fb0-190">[Anterior](working-with-sql.md) 
>  [Avançar](search.md)</span><span class="sxs-lookup"><span data-stu-id="47fb0-190">[Previous](working-with-sql.md)
[Next](search.md)</span></span>  
