---
uid: mvc/overview/older-versions-1/contact-manager/iteration-6-use-test-driven-development-cs
title: "Iteração #6 – Use o desenvolvimento controlado por testes (c#) | Microsoft Docs"
author: microsoft
description: "Essa iteração do sexto, adicionamos novas funcionalidades para nosso aplicativo escrevendo testes de unidade primeiro e escrever código os testes de unidade. Essa iteração,..."
ms.author: aspnetcontent
manager: wpickett
ms.date: 02/20/2009
ms.topic: article
ms.assetid: 013c3c26-7dc3-41d1-8064-f233c86008b5
ms.technology: dotnet-mvc
ms.prod: .net-framework
msc.legacyurl: /mvc/overview/older-versions-1/contact-manager/iteration-6-use-test-driven-development-cs
msc.type: authoredcontent
ms.openlocfilehash: 85426a7d4024b779848c3ffd05f2ab306152000c
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/10/2017
---
<a name="iteration-6--use-test-driven-development-c"></a><span data-ttu-id="e521e-104">Iteração #6 – Use o desenvolvimento controlado por testes (c#)</span><span class="sxs-lookup"><span data-stu-id="e521e-104">Iteration #6 – Use test-driven development (C#)</span></span>
====================
<span data-ttu-id="e521e-105">por [Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="e521e-105">by [Microsoft](https://github.com/microsoft)</span></span>

[<span data-ttu-id="e521e-106">Baixar o código</span><span class="sxs-lookup"><span data-stu-id="e521e-106">Download Code</span></span>](iteration-6-use-test-driven-development-cs/_static/contactmanager_6_cs1.zip)

> <span data-ttu-id="e521e-107">Essa iteração do sexto, adicionamos novas funcionalidades para nosso aplicativo escrevendo testes de unidade primeiro e escrever código os testes de unidade.</span><span class="sxs-lookup"><span data-stu-id="e521e-107">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="e521e-108">Essa iteração, adicionamos grupos de contatos.</span><span class="sxs-lookup"><span data-stu-id="e521e-108">In this iteration, we add contact groups.</span></span>


## <a name="building-a-contact-management-aspnet-mvc-application-c"></a><span data-ttu-id="e521e-109">Criando um aplicativo ASP.NET MVC de gerenciamento de contatos (c#)</span><span class="sxs-lookup"><span data-stu-id="e521e-109">Building a Contact Management ASP.NET MVC Application (C#)</span></span>
  

<span data-ttu-id="e521e-110">Esta série de tutoriais, vamos criar um aplicativo de gerenciamento de entre em contato com toda a partir do início ao fim.</span><span class="sxs-lookup"><span data-stu-id="e521e-110">In this series of tutorials, we build an entire Contact Management application from start to finish.</span></span> <span data-ttu-id="e521e-111">O aplicativo Gerenciador de entrar em contato com permite armazenar informações de contato - nomes, números de telefone e endereços de email - para obter uma lista de pessoas.</span><span class="sxs-lookup"><span data-stu-id="e521e-111">The Contact Manager application enables you to store contact information - names, phone numbers and email addresses - for a list of people.</span></span>

<span data-ttu-id="e521e-112">Vamos criar o aplicativo em várias iterações.</span><span class="sxs-lookup"><span data-stu-id="e521e-112">We build the application over multiple iterations.</span></span> <span data-ttu-id="e521e-113">Com cada iteração, podemos melhorar gradualmente o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="e521e-113">With each iteration, we gradually improve the application.</span></span> <span data-ttu-id="e521e-114">O objetivo dessa abordagem iteração vários é para que você possa entender o motivo para cada alteração.</span><span class="sxs-lookup"><span data-stu-id="e521e-114">The goal of this multiple iteration approach is to enable you to understand the reason for each change.</span></span>

- <span data-ttu-id="e521e-115">Iteração #1 - criar o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="e521e-115">Iteration #1 - Create the application.</span></span> <span data-ttu-id="e521e-116">A primeira iteração, criamos o gerente do contato da maneira mais simples possível.</span><span class="sxs-lookup"><span data-stu-id="e521e-116">In the first iteration, we create the Contact Manager in the simplest way possible.</span></span> <span data-ttu-id="e521e-117">Adicionamos suporte para operações de banco de dados básicos: criar, leitura, atualização e exclusão (CRUD).</span><span class="sxs-lookup"><span data-stu-id="e521e-117">We add support for basic database operations: Create, Read, Update, and Delete (CRUD).</span></span>

- <span data-ttu-id="e521e-118">Iteração #2 - Verifique o aplicativo parecer adequado.</span><span class="sxs-lookup"><span data-stu-id="e521e-118">Iteration #2 - Make the application look nice.</span></span> <span data-ttu-id="e521e-119">Essa iteração, podemos melhorar a aparência do aplicativo, modificando a página mestra do ASP.NET MVC exibição padrão e em cascata a folha de estilos.</span><span class="sxs-lookup"><span data-stu-id="e521e-119">In this iteration, we improve the appearance of the application by modifying the default ASP.NET MVC view master page and cascading style sheet.</span></span>

- <span data-ttu-id="e521e-120">Iteração #3 - adicionar validação do formulário.</span><span class="sxs-lookup"><span data-stu-id="e521e-120">Iteration #3 - Add form validation.</span></span> <span data-ttu-id="e521e-121">Na terceira iteração, podemos adicionar validação de forma básica.</span><span class="sxs-lookup"><span data-stu-id="e521e-121">In the third iteration, we add basic form validation.</span></span> <span data-ttu-id="e521e-122">Vamos impedir que pessoas enviando um formulário sem concluir os campos obrigatórios do formulário.</span><span class="sxs-lookup"><span data-stu-id="e521e-122">We prevent people from submitting a form without completing required form fields.</span></span> <span data-ttu-id="e521e-123">Além disso, podemos validar endereços de email e números de telefone.</span><span class="sxs-lookup"><span data-stu-id="e521e-123">We also validate email addresses and phone numbers.</span></span>

- <span data-ttu-id="e521e-124">Iteração #4 - Verifique o aplicativo acoplados de forma flexível.</span><span class="sxs-lookup"><span data-stu-id="e521e-124">Iteration #4 - Make the application loosely coupled.</span></span> <span data-ttu-id="e521e-125">Essa terceira iteração, podemos aproveitar vários padrões de design de software para facilitar a manutenção e modificar o aplicativo Gerenciador de contato.</span><span class="sxs-lookup"><span data-stu-id="e521e-125">In this third iteration, we take advantage of several software design patterns to make it easier to maintain and modify the Contact Manager application.</span></span> <span data-ttu-id="e521e-126">Por exemplo, podemos refatorar nosso aplicativo para usar o padrão de repositório e o padrão de injeção de dependência.</span><span class="sxs-lookup"><span data-stu-id="e521e-126">For example, we refactor our application to use the Repository pattern and the Dependency Injection pattern.</span></span>

- <span data-ttu-id="e521e-127">Iteração #5 - criar testes de unidade.</span><span class="sxs-lookup"><span data-stu-id="e521e-127">Iteration #5 - Create unit tests.</span></span> <span data-ttu-id="e521e-128">Na quinta iteração, fazemos nosso aplicativo mais fácil de manter e modificar adicionando testes de unidade.</span><span class="sxs-lookup"><span data-stu-id="e521e-128">In the fifth iteration, we make our application easier to maintain and modify by adding unit tests.</span></span> <span data-ttu-id="e521e-129">Vamos simular nossas classes de modelo de dados e criar testes de unidade para nossos controladores e lógica de validação.</span><span class="sxs-lookup"><span data-stu-id="e521e-129">We mock our data model classes and build unit tests for our controllers and validation logic.</span></span>

- <span data-ttu-id="e521e-130">Iteração #6 - Use desenvolvimento controlado por testes.</span><span class="sxs-lookup"><span data-stu-id="e521e-130">Iteration #6 - Use test-driven development.</span></span> <span data-ttu-id="e521e-131">Essa iteração do sexto, adicionamos novas funcionalidades para nosso aplicativo escrevendo testes de unidade primeiro e escrever código os testes de unidade.</span><span class="sxs-lookup"><span data-stu-id="e521e-131">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="e521e-132">Essa iteração, adicionamos grupos de contatos.</span><span class="sxs-lookup"><span data-stu-id="e521e-132">In this iteration, we add contact groups.</span></span>

- <span data-ttu-id="e521e-133">Iteração #7 - adicionar funcionalidade Ajax.</span><span class="sxs-lookup"><span data-stu-id="e521e-133">Iteration #7 - Add Ajax functionality.</span></span> <span data-ttu-id="e521e-134">A sétima iteração, podemos melhorar a capacidade de resposta e o desempenho do nosso aplicativo, adicionando suporte para Ajax.</span><span class="sxs-lookup"><span data-stu-id="e521e-134">In the seventh iteration, we improve the responsiveness and performance of our application by adding support for Ajax.</span></span>

## <a name="this-iteration"></a><span data-ttu-id="e521e-135">Essa iteração</span><span class="sxs-lookup"><span data-stu-id="e521e-135">This Iteration</span></span>

<span data-ttu-id="e521e-136">A iteração anterior do aplicativo Gerenciador de contato, criamos os testes de unidade para fornecer uma rede de segurança de nosso código.</span><span class="sxs-lookup"><span data-stu-id="e521e-136">In the previous iteration of the Contact Manager application, we created unit tests to provide a safety net for our code.</span></span> <span data-ttu-id="e521e-137">Motivação para criar testes de unidade foi criar nosso código mais resiliente a alterar.</span><span class="sxs-lookup"><span data-stu-id="e521e-137">The motivation for creating the unit tests was to make our code more resilient to change.</span></span> <span data-ttu-id="e521e-138">Com testes de unidade em vigor, podemos Felizmente fazer qualquer alteração em nosso código e saber imediatamente se dividimos funcionalidade existente.</span><span class="sxs-lookup"><span data-stu-id="e521e-138">With unit tests in place, we can happily make any change to our code and immediately know whether we have broken existing functionality.</span></span>

<span data-ttu-id="e521e-139">Essa iteração, usamos testes de unidade para uma finalidade totalmente diferente.</span><span class="sxs-lookup"><span data-stu-id="e521e-139">In this iteration, we use unit tests for an entirely different purpose.</span></span> <span data-ttu-id="e521e-140">Essa iteração, usamos testes de unidade como parte de uma filosofia de design de aplicativo chamada *desenvolvimento controlado por testes*.</span><span class="sxs-lookup"><span data-stu-id="e521e-140">In this iteration, we use unit tests as part of an application design philosophy called *test-driven development*.</span></span> <span data-ttu-id="e521e-141">Quando você praticar desenvolvimento controlado por testes, você escrever testes primeiro e, em seguida, escreve código para os testes.</span><span class="sxs-lookup"><span data-stu-id="e521e-141">When you practice test-driven development, you write tests first and then write code against the tests.</span></span>

<span data-ttu-id="e521e-142">Mais precisamente, ao desenvolvimento controlado por testes de exercícios, há três etapas que você concluir durante a criação de código (vermelho / verde/refatorar):</span><span class="sxs-lookup"><span data-stu-id="e521e-142">More precisely, when practicing test-driven development, there are three steps that you complete when creating code (Red/ Green/Refactor):</span></span>

1. <span data-ttu-id="e521e-143">Escrever um teste de unidade que falha (vermelho)</span><span class="sxs-lookup"><span data-stu-id="e521e-143">Write a unit test that fails (Red)</span></span>
2. <span data-ttu-id="e521e-144">Escrever um código que passe no teste de unidade (verde)</span><span class="sxs-lookup"><span data-stu-id="e521e-144">Write code that passes the unit test (Green)</span></span>
3. <span data-ttu-id="e521e-145">Refatorar o código (refatorar)</span><span class="sxs-lookup"><span data-stu-id="e521e-145">Refactor your code (Refactor)</span></span>

<span data-ttu-id="e521e-146">Primeiro, você pode gravar o teste de unidade.</span><span class="sxs-lookup"><span data-stu-id="e521e-146">First, you write the unit test.</span></span> <span data-ttu-id="e521e-147">O teste de unidade deve expressar sua intenção de como você espera que seu código se comportam.</span><span class="sxs-lookup"><span data-stu-id="e521e-147">The unit test should express your intention for how you expect your code to behave.</span></span> <span data-ttu-id="e521e-148">Quando você cria o teste de unidade, o teste de unidade apresentará falha.</span><span class="sxs-lookup"><span data-stu-id="e521e-148">When you first create the unit test, the unit test should fail.</span></span> <span data-ttu-id="e521e-149">O teste apresentará falha porque você ainda não foram gravadas qualquer código de aplicativo que satisfaz o teste.</span><span class="sxs-lookup"><span data-stu-id="e521e-149">The test should fail because you have not yet written any application code that satisfies the test.</span></span>

<span data-ttu-id="e521e-150">Em seguida, você escrever código apenas o suficiente para que o teste de unidade passar.</span><span class="sxs-lookup"><span data-stu-id="e521e-150">Next, you write just enough code in order for the unit test to pass.</span></span> <span data-ttu-id="e521e-151">O objetivo é escrever o código da forma laziest, sloppiest e mais rápido possível.</span><span class="sxs-lookup"><span data-stu-id="e521e-151">The goal is to write the code in the laziest, sloppiest and fastest possible way.</span></span> <span data-ttu-id="e521e-152">Você não deve gastar tempo pensando sobre a arquitetura do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="e521e-152">You should not waste time thinking about the architecture of your application.</span></span> <span data-ttu-id="e521e-153">Em vez disso, você deve se concentrar em escrever a quantidade mínima de código necessário para atender a intenção expressada pelo teste de unidade.</span><span class="sxs-lookup"><span data-stu-id="e521e-153">Instead, you should focus on writing the minimal amount of code necessary to satisfy the intention expressed by the unit test.</span></span>

<span data-ttu-id="e521e-154">Finalmente, depois de escrever código suficiente, você pode voltar e considere a arquitetura geral do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="e521e-154">Finally, after you have written enough code, you can step back and consider the overall architecture of your application.</span></span> <span data-ttu-id="e521e-155">Nesta etapa, você reescreva (refatorar) seu código, aproveitando o design de software padrões – como o padrão de repositório – para que seu código seja mais fácil manutenção.</span><span class="sxs-lookup"><span data-stu-id="e521e-155">In this step, you rewrite (refactor) your code by taking advantage of software design patterns -- such as the repository pattern -- so that your code is more maintainable.</span></span> <span data-ttu-id="e521e-156">Você pode reescrever fearlessly seu código nesta etapa, porque seu código é coberto por testes de unidade.</span><span class="sxs-lookup"><span data-stu-id="e521e-156">You can fearlessly rewrite your code in this step because your code is covered by unit tests.</span></span>

<span data-ttu-id="e521e-157">Há muitos benefícios que resultam de prática de desenvolvimento controlado por testes.</span><span class="sxs-lookup"><span data-stu-id="e521e-157">There are many benefits that result from practicing test-driven development.</span></span> <span data-ttu-id="e521e-158">Primeiro desenvolvimento controlado por testes força você a focar no código que realmente precisa ser gravados.</span><span class="sxs-lookup"><span data-stu-id="e521e-158">First, test-driven development forces you to focus on code that actually needs to be written.</span></span> <span data-ttu-id="e521e-159">Porque você constantemente foco apenas escrevendo código suficiente para passar um teste em particular, você não conseguirá captado para o crescimento e a gravação de grandes quantidades de código que nunca serão usados.</span><span class="sxs-lookup"><span data-stu-id="e521e-159">Because you are constantly focused on just writing enough code to pass a particular test, you are prevented from wandering into the weeds and writing massive amounts of code that you will never use.</span></span>

<span data-ttu-id="e521e-160">Em segundo lugar, uma metodologia de design "teste primeiro" força você a escrever código da perspectiva de como seu código será usado.</span><span class="sxs-lookup"><span data-stu-id="e521e-160">Second, a "test first" design methodology forces you to write code from the perspective of how your code will be used.</span></span> <span data-ttu-id="e521e-161">Em outras palavras, quando exercícios desenvolvimento controlado por testes, você está escrevendo constantemente os testes da perspectiva do usuário.</span><span class="sxs-lookup"><span data-stu-id="e521e-161">In other words, when practicing test-driven development, you are constantly writing your tests from a user perspective.</span></span> <span data-ttu-id="e521e-162">Portanto, desenvolvimento controlado por testes pode resultar em APIs de limpo e mais compreensíveis.</span><span class="sxs-lookup"><span data-stu-id="e521e-162">Therefore, test-driven development can result in cleaner and more understandable APIs.</span></span>

<span data-ttu-id="e521e-163">Por fim, desenvolvimento controlado por testes força você a escrever testes de unidade como parte do processo normal de escrever um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="e521e-163">Finally, test-driven development forces you to write unit tests as part of the normal process of writing an application.</span></span> <span data-ttu-id="e521e-164">Como se aproxima de um prazo de projeto, teste normalmente é a primeira coisa que sai da janela.</span><span class="sxs-lookup"><span data-stu-id="e521e-164">As a project deadline approaches, testing is typically the first thing that goes out the window.</span></span> <span data-ttu-id="e521e-165">Quando praticar desenvolvimento controlado por testes, por outro lado, você está mais probabilidade de ser virtuoso sobre como escrever testes de unidade como o desenvolvimento controlado por testes faz testes de unidade central para o processo de criação de um aplicativo.</span><span class="sxs-lookup"><span data-stu-id="e521e-165">When practicing test-driven development, on the other hand, you are more likely to be virtuous about writing unit tests because test-driven development makes unit tests central to the process of building an application.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="e521e-166">Para saber mais sobre o desenvolvimento controlado por testes, é recomendável que você leia o livro de difusões de Michael **trabalhar efetivamente com o código herdado**.</span><span class="sxs-lookup"><span data-stu-id="e521e-166">To learn more about test-driven development, I recommend that you read Michael Feathers book **Working Effectively with Legacy Code**.</span></span>


<span data-ttu-id="e521e-167">Essa iteração, adicionamos um novo recurso para o nosso aplicativo Gerenciador de contato.</span><span class="sxs-lookup"><span data-stu-id="e521e-167">In this iteration, we add a new feature to our Contact Manager application.</span></span> <span data-ttu-id="e521e-168">Adicionamos suporte para grupos de contatos.</span><span class="sxs-lookup"><span data-stu-id="e521e-168">We add support for Contact Groups.</span></span> <span data-ttu-id="e521e-169">Você pode usar grupos de contato para organizar seus contatos em categorias, como Business e amigo.</span><span class="sxs-lookup"><span data-stu-id="e521e-169">You can use Contact Groups to organize your contacts into categories such as Business and Friend groups.</span></span>

<span data-ttu-id="e521e-170">Vamos adicionar essa nova funcionalidade para nosso aplicativo por um processo de desenvolvimento controlado por testes a seguir.</span><span class="sxs-lookup"><span data-stu-id="e521e-170">We'll add this new functionality to our application by following a process of test-driven development.</span></span> <span data-ttu-id="e521e-171">Vamos escrever os testes de unidade primeiro e vamos gravar todo nosso código em relação a esses testes.</span><span class="sxs-lookup"><span data-stu-id="e521e-171">We'll write our unit tests first and we'll write all of our code against these tests.</span></span>

## <a name="what-gets-tested"></a><span data-ttu-id="e521e-172">O que é testado</span><span class="sxs-lookup"><span data-stu-id="e521e-172">What Gets Tested</span></span>

<span data-ttu-id="e521e-173">Conforme abordado na iteração anterior, você normalmente não gravar testes de unidade para lógica de acesso a dados ou exibir lógica.</span><span class="sxs-lookup"><span data-stu-id="e521e-173">As we discussed in the previous iteration, you typically do not write unit tests for data access logic or view logic.</span></span> <span data-ttu-id="e521e-174">Você não os testes de unidade de gravação de t para lógica de acesso a dados como acessar um banco de dados é uma operação relativamente lenta.</span><span class="sxs-lookup"><span data-stu-id="e521e-174">You don t write unit tests for data access logic because accessing a database is a relatively slow operation.</span></span> <span data-ttu-id="e521e-175">Você não t gravação testes de unidade lógica de exibição como acessar uma exibição exige ativar ou desativar um servidor web que é uma operação relativamente lenta.</span><span class="sxs-lookup"><span data-stu-id="e521e-175">You don t write unit tests for view logic because accessing a view requires spinning up a web server which is a relatively slow operation.</span></span> <span data-ttu-id="e521e-176">Você deve gravar um teste de unidade, a menos que o teste pode ser executado repetidamente muito rápido</span><span class="sxs-lookup"><span data-stu-id="e521e-176">You shouldn t write a unit test unless the test can be executed over and over again very fast</span></span>

<span data-ttu-id="e521e-177">Como o desenvolvimento controlado por testes é controlado por testes de unidade, nosso foco inicialmente escrevendo o controlador e lógica de negócios.</span><span class="sxs-lookup"><span data-stu-id="e521e-177">Because test-driven development is driven by unit tests, we focus initially on writing controller and business logic.</span></span> <span data-ttu-id="e521e-178">Podemos evitar a necessidade de alterar o banco de dados ou exibições.</span><span class="sxs-lookup"><span data-stu-id="e521e-178">We avoid touching the database or views.</span></span> <span data-ttu-id="e521e-179">Podemos ganha t modificar o banco de dados ou criar nossas exibições até o final deste tutorial.</span><span class="sxs-lookup"><span data-stu-id="e521e-179">We won t modify the database or create our views until the very end of this tutorial.</span></span> <span data-ttu-id="e521e-180">Vamos começar com o que pode ser testado.</span><span class="sxs-lookup"><span data-stu-id="e521e-180">We start with what can be tested.</span></span>

## <a name="creating-user-stories"></a><span data-ttu-id="e521e-181">Criar casos de usuário</span><span class="sxs-lookup"><span data-stu-id="e521e-181">Creating User Stories</span></span>

<span data-ttu-id="e521e-182">Ao exercícios desenvolvimento controlado por testes, você sempre começa ao escrever um teste.</span><span class="sxs-lookup"><span data-stu-id="e521e-182">When practicing test-driven development, you always start by writing a test.</span></span> <span data-ttu-id="e521e-183">Isso gera imediatamente a pergunta: como decidir quais testes para gravar primeiro?</span><span class="sxs-lookup"><span data-stu-id="e521e-183">This immediately raises the question: How do you decide what test to write first?</span></span> <span data-ttu-id="e521e-184">Para responder essa pergunta, você deve escrever um conjunto de [ **histórias de usuários**](http://en.wikipedia.org/wiki/User_stories).</span><span class="sxs-lookup"><span data-stu-id="e521e-184">To answer this question, you should write a set of [**user stories**](http://en.wikipedia.org/wiki/User_stories).</span></span>

<span data-ttu-id="e521e-185">Uma história de usuário é uma descrição (geralmente uma frase) muito breve de um requisito de software.</span><span class="sxs-lookup"><span data-stu-id="e521e-185">A user story is a very brief (usually one sentence) description of a software requirement.</span></span> <span data-ttu-id="e521e-186">Ele deve ser uma descrição não técnico de um requisito escrito da perspectiva do usuário.</span><span class="sxs-lookup"><span data-stu-id="e521e-186">It should be a non-technical description of a requirement written from a user perspective.</span></span>

<span data-ttu-id="e521e-187">Veja o conjunto de histórias de usuários que descrevem os recursos necessários para a nova funcionalidade de grupo do contato:</span><span class="sxs-lookup"><span data-stu-id="e521e-187">Here s the set of user stories that describe the features required by the new Contact Group functionality:</span></span>

1. <span data-ttu-id="e521e-188">Usuário pode exibir uma lista de grupos de contatos.</span><span class="sxs-lookup"><span data-stu-id="e521e-188">User can view a list of contact groups.</span></span>
2. <span data-ttu-id="e521e-189">Usuário pode criar um novo grupo de contato.</span><span class="sxs-lookup"><span data-stu-id="e521e-189">User can create a new contact group.</span></span>
3. <span data-ttu-id="e521e-190">Usuário pode excluir um grupo de contato existente.</span><span class="sxs-lookup"><span data-stu-id="e521e-190">User can delete an existing contact group.</span></span>
4. <span data-ttu-id="e521e-191">Usuário pode selecionar um grupo de contato ao criar um novo contato.</span><span class="sxs-lookup"><span data-stu-id="e521e-191">User can select a contact group when creating a new contact.</span></span>
5. <span data-ttu-id="e521e-192">Usuário pode selecionar um grupo de contato ao editar um contato existente.</span><span class="sxs-lookup"><span data-stu-id="e521e-192">User can select a contact group when editing an existing contact.</span></span>
6. <span data-ttu-id="e521e-193">Uma lista de grupos de contato é exibida na exibição do índice.</span><span class="sxs-lookup"><span data-stu-id="e521e-193">A list of contact groups is displayed in the Index view.</span></span>
7. <span data-ttu-id="e521e-194">Quando um usuário clica em um grupo de contatos, é exibida uma lista de contatos correspondentes.</span><span class="sxs-lookup"><span data-stu-id="e521e-194">When a user clicks a contact group, a list of matching contacts is displayed.</span></span>

<span data-ttu-id="e521e-195">Observe que esta lista de histórias de usuários é completamente entendida pelo cliente.</span><span class="sxs-lookup"><span data-stu-id="e521e-195">Notice that this list of user stories is completely understandable by a customer.</span></span> <span data-ttu-id="e521e-196">Não há nenhuma referência de detalhes de implementação técnica.</span><span class="sxs-lookup"><span data-stu-id="e521e-196">There is no mention of technical implementation details.</span></span>

<span data-ttu-id="e521e-197">Enquanto o processo de criação de seu aplicativo, o conjunto de histórias de usuário pode se tornar mais refinado.</span><span class="sxs-lookup"><span data-stu-id="e521e-197">While in the process of building your application, the set of user stories can become more refined.</span></span> <span data-ttu-id="e521e-198">Você pode dividir uma história de usuário em vários artigos (requisitos).</span><span class="sxs-lookup"><span data-stu-id="e521e-198">You might break a user story into multiple stories (requirements).</span></span> <span data-ttu-id="e521e-199">Por exemplo, você pode decidir criar um novo grupo de contato deve envolver a validação.</span><span class="sxs-lookup"><span data-stu-id="e521e-199">For example, you might decide that creating a new contact group should involve validation.</span></span> <span data-ttu-id="e521e-200">Enviar um grupo sem um nome de contato deve retornar um erro de validação.</span><span class="sxs-lookup"><span data-stu-id="e521e-200">Submitting a contact group without a name should return a validation error.</span></span>

<span data-ttu-id="e521e-201">Depois de criar uma lista de histórias de usuários, você está pronto para escrever seu primeiro teste de unidade.</span><span class="sxs-lookup"><span data-stu-id="e521e-201">After you create a list of user stories, you are ready to write your first unit test.</span></span> <span data-ttu-id="e521e-202">Vamos começar criando um teste de unidade para exibir a lista de grupos de contatos.</span><span class="sxs-lookup"><span data-stu-id="e521e-202">We'll start by creating a unit test for viewing the list of contact groups.</span></span>

## <a name="listing-contact-groups"></a><span data-ttu-id="e521e-203">Listar grupos de contatos</span><span class="sxs-lookup"><span data-stu-id="e521e-203">Listing Contact Groups</span></span>

<span data-ttu-id="e521e-204">Nossa primeira história de usuário é que um usuário deve ser capaz de exibir uma lista de grupos de contatos.</span><span class="sxs-lookup"><span data-stu-id="e521e-204">Our first user story is that a user should be able to view a list of contact groups.</span></span> <span data-ttu-id="e521e-205">Precisamos express este texto com um teste.</span><span class="sxs-lookup"><span data-stu-id="e521e-205">We need to express this story with a test.</span></span>

<span data-ttu-id="e521e-206">Crie um novo teste de unidade clicando-se a pasta controladores no projeto ContactManager.Tests, selecionando **adicionar, novo teste**e selecionando o **de teste de unidade** modelo (consulte a Figura 1).</span><span class="sxs-lookup"><span data-stu-id="e521e-206">Create a new unit test by right-clicking the Controllers folder in the ContactManager.Tests project, selecting **Add, New Test**, and selecting the **Unit Test** template (see Figure 1).</span></span> <span data-ttu-id="e521e-207">A nova unidade GroupControllerTest.cs de teste e clique no **Okey** botão.</span><span class="sxs-lookup"><span data-stu-id="e521e-207">Name the new unit test GroupControllerTest.cs and click the **OK** button.</span></span>


<span data-ttu-id="e521e-208">[![Adicionando o teste de unidade GroupControllerTest](iteration-6-use-test-driven-development-cs/_static/image1.jpg)](iteration-6-use-test-driven-development-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="e521e-208">[![Adding the GroupControllerTest unit test](iteration-6-use-test-driven-development-cs/_static/image1.jpg)](iteration-6-use-test-driven-development-cs/_static/image1.png)</span></span>

<span data-ttu-id="e521e-209">**Figura 01**: adicionando o teste de unidade GroupControllerTest ([clique para exibir a imagem em tamanho normal](iteration-6-use-test-driven-development-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="e521e-209">**Figure 01**: Adding the GroupControllerTest unit test([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image2.png))</span></span>


<span data-ttu-id="e521e-210">Nosso primeiro teste de unidade está contido na listagem 1.</span><span class="sxs-lookup"><span data-stu-id="e521e-210">Our first unit test is contained in Listing 1.</span></span> <span data-ttu-id="e521e-211">Esse teste verifica que o método Index do controlador grupo retorna um conjunto de grupos.</span><span class="sxs-lookup"><span data-stu-id="e521e-211">This test verifies that the Index() method of the Group controller returns a set of Groups.</span></span> <span data-ttu-id="e521e-212">O teste verifica se uma coleção de grupos é retornada no modo de exibição dados.</span><span class="sxs-lookup"><span data-stu-id="e521e-212">The test verifies that a collection of Groups is returned in view data.</span></span>

<span data-ttu-id="e521e-213">**Listando 1 - Controllers\GroupControllerTest.cs**</span><span class="sxs-lookup"><span data-stu-id="e521e-213">**Listing 1 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample1.cs)]

<span data-ttu-id="e521e-214">Ao digitar o código na listagem 1 no Visual Studio, você terá muitas linhas curvadas vermelhas.</span><span class="sxs-lookup"><span data-stu-id="e521e-214">When you first type the code in Listing 1 in Visual Studio, you'll get a lot of red squiggly lines.</span></span> <span data-ttu-id="e521e-215">Você criou as classes GroupController ou grupo não.</span><span class="sxs-lookup"><span data-stu-id="e521e-215">We have not created the GroupController or Group classes.</span></span>

<span data-ttu-id="e521e-216">Neste ponto, podemos compilação mesmo t nosso aplicativo para que possa t executar nosso primeiro teste de unidade.</span><span class="sxs-lookup"><span data-stu-id="e521e-216">At this point, we can t even build our application so we can t execute our first unit test.</span></span> <span data-ttu-id="e521e-217">Boa que s.</span><span class="sxs-lookup"><span data-stu-id="e521e-217">That s good.</span></span> <span data-ttu-id="e521e-218">Que conta como um teste que falhou.</span><span class="sxs-lookup"><span data-stu-id="e521e-218">That counts as a failing test.</span></span> <span data-ttu-id="e521e-219">Portanto, agora temos permissão para iniciar a gravação de código do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="e521e-219">Therefore, we now have permission to start writing application code.</span></span> <span data-ttu-id="e521e-220">É preciso escrever código suficiente para executar o nosso teste.</span><span class="sxs-lookup"><span data-stu-id="e521e-220">We need to write enough code to execute our test.</span></span>

<span data-ttu-id="e521e-221">A classe do controlador do grupo na lista 2 contém o mínimo de código necessário para passar no teste de unidade.</span><span class="sxs-lookup"><span data-stu-id="e521e-221">The Group controller class in Listing 2 contains the bare minimum of code required to pass the unit test.</span></span> <span data-ttu-id="e521e-222">A ação Index () retorna uma lista estaticamente codificada de grupos (a classe de grupo é definida na listagem 3).</span><span class="sxs-lookup"><span data-stu-id="e521e-222">The Index() action returns a statically coded list of Groups (the Group class is defined in Listing 3).</span></span>

<span data-ttu-id="e521e-223">**A listagem 2 - Controllers\GroupController.cs**</span><span class="sxs-lookup"><span data-stu-id="e521e-223">**Listing 2 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample2.cs)]

<span data-ttu-id="e521e-224">**A listagem 3 - Models\Group.cs**</span><span class="sxs-lookup"><span data-stu-id="e521e-224">**Listing 3 - Models\Group.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample3.cs)]

<span data-ttu-id="e521e-225">Após a inclusão das classes GroupController e grupo ao nosso projeto, nosso primeiro teste de unidade é concluída com êxito (consulte a Figura 2).</span><span class="sxs-lookup"><span data-stu-id="e521e-225">After we add the GroupController and Group classes to our project, our first unit test completes successfully (see Figure 2).</span></span> <span data-ttu-id="e521e-226">Fizemos o mínimo necessário para passar no teste de trabalho.</span><span class="sxs-lookup"><span data-stu-id="e521e-226">We have done the minimum work required to pass the test.</span></span> <span data-ttu-id="e521e-227">É hora de celebrar.</span><span class="sxs-lookup"><span data-stu-id="e521e-227">It is time to celebrate.</span></span>


<span data-ttu-id="e521e-228">[![Sucesso!](iteration-6-use-test-driven-development-cs/_static/image2.jpg)](iteration-6-use-test-driven-development-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="e521e-228">[![Success!](iteration-6-use-test-driven-development-cs/_static/image2.jpg)](iteration-6-use-test-driven-development-cs/_static/image3.png)</span></span>

<span data-ttu-id="e521e-229">**Figura 02**: êxito! ( [Clique para exibir a imagem em tamanho normal](iteration-6-use-test-driven-development-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="e521e-229">**Figure 02**: Success!([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image4.png))</span></span>


## <a name="creating-contact-groups"></a><span data-ttu-id="e521e-230">Criando grupos de contatos</span><span class="sxs-lookup"><span data-stu-id="e521e-230">Creating Contact Groups</span></span>

<span data-ttu-id="e521e-231">Agora podemos pode passar para a segunda história de usuário.</span><span class="sxs-lookup"><span data-stu-id="e521e-231">Now we can move on to the second user story.</span></span> <span data-ttu-id="e521e-232">Precisamos ser capaz de criar novos grupos de contatos.</span><span class="sxs-lookup"><span data-stu-id="e521e-232">We need to be able to create new contact groups.</span></span> <span data-ttu-id="e521e-233">Precisamos express essa intenção com um teste.</span><span class="sxs-lookup"><span data-stu-id="e521e-233">We need to express this intention with a test.</span></span>

<span data-ttu-id="e521e-234">O teste na listagem 4 verifica que chamar o método com um novo grupo adiciona o grupo à lista de grupos retornado pelo método Index Create (de).</span><span class="sxs-lookup"><span data-stu-id="e521e-234">The test in Listing 4 verifies that calling the Create() method with a new Group adds the Group to the list of Groups returned by the Index() method.</span></span> <span data-ttu-id="e521e-235">Em outras palavras, se criar um novo grupo, em seguida, eu deve ser capaz de obter o novo grupo de lista de grupos retornado pelo método Index ().</span><span class="sxs-lookup"><span data-stu-id="e521e-235">In other words, if I create a new group then I should be able to get the new Group back from the list of Groups returned by the Index() method.</span></span>

<span data-ttu-id="e521e-236">**A listagem 4 - Controllers\GroupControllerTest.cs**</span><span class="sxs-lookup"><span data-stu-id="e521e-236">**Listing 4 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample4.cs)]

<span data-ttu-id="e521e-237">O teste na listagem 4 chama o método Create () com um novo grupo de contato do controlador de grupo.</span><span class="sxs-lookup"><span data-stu-id="e521e-237">The test in Listing 4 calls the Group controller Create() method with a new contact Group.</span></span> <span data-ttu-id="e521e-238">Em seguida, o teste verifica que chamar o método Index () do controlador de grupo retorna o novo grupo de dados de exibição.</span><span class="sxs-lookup"><span data-stu-id="e521e-238">Next, the test verifies that calling the Group controller Index() method returns the new Group in view data.</span></span>

<span data-ttu-id="e521e-239">O controlador de grupo modificado na listagem 5 contém o mínimo necessário para passar o novo teste de alterações.</span><span class="sxs-lookup"><span data-stu-id="e521e-239">The modified Group controller in Listing 5 contains the bare minimum of changes required to pass the new test.</span></span>

<span data-ttu-id="e521e-240">**Listagem 5 - Controllers\GroupController.cs**</span><span class="sxs-lookup"><span data-stu-id="e521e-240">**Listing 5 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample5.cs)]

## <a name="the-group-controller-in-listing-5-has-a-new-create-action-this-action-adds-a-group-to-a-collection-of-groups-notice-that-the-index-action-has-been-modified-to-return-the-contents-of-the-collection-of-groups"></a><span data-ttu-id="e521e-241">O controlador de grupo na listagem 5 tem uma nova ação Create ().</span><span class="sxs-lookup"><span data-stu-id="e521e-241">The Group controller in Listing 5 has a new Create() action.</span></span> <span data-ttu-id="e521e-242">Essa ação adiciona um grupo para uma coleção de grupos.</span><span class="sxs-lookup"><span data-stu-id="e521e-242">This action adds a Group to a collection of Groups.</span></span> <span data-ttu-id="e521e-243">Observe que a ação Index () foi modificada para retornar o conteúdo da coleção de grupos.</span><span class="sxs-lookup"><span data-stu-id="e521e-243">Notice that the Index() action has been modified to return the contents of the collection of Groups.</span></span>

<span data-ttu-id="e521e-244">Fizemos uma vez, a quantidade mínima de trabalho necessário para passar no teste de unidade.</span><span class="sxs-lookup"><span data-stu-id="e521e-244">Once again, we have performed the bare minimum amount of work required to pass the unit test.</span></span> <span data-ttu-id="e521e-245">Depois que podemos fazer essas alterações para o controlador de grupo, todos os nossos unidade testes foram bem-sucedidos.</span><span class="sxs-lookup"><span data-stu-id="e521e-245">After we make these changes to the Group controller, all of our unit tests pass.</span></span>

## <a name="adding-validation"></a><span data-ttu-id="e521e-246">Adicionando uma Validação</span><span class="sxs-lookup"><span data-stu-id="e521e-246">Adding Validation</span></span>

<span data-ttu-id="e521e-247">Esse requisito não foi declarado explicitamente na história de usuário.</span><span class="sxs-lookup"><span data-stu-id="e521e-247">This requirement was not stated explicitly in the user story.</span></span> <span data-ttu-id="e521e-248">No entanto, é razoável exigir que um grupo tem um nome.</span><span class="sxs-lookup"><span data-stu-id="e521e-248">However, it is reasonable to require that a Group have a name.</span></span> <span data-ttu-id="e521e-249">Caso contrário, organizando os contatos em grupos não seria muito útil.</span><span class="sxs-lookup"><span data-stu-id="e521e-249">Otherwise, organizing contacts into Groups would not be very useful.</span></span>

<span data-ttu-id="e521e-250">Listar 6 contém um novo teste que expressa a intenção.</span><span class="sxs-lookup"><span data-stu-id="e521e-250">Listing 6 contains a new test that expresses this intention.</span></span> <span data-ttu-id="e521e-251">Esse teste verifica se a tentativa de criar um grupo sem fornecer um resultados de nome em uma mensagem de erro de validação em estado de modelo.</span><span class="sxs-lookup"><span data-stu-id="e521e-251">This test verifies that attempting to create a Group without supplying a name results in a validation error message in model state.</span></span>

<span data-ttu-id="e521e-252">**Listando 6 - Controllers\GroupControllerTest.cs**</span><span class="sxs-lookup"><span data-stu-id="e521e-252">**Listing 6 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample6.cs)]

<span data-ttu-id="e521e-253">Para satisfazer este teste, que é preciso adicionar uma propriedade de nome a nossa classe de grupo (consulte a listagem 7).</span><span class="sxs-lookup"><span data-stu-id="e521e-253">In order to satisfy this test, we need to add a Name property to our Group class (see Listing 7).</span></span> <span data-ttu-id="e521e-254">Além disso, é necessário adicionar um pouco de lógica de validação ao nosso controlador grupo s ação Create () (consulte a listagem 8).</span><span class="sxs-lookup"><span data-stu-id="e521e-254">Furthermore, we need to add a tiny bit of validation logic to our Group controller s Create() action (see Listing 8).</span></span>

<span data-ttu-id="e521e-255">**Listando 7 - Models\Group.cs**</span><span class="sxs-lookup"><span data-stu-id="e521e-255">**Listing 7 - Models\Group.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample7.cs)]

<span data-ttu-id="e521e-256">**Listando 8 - Controllers\GroupController.cs**</span><span class="sxs-lookup"><span data-stu-id="e521e-256">**Listing 8 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample8.cs)]

<span data-ttu-id="e521e-257">Observe que o controlador de grupo agora a ação Create () contém a lógica de validação e o banco de dados.</span><span class="sxs-lookup"><span data-stu-id="e521e-257">Notice that the Group controller Create() action now contains both validation and database logic.</span></span> <span data-ttu-id="e521e-258">Atualmente, o banco de dados usado pelo controlador de grupo consiste em nada mais que uma coleção em memória.</span><span class="sxs-lookup"><span data-stu-id="e521e-258">Currently, the database used by the Group controller consists of nothing more than an in-memory collection.</span></span>

## <a name="time-to-refactor"></a><span data-ttu-id="e521e-259">Tempo de refatoração</span><span class="sxs-lookup"><span data-stu-id="e521e-259">Time to Refactor</span></span>

<span data-ttu-id="e521e-260">A terceira etapa em vermelho/verde/refatorar é a parte de refatoração.</span><span class="sxs-lookup"><span data-stu-id="e521e-260">The third step in Red/Green/Refactor is the Refactor part.</span></span> <span data-ttu-id="e521e-261">Neste ponto, é preciso entrar novamente em nosso código e considere como podemos refatorar nosso aplicativo para melhorar seu design.</span><span class="sxs-lookup"><span data-stu-id="e521e-261">At this point, we need to step back from our code and consider how we can refactor our application to improve its design.</span></span> <span data-ttu-id="e521e-262">O estágio de refatoração é o estágio em que acreditamos que rígido sobre a melhor maneira de implementar os padrões e os princípios de design de software.</span><span class="sxs-lookup"><span data-stu-id="e521e-262">The Refactor stage is the stage at which we think hard about the best way of implementing software design principles and patterns.</span></span>

<span data-ttu-id="e521e-263">Estamos livres para modificar o nosso código de qualquer forma que escolhemos para aprimorar o design do código.</span><span class="sxs-lookup"><span data-stu-id="e521e-263">We are free to modify our code in any way that we choose to improve the design of the code.</span></span> <span data-ttu-id="e521e-264">Temos uma rede de segurança de testes de unidade que nos impedem de interromper a funcionalidade existente.</span><span class="sxs-lookup"><span data-stu-id="e521e-264">We have a safety net of unit tests that prevent us from breaking existing functionality.</span></span>

<span data-ttu-id="e521e-265">Agora, nosso controlador de grupo é uma mensagem de uma perspectiva de bom design de software.</span><span class="sxs-lookup"><span data-stu-id="e521e-265">Right now, our Group controller is a mess from the perspective of good software design.</span></span> <span data-ttu-id="e521e-266">O controlador de grupo contém uma confusão tangled de validação e o código de acesso a dados.</span><span class="sxs-lookup"><span data-stu-id="e521e-266">The Group controller contains a tangled mess of validation and data access code.</span></span> <span data-ttu-id="e521e-267">Para evitar a violação o princípio da responsabilidade única, é preciso separar essas preocupações em classes diferentes.</span><span class="sxs-lookup"><span data-stu-id="e521e-267">To avoid violating the Single Responsibility Principle, we need to separate these concerns into different classes.</span></span>

<span data-ttu-id="e521e-268">Nossa classe de controlador grupo refatorado está contido na listagem 9.</span><span class="sxs-lookup"><span data-stu-id="e521e-268">Our refactored Group controller class is contained in Listing 9.</span></span> <span data-ttu-id="e521e-269">O controlador foi modificado para usar a camada de serviço ContactManager.</span><span class="sxs-lookup"><span data-stu-id="e521e-269">The controller has been modified to use the ContactManager service layer.</span></span> <span data-ttu-id="e521e-270">Essa é a camada de serviço mesmo que podemos usar com o controlador do contato.</span><span class="sxs-lookup"><span data-stu-id="e521e-270">This is the same service layer that we use with the Contact controller.</span></span>

<span data-ttu-id="e521e-271">A listagem 10 contém os novos métodos adicionados à camada de serviço ContactManager para dar suporte a validação, listando e criar grupos.</span><span class="sxs-lookup"><span data-stu-id="e521e-271">Listing 10 contains the new methods added to the ContactManager service layer to support validating, listing, and creating groups.</span></span> <span data-ttu-id="e521e-272">A interface IContactManagerService foi atualizada para incluir os novos métodos.</span><span class="sxs-lookup"><span data-stu-id="e521e-272">The IContactManagerService interface was updated to include the new methods.</span></span>

<span data-ttu-id="e521e-273">Listagem 11 contém uma nova classe FakeContactManagerRepository que implementa a interface IContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="e521e-273">Listing 11 contains a new FakeContactManagerRepository class that implements the IContactManagerRepository interface.</span></span> <span data-ttu-id="e521e-274">Ao contrário de classe EntityContactManagerRepository que também implementa a interface IContactManagerRepository, nossa nova classe FakeContactManagerRepository não se comunicar com o banco de dados.</span><span class="sxs-lookup"><span data-stu-id="e521e-274">Unlike the EntityContactManagerRepository class that also implements the IContactManagerRepository interface, our new FakeContactManagerRepository class does not communicate with the database.</span></span> <span data-ttu-id="e521e-275">A classe FakeContactManagerRepository usa uma coleção de memória como um proxy para o banco de dados.</span><span class="sxs-lookup"><span data-stu-id="e521e-275">The FakeContactManagerRepository class uses an in-memory collection as a proxy for the database.</span></span> <span data-ttu-id="e521e-276">Vamos usar essa classe em nossos testes de unidade como uma camada de repositório falsa.</span><span class="sxs-lookup"><span data-stu-id="e521e-276">We'll use this class in our unit tests as a fake repository layer.</span></span>

<span data-ttu-id="e521e-277">**Listagem 9 - Controllers\GroupController.cs**</span><span class="sxs-lookup"><span data-stu-id="e521e-277">**Listing 9 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample9.cs)]

<span data-ttu-id="e521e-278">**Listando 10 - Controllers\ContactManagerService.cs**</span><span class="sxs-lookup"><span data-stu-id="e521e-278">**Listing 10 - Controllers\ContactManagerService.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample10.cs)]

<span data-ttu-id="e521e-279">**Listando 11 - Controllers\FakeContactManagerRepository.cs**</span><span class="sxs-lookup"><span data-stu-id="e521e-279">**Listing 11 - Controllers\FakeContactManagerRepository.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample11.cs)]

<span data-ttu-id="e521e-280">Modificando o IContactManagerRepository interface requer usar para implementar os métodos CreateGroup() e ListGroups() na classe EntityContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="e521e-280">Modifying the IContactManagerRepository interface requires use to implement the CreateGroup() and ListGroups() methods in the EntityContactManagerRepository class.</span></span> <span data-ttu-id="e521e-281">A maneira mais rápida e laziest de fazer isso é adicionar métodos de stub ter esta aparência:</span><span class="sxs-lookup"><span data-stu-id="e521e-281">The laziest and fastest way to do this is to add stub methods that look like this:</span></span>   

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample12.cs)]


<span data-ttu-id="e521e-282">Por fim, essas alterações ao design do nosso aplicativo requerem que fazer algumas modificações para nossos testes de unidade.</span><span class="sxs-lookup"><span data-stu-id="e521e-282">Finally, these changes to the design of our application require us to make some modifications to our unit tests.</span></span> <span data-ttu-id="e521e-283">Agora, é preciso usar o FakeContactManagerRepository ao executar os testes de unidade.</span><span class="sxs-lookup"><span data-stu-id="e521e-283">We now need to use the FakeContactManagerRepository when performing the unit tests.</span></span> <span data-ttu-id="e521e-284">A classe GroupControllerTest atualizada está contida na listagem 12.</span><span class="sxs-lookup"><span data-stu-id="e521e-284">The updated GroupControllerTest class is contained in Listing 12.</span></span>

<span data-ttu-id="e521e-285">**Listando 12 - Controllers\GroupControllerTest.cs**</span><span class="sxs-lookup"><span data-stu-id="e521e-285">**Listing 12 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample13.cs)]

<span data-ttu-id="e521e-286">Depois de fazer todas essas alterações, uma vez, todos os testes de unidade aprovados.</span><span class="sxs-lookup"><span data-stu-id="e521e-286">After we make all of these changes, once again, all of our unit tests pass.</span></span> <span data-ttu-id="e521e-287">Já foram concluídos todo o ciclo de vermelho/verde/refatoração.</span><span class="sxs-lookup"><span data-stu-id="e521e-287">We have completed the entire cycle of Red/Green/Refactor.</span></span> <span data-ttu-id="e521e-288">Implementamos as histórias de usuário de dois primeiro.</span><span class="sxs-lookup"><span data-stu-id="e521e-288">We have implemented the first two user stories.</span></span> <span data-ttu-id="e521e-289">Agora temos suporte para testes de unidade para os requisitos expressos em histórias de usuários.</span><span class="sxs-lookup"><span data-stu-id="e521e-289">We now have supporting unit tests for the requirements expressed in the user stories.</span></span> <span data-ttu-id="e521e-290">Implementar o restante das histórias de usuários envolve o mesmo ciclo de vermelho/verde/refatoração de repetição.</span><span class="sxs-lookup"><span data-stu-id="e521e-290">Implementing the remainder of the user stories involves repeating the same cycle of Red/Green/Refactor.</span></span>

## <a name="modifying-our-database"></a><span data-ttu-id="e521e-291">Modificando o nosso banco de dados</span><span class="sxs-lookup"><span data-stu-id="e521e-291">Modifying our Database</span></span>

<span data-ttu-id="e521e-292">Infelizmente, mesmo que nós foram satisfeitos todos os requisitos expressados por nossos testes de unidade, nosso trabalho não for feito.</span><span class="sxs-lookup"><span data-stu-id="e521e-292">Unfortunately, even though we have satisfied all of the requirements expressed by our unit tests, our work is not done.</span></span> <span data-ttu-id="e521e-293">Ainda é preciso modificar o nosso banco de dados.</span><span class="sxs-lookup"><span data-stu-id="e521e-293">We still need to modify our database.</span></span>

<span data-ttu-id="e521e-294">É preciso criar uma nova tabela de banco de dados do grupo.</span><span class="sxs-lookup"><span data-stu-id="e521e-294">We need to create a new Group database table.</span></span> <span data-ttu-id="e521e-295">Siga estas etapas:</span><span class="sxs-lookup"><span data-stu-id="e521e-295">Follow these steps:</span></span>

1. <span data-ttu-id="e521e-296">Na janela do Gerenciador de servidores, clique com botão direito na pasta tabelas e selecione a opção de menu **adicionar nova tabela**.</span><span class="sxs-lookup"><span data-stu-id="e521e-296">In the Server Explorer window, right-click the Tables folder and select the menu option **Add New Table**.</span></span>
2. <span data-ttu-id="e521e-297">Insira as duas colunas descritas abaixo no Designer de tabela.</span><span class="sxs-lookup"><span data-stu-id="e521e-297">Enter the two columns described below in the Table Designer.</span></span>
3. <span data-ttu-id="e521e-298">Marque a coluna de Id como uma chave primária e uma coluna de identidade.</span><span class="sxs-lookup"><span data-stu-id="e521e-298">Mark the Id column as a primary key and Identity column.</span></span>
4. <span data-ttu-id="e521e-299">Salve a nova tabela com os grupos de nome clicando no ícone de disquete.</span><span class="sxs-lookup"><span data-stu-id="e521e-299">Save the new table with the name Groups by clicking the icon of the floppy.</span></span>

<a id="0.11_table01"></a>


| <span data-ttu-id="e521e-300">**Nome da coluna**</span><span class="sxs-lookup"><span data-stu-id="e521e-300">**Column Name**</span></span> | <span data-ttu-id="e521e-301">**Tipo de dados**</span><span class="sxs-lookup"><span data-stu-id="e521e-301">**Data Type**</span></span> | <span data-ttu-id="e521e-302">**Permitir nulos**</span><span class="sxs-lookup"><span data-stu-id="e521e-302">**Allow Nulls**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="e521e-303">Id</span><span class="sxs-lookup"><span data-stu-id="e521e-303">Id</span></span> | <span data-ttu-id="e521e-304">int</span><span class="sxs-lookup"><span data-stu-id="e521e-304">int</span></span> | <span data-ttu-id="e521e-305">False</span><span class="sxs-lookup"><span data-stu-id="e521e-305">False</span></span> |
| <span data-ttu-id="e521e-306">Nome</span><span class="sxs-lookup"><span data-stu-id="e521e-306">Name</span></span> | <span data-ttu-id="e521e-307">nvarchar (50)</span><span class="sxs-lookup"><span data-stu-id="e521e-307">nvarchar(50)</span></span> | <span data-ttu-id="e521e-308">False</span><span class="sxs-lookup"><span data-stu-id="e521e-308">False</span></span> |


<span data-ttu-id="e521e-309">Em seguida, é preciso excluir todos os dados da tabela Contacts (caso contrário, podemos ganha não poderá criar uma relação entre as tabelas de contatos e grupos).</span><span class="sxs-lookup"><span data-stu-id="e521e-309">Next, we need to delete all of the data from the Contacts table (otherwise, we won t be able to create a relationship between the Contacts and Groups tables).</span></span> <span data-ttu-id="e521e-310">Siga estas etapas:</span><span class="sxs-lookup"><span data-stu-id="e521e-310">Follow these steps:</span></span>

1. <span data-ttu-id="e521e-311">A tabela Contatos e selecione a opção de menu **Mostrar dados da tabela**.</span><span class="sxs-lookup"><span data-stu-id="e521e-311">Right-click the Contacts table and select the menu option **Show Table Data**.</span></span>
2. <span data-ttu-id="e521e-312">Exclua todas as linhas.</span><span class="sxs-lookup"><span data-stu-id="e521e-312">Delete all of the rows.</span></span>

<span data-ttu-id="e521e-313">Em seguida, é preciso definir uma relação entre a tabela de banco de dados de grupos e a tabela de banco de dados de contatos existente.</span><span class="sxs-lookup"><span data-stu-id="e521e-313">Next, we need to define a relationship between the Groups database table and the existing Contacts database table.</span></span> <span data-ttu-id="e521e-314">Siga estas etapas:</span><span class="sxs-lookup"><span data-stu-id="e521e-314">Follow these steps:</span></span>

1. <span data-ttu-id="e521e-315">Clique duas vezes a tabela contatos na janela do Gerenciador de servidores para abrir o Designer de tabela.</span><span class="sxs-lookup"><span data-stu-id="e521e-315">Double-click the Contacts table in the Server Explorer window to open the Table Designer.</span></span>
2. <span data-ttu-id="e521e-316">Adicione uma nova coluna de inteiro à tabela Contatos denominada GroupId.</span><span class="sxs-lookup"><span data-stu-id="e521e-316">Add a new integer column to the Contacts table named GroupId.</span></span>
3. <span data-ttu-id="e521e-317">Clique no botão de relação para abrir a caixa de diálogo relações de chave estrangeira (consulte a Figura 3).</span><span class="sxs-lookup"><span data-stu-id="e521e-317">Click the Relationship button to open the Foreign Key Relationships dialog (see Figure 3).</span></span>
4. <span data-ttu-id="e521e-318">Clique no botão Adicionar.</span><span class="sxs-lookup"><span data-stu-id="e521e-318">Click the Add button.</span></span>
5. <span data-ttu-id="e521e-319">Clique no botão de reticências que aparece ao lado do botão de tabela e uma especificação de colunas.</span><span class="sxs-lookup"><span data-stu-id="e521e-319">Click the ellipsis button that appears next to the Table and Columns Specification button.</span></span>
6. <span data-ttu-id="e521e-320">Na caixa de diálogo tabelas e colunas, selecione grupos como a tabela de chave primária e a Id como a coluna de chave primária.</span><span class="sxs-lookup"><span data-stu-id="e521e-320">In the Tables and Columns dialog, select Groups as the primary key table and Id as the primary key column.</span></span> <span data-ttu-id="e521e-321">Selecione contatos como a tabela de chave estrangeira e a ID do grupo como a coluna de chave estrangeira (consulte a Figura 4).</span><span class="sxs-lookup"><span data-stu-id="e521e-321">Select Contacts as the foreign key table and GroupId as the foreign key column (see Figure 4).</span></span> <span data-ttu-id="e521e-322">Clique no botão Okey.</span><span class="sxs-lookup"><span data-stu-id="e521e-322">Click the OK button.</span></span>
7. <span data-ttu-id="e521e-323">Em **especificação INSERT e UPDATE**, selecione o valor **Cascade** para **Excluir regra**.</span><span class="sxs-lookup"><span data-stu-id="e521e-323">Under **INSERT and UPDATE Specification**, select the value **Cascade** for **Delete Rule**.</span></span>
8. <span data-ttu-id="e521e-324">Clique no botão Fechar para fechar a caixa de diálogo relações de chave estrangeira.</span><span class="sxs-lookup"><span data-stu-id="e521e-324">Click the Close button to close the Foreign Key Relationships dialog.</span></span>
9. <span data-ttu-id="e521e-325">Clique no botão Salvar para salvar as alterações à tabela de contatos.</span><span class="sxs-lookup"><span data-stu-id="e521e-325">Click the Save button to save the changes to the Contacts table.</span></span>


<span data-ttu-id="e521e-326">[![Criar uma relação de tabela do banco de dados](iteration-6-use-test-driven-development-cs/_static/image3.jpg)](iteration-6-use-test-driven-development-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="e521e-326">[![Creating a database table relationship](iteration-6-use-test-driven-development-cs/_static/image3.jpg)](iteration-6-use-test-driven-development-cs/_static/image5.png)</span></span>

<span data-ttu-id="e521e-327">**Figura 03**: criar uma relação de tabela do banco de dados ([clique para exibir a imagem em tamanho normal](iteration-6-use-test-driven-development-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="e521e-327">**Figure 03**: Creating a database table relationship ([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image6.png))</span></span>


<span data-ttu-id="e521e-328">[![Especificando relações de tabela](iteration-6-use-test-driven-development-cs/_static/image4.jpg)](iteration-6-use-test-driven-development-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="e521e-328">[![Specifying table relationships](iteration-6-use-test-driven-development-cs/_static/image4.jpg)](iteration-6-use-test-driven-development-cs/_static/image7.png)</span></span>

<span data-ttu-id="e521e-329">**Figura 04**: especificar relações de tabela ([clique para exibir a imagem em tamanho normal](iteration-6-use-test-driven-development-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="e521e-329">**Figure 04**: Specifying table relationships([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image8.png))</span></span>


### <a name="updating-our-data-model"></a><span data-ttu-id="e521e-330">Atualizando o modelo de dados</span><span class="sxs-lookup"><span data-stu-id="e521e-330">Updating our Data Model</span></span>

<span data-ttu-id="e521e-331">Em seguida, precisamos atualizar o modelo de dados para representar a nova tabela de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="e521e-331">Next, we need to update our data model to represent the new database table.</span></span> <span data-ttu-id="e521e-332">Siga estas etapas:</span><span class="sxs-lookup"><span data-stu-id="e521e-332">Follow these steps:</span></span>

1. <span data-ttu-id="e521e-333">Duas vezes no arquivo ContactManagerModel.edmx na pasta de modelos para abrir o Designer de entidade.</span><span class="sxs-lookup"><span data-stu-id="e521e-333">Double-click the ContactManagerModel.edmx file in the Models folder to open the Entity Designer.</span></span>
2. <span data-ttu-id="e521e-334">A superfície do Designer e selecione a opção de menu **modelo de atualização de banco de dados**.</span><span class="sxs-lookup"><span data-stu-id="e521e-334">Right-click the Designer surface and select the menu option **Update Model from Database**.</span></span>
3. <span data-ttu-id="e521e-335">No Assistente de atualização, selecione os grupos de tabela e clique no término botão (consulte a Figura 5).</span><span class="sxs-lookup"><span data-stu-id="e521e-335">In the Update Wizard, select the Groups table and click the Finish button (see Figure 5).</span></span>
4. <span data-ttu-id="e521e-336">A entidade de grupos e selecione a opção de menu **Renomear**.</span><span class="sxs-lookup"><span data-stu-id="e521e-336">Right-click the Groups entity and select the menu option **Rename**.</span></span> <span data-ttu-id="e521e-337">Alterar o nome do *grupos* entidade *grupo* (singular).</span><span class="sxs-lookup"><span data-stu-id="e521e-337">Change the name of the *Groups* entity to *Group* (singular).</span></span>
5. <span data-ttu-id="e521e-338">Clique com botão direito a propriedade de navegação de grupos aparece na parte inferior da entidade do contato.</span><span class="sxs-lookup"><span data-stu-id="e521e-338">Right-click the Groups navigation property that appears at the bottom of the Contact entity.</span></span> <span data-ttu-id="e521e-339">Alterar o nome do *grupos* propriedade de navegação *grupo* (singular).</span><span class="sxs-lookup"><span data-stu-id="e521e-339">Change the name of the *Groups* navigation property to *Group* (singular).</span></span>


<span data-ttu-id="e521e-340">[![Atualizando um modelo do Entity Framework do banco de dados](iteration-6-use-test-driven-development-cs/_static/image5.jpg)](iteration-6-use-test-driven-development-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="e521e-340">[![Updating an Entity Framework model from the database](iteration-6-use-test-driven-development-cs/_static/image5.jpg)](iteration-6-use-test-driven-development-cs/_static/image9.png)</span></span>

<span data-ttu-id="e521e-341">**Figura 05**: atualizando um modelo do Entity Framework do banco de dados ([clique para exibir a imagem em tamanho normal](iteration-6-use-test-driven-development-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="e521e-341">**Figure 05**: Updating an Entity Framework model from the database([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image10.png))</span></span>


<span data-ttu-id="e521e-342">Depois de concluir essas etapas, o modelo de dados representa tabelas de grupos e contatos.</span><span class="sxs-lookup"><span data-stu-id="e521e-342">After you complete these steps, your data model will represent both the Contacts and Groups tables.</span></span> <span data-ttu-id="e521e-343">O Designer de entidade devem mostrar ambas as entidades (consulte a Figura 6).</span><span class="sxs-lookup"><span data-stu-id="e521e-343">The Entity Designer should show both entities (see Figure 6).</span></span>


<span data-ttu-id="e521e-344">[![Exibição de grupo e contato do Designer de entidade](iteration-6-use-test-driven-development-cs/_static/image6.jpg)](iteration-6-use-test-driven-development-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="e521e-344">[![Entity Designer displaying Group and Contact](iteration-6-use-test-driven-development-cs/_static/image6.jpg)](iteration-6-use-test-driven-development-cs/_static/image11.png)</span></span>

<span data-ttu-id="e521e-345">**Figura 06**: Entity Designer exibindo Group e Contact ([clique para exibir a imagem em tamanho normal](iteration-6-use-test-driven-development-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="e521e-345">**Figure 06**: Entity Designer displaying Group and Contact([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image12.png))</span></span>


### <a name="creating-our-repository-classes"></a><span data-ttu-id="e521e-346">Criando Classes nosso repositório</span><span class="sxs-lookup"><span data-stu-id="e521e-346">Creating our Repository Classes</span></span>

<span data-ttu-id="e521e-347">Em seguida, é preciso implementar nossa classe de repositório.</span><span class="sxs-lookup"><span data-stu-id="e521e-347">Next, we need to implement our repository class.</span></span> <span data-ttu-id="e521e-348">Durante o curso dessa iteração, adicionamos vários novos métodos para a interface IContactManagerRepository ao escrever código para satisfazer nossos testes de unidade.</span><span class="sxs-lookup"><span data-stu-id="e521e-348">Over the course of this iteration, we added several new methods to the IContactManagerRepository interface while writing code to satisfy our unit tests.</span></span> <span data-ttu-id="e521e-349">A versão final da interface IContactManagerRepository está contida na 14 de listagem.</span><span class="sxs-lookup"><span data-stu-id="e521e-349">The final version of the IContactManagerRepository interface is contained in Listing 14.</span></span>

<span data-ttu-id="e521e-350">**Listando 14 - Models\IContactManagerRepository.cs**</span><span class="sxs-lookup"><span data-stu-id="e521e-350">**Listing 14 - Models\IContactManagerRepository.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample14.cs)]

<span data-ttu-id="e521e-351">Nós realmente implementado refúgio t e qualquer um dos métodos relacionados a trabalhar com grupos de contatos.</span><span class="sxs-lookup"><span data-stu-id="e521e-351">We haven t actually implemented any of the methods related to working with contact groups.</span></span> <span data-ttu-id="e521e-352">Atualmente, a classe EntityContactManagerRepository tem métodos de stub para cada um dos métodos de contato de grupo listados na interface do IContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="e521e-352">Currently, the EntityContactManagerRepository class has stub methods for each of the contact group methods listed in the IContactManagerRepository interface.</span></span> <span data-ttu-id="e521e-353">Por exemplo, o método ListGroups() atualmente esta aparência:</span><span class="sxs-lookup"><span data-stu-id="e521e-353">For example, the ListGroups() method currently looks like this:</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample15.cs)]

<span data-ttu-id="e521e-354">Os métodos de stub habilitado para compilar nosso aplicativo e passar nos testes de unidade.</span><span class="sxs-lookup"><span data-stu-id="e521e-354">The stub methods enabled us to compile our application and pass the unit tests.</span></span> <span data-ttu-id="e521e-355">No entanto, agora é hora de realmente implementar esses métodos.</span><span class="sxs-lookup"><span data-stu-id="e521e-355">However, now it is time to actually implement these methods.</span></span> <span data-ttu-id="e521e-356">A versão final da classe EntityContactManagerRepository está contida na listagem 13.</span><span class="sxs-lookup"><span data-stu-id="e521e-356">The final version of the EntityContactManagerRepository class is contained in Listing 13.</span></span>

<span data-ttu-id="e521e-357">**A listagem 13 - Models\EntityContactManagerRepository.cs**</span><span class="sxs-lookup"><span data-stu-id="e521e-357">**Listing 13 - Models\EntityContactManagerRepository.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample16.cs)]

### <a name="creating-the-views"></a><span data-ttu-id="e521e-358">Criando os modos de exibição</span><span class="sxs-lookup"><span data-stu-id="e521e-358">Creating the Views</span></span>

<span data-ttu-id="e521e-359">Quando você usa o mecanismo de exibição do ASP.NET padrão de aplicativo do ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="e521e-359">ASP.NET MVC application when you use the default ASP.NET view engine.</span></span> <span data-ttu-id="e521e-360">Portanto, Anibal t criar modos de exibição em resposta a um teste de unidade específica.</span><span class="sxs-lookup"><span data-stu-id="e521e-360">So, you don t create views in response to a particular unit test.</span></span> <span data-ttu-id="e521e-361">No entanto, como um aplicativo seria inútil sem exibições, podemos t concluir essa iteração sem criar e modificar os modos de exibição contidos no aplicativo Gerenciador de contato.</span><span class="sxs-lookup"><span data-stu-id="e521e-361">However, because an application would be useless without views, we can t complete this iteration without creating and modifying the views contained in the Contact Manager application.</span></span>

<span data-ttu-id="e521e-362">É necessário criar as novas exibições a seguir para gerenciar grupos de contato (consulte a Figura 7):</span><span class="sxs-lookup"><span data-stu-id="e521e-362">We need to create the following new views for managing contact groups (see Figure 7):</span></span>

- <span data-ttu-id="e521e-363">Views\Group\Index.aspx - exibe a lista de grupos de contatos</span><span class="sxs-lookup"><span data-stu-id="e521e-363">Views\Group\Index.aspx - Displays list of contact groups</span></span>
- <span data-ttu-id="e521e-364">Views\Group\Delete.aspx - formulário de confirmação exibida para excluir um grupo de contatos</span><span class="sxs-lookup"><span data-stu-id="e521e-364">Views\Group\Delete.aspx - Displays confirmation form for deleting a contact group</span></span>


<span data-ttu-id="e521e-365">[![O modo de exibição do índice de grupo](iteration-6-use-test-driven-development-cs/_static/image7.jpg)](iteration-6-use-test-driven-development-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="e521e-365">[![The Group Index view](iteration-6-use-test-driven-development-cs/_static/image7.jpg)](iteration-6-use-test-driven-development-cs/_static/image13.png)</span></span>

<span data-ttu-id="e521e-366">**Figura 07**: exibir o índice de grupo ([clique para exibir a imagem em tamanho normal](iteration-6-use-test-driven-development-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="e521e-366">**Figure 07**: The Group Index view([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image14.png))</span></span>


<span data-ttu-id="e521e-367">É necessário modificar as seguintes exibições existentes para que elas incluem grupos de contato:</span><span class="sxs-lookup"><span data-stu-id="e521e-367">We need to modify the following existing views so that they include contact groups:</span></span>

- <span data-ttu-id="e521e-368">Views\Home\Create.aspx</span><span class="sxs-lookup"><span data-stu-id="e521e-368">Views\Home\Create.aspx</span></span>
- <span data-ttu-id="e521e-369">Views\Home\Edit.aspx</span><span class="sxs-lookup"><span data-stu-id="e521e-369">Views\Home\Edit.aspx</span></span>
- <span data-ttu-id="e521e-370">Views\Home\Index.aspx</span><span class="sxs-lookup"><span data-stu-id="e521e-370">Views\Home\Index.aspx</span></span>

<span data-ttu-id="e521e-371">Você pode ver os modos modificados examinando o aplicativo do Visual Studio que acompanha este tutorial.</span><span class="sxs-lookup"><span data-stu-id="e521e-371">You can see the modified views by looking at the Visual Studio application that accompanies this tutorial.</span></span> <span data-ttu-id="e521e-372">Por exemplo, a Figura 8 ilustra o modo de exibição do índice de contatos.</span><span class="sxs-lookup"><span data-stu-id="e521e-372">For example, Figure 8 illustrates the Contact Index view.</span></span>


<span data-ttu-id="e521e-373">[![O modo de exibição do índice de contatos](iteration-6-use-test-driven-development-cs/_static/image8.jpg)](iteration-6-use-test-driven-development-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="e521e-373">[![The Contact Index view](iteration-6-use-test-driven-development-cs/_static/image8.jpg)](iteration-6-use-test-driven-development-cs/_static/image15.png)</span></span>

<span data-ttu-id="e521e-374">**Figura 08**: exibir o índice do contato ([clique para exibir a imagem em tamanho normal](iteration-6-use-test-driven-development-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="e521e-374">**Figure 08**: The Contact Index view([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image16.png))</span></span>


## <a name="summary"></a><span data-ttu-id="e521e-375">Resumo</span><span class="sxs-lookup"><span data-stu-id="e521e-375">Summary</span></span>

<span data-ttu-id="e521e-376">Essa iteração, nós adicionamos novas funcionalidades para nosso aplicativo Contact Manager seguindo uma metodologia de design de aplicativo de desenvolvimento controlado por testes.</span><span class="sxs-lookup"><span data-stu-id="e521e-376">In this iteration, we added new functionality to our Contact Manager application by following a test-driven development application design methodology.</span></span> <span data-ttu-id="e521e-377">Começamos criando um conjunto de histórias de usuários.</span><span class="sxs-lookup"><span data-stu-id="e521e-377">We started by creating a set of user stories.</span></span> <span data-ttu-id="e521e-378">Criamos um conjunto de testes de unidade que corresponde aos requisitos expressados por histórias de usuários.</span><span class="sxs-lookup"><span data-stu-id="e521e-378">We created a set of unit tests that corresponds to the requirements expressed by the user stories.</span></span> <span data-ttu-id="e521e-379">Por fim, escrevemos código apenas o suficiente para atender os requisitos expressados por testes de unidade.</span><span class="sxs-lookup"><span data-stu-id="e521e-379">Finally, we wrote just enough code to satisfy the requirements expressed by the unit tests.</span></span>

<span data-ttu-id="e521e-380">Depois de concluída escrevendo código suficiente para atender os requisitos expressados por testes de unidade, atualizamos nosso banco de dados e os modos de exibição.</span><span class="sxs-lookup"><span data-stu-id="e521e-380">After we finished writing enough code to satisfy the requirements expressed by the unit tests, we updated our database and views.</span></span> <span data-ttu-id="e521e-381">Adicionamos uma nova tabela de grupos para nosso banco de dados e atualizado nosso modelo de dados do Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="e521e-381">We added a new Groups table to our database and updated our Entity Framework Data Model.</span></span> <span data-ttu-id="e521e-382">Também é criado e modificado de um conjunto de exibições.</span><span class="sxs-lookup"><span data-stu-id="e521e-382">We also created and modified a set of views.</span></span>

<span data-ttu-id="e521e-383">Na próxima iteração – a iteração final – estamos reescreva nosso aplicativo para tirar proveito do Ajax.</span><span class="sxs-lookup"><span data-stu-id="e521e-383">In the next iteration -- the final iteration -- we rewrite our application to take advantage of Ajax.</span></span> <span data-ttu-id="e521e-384">Aproveitando Ajax, podemos vai melhorar a capacidade de resposta e o desempenho do aplicativo Gerenciador de contato.</span><span class="sxs-lookup"><span data-stu-id="e521e-384">By taking advantage of Ajax, we'll improve the responsiveness and performance of the Contact Manager application.</span></span>

>[!div class="step-by-step"]
<span data-ttu-id="e521e-385">[Anterior](iteration-5-create-unit-tests-cs.md)
[Próximo](iteration-7-add-ajax-functionality-cs.md)</span><span class="sxs-lookup"><span data-stu-id="e521e-385">[Previous](iteration-5-create-unit-tests-cs.md)
[Next](iteration-7-add-ajax-functionality-cs.md)</span></span>
