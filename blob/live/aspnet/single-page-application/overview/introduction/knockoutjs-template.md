---
uid: single-page-application/overview/introduction/knockoutjs-template
title: "Aplicativo de página única: Modelo KnockoutJS | Microsoft Docs"
author: MikeWasson
description: "Modelo de separação"
ms.author: aspnetcontent
manager: wpickett
ms.date: 01/30/2013
ms.topic: article
ms.assetid: f9c07af0-4b20-4b08-af8f-47fc3df169a2
ms.technology: 
ms.prod: .net-framework
msc.legacyurl: /single-page-application/overview/introduction/knockoutjs-template
msc.type: authoredcontent
ms.openlocfilehash: 6e84dcc16345e33fcd3a3f83c4b35bc993c03ca6
ms.sourcegitcommit: 9a9483aceb34591c97451997036a9120c3fe2baf
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 11/10/2017
---
<a name="single-page-application-knockoutjs-template"></a><span data-ttu-id="7207f-103">Aplicativo de página única: Modelo de KnockoutJS</span><span class="sxs-lookup"><span data-stu-id="7207f-103">Single Page Application: KnockoutJS template</span></span>
====================
<span data-ttu-id="7207f-104">por [Mike Wasson](https://github.com/MikeWasson)</span><span class="sxs-lookup"><span data-stu-id="7207f-104">by [Mike Wasson](https://github.com/MikeWasson)</span></span>

> <span data-ttu-id="7207f-105">O modelo MVC Knockout faz parte do ASP.NET e Web Tools 2012.2</span><span class="sxs-lookup"><span data-stu-id="7207f-105">The Knockout MVC Template is part of ASP.NET and Web Tools 2012.2</span></span>
> 
> [<span data-ttu-id="7207f-106">Baixe o ASP.NET e Web Tools 2012.2</span><span class="sxs-lookup"><span data-stu-id="7207f-106">Download ASP.NET and Web Tools 2012.2</span></span>](https://go.microsoft.com/fwlink/?LinkId=282650)


<span data-ttu-id="7207f-107">A atualização do ASP.NET e Web Tools 2012.2 inclui um modelo de aplicativo de página única (SPA) para o ASP.NET MVC 4.</span><span class="sxs-lookup"><span data-stu-id="7207f-107">The ASP.NET and Web Tools 2012.2 update includes a Single-Page Application (SPA) template for ASP.NET MVC 4.</span></span> <span data-ttu-id="7207f-108">Este modelo é desenvolvido para você começar a criar rapidamente aplicativos web interativos do lado do cliente.</span><span class="sxs-lookup"><span data-stu-id="7207f-108">This template is designed to get you started quickly building interactive client-side web apps.</span></span>

<span data-ttu-id="7207f-109">"Aplicativo de página única" (SPA) é o termo geral para um aplicativo web que carrega uma única página HTML e, em seguida, atualiza a página dinamicamente, em vez de carregar as novas páginas.</span><span class="sxs-lookup"><span data-stu-id="7207f-109">"Single-page application" (SPA) is the general term for a web application that loads a single HTML page and then updates the page dynamically, instead of loading new pages.</span></span> <span data-ttu-id="7207f-110">Após o carregamento de página inicial, o SPA se comunica com o servidor por meio de solicitações do AJAX.</span><span class="sxs-lookup"><span data-stu-id="7207f-110">After the initial page load, the SPA talks with the server through AJAX requests.</span></span>

![](knockoutjs-template/_static/image1.png)

<span data-ttu-id="7207f-111">AJAX não é nada novo, mas atualmente há estruturas de JavaScript que tornam mais fácil de criar e manter um grande aplicativo SPA sofisticado.</span><span class="sxs-lookup"><span data-stu-id="7207f-111">AJAX is nothing new, but today there are JavaScript frameworks that make it easier to build and maintain a large sophisticated SPA application.</span></span> <span data-ttu-id="7207f-112">Além disso, HTML 5 e CSS3 estão tornando mais fácil criar interfaces do usuário avançados.</span><span class="sxs-lookup"><span data-stu-id="7207f-112">Also, HTML 5 and CSS3 are making it easier to create rich UIs.</span></span>

<span data-ttu-id="7207f-113">Para começar, o modelo SPA cria um aplicativo de exemplo "Lista de tarefas".</span><span class="sxs-lookup"><span data-stu-id="7207f-113">To get you started, the SPA template creates a sample "To-do list" application.</span></span> <span data-ttu-id="7207f-114">Neste tutorial, vamos dar um tour guiado do modelo.</span><span class="sxs-lookup"><span data-stu-id="7207f-114">In this tutorial, we'll take a guided tour of the template.</span></span> <span data-ttu-id="7207f-115">Primeiro, será observar o aplicativo de lista de tarefas e examinar as partes de tecnologia que fazê-lo funcionar.</span><span class="sxs-lookup"><span data-stu-id="7207f-115">First we'll look at the To-do list application itself, then examine the technology pieces that make it work.</span></span>

## <a name="create-a-new-spa-template-project"></a><span data-ttu-id="7207f-116">Criar um novo projeto de modelo do SPA</span><span class="sxs-lookup"><span data-stu-id="7207f-116">Create a New SPA Template Project</span></span>

<span data-ttu-id="7207f-117">Requisitos:</span><span class="sxs-lookup"><span data-stu-id="7207f-117">Requirements:</span></span>

- <span data-ttu-id="7207f-118">O Visual Studio 2012 ou Visual Studio Express 2012 para Web</span><span class="sxs-lookup"><span data-stu-id="7207f-118">Visual Studio 2012 or Visual Studio Express 2012 for Web</span></span>
- <span data-ttu-id="7207f-119">Atualização de ferramentas da Web do ASP.NET 2012.2.</span><span class="sxs-lookup"><span data-stu-id="7207f-119">ASP.NET Web Tools 2012.2 update.</span></span> <span data-ttu-id="7207f-120">Você pode instalar a atualização [aqui](https://www.microsoft.com/web/handlers/webpi.ashx?command=getinstallerredirect&appid=ASPDOTNETandWebTools2012_2).</span><span class="sxs-lookup"><span data-stu-id="7207f-120">You can install the update [here](https://www.microsoft.com/web/handlers/webpi.ashx?command=getinstallerredirect&appid=ASPDOTNETandWebTools2012_2).</span></span>

<span data-ttu-id="7207f-121">Inicie o Visual Studio e selecione **novo projeto** na página de início.</span><span class="sxs-lookup"><span data-stu-id="7207f-121">Start Visual Studio and select **New Project** from the Start page.</span></span> <span data-ttu-id="7207f-122">Ou, do **arquivo** menu, selecione **novo** e **projeto**.</span><span class="sxs-lookup"><span data-stu-id="7207f-122">Or, from the **File** menu, select **New** and then **Project**.</span></span>

<span data-ttu-id="7207f-123">No **modelos** painel, selecione **modelos instalados** e expanda o **Visual C#** nó.</span><span class="sxs-lookup"><span data-stu-id="7207f-123">In the **Templates** pane, select **Installed Templates** and expand the **Visual C#** node.</span></span> <span data-ttu-id="7207f-124">Em **Visual C#**, selecione **Web**.</span><span class="sxs-lookup"><span data-stu-id="7207f-124">Under **Visual C#**, select **Web**.</span></span> <span data-ttu-id="7207f-125">Na lista de modelos de projeto, selecione **aplicativo Web do ASP.NET MVC 4**.</span><span class="sxs-lookup"><span data-stu-id="7207f-125">In the list of project templates, select **ASP.NET MVC 4 Web Application**.</span></span> <span data-ttu-id="7207f-126">Nomeie o projeto e clique em **Okey**.</span><span class="sxs-lookup"><span data-stu-id="7207f-126">Name the project and click **OK**.</span></span>

![](knockoutjs-template/_static/image2.png)

<span data-ttu-id="7207f-127">No **novo projeto** assistente, selecione **aplicativo de página única**.</span><span class="sxs-lookup"><span data-stu-id="7207f-127">In the **New Project** wizard, select **Single Page Application**.</span></span>

![](knockoutjs-template/_static/image3.png)

<span data-ttu-id="7207f-128">Pressione F5 para compilar e executar o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="7207f-128">Press F5 to build and run the application.</span></span> <span data-ttu-id="7207f-129">Quando o aplicativo é executado pela primeira vez, ele exibe uma tela de logon.</span><span class="sxs-lookup"><span data-stu-id="7207f-129">When the application first runs, it displays a login screen.</span></span>

![](knockoutjs-template/_static/image4.png)

<span data-ttu-id="7207f-130">Clique o &quot;inscrever&quot; vincular e criar um novo usuário.</span><span class="sxs-lookup"><span data-stu-id="7207f-130">Click the &quot;Sign up&quot; link and create a new user.</span></span>

![](knockoutjs-template/_static/image5.png)

<span data-ttu-id="7207f-131">Após fazer logon, o aplicativo cria uma lista de tarefas padrão com dois itens.</span><span class="sxs-lookup"><span data-stu-id="7207f-131">After you log in, the application creates a default Todo list with two items.</span></span> <span data-ttu-id="7207f-132">Você pode clicar em "Adicionar a lista de tarefas" para adicionar uma nova lista.</span><span class="sxs-lookup"><span data-stu-id="7207f-132">You can click "Add Todo list" to add a new list.</span></span>

![](knockoutjs-template/_static/image6.png)

<span data-ttu-id="7207f-133">A lista de renomeação, adicionar itens à lista e desmarcá-los.</span><span class="sxs-lookup"><span data-stu-id="7207f-133">Rename the list, add items to the list, and check them off.</span></span> <span data-ttu-id="7207f-134">Você também pode excluir itens ou excluir uma lista completa.</span><span class="sxs-lookup"><span data-stu-id="7207f-134">You can also delete items or delete an entire list.</span></span> <span data-ttu-id="7207f-135">As alterações são automaticamente persistidas para um banco de dados no servidor (realmente LocalDB neste momento, pois você está executando o aplicativo localmente).</span><span class="sxs-lookup"><span data-stu-id="7207f-135">The changes are automatically persisted to a database on the server (actually LocalDB at this point, because you are running the application locally).</span></span>

![](knockoutjs-template/_static/image7.png)

## <a name="architecture-of-the-spa-template"></a><span data-ttu-id="7207f-136">Arquitetura do modelo SPA</span><span class="sxs-lookup"><span data-stu-id="7207f-136">Architecture of the SPA Template</span></span>

<span data-ttu-id="7207f-137">Este diagrama mostra os principais blocos de construção para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="7207f-137">This diagram shows the main building blocks for the application.</span></span>

![](knockoutjs-template/_static/image8.png)

<span data-ttu-id="7207f-138">No lado do servidor, o ASP.NET MVC serve o HTML e também lida com autenticação baseada em formulários.</span><span class="sxs-lookup"><span data-stu-id="7207f-138">On the server side, ASP.NET MVC serves the HTML and also handles forms-based authentication.</span></span>

<span data-ttu-id="7207f-139">API da Web ASP.NET manipula todas as solicitações relacionam aos ToDoLists e ToDoItems, incluindo obtendo, criação, atualização e exclusão.</span><span class="sxs-lookup"><span data-stu-id="7207f-139">ASP.NET Web API handles all requests that relate to the ToDoLists and ToDoItems, including getting, creating, updating and deleting.</span></span> <span data-ttu-id="7207f-140">O cliente de troca de dados com a API da Web no formato JSON.</span><span class="sxs-lookup"><span data-stu-id="7207f-140">The client exchanges data with Web API in JSON format.</span></span>

<span data-ttu-id="7207f-141">Entity Framework (EF) é a camada de S/RM.</span><span class="sxs-lookup"><span data-stu-id="7207f-141">Entity Framework (EF) is the O/RM layer.</span></span> <span data-ttu-id="7207f-142">Atua como mediador entre o mundo orientado a objeto do ASP.NET e o banco de dados subjacente.</span><span class="sxs-lookup"><span data-stu-id="7207f-142">It mediates between the object-oriented world of ASP.NET and the underlying database.</span></span> <span data-ttu-id="7207f-143">O banco de dados usa o LocalDB, mas você pode alterar isso no arquivo Web. config.</span><span class="sxs-lookup"><span data-stu-id="7207f-143">The database uses LocalDB but you can change this in the Web.config file.</span></span> <span data-ttu-id="7207f-144">Normalmente você usaria LocalDB para desenvolvimento local e, em seguida, implantar um banco de dados SQL no servidor, usando a migração de código primeiro EF.</span><span class="sxs-lookup"><span data-stu-id="7207f-144">Typically you would use LocalDB for local development and then deploy to a SQL database on the server, using EF code-first migration.</span></span>

<span data-ttu-id="7207f-145">No lado do cliente, a biblioteca Knockout. js manipula atualizações de página de solicitações do AJAX.</span><span class="sxs-lookup"><span data-stu-id="7207f-145">On the client side, the Knockout.js library handles page updates from AJAX requests.</span></span> <span data-ttu-id="7207f-146">Knockout usa associação de dados para sincronizar a página com os dados mais recentes.</span><span class="sxs-lookup"><span data-stu-id="7207f-146">Knockout uses data binding to synchronize the page with the latest data.</span></span> <span data-ttu-id="7207f-147">Dessa forma, você não precisa escrever nenhum código que percorre os dados JSON e atualiza o DOM.</span><span class="sxs-lookup"><span data-stu-id="7207f-147">That way, you don't have to write any of the code that walks through the JSON data and updates the DOM.</span></span> <span data-ttu-id="7207f-148">Em vez disso, você deve colocar atributos declarativos no HTML que informam Knockout como apresentar os dados.</span><span class="sxs-lookup"><span data-stu-id="7207f-148">Instead, you put declarative attributes in the HTML that tell Knockout how to present the data.</span></span>

<span data-ttu-id="7207f-149">Uma grande vantagem dessa arquitetura é que ele separa a camada de apresentação da lógica do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="7207f-149">A big advantage of this architecture is that it separates the presentation layer from the application logic.</span></span> <span data-ttu-id="7207f-150">Você pode criar a parte da API da Web sem saber nada sobre a aparência de sua página da web.</span><span class="sxs-lookup"><span data-stu-id="7207f-150">You can create the Web API portion without knowing anything about how your web page will look.</span></span> <span data-ttu-id="7207f-151">No lado do cliente, você deve criar um modelo de exibição"" para representar dados e o modelo de exibição usa Knockout para associar a HTML.</span><span class="sxs-lookup"><span data-stu-id="7207f-151">On the client side, you create a "view model" to represent that data, and the view model uses Knockout to bind to the HTML.</span></span> <span data-ttu-id="7207f-152">Que lhe permite alterar facilmente o HTML sem alterar o modelo de exibição.</span><span class="sxs-lookup"><span data-stu-id="7207f-152">That lets you easily change the HTML without changing the view model.</span></span> <span data-ttu-id="7207f-153">(Analisaremos Knockout um pouco mais tarde.)</span><span class="sxs-lookup"><span data-stu-id="7207f-153">(We'll look at Knockout a bit later.)</span></span>

## <a name="models"></a><span data-ttu-id="7207f-154">Modelos</span><span class="sxs-lookup"><span data-stu-id="7207f-154">Models</span></span>

<span data-ttu-id="7207f-155">No projeto do Visual Studio, na pasta Modelos contém os modelos que são usados no lado do servidor.</span><span class="sxs-lookup"><span data-stu-id="7207f-155">In the Visual Studio project, the Models folder contains the models that are used on the server side.</span></span> <span data-ttu-id="7207f-156">(Também há modelos no lado do cliente; obterá às).</span><span class="sxs-lookup"><span data-stu-id="7207f-156">(There are also models on the client side; we'll get to those.)</span></span>

![](knockoutjs-template/_static/image9.png)

<span data-ttu-id="7207f-157">**TodoItem, lista de tarefas**</span><span class="sxs-lookup"><span data-stu-id="7207f-157">**TodoItem, TodoList**</span></span>

<span data-ttu-id="7207f-158">Esses são os modelos de banco de dados para o Entity Framework Code First.</span><span class="sxs-lookup"><span data-stu-id="7207f-158">These are the database models for Entity Framework Code First.</span></span> <span data-ttu-id="7207f-159">Observe que esses modelos têm propriedades que apontem para outro.</span><span class="sxs-lookup"><span data-stu-id="7207f-159">Notice that these models have properties that point to each other.</span></span> <span data-ttu-id="7207f-160">`ToDoList`contém uma coleção de ToDoItems e cada `ToDoItem` tem uma referência à sua lista de tarefas do pai.</span><span class="sxs-lookup"><span data-stu-id="7207f-160">`ToDoList` contains a collection of ToDoItems, and each `ToDoItem` has a reference back to its parent ToDoList.</span></span> <span data-ttu-id="7207f-161">Essas propriedades são chamadas de propriedades de navegação, e eles representam a relação um-para-muitos, uma lista de tarefas e seus itens de tarefas pendentes.</span><span class="sxs-lookup"><span data-stu-id="7207f-161">These properties are called navigation properties, and they represent the one-to-many relation a to-do list and its to-do items.</span></span>

<span data-ttu-id="7207f-162">O `ToDoItem` classe também usa o **[ForeignKey]** atributo para especificar que `ToDoListId` é uma chave estrangeira para a `ToDoList` tabela.</span><span class="sxs-lookup"><span data-stu-id="7207f-162">The `ToDoItem` class also uses the **[ForeignKey]** attribute to specify that `ToDoListId` is a foreign key into the `ToDoList` table.</span></span> <span data-ttu-id="7207f-163">Isso informa ao EF para adicionar uma restrição de chave estrangeira no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="7207f-163">This tells EF to add a foreign-key constraint to the database.</span></span>

[!code-csharp[Main](knockoutjs-template/samples/sample1.cs)]

<span data-ttu-id="7207f-164">**TodoItemDto, TodoListDto**</span><span class="sxs-lookup"><span data-stu-id="7207f-164">**TodoItemDto, TodoListDto**</span></span>

<span data-ttu-id="7207f-165">Essas classes definem os dados que serão enviados ao cliente.</span><span class="sxs-lookup"><span data-stu-id="7207f-165">These classes define the data that will be sent to the client.</span></span> <span data-ttu-id="7207f-166">"DTO" significa "objeto de transferência de dados".</span><span class="sxs-lookup"><span data-stu-id="7207f-166">"DTO" stands for "data transfer object."</span></span> <span data-ttu-id="7207f-167">O DTO define como as entidades serão serializadas em JSON.</span><span class="sxs-lookup"><span data-stu-id="7207f-167">The DTO defines how the entities will be serialized into JSON.</span></span> <span data-ttu-id="7207f-168">Em geral, há várias razões para usar DTOs:</span><span class="sxs-lookup"><span data-stu-id="7207f-168">In general, there are several reasons to use DTOs:</span></span>

- <span data-ttu-id="7207f-169">Para controlar quais propriedades são serializadas.</span><span class="sxs-lookup"><span data-stu-id="7207f-169">To control which properties are serialized.</span></span> <span data-ttu-id="7207f-170">O DTO pode conter um subconjunto das propriedades do modelo de domínio.</span><span class="sxs-lookup"><span data-stu-id="7207f-170">The DTO can contain a subset of the properties from the domain model.</span></span> <span data-ttu-id="7207f-171">Você pode fazer isso por motivos de segurança (ocultar dados confidenciais) ou simplesmente para reduzir a quantidade de dados que você enviar.</span><span class="sxs-lookup"><span data-stu-id="7207f-171">You might do this for security reasons (to hide sensitive data) or simply to reduce the amount of data that you send.</span></span>
- <span data-ttu-id="7207f-172">Para alterar a forma dos dados – por exemplo, para mesclar uma estrutura de dados mais complexa.</span><span class="sxs-lookup"><span data-stu-id="7207f-172">To change the shape of the data – e.g. to flatten a more complex data structure.</span></span>
- <span data-ttu-id="7207f-173">Para manter qualquer lógica de negócios fora DTO (separação de preocupações).</span><span class="sxs-lookup"><span data-stu-id="7207f-173">To keep any business logic out of the DTO (separation of concerns).</span></span>
- <span data-ttu-id="7207f-174">Se seus modelos de domínio não podem ser serializados por alguma razão.</span><span class="sxs-lookup"><span data-stu-id="7207f-174">If your domain models cannot be serialized for some reason.</span></span> <span data-ttu-id="7207f-175">Por exemplo, as referências circulares podem causar problemas ao serializar um objeto que não há formas de lidar com esse problema na API da Web (consulte [tratamento de referências de objeto Circular](../../../web-api/overview/formats-and-model-binding/json-and-xml-serialization.md#handling_circular_object_references)); mas simplesmente usar um DTO evita o problema completamente.</span><span class="sxs-lookup"><span data-stu-id="7207f-175">For example, circular references can cause problems when you serialize an object There are ways to handle this problem in Web API (see [Handling Circular Object References](../../../web-api/overview/formats-and-model-binding/json-and-xml-serialization.md#handling_circular_object_references)); but using a DTO simply avoids the problem altogether.</span></span>

<span data-ttu-id="7207f-176">No modelo SPA, os DTOs contém os mesmos dados que os modelos de domínio.</span><span class="sxs-lookup"><span data-stu-id="7207f-176">In the SPA template, the DTOs contains the same data as the domain models.</span></span> <span data-ttu-id="7207f-177">No entanto, eles ainda são úteis porque eles evitam referências circulares de propriedades de navegação, e eles demonstram o padrão geral de DTO.</span><span class="sxs-lookup"><span data-stu-id="7207f-177">However, they are still useful because they avoid circular references from the navigation properties, and they demonstrate the general DTO pattern.</span></span>

<span data-ttu-id="7207f-178">**AccountModels.cs**</span><span class="sxs-lookup"><span data-stu-id="7207f-178">**AccountModels.cs**</span></span>

<span data-ttu-id="7207f-179">Este arquivo contém modelos para associação de site.</span><span class="sxs-lookup"><span data-stu-id="7207f-179">This file contains models for site membership.</span></span> <span data-ttu-id="7207f-180">O `UserProfile` classe define o esquema para perfis de usuário na associação de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="7207f-180">The `UserProfile` class defines the schema for user profiles in the membership DB.</span></span> <span data-ttu-id="7207f-181">(Nesse caso, a única informação que é o nome de usuário e a ID de usuário.) As outras classes de modelo no arquivo são usadas para criar formulários de logon e registro de usuário.</span><span class="sxs-lookup"><span data-stu-id="7207f-181">(In this case, the only information is the user ID and the user name.) The other model classes in this file are used to create the user registration and login forms.</span></span>

## <a name="entity-framework"></a><span data-ttu-id="7207f-182">Entity Framework</span><span class="sxs-lookup"><span data-stu-id="7207f-182">Entity Framework</span></span>

<span data-ttu-id="7207f-183">O modelo do SPA usa EF Code First.</span><span class="sxs-lookup"><span data-stu-id="7207f-183">The SPA template uses EF Code First.</span></span> <span data-ttu-id="7207f-184">No desenvolvimento de Code First, você define os modelos de primeiro no código e EF usa o modelo para criar o banco de dados.</span><span class="sxs-lookup"><span data-stu-id="7207f-184">In Code First development, you define the models first in code, and then EF uses the model to create the database.</span></span> <span data-ttu-id="7207f-185">Você também pode usar o EF com um banco de dados existente ([Database First](https://msdn.microsoft.com/en-us/data/jj206878.aspx)).</span><span class="sxs-lookup"><span data-stu-id="7207f-185">You can also use EF with an existing database ([Database First](https://msdn.microsoft.com/en-us/data/jj206878.aspx)).</span></span>

<span data-ttu-id="7207f-186">O `TodoItemContext` deriva de classe na pasta modelos **DbContext**.</span><span class="sxs-lookup"><span data-stu-id="7207f-186">The `TodoItemContext` class in the Models folder derives from **DbContext**.</span></span> <span data-ttu-id="7207f-187">Essa classe fornece a "cola" entre os modelos e EF.</span><span class="sxs-lookup"><span data-stu-id="7207f-187">This class provides the "glue" between the models and EF.</span></span> <span data-ttu-id="7207f-188">O `TodoItemContext` mantém um `ToDoItem` coleção e um `TodoList` coleção.</span><span class="sxs-lookup"><span data-stu-id="7207f-188">The `TodoItemContext` holds a `ToDoItem` collection and a `TodoList` collection.</span></span> <span data-ttu-id="7207f-189">Para consultar o banco de dados, você simplesmente escrever uma consulta LINQ em relação a essas coleções.</span><span class="sxs-lookup"><span data-stu-id="7207f-189">To query the database, you simply write a LINQ query against these collections.</span></span> <span data-ttu-id="7207f-190">Por exemplo, aqui está como você pode selecionar todas as listas de tarefas do usuário "Alice":</span><span class="sxs-lookup"><span data-stu-id="7207f-190">For example, here is how you can select all of the to-do lists for user "Alice":</span></span>

[!code-csharp[Main](knockoutjs-template/samples/sample2.cs)]

<span data-ttu-id="7207f-191">Você também pode adicionar novos itens à coleção, atualizar itens, ou excluir itens da coleção e manter as alterações no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="7207f-191">You can also add new items to the collection, update items, or delete items from the collection, and persist the changes to the database.</span></span>

## <a name="aspnet-web-api-controllers"></a><span data-ttu-id="7207f-192">Controladores de API da Web ASP.NET</span><span class="sxs-lookup"><span data-stu-id="7207f-192">ASP.NET Web API Controllers</span></span>

<span data-ttu-id="7207f-193">Na API da Web do ASP.NET, os controladores são objetos que manipulam solicitações HTTP.</span><span class="sxs-lookup"><span data-stu-id="7207f-193">In ASP.NET Web API, controllers are objects that handle HTTP requests.</span></span> <span data-ttu-id="7207f-194">Conforme mencionado, o modelo SPA usa a API da Web para habilitar operações CRUD em `ToDoList` e `ToDoItem` instâncias.</span><span class="sxs-lookup"><span data-stu-id="7207f-194">As mentioned, the SPA template uses Web API to enable CRUD operations on `ToDoList` and `ToDoItem` instances.</span></span> <span data-ttu-id="7207f-195">Os controladores estão localizados na pasta controladores da solução.</span><span class="sxs-lookup"><span data-stu-id="7207f-195">The controllers are located in the Controllers folder of the solution.</span></span>

![](knockoutjs-template/_static/image10.png)

- <span data-ttu-id="7207f-196">`TodoController`: Trata as solicitações HTTP para os itens de tarefas pendentes</span><span class="sxs-lookup"><span data-stu-id="7207f-196">`TodoController`: Handles HTTP requests for to-do items</span></span>
- <span data-ttu-id="7207f-197">`TodoListController`: Trata as solicitações HTTP para as listas de tarefas.</span><span class="sxs-lookup"><span data-stu-id="7207f-197">`TodoListController`: Handles HTTP requests for to-do lists.</span></span>

<span data-ttu-id="7207f-198">Esses nomes são significativos, pois a API da Web corresponda ao caminho URI para o nome do controlador.</span><span class="sxs-lookup"><span data-stu-id="7207f-198">These names are significant, because Web API matches the URI path to the controller name.</span></span> <span data-ttu-id="7207f-199">(Para saber como a API da Web encaminha solicitações HTTP para controladores, consulte [roteamento na API da Web ASP.NET](../../../web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api.md).)</span><span class="sxs-lookup"><span data-stu-id="7207f-199">(To learn how Web API routes HTTP requests to controllers, see [Routing in ASP.NET Web API](../../../web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api.md).)</span></span>

<span data-ttu-id="7207f-200">Vamos examinar a `ToDoListController` classe.</span><span class="sxs-lookup"><span data-stu-id="7207f-200">Let's look at the `ToDoListController` class.</span></span> <span data-ttu-id="7207f-201">Ele contém um membro de dados único:</span><span class="sxs-lookup"><span data-stu-id="7207f-201">It contains a single data member:</span></span>

[!code-csharp[Main](knockoutjs-template/samples/sample3.cs)]

<span data-ttu-id="7207f-202">O `TodoItemContext` é usado para se comunicar com o EF, conforme descrito anteriormente.</span><span class="sxs-lookup"><span data-stu-id="7207f-202">The `TodoItemContext` is used to communicate with EF, as described earlier.</span></span> <span data-ttu-id="7207f-203">Os métodos no controlador de implementam as operações CRUD.</span><span class="sxs-lookup"><span data-stu-id="7207f-203">The methods on the controller implement the CRUD operations.</span></span> <span data-ttu-id="7207f-204">API da Web mapeia solicitações HTTP do cliente para os métodos do controlador, da seguinte forma:</span><span class="sxs-lookup"><span data-stu-id="7207f-204">Web API maps HTTP requests from the client to controller methods, as follows:</span></span>

| <span data-ttu-id="7207f-205">Solicitação HTTP</span><span class="sxs-lookup"><span data-stu-id="7207f-205">HTTP Request</span></span> | <span data-ttu-id="7207f-206">Método do controlador</span><span class="sxs-lookup"><span data-stu-id="7207f-206">Controller Method</span></span> | <span data-ttu-id="7207f-207">Descrição</span><span class="sxs-lookup"><span data-stu-id="7207f-207">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="7207f-208">GET /api/todo</span><span class="sxs-lookup"><span data-stu-id="7207f-208">GET /api/todo</span></span> | `GetTodoLists` | <span data-ttu-id="7207f-209">Obtém uma coleção de listas de tarefas.</span><span class="sxs-lookup"><span data-stu-id="7207f-209">Gets a collection of to-do lists.</span></span> |
| <span data-ttu-id="7207f-210">GET/api/tarefas/*id*</span><span class="sxs-lookup"><span data-stu-id="7207f-210">GET /api/todo/*id*</span></span> | `GetTodoList` | <span data-ttu-id="7207f-211">Obtém uma lista de tarefas por ID</span><span class="sxs-lookup"><span data-stu-id="7207f-211">Gets a to-do list by ID</span></span> |
| <span data-ttu-id="7207f-212">PUT/api/tarefas/*id*</span><span class="sxs-lookup"><span data-stu-id="7207f-212">PUT /api/todo/*id*</span></span> | `PutTodoList` | <span data-ttu-id="7207f-213">Atualiza uma lista de tarefas.</span><span class="sxs-lookup"><span data-stu-id="7207f-213">Updates a to-do list.</span></span> |
| <span data-ttu-id="7207f-214">POST /api/todo</span><span class="sxs-lookup"><span data-stu-id="7207f-214">POST /api/todo</span></span> | `PostTodoList` | <span data-ttu-id="7207f-215">Cria uma nova lista de tarefas.</span><span class="sxs-lookup"><span data-stu-id="7207f-215">Creates a new to-do list.</span></span> |
| <span data-ttu-id="7207f-216">Excluir/api/tarefas/*id*</span><span class="sxs-lookup"><span data-stu-id="7207f-216">DELETE /api/todo/*id*</span></span> | `DeleteTodoList` | <span data-ttu-id="7207f-217">Exclui uma lista de tarefas.</span><span class="sxs-lookup"><span data-stu-id="7207f-217">Deletes a TODO list.</span></span> |

<span data-ttu-id="7207f-218">Observe que os URIs para algumas operações contêm espaços reservados para o valor de ID.</span><span class="sxs-lookup"><span data-stu-id="7207f-218">Notice that the URIs for some operations contain placeholders for the ID value.</span></span> <span data-ttu-id="7207f-219">Por exemplo, para excluir uma a lista com uma ID de 42, o URI é `/api/todo/42`.</span><span class="sxs-lookup"><span data-stu-id="7207f-219">For example, to delete a to-list with an ID of 42, the URI is `/api/todo/42`.</span></span>

<span data-ttu-id="7207f-220">Para saber mais sobre como usar a API da Web para operações CRUD, consulte [criando uma API da Web que dá suporte a operações de CRUD](../../../web-api/overview/older-versions/creating-a-web-api-that-supports-crud-operations.md).</span><span class="sxs-lookup"><span data-stu-id="7207f-220">To learn more about using Web API for CRUD operations, see [Creating a Web API that Supports CRUD Operations](../../../web-api/overview/older-versions/creating-a-web-api-that-supports-crud-operations.md).</span></span> <span data-ttu-id="7207f-221">O código para esse controlador é bastante simples.</span><span class="sxs-lookup"><span data-stu-id="7207f-221">The code for this controller is fairly straightforward.</span></span> <span data-ttu-id="7207f-222">Aqui estão alguns pontos interessantes:</span><span class="sxs-lookup"><span data-stu-id="7207f-222">Here are some interesting points:</span></span>

- <span data-ttu-id="7207f-223">O `GetTodoLists` método usa uma consulta LINQ para filtrar os resultados pela ID do usuário conectado.</span><span class="sxs-lookup"><span data-stu-id="7207f-223">The `GetTodoLists` method uses a LINQ query to filter the results by the ID of the logged-in user.</span></span> <span data-ttu-id="7207f-224">Dessa forma, um usuário vê somente os dados que pertencem a ele.</span><span class="sxs-lookup"><span data-stu-id="7207f-224">That way, a user only sees the data that belongs to him or her.</span></span> <span data-ttu-id="7207f-225">Além disso, observe que uma instrução Select é usada para converter o `ToDoList` instâncias em `TodoListDto` instâncias.</span><span class="sxs-lookup"><span data-stu-id="7207f-225">Also, notice that a Select statement is used to convert the `ToDoList` instances into `TodoListDto` instances.</span></span>
- <span data-ttu-id="7207f-226">Os métodos PUT e POST verificam o estado do modelo antes de modificar o banco de dados.</span><span class="sxs-lookup"><span data-stu-id="7207f-226">The PUT and POST methods check the model state before modifying the database.</span></span> <span data-ttu-id="7207f-227">Se **ModelState** é false, esses métodos retornam HTTP 400 Solicitação incorreta.</span><span class="sxs-lookup"><span data-stu-id="7207f-227">If **ModelState.IsValid** is false, these methods return HTTP 400, Bad Request.</span></span> <span data-ttu-id="7207f-228">Leia mais sobre a validação do modelo na API da Web em [validação de modelo](../../../web-api/overview/formats-and-model-binding/model-validation-in-aspnet-web-api.md).</span><span class="sxs-lookup"><span data-stu-id="7207f-228">Read more about model validation in Web API at [Model Validation](../../../web-api/overview/formats-and-model-binding/model-validation-in-aspnet-web-api.md).</span></span>
- <span data-ttu-id="7207f-229">A classe do controlador também é decorada com o **[autorizar]** atributo.</span><span class="sxs-lookup"><span data-stu-id="7207f-229">The controller class is also decorated with the **[Authorize]** attribute.</span></span> <span data-ttu-id="7207f-230">Esse atributo verifica se a solicitação HTTP é autenticada.</span><span class="sxs-lookup"><span data-stu-id="7207f-230">This attribute checks whether the HTTP request is authenticated.</span></span> <span data-ttu-id="7207f-231">Se a solicitação não é autenticada, o cliente recebe HTTP 401 não autorizado.</span><span class="sxs-lookup"><span data-stu-id="7207f-231">If the request is not authenticated, the client receives HTTP 401, Unauthorized.</span></span> <span data-ttu-id="7207f-232">Leia mais sobre a autenticação no [autenticação e autorização em ASP.NET Web API](../../../web-api/overview/security/authentication-and-authorization-in-aspnet-web-api.md).</span><span class="sxs-lookup"><span data-stu-id="7207f-232">Read more about authentication at [Authentication and Authorization in ASP.NET Web API](../../../web-api/overview/security/authentication-and-authorization-in-aspnet-web-api.md).</span></span>

<span data-ttu-id="7207f-233">O `TodoController` classe é muito semelhante ao `TodoListController`.</span><span class="sxs-lookup"><span data-stu-id="7207f-233">The `TodoController` class is very similar to `TodoListController`.</span></span> <span data-ttu-id="7207f-234">A maior diferença é que ele não define nenhum método GET, porque o cliente receberá os itens de tarefas pendentes junto com cada lista de tarefas.</span><span class="sxs-lookup"><span data-stu-id="7207f-234">The biggest difference is that it does not define any GET methods, because the client will get the to-do items along with each to-do list.</span></span>

## <a name="mvc-controllers-and-views"></a><span data-ttu-id="7207f-235">Modos de exibição e controladores MVC</span><span class="sxs-lookup"><span data-stu-id="7207f-235">MVC Controllers and Views</span></span>

<span data-ttu-id="7207f-236">Os controladores MVC também estão localizados na pasta controladores da solução.</span><span class="sxs-lookup"><span data-stu-id="7207f-236">The MVC controllers are also located in the Controllers folder of the solution.</span></span> <span data-ttu-id="7207f-237">`HomeController`renderiza o HTML principal para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="7207f-237">`HomeController` renders the main HTML for the application.</span></span> <span data-ttu-id="7207f-238">O modo de exibição para o controlador inicial é definido em Views/Home/Index.cshtml.</span><span class="sxs-lookup"><span data-stu-id="7207f-238">The view for the Home controller is defined in Views/Home/Index.cshtml.</span></span> <span data-ttu-id="7207f-239">O modo de exibição de Home renderiza conteúdo diferente dependendo se o usuário estiver conectado:</span><span class="sxs-lookup"><span data-stu-id="7207f-239">The Home view renders different content depending on whether the user is logged in:</span></span>

[!code-cshtml[Main](knockoutjs-template/samples/sample4.cshtml)]

<span data-ttu-id="7207f-240">Quando os usuários estiverem conectados, eles veem a interface do usuário principal.</span><span class="sxs-lookup"><span data-stu-id="7207f-240">When users are logged in, they see the main UI.</span></span> <span data-ttu-id="7207f-241">Caso contrário, eles veem o painel de logon.</span><span class="sxs-lookup"><span data-stu-id="7207f-241">Otherwise, they see the login panel.</span></span> <span data-ttu-id="7207f-242">Observe que esse processamento condicional ocorre no lado do servidor.</span><span class="sxs-lookup"><span data-stu-id="7207f-242">Note that this conditional rendering happens on the server side.</span></span> <span data-ttu-id="7207f-243">Nunca tentar ocultar conteúdo confidencial no lado do cliente & #8212anything que você enviar uma resposta de HTTP é visível para alguém que está observando as mensagens HTTP brutas.</span><span class="sxs-lookup"><span data-stu-id="7207f-243">Never try to hide sensitive content on the client side&#8212anything that you send in an HTTP response is visible to someone who is watching the raw HTTP messages.</span></span>

## <a name="client-side-javascript-and-knockoutjs"></a><span data-ttu-id="7207f-244">Knockout. js e JavaScript do lado do cliente</span><span class="sxs-lookup"><span data-stu-id="7207f-244">Client-Side JavaScript and Knockout.js</span></span>

<span data-ttu-id="7207f-245">Agora vamos do lado do servidor do aplicativo para o cliente.</span><span class="sxs-lookup"><span data-stu-id="7207f-245">Now let's turn from the server side of the application to the client.</span></span> <span data-ttu-id="7207f-246">O modelo do SPA usa uma combinação de jQuery e Knockout. js para criar uma interface do usuário interativo e sem interrupções.</span><span class="sxs-lookup"><span data-stu-id="7207f-246">The SPA template uses a combination of jQuery and Knockout.js to create a smooth, interactive UI.</span></span> <span data-ttu-id="7207f-247">Knockout. js é uma biblioteca de JavaScript que torna mais fácil associar HTML aos dados.</span><span class="sxs-lookup"><span data-stu-id="7207f-247">Knockout.js is a JavaScript library that makes it easy to bind HTML to data.</span></span> <span data-ttu-id="7207f-248">Knockout. js usa um padrão chamado "Model-View-ViewModel."</span><span class="sxs-lookup"><span data-stu-id="7207f-248">Knockout.js uses a pattern called "Model-View-ViewModel."</span></span>

- <span data-ttu-id="7207f-249">O modelo é que os dados do domínio (listas de tarefas e itens de tarefas).</span><span class="sxs-lookup"><span data-stu-id="7207f-249">The model is the domain data (ToDo lists and ToDo items).</span></span>
- <span data-ttu-id="7207f-250">O modo de exibição é um documento HTML.</span><span class="sxs-lookup"><span data-stu-id="7207f-250">The view is the HTML document.</span></span>
- <span data-ttu-id="7207f-251">O modelo de exibição é um objeto JavaScript que contém os dados de modelo.</span><span class="sxs-lookup"><span data-stu-id="7207f-251">The view-model is a JavaScript object that holds the model data.</span></span> <span data-ttu-id="7207f-252">O modelo de exibição é uma abstração de código da interface do usuário.</span><span class="sxs-lookup"><span data-stu-id="7207f-252">The view-model is a code abstraction of the UI.</span></span> <span data-ttu-id="7207f-253">Ele não tem conhecimento da representação de HTML.</span><span class="sxs-lookup"><span data-stu-id="7207f-253">It has no knowledge of the HTML representation.</span></span> <span data-ttu-id="7207f-254">Em vez disso, ele representa abstratos recursos do modo de exibição, como "uma lista de itens de tarefas".</span><span class="sxs-lookup"><span data-stu-id="7207f-254">Instead, it represents abstract features of the view, such as "a list of ToDo items".</span></span>

<span data-ttu-id="7207f-255">O modo de exibição associado a dados para o modelo de exibição.</span><span class="sxs-lookup"><span data-stu-id="7207f-255">The view is data-bound to the view-model.</span></span> <span data-ttu-id="7207f-256">Atualizações para o modelo de exibição são refletidas automaticamente no modo de exibição.</span><span class="sxs-lookup"><span data-stu-id="7207f-256">Updates to the view-model are automatically reflected in the view.</span></span> <span data-ttu-id="7207f-257">Associações de trabalho outra direção.</span><span class="sxs-lookup"><span data-stu-id="7207f-257">Bindings work the other direction as well.</span></span> <span data-ttu-id="7207f-258">Eventos no DOM (tais como cliques) são dados associados a funções no modelo, o modo de exibição que disparam chamadas AJAX.</span><span class="sxs-lookup"><span data-stu-id="7207f-258">Events in the DOM (such as clicks) are data-bound to functions on the view model, which trigger AJAX calls.</span></span>

<span data-ttu-id="7207f-259">O modelo do SPA organiza o JavaScript do lado do cliente em três camadas:</span><span class="sxs-lookup"><span data-stu-id="7207f-259">The SPA template organizes the client-side JavaScript into three layers:</span></span>

- <span data-ttu-id="7207f-260">todo.DataContext.js: envia solicitações do AJAX.</span><span class="sxs-lookup"><span data-stu-id="7207f-260">todo.datacontext.js: Sends AJAX requests.</span></span>
- <span data-ttu-id="7207f-261">todo.Model.js: define os modelos.</span><span class="sxs-lookup"><span data-stu-id="7207f-261">todo.model.js: Defines the models.</span></span>
- <span data-ttu-id="7207f-262">todo.ViewModel.js: define o modelo de exibição.</span><span class="sxs-lookup"><span data-stu-id="7207f-262">todo.viewmodel.js: Defines the view model.</span></span>

![](knockoutjs-template/_static/image11.png)

<span data-ttu-id="7207f-263">Esses arquivos de script estão localizados na pasta Scripts/aplicativo da solução.</span><span class="sxs-lookup"><span data-stu-id="7207f-263">These script files are located in the Scripts/app folder of the solution.</span></span>

![](knockoutjs-template/_static/image12.png)

<span data-ttu-id="7207f-264">**todo.DataContext** controla todas as chamadas AJAX para os controladores de API da Web.</span><span class="sxs-lookup"><span data-stu-id="7207f-264">**todo.datacontext** handles all AJAX calls to the Web API controllers.</span></span> <span data-ttu-id="7207f-265">(As chamadas AJAX para log em são definidas em outro lugar, em ajaxlogin.js.)</span><span class="sxs-lookup"><span data-stu-id="7207f-265">(The AJAX calls for logging in are defined elsewhere, in ajaxlogin.js.)</span></span>

<span data-ttu-id="7207f-266">**todo.Model.js** define os modelos de cliente (navegador) para as listas de tarefas pendentes.</span><span class="sxs-lookup"><span data-stu-id="7207f-266">**todo.model.js** defines the client-side (browser) models for the to-do lists.</span></span> <span data-ttu-id="7207f-267">Há duas classes de modelo: todoItem e lista de tarefas.</span><span class="sxs-lookup"><span data-stu-id="7207f-267">There are two model classes: todoItem and todoList.</span></span>

<span data-ttu-id="7207f-268">Muitas das propriedades nas classes de modelo são do tipo "ko.observable".</span><span class="sxs-lookup"><span data-stu-id="7207f-268">Many of the properties in the model classes are of type "ko.observable".</span></span> <span data-ttu-id="7207f-269">Observáveis são como Knockout faz sua mágica.</span><span class="sxs-lookup"><span data-stu-id="7207f-269">Observables are how Knockout does its magic.</span></span> <span data-ttu-id="7207f-270">Do [documentação Knockout](http://knockoutjs.com/documentation/introduction.html): observável é um "objeto JavaScript que pode notificar assinantes sobre alterações."</span><span class="sxs-lookup"><span data-stu-id="7207f-270">From the [Knockout documentation](http://knockoutjs.com/documentation/introduction.html): An observable is a "JavaScript object that can notify subscribers about changes."</span></span> <span data-ttu-id="7207f-271">Quando o valor de observável alterado, Knockout atualiza todos os elementos HTML que estão associados a esses observáveis.</span><span class="sxs-lookup"><span data-stu-id="7207f-271">When the value of an observable changes, Knockout updates any HTML elements that are bound to those observables.</span></span> <span data-ttu-id="7207f-272">Por exemplo, todoItem tem observáveis para as propriedades title e isDone:</span><span class="sxs-lookup"><span data-stu-id="7207f-272">For example, todoItem has observables for the title and isDone properties:</span></span>

[!code-javascript[Main](knockoutjs-template/samples/sample5.js)]

<span data-ttu-id="7207f-273">Você também pode assinar observável no código.</span><span class="sxs-lookup"><span data-stu-id="7207f-273">You can also subscribe to an observable in code.</span></span> <span data-ttu-id="7207f-274">Por exemplo, a classe todoItem assina alterações nas propriedades de "isDone" e "title":</span><span class="sxs-lookup"><span data-stu-id="7207f-274">For example, the todoItem class subscribes to changes in the "isDone" and "title" properties:</span></span>

[!code-javascript[Main](knockoutjs-template/samples/sample6.js)]

<span data-ttu-id="7207f-275">**Modelo de exibição**</span><span class="sxs-lookup"><span data-stu-id="7207f-275">**View Model**</span></span>

<span data-ttu-id="7207f-276">O modelo de exibição é definido em todo.viewmodel.js.</span><span class="sxs-lookup"><span data-stu-id="7207f-276">The view model is defined in todo.viewmodel.js.</span></span> <span data-ttu-id="7207f-277">O modelo de exibição é o ponto central onde o aplicativo associa os elementos da página HTML para os dados de domínio.</span><span class="sxs-lookup"><span data-stu-id="7207f-277">The view model is the central point where the application binds the HTML page elements to the domain data.</span></span> <span data-ttu-id="7207f-278">No modelo SPA, o modelo de exibição contém uma matriz observável de todoLists.</span><span class="sxs-lookup"><span data-stu-id="7207f-278">In the SPA template, the view model contains an observable array of todoLists.</span></span> <span data-ttu-id="7207f-279">O código a seguir no modelo de exibição informa Knockout para aplicar as associações:</span><span class="sxs-lookup"><span data-stu-id="7207f-279">The following code in the view model tells Knockout to apply the bindings:</span></span>

[!code-javascript[Main](knockoutjs-template/samples/sample7.js)]

## <a name="html-and-data-binding"></a><span data-ttu-id="7207f-280">HTML e associação de dados</span><span class="sxs-lookup"><span data-stu-id="7207f-280">HTML and Data Binding</span></span>

<span data-ttu-id="7207f-281">O HTML da página principal é definido em Views/Home/Index.cshtml.</span><span class="sxs-lookup"><span data-stu-id="7207f-281">The main HTML for the page is defined in Views/Home/Index.cshtml.</span></span> <span data-ttu-id="7207f-282">Como estamos usando associação de dados, o HTML é apenas um modelo para o que realmente é renderizado.</span><span class="sxs-lookup"><span data-stu-id="7207f-282">Because we are using data-binding, the HTML is only a template for what actually gets rendered.</span></span> <span data-ttu-id="7207f-283">Usa Knockout *declarativa* associações.</span><span class="sxs-lookup"><span data-stu-id="7207f-283">Knockout uses *declarative* bindings.</span></span> <span data-ttu-id="7207f-284">Vincular elementos da página de dados adicionando um atributo de "data-bind" para o elemento.</span><span class="sxs-lookup"><span data-stu-id="7207f-284">You bind page elements to data by adding a "data-bind" attribute to the element.</span></span> <span data-ttu-id="7207f-285">Aqui está um exemplo muito simples, feito na documentação do Knockout:</span><span class="sxs-lookup"><span data-stu-id="7207f-285">Here is a very simple example, taken from the Knockout documentation:</span></span>

[!code-html[Main](knockoutjs-template/samples/sample8.html)]

<span data-ttu-id="7207f-286">Neste exemplo, Knockout atualiza o conteúdo do  **&lt;abrangem&gt;**  elemento com o valor de `myItems.count()`.</span><span class="sxs-lookup"><span data-stu-id="7207f-286">In this example, Knockout updates the contents of the **&lt;span&gt;** element with the value of `myItems.count()`.</span></span> <span data-ttu-id="7207f-287">Sempre que esse valor é alterado, Knockout atualiza o documento.</span><span class="sxs-lookup"><span data-stu-id="7207f-287">Whenever this value changes, Knockout updates the document.</span></span>

<span data-ttu-id="7207f-288">Knockout fornece uma variedade de tipos diferentes de associação.</span><span class="sxs-lookup"><span data-stu-id="7207f-288">Knockout provides a number of different binding types.</span></span> <span data-ttu-id="7207f-289">Aqui estão algumas das associações usadas no modelo SPA:</span><span class="sxs-lookup"><span data-stu-id="7207f-289">Here are some of the bindings used in the SPA template:</span></span>

- <span data-ttu-id="7207f-290">**foreach**: permite que você percorrer um loop e aplicar a mesma marcação para cada item na lista.</span><span class="sxs-lookup"><span data-stu-id="7207f-290">**foreach**: Lets you iterate through a loop and apply the same markup to each item in the list.</span></span> <span data-ttu-id="7207f-291">Isso é usado para processar as listas de tarefas e itens de tarefas.</span><span class="sxs-lookup"><span data-stu-id="7207f-291">This is used to render the to-do lists and to-do items.</span></span> <span data-ttu-id="7207f-292">Dentro de **foreach**, as associações são aplicadas aos elementos da lista.</span><span class="sxs-lookup"><span data-stu-id="7207f-292">Within the **foreach**, the bindings are applied to the elements of the list.</span></span>
- <span data-ttu-id="7207f-293">**visível**: usada para alternar a visibilidade.</span><span class="sxs-lookup"><span data-stu-id="7207f-293">**visible**: Used to toggle visibility.</span></span> <span data-ttu-id="7207f-294">Ocultar marcação quando uma coleção está vazia ou verifique a mensagem de erro visível.</span><span class="sxs-lookup"><span data-stu-id="7207f-294">Hide markup when a collection is empty, or make the error message visible.</span></span>
- <span data-ttu-id="7207f-295">**valor**: usado para preencher os valores de formulário.</span><span class="sxs-lookup"><span data-stu-id="7207f-295">**value**: Used to populate form values.</span></span>
- <span data-ttu-id="7207f-296">**Clique em**: associa um evento de clique a uma função no modelo de exibição.</span><span class="sxs-lookup"><span data-stu-id="7207f-296">**click**: Binds a click event to a function on the view model.</span></span>

## <a name="anti-csrf-protection"></a><span data-ttu-id="7207f-297">Proteção contra CSRF</span><span class="sxs-lookup"><span data-stu-id="7207f-297">Anti-CSRF Protection</span></span>

<span data-ttu-id="7207f-298">Falsificação de solicitação entre sites (CSRF) é um ataque em que um site mal-intencionado envia uma solicitação para um site vulnerável onde o usuário está atualmente conectado.</span><span class="sxs-lookup"><span data-stu-id="7207f-298">Cross-Site Request Forgery (CSRF) is an attack where a malicious site sends a request to a vulnerable site where the user is currently logged in.</span></span> <span data-ttu-id="7207f-299">Para ajudar a evitar ataques CSRF, ASP.NET MVC usa *tokens antifalsificação*, também chamado de solicitação de tokens de verificação.</span><span class="sxs-lookup"><span data-stu-id="7207f-299">To help prevent CSRF attacks, ASP.NET MVC uses *anti-forgery tokens*, also called request verification tokens.</span></span> <span data-ttu-id="7207f-300">A ideia é que o servidor coloca um token gerado aleatoriamente em uma página da web.</span><span class="sxs-lookup"><span data-stu-id="7207f-300">The idea is that the server puts a randomly generated token into a web page.</span></span> <span data-ttu-id="7207f-301">Quando o cliente envia dados para o servidor, esse valor deve incluir na mensagem de solicitação.</span><span class="sxs-lookup"><span data-stu-id="7207f-301">When the client submits data to the server, it must include this value in the request message.</span></span>

<span data-ttu-id="7207f-302">Tokens antifalsificação funciona porque a página mal-intencionado não é possível ler os tokens do usuário, devido às diretivas de mesma origem.</span><span class="sxs-lookup"><span data-stu-id="7207f-302">Anti-forgery tokens work because the malicious page cannot read the user's tokens, due to same-origin policies.</span></span> <span data-ttu-id="7207f-303">(Políticas de mesma origem impedir que os documentos hospedados em dois locais diferentes de acessar o conteúdo do outro.)</span><span class="sxs-lookup"><span data-stu-id="7207f-303">(Same-origin policies prevent documents hosted on two different sites from accessing each other's content.)</span></span>

<span data-ttu-id="7207f-304">ASP.NET MVC fornece suporte interno para tokens antifalsificação, por meio de [AntiForgery](https://msdn.microsoft.com/en-us/library/system.web.helpers.antiforgery.aspx) classe e o [[ValidateAntiForgeryToken]](https://msdn.microsoft.com/en-us/library/system.web.mvc.validateantiforgerytokenattribute.aspx) atributo.</span><span class="sxs-lookup"><span data-stu-id="7207f-304">ASP.NET MVC provides built-in support for anti-forgery tokens, through the [AntiForgery](https://msdn.microsoft.com/en-us/library/system.web.helpers.antiforgery.aspx) class and the [[ValidateAntiForgeryToken]](https://msdn.microsoft.com/en-us/library/system.web.mvc.validateantiforgerytokenattribute.aspx) attribute.</span></span> <span data-ttu-id="7207f-305">No momento, essa funcionalidade não é interno ao API da Web.</span><span class="sxs-lookup"><span data-stu-id="7207f-305">Currently, this functionality is not built into Web API.</span></span> <span data-ttu-id="7207f-306">No entanto, o modelo SPA inclui uma implementação personalizada de API da Web.</span><span class="sxs-lookup"><span data-stu-id="7207f-306">However, the SPA template includes a custom implementation for Web API.</span></span> <span data-ttu-id="7207f-307">Esse código é definido no `ValidateHttpAntiForgeryTokenAttribute` classe, que está localizado na pasta de filtros da solução.</span><span class="sxs-lookup"><span data-stu-id="7207f-307">This code is defined in the `ValidateHttpAntiForgeryTokenAttribute` class, which is located in the Filters folder of the solution.</span></span> <span data-ttu-id="7207f-308">Para saber mais sobre anti-CSRF na API da Web, consulte [ataques impedindo intersite solicitações forjadas (CSRF)](../../../web-api/overview/security/preventing-cross-site-request-forgery-csrf-attacks.md).</span><span class="sxs-lookup"><span data-stu-id="7207f-308">To learn more about anti-CSRF in Web API, see [Preventing Cross-Site Request Forgery (CSRF) Attacks](../../../web-api/overview/security/preventing-cross-site-request-forgery-csrf-attacks.md).</span></span>

## <a name="conclusion"></a><span data-ttu-id="7207f-309">Conclusão</span><span class="sxs-lookup"><span data-stu-id="7207f-309">Conclusion</span></span>

<span data-ttu-id="7207f-310">O modelo do SPA foi projetado para começar a escrever rapidamente aplicativos web modernos e interativos.</span><span class="sxs-lookup"><span data-stu-id="7207f-310">The SPA template is designed to get you started quickly writing modern, interactive web applications.</span></span> <span data-ttu-id="7207f-311">Ele usa a biblioteca de Knockout. js para separar a apresentação (como marcação HTML) da lógica de dados e aplicativos.</span><span class="sxs-lookup"><span data-stu-id="7207f-311">It uses the Knockout.js library to separate presentation (HTML markup) from the data and application logic.</span></span> <span data-ttu-id="7207f-312">Mas Knockout não é a biblioteca JavaScript somente que você pode usar para criar um SPA.</span><span class="sxs-lookup"><span data-stu-id="7207f-312">But Knockout is not the only JavaScript library you can use to create a SPA.</span></span> <span data-ttu-id="7207f-313">Se você quiser explorar algumas outras opções, examine o [modelos criados pela comunidade SPA](../templates/index.md).</span><span class="sxs-lookup"><span data-stu-id="7207f-313">If you want to explore some other options, take a look at the [community-created SPA templates](../templates/index.md).</span></span>
